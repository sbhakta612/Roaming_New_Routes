(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))w(T);new MutationObserver(T=>{for(const P of T)if(P.type==="childList")for(const s of P.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&w(s)}).observe(document,{childList:!0,subtree:!0});function g(T){const P={};return T.integrity&&(P.integrity=T.integrity),T.referrerPolicy&&(P.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?P.credentials="include":T.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function w(T){if(T.ep)return;T.ep=!0;const P=g(T);fetch(T.href,P)}})();function yc(u,f){const g=Object.create(null),w=u.split(",");for(let T=0;T<w.length;T++)g[w[T]]=!0;return f?T=>!!g[T.toLowerCase()]:T=>!!g[T]}const Ur={},Ss=[],wo=()=>{},dm=()=>!1,mm=/^on[^a-z]/,au=u=>mm.test(u),gc=u=>u.startsWith("onUpdate:"),Pn=Object.assign,_c=(u,f)=>{const g=u.indexOf(f);g>-1&&u.splice(g,1)},ym=Object.prototype.hasOwnProperty,ar=(u,f)=>ym.call(u,f),Pt=Array.isArray,Ts=u=>su(u)==="[object Map]",Fh=u=>su(u)==="[object Set]",Vt=u=>typeof u=="function",zn=u=>typeof u=="string",vc=u=>typeof u=="symbol",Vr=u=>u!==null&&typeof u=="object",Uh=u=>Vr(u)&&Vt(u.then)&&Vt(u.catch),Vh=Object.prototype.toString,su=u=>Vh.call(u),gm=u=>su(u).slice(8,-1),Nh=u=>su(u)==="[object Object]",xc=u=>zn(u)&&u!=="NaN"&&u[0]!=="-"&&""+parseInt(u,10)===u,Wl=yc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lu=u=>{const f=Object.create(null);return g=>f[g]||(f[g]=u(g))},_m=/-(\w)/g,Zo=lu(u=>u.replace(_m,(f,g)=>g?g.toUpperCase():"")),vm=/\B([A-Z])/g,Bs=lu(u=>u.replace(vm,"-$1").toLowerCase()),uu=lu(u=>u.charAt(0).toUpperCase()+u.slice(1)),Gu=lu(u=>u?`on${uu(u)}`:""),ml=(u,f)=>!Object.is(u,f),Xu=(u,f)=>{for(let g=0;g<u.length;g++)u[g](f)},eu=(u,f,g)=>{Object.defineProperty(u,f,{configurable:!0,enumerable:!1,value:g})},xm=u=>{const f=parseFloat(u);return isNaN(f)?u:f};let Zp;const ec=()=>Zp||(Zp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bc(u){if(Pt(u)){const f={};for(let g=0;g<u.length;g++){const w=u[g],T=zn(w)?Sm(w):bc(w);if(T)for(const P in T)f[P]=T[P]}return f}else{if(zn(u))return u;if(Vr(u))return u}}const bm=/;(?![^(]*\))/g,wm=/:([^]+)/,Em=/\/\*[^]*?\*\//g;function Sm(u){const f={};return u.replace(Em,"").split(bm).forEach(g=>{if(g){const w=g.split(wm);w.length>1&&(f[w[0].trim()]=w[1].trim())}}),f}function wc(u){let f="";if(zn(u))f=u;else if(Pt(u))for(let g=0;g<u.length;g++){const w=wc(u[g]);w&&(f+=w+" ")}else if(Vr(u))for(const g in u)u[g]&&(f+=g+" ");return f.trim()}const Tm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Am=yc(Tm);function jh(u){return!!u||u===""}const Gp=u=>zn(u)?u:u==null?"":Pt(u)||Vr(u)&&(u.toString===Vh||!Vt(u.toString))?JSON.stringify(u,qh,2):String(u),qh=(u,f)=>f&&f.__v_isRef?qh(u,f.value):Ts(f)?{[`Map(${f.size})`]:[...f.entries()].reduce((g,[w,T])=>(g[`${w} =>`]=T,g),{})}:Fh(f)?{[`Set(${f.size})`]:[...f.values()]}:Vr(f)&&!Pt(f)&&!Nh(f)?String(f):f;let yo;class Im{constructor(f=!1){this.detached=f,this._active=!0,this.effects=[],this.cleanups=[],this.parent=yo,!f&&yo&&(this.index=(yo.scopes||(yo.scopes=[])).push(this)-1)}get active(){return this._active}run(f){if(this._active){const g=yo;try{return yo=this,f()}finally{yo=g}}}on(){yo=this}off(){yo=this.parent}stop(f){if(this._active){let g,w;for(g=0,w=this.effects.length;g<w;g++)this.effects[g].stop();for(g=0,w=this.cleanups.length;g<w;g++)this.cleanups[g]();if(this.scopes)for(g=0,w=this.scopes.length;g<w;g++)this.scopes[g].stop(!0);if(!this.detached&&this.parent&&!f){const T=this.parent.scopes.pop();T&&T!==this&&(this.parent.scopes[this.index]=T,T.index=this.index)}this.parent=void 0,this._active=!1}}}function Cm(u,f=yo){f&&f.active&&f.effects.push(u)}function Pm(){return yo}const Ec=u=>{const f=new Set(u);return f.w=0,f.n=0,f},Zh=u=>(u.w&Ma)>0,Gh=u=>(u.n&Ma)>0,zm=({deps:u})=>{if(u.length)for(let f=0;f<u.length;f++)u[f].w|=Ma},km=u=>{const{deps:f}=u;if(f.length){let g=0;for(let w=0;w<f.length;w++){const T=f[w];Zh(T)&&!Gh(T)?T.delete(u):f[g++]=T,T.w&=~Ma,T.n&=~Ma}f.length=g}},tc=new WeakMap;let ul=0,Ma=1;const rc=30;let _o;const ts=Symbol(""),nc=Symbol("");class Sc{constructor(f,g=null,w){this.fn=f,this.scheduler=g,this.active=!0,this.deps=[],this.parent=void 0,Cm(this,w)}run(){if(!this.active)return this.fn();let f=_o,g=za;for(;f;){if(f===this)return;f=f.parent}try{return this.parent=_o,_o=this,za=!0,Ma=1<<++ul,ul<=rc?zm(this):Xp(this),this.fn()}finally{ul<=rc&&km(this),Ma=1<<--ul,_o=this.parent,za=g,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_o===this?this.deferStop=!0:this.active&&(Xp(this),this.onStop&&this.onStop(),this.active=!1)}}function Xp(u){const{deps:f}=u;if(f.length){for(let g=0;g<f.length;g++)f[g].delete(u);f.length=0}}let za=!0;const Xh=[];function Os(){Xh.push(za),za=!1}function Fs(){const u=Xh.pop();za=u===void 0?!0:u}function Ii(u,f,g){if(za&&_o){let w=tc.get(u);w||tc.set(u,w=new Map);let T=w.get(g);T||w.set(g,T=Ec()),Hh(T)}}function Hh(u,f){let g=!1;ul<=rc?Gh(u)||(u.n|=Ma,g=!Zh(u)):g=!u.has(_o),g&&(u.add(_o),_o.deps.push(u))}function la(u,f,g,w,T,P){const s=tc.get(u);if(!s)return;let G=[];if(f==="clear")G=[...s.values()];else if(g==="length"&&Pt(u)){const k=Number(w);s.forEach((J,$)=>{($==="length"||$>=k)&&G.push(J)})}else switch(g!==void 0&&G.push(s.get(g)),f){case"add":Pt(u)?xc(g)&&G.push(s.get("length")):(G.push(s.get(ts)),Ts(u)&&G.push(s.get(nc)));break;case"delete":Pt(u)||(G.push(s.get(ts)),Ts(u)&&G.push(s.get(nc)));break;case"set":Ts(u)&&G.push(s.get(ts));break}if(G.length===1)G[0]&&ic(G[0]);else{const k=[];for(const J of G)J&&k.push(...J);ic(Ec(k))}}function ic(u,f){const g=Pt(u)?u:[...u];for(const w of g)w.computed&&Hp(w);for(const w of g)w.computed||Hp(w)}function Hp(u,f){(u!==_o||u.allowRecurse)&&(u.scheduler?u.scheduler():u.run())}const Mm=yc("__proto__,__v_isRef,__isVue"),Wh=new Set(Object.getOwnPropertyNames(Symbol).filter(u=>u!=="arguments"&&u!=="caller").map(u=>Symbol[u]).filter(vc)),Lm=Tc(),Rm=Tc(!1,!0),Dm=Tc(!0),Wp=Bm();function Bm(){const u={};return["includes","indexOf","lastIndexOf"].forEach(f=>{u[f]=function(...g){const w=pr(this);for(let P=0,s=this.length;P<s;P++)Ii(w,"get",P+"");const T=w[f](...g);return T===-1||T===!1?w[f](...g.map(pr)):T}}),["push","pop","shift","unshift","splice"].forEach(f=>{u[f]=function(...g){Os();const w=pr(this)[f].apply(this,g);return Fs(),w}}),u}function Om(u){const f=pr(this);return Ii(f,"has",u),f.hasOwnProperty(u)}function Tc(u=!1,f=!1){return function(w,T,P){if(T==="__v_isReactive")return!u;if(T==="__v_isReadonly")return u;if(T==="__v_isShallow")return f;if(T==="__v_raw"&&P===(u?f?Qm:Qh:f?Jh:$h).get(w))return w;const s=Pt(w);if(!u){if(s&&ar(Wp,T))return Reflect.get(Wp,T,P);if(T==="hasOwnProperty")return Om}const G=Reflect.get(w,T,P);return(vc(T)?Wh.has(T):Mm(T))||(u||Ii(w,"get",T),f)?G:Jn(G)?s&&xc(T)?G:G.value:Vr(G)?u?tf(G):pu(G):G}}const Fm=Kh(),Um=Kh(!0);function Kh(u=!1){return function(g,w,T,P){let s=g[w];if(ks(s)&&Jn(s)&&!Jn(T))return!1;if(!u&&(!tu(T)&&!ks(T)&&(s=pr(s),T=pr(T)),!Pt(g)&&Jn(s)&&!Jn(T)))return s.value=T,!0;const G=Pt(g)&&xc(w)?Number(w)<g.length:ar(g,w),k=Reflect.set(g,w,T,P);return g===pr(P)&&(G?ml(T,s)&&la(g,"set",w,T):la(g,"add",w,T)),k}}function Vm(u,f){const g=ar(u,f);u[f];const w=Reflect.deleteProperty(u,f);return w&&g&&la(u,"delete",f,void 0),w}function Nm(u,f){const g=Reflect.has(u,f);return(!vc(f)||!Wh.has(f))&&Ii(u,"has",f),g}function jm(u){return Ii(u,"iterate",Pt(u)?"length":ts),Reflect.ownKeys(u)}const Yh={get:Lm,set:Fm,deleteProperty:Vm,has:Nm,ownKeys:jm},qm={get:Dm,set(u,f){return!0},deleteProperty(u,f){return!0}},Zm=Pn({},Yh,{get:Rm,set:Um}),Ac=u=>u,cu=u=>Reflect.getPrototypeOf(u);function jl(u,f,g=!1,w=!1){u=u.__v_raw;const T=pr(u),P=pr(f);g||(f!==P&&Ii(T,"get",f),Ii(T,"get",P));const{has:s}=cu(T),G=w?Ac:g?Pc:yl;if(s.call(T,f))return G(u.get(f));if(s.call(T,P))return G(u.get(P));u!==T&&u.get(f)}function ql(u,f=!1){const g=this.__v_raw,w=pr(g),T=pr(u);return f||(u!==T&&Ii(w,"has",u),Ii(w,"has",T)),u===T?g.has(u):g.has(u)||g.has(T)}function Zl(u,f=!1){return u=u.__v_raw,!f&&Ii(pr(u),"iterate",ts),Reflect.get(u,"size",u)}function Kp(u){u=pr(u);const f=pr(this);return cu(f).has.call(f,u)||(f.add(u),la(f,"add",u,u)),this}function Yp(u,f){f=pr(f);const g=pr(this),{has:w,get:T}=cu(g);let P=w.call(g,u);P||(u=pr(u),P=w.call(g,u));const s=T.call(g,u);return g.set(u,f),P?ml(f,s)&&la(g,"set",u,f):la(g,"add",u,f),this}function $p(u){const f=pr(this),{has:g,get:w}=cu(f);let T=g.call(f,u);T||(u=pr(u),T=g.call(f,u)),w&&w.call(f,u);const P=f.delete(u);return T&&la(f,"delete",u,void 0),P}function Jp(){const u=pr(this),f=u.size!==0,g=u.clear();return f&&la(u,"clear",void 0,void 0),g}function Gl(u,f){return function(w,T){const P=this,s=P.__v_raw,G=pr(s),k=f?Ac:u?Pc:yl;return!u&&Ii(G,"iterate",ts),s.forEach((J,$)=>w.call(T,k(J),k($),P))}}function Xl(u,f,g){return function(...w){const T=this.__v_raw,P=pr(T),s=Ts(P),G=u==="entries"||u===Symbol.iterator&&s,k=u==="keys"&&s,J=T[u](...w),$=g?Ac:f?Pc:yl;return!f&&Ii(P,"iterate",k?nc:ts),{next(){const{value:oe,done:pe}=J.next();return pe?{value:oe,done:pe}:{value:G?[$(oe[0]),$(oe[1])]:$(oe),done:pe}},[Symbol.iterator](){return this}}}}function Aa(u){return function(...f){return u==="delete"?!1:this}}function Gm(){const u={get(P){return jl(this,P)},get size(){return Zl(this)},has:ql,add:Kp,set:Yp,delete:$p,clear:Jp,forEach:Gl(!1,!1)},f={get(P){return jl(this,P,!1,!0)},get size(){return Zl(this)},has:ql,add:Kp,set:Yp,delete:$p,clear:Jp,forEach:Gl(!1,!0)},g={get(P){return jl(this,P,!0)},get size(){return Zl(this,!0)},has(P){return ql.call(this,P,!0)},add:Aa("add"),set:Aa("set"),delete:Aa("delete"),clear:Aa("clear"),forEach:Gl(!0,!1)},w={get(P){return jl(this,P,!0,!0)},get size(){return Zl(this,!0)},has(P){return ql.call(this,P,!0)},add:Aa("add"),set:Aa("set"),delete:Aa("delete"),clear:Aa("clear"),forEach:Gl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(P=>{u[P]=Xl(P,!1,!1),g[P]=Xl(P,!0,!1),f[P]=Xl(P,!1,!0),w[P]=Xl(P,!0,!0)}),[u,g,f,w]}const[Xm,Hm,Wm,Km]=Gm();function Ic(u,f){const g=f?u?Km:Wm:u?Hm:Xm;return(w,T,P)=>T==="__v_isReactive"?!u:T==="__v_isReadonly"?u:T==="__v_raw"?w:Reflect.get(ar(g,T)&&T in w?g:w,T,P)}const Ym={get:Ic(!1,!1)},$m={get:Ic(!1,!0)},Jm={get:Ic(!0,!1)},$h=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,Qm=new WeakMap;function ey(u){switch(u){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ty(u){return u.__v_skip||!Object.isExtensible(u)?0:ey(gm(u))}function pu(u){return ks(u)?u:Cc(u,!1,Yh,Ym,$h)}function ef(u){return Cc(u,!1,Zm,$m,Jh)}function tf(u){return Cc(u,!0,qm,Jm,Qh)}function Cc(u,f,g,w,T){if(!Vr(u)||u.__v_raw&&!(f&&u.__v_isReactive))return u;const P=T.get(u);if(P)return P;const s=ty(u);if(s===0)return u;const G=new Proxy(u,s===2?w:g);return T.set(u,G),G}function As(u){return ks(u)?As(u.__v_raw):!!(u&&u.__v_isReactive)}function ks(u){return!!(u&&u.__v_isReadonly)}function tu(u){return!!(u&&u.__v_isShallow)}function rf(u){return As(u)||ks(u)}function pr(u){const f=u&&u.__v_raw;return f?pr(f):u}function nf(u){return eu(u,"__v_skip",!0),u}const yl=u=>Vr(u)?pu(u):u,Pc=u=>Vr(u)?tf(u):u;function of(u){za&&_o&&(u=pr(u),Hh(u.dep||(u.dep=Ec())))}function af(u,f){u=pr(u);const g=u.dep;g&&ic(g)}function Jn(u){return!!(u&&u.__v_isRef===!0)}function ry(u){return sf(u,!1)}function ny(u){return sf(u,!0)}function sf(u,f){return Jn(u)?u:new iy(u,f)}class iy{constructor(f,g){this.__v_isShallow=g,this.dep=void 0,this.__v_isRef=!0,this._rawValue=g?f:pr(f),this._value=g?f:yl(f)}get value(){return of(this),this._value}set value(f){const g=this.__v_isShallow||tu(f)||ks(f);f=g?f:pr(f),ml(f,this._rawValue)&&(this._rawValue=f,this._value=g?f:yl(f),af(this))}}function Is(u){return Jn(u)?u.value:u}const oy={get:(u,f,g)=>Is(Reflect.get(u,f,g)),set:(u,f,g,w)=>{const T=u[f];return Jn(T)&&!Jn(g)?(T.value=g,!0):Reflect.set(u,f,g,w)}};function lf(u){return As(u)?u:new Proxy(u,oy)}class ay{constructor(f,g,w,T){this._setter=g,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Sc(f,()=>{this._dirty||(this._dirty=!0,af(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!T,this.__v_isReadonly=w}get value(){const f=pr(this);return of(f),(f._dirty||!f._cacheable)&&(f._dirty=!1,f._value=f.effect.run()),f._value}set value(f){this._setter(f)}}function sy(u,f,g=!1){let w,T;const P=Vt(u);return P?(w=u,T=wo):(w=u.get,T=u.set),new ay(w,T,P||!T,g)}function ka(u,f,g,w){let T;try{T=w?u(...w):u()}catch(P){hu(P,f,g)}return T}function Eo(u,f,g,w){if(Vt(u)){const P=ka(u,f,g,w);return P&&Uh(P)&&P.catch(s=>{hu(s,f,g)}),P}const T=[];for(let P=0;P<u.length;P++)T.push(Eo(u[P],f,g,w));return T}function hu(u,f,g,w=!0){const T=f?f.vnode:null;if(f){let P=f.parent;const s=f.proxy,G=g;for(;P;){const J=P.ec;if(J){for(let $=0;$<J.length;$++)if(J[$](u,s,G)===!1)return}P=P.parent}const k=f.appContext.config.errorHandler;if(k){ka(k,null,10,[u,s,G]);return}}ly(u,g,T,w)}function ly(u,f,g,w=!0){console.error(u)}let gl=!1,oc=!1;const $n=[];let qo=0;const Cs=[];let oa=null,Qa=0;const uf=Promise.resolve();let zc=null;function cf(u){const f=zc||uf;return u?f.then(this?u.bind(this):u):f}function uy(u){let f=qo+1,g=$n.length;for(;f<g;){const w=f+g>>>1;_l($n[w])<u?f=w+1:g=w}return f}function kc(u){(!$n.length||!$n.includes(u,gl&&u.allowRecurse?qo+1:qo))&&(u.id==null?$n.push(u):$n.splice(uy(u.id),0,u),pf())}function pf(){!gl&&!oc&&(oc=!0,zc=uf.then(ff))}function cy(u){const f=$n.indexOf(u);f>qo&&$n.splice(f,1)}function py(u){Pt(u)?Cs.push(...u):(!oa||!oa.includes(u,u.allowRecurse?Qa+1:Qa))&&Cs.push(u),pf()}function Qp(u,f=gl?qo+1:0){for(;f<$n.length;f++){const g=$n[f];g&&g.pre&&($n.splice(f,1),f--,g())}}function hf(u){if(Cs.length){const f=[...new Set(Cs)];if(Cs.length=0,oa){oa.push(...f);return}for(oa=f,oa.sort((g,w)=>_l(g)-_l(w)),Qa=0;Qa<oa.length;Qa++)oa[Qa]();oa=null,Qa=0}}const _l=u=>u.id==null?1/0:u.id,hy=(u,f)=>{const g=_l(u)-_l(f);if(g===0){if(u.pre&&!f.pre)return-1;if(f.pre&&!u.pre)return 1}return g};function ff(u){oc=!1,gl=!0,$n.sort(hy);const f=wo;try{for(qo=0;qo<$n.length;qo++){const g=$n[qo];g&&g.active!==!1&&ka(g,null,14)}}finally{qo=0,$n.length=0,hf(),gl=!1,zc=null,($n.length||Cs.length)&&ff()}}function fy(u,f,...g){if(u.isUnmounted)return;const w=u.vnode.props||Ur;let T=g;const P=f.startsWith("update:"),s=P&&f.slice(7);if(s&&s in w){const $=`${s==="modelValue"?"model":s}Modifiers`,{number:oe,trim:pe}=w[$]||Ur;pe&&(T=g.map(Me=>zn(Me)?Me.trim():Me)),oe&&(T=g.map(xm))}let G,k=w[G=Gu(f)]||w[G=Gu(Zo(f))];!k&&P&&(k=w[G=Gu(Bs(f))]),k&&Eo(k,u,6,T);const J=w[G+"Once"];if(J){if(!u.emitted)u.emitted={};else if(u.emitted[G])return;u.emitted[G]=!0,Eo(J,u,6,T)}}function df(u,f,g=!1){const w=f.emitsCache,T=w.get(u);if(T!==void 0)return T;const P=u.emits;let s={},G=!1;if(!Vt(u)){const k=J=>{const $=df(J,f,!0);$&&(G=!0,Pn(s,$))};!g&&f.mixins.length&&f.mixins.forEach(k),u.extends&&k(u.extends),u.mixins&&u.mixins.forEach(k)}return!P&&!G?(Vr(u)&&w.set(u,null),null):(Pt(P)?P.forEach(k=>s[k]=null):Pn(s,P),Vr(u)&&w.set(u,s),s)}function fu(u,f){return!u||!au(f)?!1:(f=f.slice(2).replace(/Once$/,""),ar(u,f[0].toLowerCase()+f.slice(1))||ar(u,Bs(f))||ar(u,f))}let xo=null,du=null;function ru(u){const f=xo;return xo=u,du=u&&u.type.__scopeId||null,f}function Mc(u){du=u}function Lc(){du=null}function aa(u,f=xo,g){if(!f||u._n)return u;const w=(...T)=>{w._d&&ch(-1);const P=ru(f);let s;try{s=u(...T)}finally{ru(P),w._d&&ch(1)}return s};return w._n=!0,w._c=!0,w._d=!0,w}function Hu(u){const{type:f,vnode:g,proxy:w,withProxy:T,props:P,propsOptions:[s],slots:G,attrs:k,emit:J,render:$,renderCache:oe,data:pe,setupState:Me,ctx:rt,inheritAttrs:$e}=u;let gt,je;const yt=ru(u);try{if(g.shapeFlag&4){const ft=T||w;gt=jo($.call(ft,ft,oe,P,Me,pe,rt)),je=k}else{const ft=f;gt=jo(ft.length>1?ft(P,{attrs:k,slots:G,emit:J}):ft(P,null)),je=f.props?k:dy(k)}}catch(ft){hl.length=0,hu(ft,u,1),gt=yr(vl)}let Mt=gt;if(je&&$e!==!1){const ft=Object.keys(je),{shapeFlag:fr}=Mt;ft.length&&fr&7&&(s&&ft.some(gc)&&(je=my(je,s)),Mt=Ms(Mt,je))}return g.dirs&&(Mt=Ms(Mt),Mt.dirs=Mt.dirs?Mt.dirs.concat(g.dirs):g.dirs),g.transition&&(Mt.transition=g.transition),gt=Mt,ru(yt),gt}const dy=u=>{let f;for(const g in u)(g==="class"||g==="style"||au(g))&&((f||(f={}))[g]=u[g]);return f},my=(u,f)=>{const g={};for(const w in u)(!gc(w)||!(w.slice(9)in f))&&(g[w]=u[w]);return g};function yy(u,f,g){const{props:w,children:T,component:P}=u,{props:s,children:G,patchFlag:k}=f,J=P.emitsOptions;if(f.dirs||f.transition)return!0;if(g&&k>=0){if(k&1024)return!0;if(k&16)return w?eh(w,s,J):!!s;if(k&8){const $=f.dynamicProps;for(let oe=0;oe<$.length;oe++){const pe=$[oe];if(s[pe]!==w[pe]&&!fu(J,pe))return!0}}}else return(T||G)&&(!G||!G.$stable)?!0:w===s?!1:w?s?eh(w,s,J):!0:!!s;return!1}function eh(u,f,g){const w=Object.keys(f);if(w.length!==Object.keys(u).length)return!0;for(let T=0;T<w.length;T++){const P=w[T];if(f[P]!==u[P]&&!fu(g,P))return!0}return!1}function gy({vnode:u,parent:f},g){for(;f&&f.subTree===u;)(u=f.vnode).el=g,f=f.parent}const _y=u=>u.__isSuspense;function vy(u,f){f&&f.pendingBranch?Pt(u)?f.effects.push(...u):f.effects.push(u):py(u)}const Hl={};function Kl(u,f,g){return mf(u,f,g)}function mf(u,f,{immediate:g,deep:w,flush:T,onTrack:P,onTrigger:s}=Ur){var G;const k=Pm()===((G=qn)==null?void 0:G.scope)?qn:null;let J,$=!1,oe=!1;if(Jn(u)?(J=()=>u.value,$=tu(u)):As(u)?(J=()=>u,w=!0):Pt(u)?(oe=!0,$=u.some(ft=>As(ft)||tu(ft)),J=()=>u.map(ft=>{if(Jn(ft))return ft.value;if(As(ft))return Es(ft);if(Vt(ft))return ka(ft,k,2)})):Vt(u)?f?J=()=>ka(u,k,2):J=()=>{if(!(k&&k.isUnmounted))return pe&&pe(),Eo(u,k,3,[Me])}:J=wo,f&&w){const ft=J;J=()=>Es(ft())}let pe,Me=ft=>{pe=yt.onStop=()=>{ka(ft,k,4)}},rt;if(bl)if(Me=wo,f?g&&Eo(f,k,3,[J(),oe?[]:void 0,Me]):J(),T==="sync"){const ft=dg();rt=ft.__watcherHandles||(ft.__watcherHandles=[])}else return wo;let $e=oe?new Array(u.length).fill(Hl):Hl;const gt=()=>{if(yt.active)if(f){const ft=yt.run();(w||$||(oe?ft.some((fr,Mr)=>ml(fr,$e[Mr])):ml(ft,$e)))&&(pe&&pe(),Eo(f,k,3,[ft,$e===Hl?void 0:oe&&$e[0]===Hl?[]:$e,Me]),$e=ft)}else yt.run()};gt.allowRecurse=!!f;let je;T==="sync"?je=gt:T==="post"?je=()=>Ai(gt,k&&k.suspense):(gt.pre=!0,k&&(gt.id=k.uid),je=()=>kc(gt));const yt=new Sc(J,je);f?g?gt():$e=yt.run():T==="post"?Ai(yt.run.bind(yt),k&&k.suspense):yt.run();const Mt=()=>{yt.stop(),k&&k.scope&&_c(k.scope.effects,yt)};return rt&&rt.push(Mt),Mt}function xy(u,f,g){const w=this.proxy,T=zn(u)?u.includes(".")?yf(w,u):()=>w[u]:u.bind(w,w);let P;Vt(f)?P=f:(P=f.handler,g=f);const s=qn;Ls(this);const G=mf(T,P.bind(w),g);return s?Ls(s):rs(),G}function yf(u,f){const g=f.split(".");return()=>{let w=u;for(let T=0;T<g.length&&w;T++)w=w[g[T]];return w}}function Es(u,f){if(!Vr(u)||u.__v_skip||(f=f||new Set,f.has(u)))return u;if(f.add(u),Jn(u))Es(u.value,f);else if(Pt(u))for(let g=0;g<u.length;g++)Es(u[g],f);else if(Fh(u)||Ts(u))u.forEach(g=>{Es(g,f)});else if(Nh(u))for(const g in u)Es(u[g],f);return u}function Ya(u,f,g,w){const T=u.dirs,P=f&&f.dirs;for(let s=0;s<T.length;s++){const G=T[s];P&&(G.oldValue=P[s].value);let k=G.dir[w];k&&(Os(),Eo(k,g,8,[u.el,G,u,f]),Fs())}}function gf(u,f){return Vt(u)?(()=>Pn({name:u.name},f,{setup:u}))():u}const Yl=u=>!!u.type.__asyncLoader,_f=u=>u.type.__isKeepAlive;function by(u,f){vf(u,"a",f)}function wy(u,f){vf(u,"da",f)}function vf(u,f,g=qn){const w=u.__wdc||(u.__wdc=()=>{let T=g;for(;T;){if(T.isDeactivated)return;T=T.parent}return u()});if(mu(f,w,g),g){let T=g.parent;for(;T&&T.parent;)_f(T.parent.vnode)&&Ey(w,f,g,T),T=T.parent}}function Ey(u,f,g,w){const T=mu(f,u,w,!0);xf(()=>{_c(w[f],T)},g)}function mu(u,f,g=qn,w=!1){if(g){const T=g[u]||(g[u]=[]),P=f.__weh||(f.__weh=(...s)=>{if(g.isUnmounted)return;Os(),Ls(g);const G=Eo(f,g,u,s);return rs(),Fs(),G});return w?T.unshift(P):T.push(P),P}}const ua=u=>(f,g=qn)=>(!bl||u==="sp")&&mu(u,(...w)=>f(...w),g),Sy=ua("bm"),Ty=ua("m"),Ay=ua("bu"),Iy=ua("u"),Cy=ua("bum"),xf=ua("um"),Py=ua("sp"),zy=ua("rtg"),ky=ua("rtc");function My(u,f=qn){mu("ec",u,f)}const bf="components";function Ps(u,f){return Ry(bf,u,!0,f)||u}const Ly=Symbol.for("v-ndc");function Ry(u,f,g=!0,w=!1){const T=xo||qn;if(T){const P=T.type;if(u===bf){const G=pg(P,!1);if(G&&(G===f||G===Zo(f)||G===uu(Zo(f))))return P}const s=th(T[u]||P[u],f)||th(T.appContext[u],f);return!s&&w?P:s}}function th(u,f){return u&&(u[f]||u[Zo(f)]||u[uu(Zo(f))])}const ac=u=>u?kf(u)?Fc(u)||u.proxy:ac(u.parent):null,pl=Pn(Object.create(null),{$:u=>u,$el:u=>u.vnode.el,$data:u=>u.data,$props:u=>u.props,$attrs:u=>u.attrs,$slots:u=>u.slots,$refs:u=>u.refs,$parent:u=>ac(u.parent),$root:u=>ac(u.root),$emit:u=>u.emit,$options:u=>Rc(u),$forceUpdate:u=>u.f||(u.f=()=>kc(u.update)),$nextTick:u=>u.n||(u.n=cf.bind(u.proxy)),$watch:u=>xy.bind(u)}),Wu=(u,f)=>u!==Ur&&!u.__isScriptSetup&&ar(u,f),Dy={get({_:u},f){const{ctx:g,setupState:w,data:T,props:P,accessCache:s,type:G,appContext:k}=u;let J;if(f[0]!=="$"){const Me=s[f];if(Me!==void 0)switch(Me){case 1:return w[f];case 2:return T[f];case 4:return g[f];case 3:return P[f]}else{if(Wu(w,f))return s[f]=1,w[f];if(T!==Ur&&ar(T,f))return s[f]=2,T[f];if((J=u.propsOptions[0])&&ar(J,f))return s[f]=3,P[f];if(g!==Ur&&ar(g,f))return s[f]=4,g[f];sc&&(s[f]=0)}}const $=pl[f];let oe,pe;if($)return f==="$attrs"&&Ii(u,"get",f),$(u);if((oe=G.__cssModules)&&(oe=oe[f]))return oe;if(g!==Ur&&ar(g,f))return s[f]=4,g[f];if(pe=k.config.globalProperties,ar(pe,f))return pe[f]},set({_:u},f,g){const{data:w,setupState:T,ctx:P}=u;return Wu(T,f)?(T[f]=g,!0):w!==Ur&&ar(w,f)?(w[f]=g,!0):ar(u.props,f)||f[0]==="$"&&f.slice(1)in u?!1:(P[f]=g,!0)},has({_:{data:u,setupState:f,accessCache:g,ctx:w,appContext:T,propsOptions:P}},s){let G;return!!g[s]||u!==Ur&&ar(u,s)||Wu(f,s)||(G=P[0])&&ar(G,s)||ar(w,s)||ar(pl,s)||ar(T.config.globalProperties,s)},defineProperty(u,f,g){return g.get!=null?u._.accessCache[f]=0:ar(g,"value")&&this.set(u,f,g.value,null),Reflect.defineProperty(u,f,g)}};function rh(u){return Pt(u)?u.reduce((f,g)=>(f[g]=null,f),{}):u}let sc=!0;function By(u){const f=Rc(u),g=u.proxy,w=u.ctx;sc=!1,f.beforeCreate&&nh(f.beforeCreate,u,"bc");const{data:T,computed:P,methods:s,watch:G,provide:k,inject:J,created:$,beforeMount:oe,mounted:pe,beforeUpdate:Me,updated:rt,activated:$e,deactivated:gt,beforeDestroy:je,beforeUnmount:yt,destroyed:Mt,unmounted:ft,render:fr,renderTracked:Mr,renderTriggered:Pr,errorCaptured:en,serverPrefetch:Ci,expose:Lr,inheritAttrs:En,components:Nr,directives:dr,filters:Qn}=f;if(J&&Oy(J,w,null),s)for(const qt in s){const Zt=s[qt];Vt(Zt)&&(w[qt]=Zt.bind(g))}if(T){const qt=T.call(g,g);Vr(qt)&&(u.data=pu(qt))}if(sc=!0,P)for(const qt in P){const Zt=P[qt],jr=Vt(Zt)?Zt.bind(g,g):Vt(Zt.get)?Zt.get.bind(g,g):wo,Tr=!Vt(Zt)&&Vt(Zt.set)?Zt.set.bind(g):wo,qr=vo({get:jr,set:Tr});Object.defineProperty(w,qt,{enumerable:!0,configurable:!0,get:()=>qr.value,set:Wt=>qr.value=Wt})}if(G)for(const qt in G)wf(G[qt],w,g,qt);if(k){const qt=Vt(k)?k.call(g):k;Reflect.ownKeys(qt).forEach(Zt=>{$l(Zt,qt[Zt])})}$&&nh($,u,"c");function hr(qt,Zt){Pt(Zt)?Zt.forEach(jr=>qt(jr.bind(g))):Zt&&qt(Zt.bind(g))}if(hr(Sy,oe),hr(Ty,pe),hr(Ay,Me),hr(Iy,rt),hr(by,$e),hr(wy,gt),hr(My,en),hr(ky,Mr),hr(zy,Pr),hr(Cy,yt),hr(xf,ft),hr(Py,Ci),Pt(Lr))if(Lr.length){const qt=u.exposed||(u.exposed={});Lr.forEach(Zt=>{Object.defineProperty(qt,Zt,{get:()=>g[Zt],set:jr=>g[Zt]=jr})})}else u.exposed||(u.exposed={});fr&&u.render===wo&&(u.render=fr),En!=null&&(u.inheritAttrs=En),Nr&&(u.components=Nr),dr&&(u.directives=dr)}function Oy(u,f,g=wo){Pt(u)&&(u=lc(u));for(const w in u){const T=u[w];let P;Vr(T)?"default"in T?P=sa(T.from||w,T.default,!0):P=sa(T.from||w):P=sa(T),Jn(P)?Object.defineProperty(f,w,{enumerable:!0,configurable:!0,get:()=>P.value,set:s=>P.value=s}):f[w]=P}}function nh(u,f,g){Eo(Pt(u)?u.map(w=>w.bind(f.proxy)):u.bind(f.proxy),f,g)}function wf(u,f,g,w){const T=w.includes(".")?yf(g,w):()=>g[w];if(zn(u)){const P=f[u];Vt(P)&&Kl(T,P)}else if(Vt(u))Kl(T,u.bind(g));else if(Vr(u))if(Pt(u))u.forEach(P=>wf(P,f,g,w));else{const P=Vt(u.handler)?u.handler.bind(g):f[u.handler];Vt(P)&&Kl(T,P,u)}}function Rc(u){const f=u.type,{mixins:g,extends:w}=f,{mixins:T,optionsCache:P,config:{optionMergeStrategies:s}}=u.appContext,G=P.get(f);let k;return G?k=G:!T.length&&!g&&!w?k=f:(k={},T.length&&T.forEach(J=>nu(k,J,s,!0)),nu(k,f,s)),Vr(f)&&P.set(f,k),k}function nu(u,f,g,w=!1){const{mixins:T,extends:P}=f;P&&nu(u,P,g,!0),T&&T.forEach(s=>nu(u,s,g,!0));for(const s in f)if(!(w&&s==="expose")){const G=Fy[s]||g&&g[s];u[s]=G?G(u[s],f[s]):f[s]}return u}const Fy={data:ih,props:oh,emits:oh,methods:cl,computed:cl,beforeCreate:fi,created:fi,beforeMount:fi,mounted:fi,beforeUpdate:fi,updated:fi,beforeDestroy:fi,beforeUnmount:fi,destroyed:fi,unmounted:fi,activated:fi,deactivated:fi,errorCaptured:fi,serverPrefetch:fi,components:cl,directives:cl,watch:Vy,provide:ih,inject:Uy};function ih(u,f){return f?u?function(){return Pn(Vt(u)?u.call(this,this):u,Vt(f)?f.call(this,this):f)}:f:u}function Uy(u,f){return cl(lc(u),lc(f))}function lc(u){if(Pt(u)){const f={};for(let g=0;g<u.length;g++)f[u[g]]=u[g];return f}return u}function fi(u,f){return u?[...new Set([].concat(u,f))]:f}function cl(u,f){return u?Pn(Object.create(null),u,f):f}function oh(u,f){return u?Pt(u)&&Pt(f)?[...new Set([...u,...f])]:Pn(Object.create(null),rh(u),rh(f??{})):f}function Vy(u,f){if(!u)return f;if(!f)return u;const g=Pn(Object.create(null),u);for(const w in f)g[w]=fi(u[w],f[w]);return g}function Ef(){return{app:null,config:{isNativeTag:dm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ny=0;function jy(u,f){return function(w,T=null){Vt(w)||(w=Pn({},w)),T!=null&&!Vr(T)&&(T=null);const P=Ef(),s=new Set;let G=!1;const k=P.app={_uid:Ny++,_component:w,_props:T,_container:null,_context:P,_instance:null,version:mg,get config(){return P.config},set config(J){},use(J,...$){return s.has(J)||(J&&Vt(J.install)?(s.add(J),J.install(k,...$)):Vt(J)&&(s.add(J),J(k,...$))),k},mixin(J){return P.mixins.includes(J)||P.mixins.push(J),k},component(J,$){return $?(P.components[J]=$,k):P.components[J]},directive(J,$){return $?(P.directives[J]=$,k):P.directives[J]},mount(J,$,oe){if(!G){const pe=yr(w,T);return pe.appContext=P,$&&f?f(pe,J):u(pe,J,oe),G=!0,k._container=J,J.__vue_app__=k,Fc(pe.component)||pe.component.proxy}},unmount(){G&&(u(null,k._container),delete k._container.__vue_app__)},provide(J,$){return P.provides[J]=$,k},runWithContext(J){iu=k;try{return J()}finally{iu=null}}};return k}}let iu=null;function $l(u,f){if(qn){let g=qn.provides;const w=qn.parent&&qn.parent.provides;w===g&&(g=qn.provides=Object.create(w)),g[u]=f}}function sa(u,f,g=!1){const w=qn||xo;if(w||iu){const T=w?w.parent==null?w.vnode.appContext&&w.vnode.appContext.provides:w.parent.provides:iu._context.provides;if(T&&u in T)return T[u];if(arguments.length>1)return g&&Vt(f)?f.call(w&&w.proxy):f}}function qy(u,f,g,w=!1){const T={},P={};eu(P,gu,1),u.propsDefaults=Object.create(null),Sf(u,f,T,P);for(const s in u.propsOptions[0])s in T||(T[s]=void 0);g?u.props=w?T:ef(T):u.type.props?u.props=T:u.props=P,u.attrs=P}function Zy(u,f,g,w){const{props:T,attrs:P,vnode:{patchFlag:s}}=u,G=pr(T),[k]=u.propsOptions;let J=!1;if((w||s>0)&&!(s&16)){if(s&8){const $=u.vnode.dynamicProps;for(let oe=0;oe<$.length;oe++){let pe=$[oe];if(fu(u.emitsOptions,pe))continue;const Me=f[pe];if(k)if(ar(P,pe))Me!==P[pe]&&(P[pe]=Me,J=!0);else{const rt=Zo(pe);T[rt]=uc(k,G,rt,Me,u,!1)}else Me!==P[pe]&&(P[pe]=Me,J=!0)}}}else{Sf(u,f,T,P)&&(J=!0);let $;for(const oe in G)(!f||!ar(f,oe)&&(($=Bs(oe))===oe||!ar(f,$)))&&(k?g&&(g[oe]!==void 0||g[$]!==void 0)&&(T[oe]=uc(k,G,oe,void 0,u,!0)):delete T[oe]);if(P!==G)for(const oe in P)(!f||!ar(f,oe))&&(delete P[oe],J=!0)}J&&la(u,"set","$attrs")}function Sf(u,f,g,w){const[T,P]=u.propsOptions;let s=!1,G;if(f)for(let k in f){if(Wl(k))continue;const J=f[k];let $;T&&ar(T,$=Zo(k))?!P||!P.includes($)?g[$]=J:(G||(G={}))[$]=J:fu(u.emitsOptions,k)||(!(k in w)||J!==w[k])&&(w[k]=J,s=!0)}if(P){const k=pr(g),J=G||Ur;for(let $=0;$<P.length;$++){const oe=P[$];g[oe]=uc(T,k,oe,J[oe],u,!ar(J,oe))}}return s}function uc(u,f,g,w,T,P){const s=u[g];if(s!=null){const G=ar(s,"default");if(G&&w===void 0){const k=s.default;if(s.type!==Function&&!s.skipFactory&&Vt(k)){const{propsDefaults:J}=T;g in J?w=J[g]:(Ls(T),w=J[g]=k.call(null,f),rs())}else w=k}s[0]&&(P&&!G?w=!1:s[1]&&(w===""||w===Bs(g))&&(w=!0))}return w}function Tf(u,f,g=!1){const w=f.propsCache,T=w.get(u);if(T)return T;const P=u.props,s={},G=[];let k=!1;if(!Vt(u)){const $=oe=>{k=!0;const[pe,Me]=Tf(oe,f,!0);Pn(s,pe),Me&&G.push(...Me)};!g&&f.mixins.length&&f.mixins.forEach($),u.extends&&$(u.extends),u.mixins&&u.mixins.forEach($)}if(!P&&!k)return Vr(u)&&w.set(u,Ss),Ss;if(Pt(P))for(let $=0;$<P.length;$++){const oe=Zo(P[$]);ah(oe)&&(s[oe]=Ur)}else if(P)for(const $ in P){const oe=Zo($);if(ah(oe)){const pe=P[$],Me=s[oe]=Pt(pe)||Vt(pe)?{type:pe}:Pn({},pe);if(Me){const rt=uh(Boolean,Me.type),$e=uh(String,Me.type);Me[0]=rt>-1,Me[1]=$e<0||rt<$e,(rt>-1||ar(Me,"default"))&&G.push(oe)}}}const J=[s,G];return Vr(u)&&w.set(u,J),J}function ah(u){return u[0]!=="$"}function sh(u){const f=u&&u.toString().match(/^\s*(function|class) (\w+)/);return f?f[2]:u===null?"null":""}function lh(u,f){return sh(u)===sh(f)}function uh(u,f){return Pt(f)?f.findIndex(g=>lh(g,u)):Vt(f)&&lh(f,u)?0:-1}const Af=u=>u[0]==="_"||u==="$stable",Dc=u=>Pt(u)?u.map(jo):[jo(u)],Gy=(u,f,g)=>{if(f._n)return f;const w=aa((...T)=>Dc(f(...T)),g);return w._c=!1,w},If=(u,f,g)=>{const w=u._ctx;for(const T in u){if(Af(T))continue;const P=u[T];if(Vt(P))f[T]=Gy(T,P,w);else if(P!=null){const s=Dc(P);f[T]=()=>s}}},Cf=(u,f)=>{const g=Dc(f);u.slots.default=()=>g},Xy=(u,f)=>{if(u.vnode.shapeFlag&32){const g=f._;g?(u.slots=pr(f),eu(f,"_",g)):If(f,u.slots={})}else u.slots={},f&&Cf(u,f);eu(u.slots,gu,1)},Hy=(u,f,g)=>{const{vnode:w,slots:T}=u;let P=!0,s=Ur;if(w.shapeFlag&32){const G=f._;G?g&&G===1?P=!1:(Pn(T,f),!g&&G===1&&delete T._):(P=!f.$stable,If(f,T)),s=f}else f&&(Cf(u,f),s={default:1});if(P)for(const G in T)!Af(G)&&!(G in s)&&delete T[G]};function cc(u,f,g,w,T=!1){if(Pt(u)){u.forEach((pe,Me)=>cc(pe,f&&(Pt(f)?f[Me]:f),g,w,T));return}if(Yl(w)&&!T)return;const P=w.shapeFlag&4?Fc(w.component)||w.component.proxy:w.el,s=T?null:P,{i:G,r:k}=u,J=f&&f.r,$=G.refs===Ur?G.refs={}:G.refs,oe=G.setupState;if(J!=null&&J!==k&&(zn(J)?($[J]=null,ar(oe,J)&&(oe[J]=null)):Jn(J)&&(J.value=null)),Vt(k))ka(k,G,12,[s,$]);else{const pe=zn(k),Me=Jn(k);if(pe||Me){const rt=()=>{if(u.f){const $e=pe?ar(oe,k)?oe[k]:$[k]:k.value;T?Pt($e)&&_c($e,P):Pt($e)?$e.includes(P)||$e.push(P):pe?($[k]=[P],ar(oe,k)&&(oe[k]=$[k])):(k.value=[P],u.k&&($[u.k]=k.value))}else pe?($[k]=s,ar(oe,k)&&(oe[k]=s)):Me&&(k.value=s,u.k&&($[u.k]=s))};s?(rt.id=-1,Ai(rt,g)):rt()}}}const Ai=vy;function Wy(u){return Ky(u)}function Ky(u,f){const g=ec();g.__VUE__=!0;const{insert:w,remove:T,patchProp:P,createElement:s,createText:G,createComment:k,setText:J,setElementText:$,parentNode:oe,nextSibling:pe,setScopeId:Me=wo,insertStaticContent:rt}=u,$e=(W,Q,se,_e=null,we=null,Ie=null,Ge=!1,Le=null,qe=!!Q.dynamicChildren)=>{if(W===Q)return;W&&!sl(W,Q)&&(_e=Ee(W),Wt(W,we,Ie,!0),W=null),Q.patchFlag===-2&&(qe=!1,Q.dynamicChildren=null);const{type:Ce,ref:ct,shapeFlag:Je}=Q;switch(Ce){case yu:gt(W,Q,se,_e);break;case vl:je(W,Q,se,_e);break;case Jl:W==null&&yt(Q,se,_e,Ge);break;case go:Nr(W,Q,se,_e,we,Ie,Ge,Le,qe);break;default:Je&1?fr(W,Q,se,_e,we,Ie,Ge,Le,qe):Je&6?dr(W,Q,se,_e,we,Ie,Ge,Le,qe):(Je&64||Je&128)&&Ce.process(W,Q,se,_e,we,Ie,Ge,Le,qe,ve)}ct!=null&&we&&cc(ct,W&&W.ref,Ie,Q||W,!Q)},gt=(W,Q,se,_e)=>{if(W==null)w(Q.el=G(Q.children),se,_e);else{const we=Q.el=W.el;Q.children!==W.children&&J(we,Q.children)}},je=(W,Q,se,_e)=>{W==null?w(Q.el=k(Q.children||""),se,_e):Q.el=W.el},yt=(W,Q,se,_e)=>{[W.el,W.anchor]=rt(W.children,Q,se,_e,W.el,W.anchor)},Mt=({el:W,anchor:Q},se,_e)=>{let we;for(;W&&W!==Q;)we=pe(W),w(W,se,_e),W=we;w(Q,se,_e)},ft=({el:W,anchor:Q})=>{let se;for(;W&&W!==Q;)se=pe(W),T(W),W=se;T(Q)},fr=(W,Q,se,_e,we,Ie,Ge,Le,qe)=>{Ge=Ge||Q.type==="svg",W==null?Mr(Q,se,_e,we,Ie,Ge,Le,qe):Ci(W,Q,we,Ie,Ge,Le,qe)},Mr=(W,Q,se,_e,we,Ie,Ge,Le)=>{let qe,Ce;const{type:ct,props:Je,shapeFlag:pt,transition:_t,dirs:zt}=W;if(qe=W.el=s(W.type,Ie,Je&&Je.is,Je),pt&8?$(qe,W.children):pt&16&&en(W.children,qe,null,_e,we,Ie&&ct!=="foreignObject",Ge,Le),zt&&Ya(W,null,_e,"created"),Pr(qe,W,W.scopeId,Ge,_e),Je){for(const Yt in Je)Yt!=="value"&&!Wl(Yt)&&P(qe,Yt,null,Je[Yt],Ie,W.children,_e,we,vr);"value"in Je&&P(qe,"value",null,Je.value),(Ce=Je.onVnodeBeforeMount)&&No(Ce,_e,W)}zt&&Ya(W,null,_e,"beforeMount");const nr=(!we||we&&!we.pendingBranch)&&_t&&!_t.persisted;nr&&_t.beforeEnter(qe),w(qe,Q,se),((Ce=Je&&Je.onVnodeMounted)||nr||zt)&&Ai(()=>{Ce&&No(Ce,_e,W),nr&&_t.enter(qe),zt&&Ya(W,null,_e,"mounted")},we)},Pr=(W,Q,se,_e,we)=>{if(se&&Me(W,se),_e)for(let Ie=0;Ie<_e.length;Ie++)Me(W,_e[Ie]);if(we){let Ie=we.subTree;if(Q===Ie){const Ge=we.vnode;Pr(W,Ge,Ge.scopeId,Ge.slotScopeIds,we.parent)}}},en=(W,Q,se,_e,we,Ie,Ge,Le,qe=0)=>{for(let Ce=qe;Ce<W.length;Ce++){const ct=W[Ce]=Le?Ca(W[Ce]):jo(W[Ce]);$e(null,ct,Q,se,_e,we,Ie,Ge,Le)}},Ci=(W,Q,se,_e,we,Ie,Ge)=>{const Le=Q.el=W.el;let{patchFlag:qe,dynamicChildren:Ce,dirs:ct}=Q;qe|=W.patchFlag&16;const Je=W.props||Ur,pt=Q.props||Ur;let _t;se&&$a(se,!1),(_t=pt.onVnodeBeforeUpdate)&&No(_t,se,Q,W),ct&&Ya(Q,W,se,"beforeUpdate"),se&&$a(se,!0);const zt=we&&Q.type!=="foreignObject";if(Ce?Lr(W.dynamicChildren,Ce,Le,se,_e,zt,Ie):Ge||Zt(W,Q,Le,null,se,_e,zt,Ie,!1),qe>0){if(qe&16)En(Le,Q,Je,pt,se,_e,we);else if(qe&2&&Je.class!==pt.class&&P(Le,"class",null,pt.class,we),qe&4&&P(Le,"style",Je.style,pt.style,we),qe&8){const nr=Q.dynamicProps;for(let Yt=0;Yt<nr.length;Yt++){const sr=nr[Yt],dn=Je[sr],Fi=pt[sr];(Fi!==dn||sr==="value")&&P(Le,sr,dn,Fi,we,W.children,se,_e,vr)}}qe&1&&W.children!==Q.children&&$(Le,Q.children)}else!Ge&&Ce==null&&En(Le,Q,Je,pt,se,_e,we);((_t=pt.onVnodeUpdated)||ct)&&Ai(()=>{_t&&No(_t,se,Q,W),ct&&Ya(Q,W,se,"updated")},_e)},Lr=(W,Q,se,_e,we,Ie,Ge)=>{for(let Le=0;Le<Q.length;Le++){const qe=W[Le],Ce=Q[Le],ct=qe.el&&(qe.type===go||!sl(qe,Ce)||qe.shapeFlag&70)?oe(qe.el):se;$e(qe,Ce,ct,null,_e,we,Ie,Ge,!0)}},En=(W,Q,se,_e,we,Ie,Ge)=>{if(se!==_e){if(se!==Ur)for(const Le in se)!Wl(Le)&&!(Le in _e)&&P(W,Le,se[Le],null,Ge,Q.children,we,Ie,vr);for(const Le in _e){if(Wl(Le))continue;const qe=_e[Le],Ce=se[Le];qe!==Ce&&Le!=="value"&&P(W,Le,Ce,qe,Ge,Q.children,we,Ie,vr)}"value"in _e&&P(W,"value",se.value,_e.value)}},Nr=(W,Q,se,_e,we,Ie,Ge,Le,qe)=>{const Ce=Q.el=W?W.el:G(""),ct=Q.anchor=W?W.anchor:G("");let{patchFlag:Je,dynamicChildren:pt,slotScopeIds:_t}=Q;_t&&(Le=Le?Le.concat(_t):_t),W==null?(w(Ce,se,_e),w(ct,se,_e),en(Q.children,se,ct,we,Ie,Ge,Le,qe)):Je>0&&Je&64&&pt&&W.dynamicChildren?(Lr(W.dynamicChildren,pt,se,we,Ie,Ge,Le),(Q.key!=null||we&&Q===we.subTree)&&Pf(W,Q,!0)):Zt(W,Q,se,ct,we,Ie,Ge,Le,qe)},dr=(W,Q,se,_e,we,Ie,Ge,Le,qe)=>{Q.slotScopeIds=Le,W==null?Q.shapeFlag&512?we.ctx.activate(Q,se,_e,Ge,qe):Qn(Q,se,_e,we,Ie,Ge,qe):Pi(W,Q,qe)},Qn=(W,Q,se,_e,we,Ie,Ge)=>{const Le=W.component=ag(W,_e,we);if(_f(W)&&(Le.ctx.renderer=ve),sg(Le),Le.asyncDep){if(we&&we.registerDep(Le,hr),!W.el){const qe=Le.subTree=yr(vl);je(null,qe,Q,se)}return}hr(Le,W,Q,se,we,Ie,Ge)},Pi=(W,Q,se)=>{const _e=Q.component=W.component;if(yy(W,Q,se))if(_e.asyncDep&&!_e.asyncResolved){qt(_e,Q,se);return}else _e.next=Q,cy(_e.update),_e.update();else Q.el=W.el,_e.vnode=Q},hr=(W,Q,se,_e,we,Ie,Ge)=>{const Le=()=>{if(W.isMounted){let{next:ct,bu:Je,u:pt,parent:_t,vnode:zt}=W,nr=ct,Yt;$a(W,!1),ct?(ct.el=zt.el,qt(W,ct,Ge)):ct=zt,Je&&Xu(Je),(Yt=ct.props&&ct.props.onVnodeBeforeUpdate)&&No(Yt,_t,ct,zt),$a(W,!0);const sr=Hu(W),dn=W.subTree;W.subTree=sr,$e(dn,sr,oe(dn.el),Ee(dn),W,we,Ie),ct.el=sr.el,nr===null&&gy(W,sr.el),pt&&Ai(pt,we),(Yt=ct.props&&ct.props.onVnodeUpdated)&&Ai(()=>No(Yt,_t,ct,zt),we)}else{let ct;const{el:Je,props:pt}=Q,{bm:_t,m:zt,parent:nr}=W,Yt=Yl(Q);if($a(W,!1),_t&&Xu(_t),!Yt&&(ct=pt&&pt.onVnodeBeforeMount)&&No(ct,nr,Q),$a(W,!0),Je&&Ot){const sr=()=>{W.subTree=Hu(W),Ot(Je,W.subTree,W,we,null)};Yt?Q.type.__asyncLoader().then(()=>!W.isUnmounted&&sr()):sr()}else{const sr=W.subTree=Hu(W);$e(null,sr,se,_e,W,we,Ie),Q.el=sr.el}if(zt&&Ai(zt,we),!Yt&&(ct=pt&&pt.onVnodeMounted)){const sr=Q;Ai(()=>No(ct,nr,sr),we)}(Q.shapeFlag&256||nr&&Yl(nr.vnode)&&nr.vnode.shapeFlag&256)&&W.a&&Ai(W.a,we),W.isMounted=!0,Q=se=_e=null}},qe=W.effect=new Sc(Le,()=>kc(Ce),W.scope),Ce=W.update=()=>qe.run();Ce.id=W.uid,$a(W,!0),Ce()},qt=(W,Q,se)=>{Q.component=W;const _e=W.vnode.props;W.vnode=Q,W.next=null,Zy(W,Q.props,_e,se),Hy(W,Q.children,se),Os(),Qp(),Fs()},Zt=(W,Q,se,_e,we,Ie,Ge,Le,qe=!1)=>{const Ce=W&&W.children,ct=W?W.shapeFlag:0,Je=Q.children,{patchFlag:pt,shapeFlag:_t}=Q;if(pt>0){if(pt&128){Tr(Ce,Je,se,_e,we,Ie,Ge,Le,qe);return}else if(pt&256){jr(Ce,Je,se,_e,we,Ie,Ge,Le,qe);return}}_t&8?(ct&16&&vr(Ce,we,Ie),Je!==Ce&&$(se,Je)):ct&16?_t&16?Tr(Ce,Je,se,_e,we,Ie,Ge,Le,qe):vr(Ce,we,Ie,!0):(ct&8&&$(se,""),_t&16&&en(Je,se,_e,we,Ie,Ge,Le,qe))},jr=(W,Q,se,_e,we,Ie,Ge,Le,qe)=>{W=W||Ss,Q=Q||Ss;const Ce=W.length,ct=Q.length,Je=Math.min(Ce,ct);let pt;for(pt=0;pt<Je;pt++){const _t=Q[pt]=qe?Ca(Q[pt]):jo(Q[pt]);$e(W[pt],_t,se,null,we,Ie,Ge,Le,qe)}Ce>ct?vr(W,we,Ie,!0,!1,Je):en(Q,se,_e,we,Ie,Ge,Le,qe,Je)},Tr=(W,Q,se,_e,we,Ie,Ge,Le,qe)=>{let Ce=0;const ct=Q.length;let Je=W.length-1,pt=ct-1;for(;Ce<=Je&&Ce<=pt;){const _t=W[Ce],zt=Q[Ce]=qe?Ca(Q[Ce]):jo(Q[Ce]);if(sl(_t,zt))$e(_t,zt,se,null,we,Ie,Ge,Le,qe);else break;Ce++}for(;Ce<=Je&&Ce<=pt;){const _t=W[Je],zt=Q[pt]=qe?Ca(Q[pt]):jo(Q[pt]);if(sl(_t,zt))$e(_t,zt,se,null,we,Ie,Ge,Le,qe);else break;Je--,pt--}if(Ce>Je){if(Ce<=pt){const _t=pt+1,zt=_t<ct?Q[_t].el:_e;for(;Ce<=pt;)$e(null,Q[Ce]=qe?Ca(Q[Ce]):jo(Q[Ce]),se,zt,we,Ie,Ge,Le,qe),Ce++}}else if(Ce>pt)for(;Ce<=Je;)Wt(W[Ce],we,Ie,!0),Ce++;else{const _t=Ce,zt=Ce,nr=new Map;for(Ce=zt;Ce<=pt;Ce++){const Zr=Q[Ce]=qe?Ca(Q[Ce]):jo(Q[Ce]);Zr.key!=null&&nr.set(Zr.key,Ce)}let Yt,sr=0;const dn=pt-zt+1;let Fi=!1,Qi=0;const Mn=new Array(dn);for(Ce=0;Ce<dn;Ce++)Mn[Ce]=0;for(Ce=_t;Ce<=Je;Ce++){const Zr=W[Ce];if(sr>=dn){Wt(Zr,we,Ie,!0);continue}let mn;if(Zr.key!=null)mn=nr.get(Zr.key);else for(Yt=zt;Yt<=pt;Yt++)if(Mn[Yt-zt]===0&&sl(Zr,Q[Yt])){mn=Yt;break}mn===void 0?Wt(Zr,we,Ie,!0):(Mn[mn-zt]=Ce+1,mn>=Qi?Qi=mn:Fi=!0,$e(Zr,Q[mn],se,null,we,Ie,Ge,Le,qe),sr++)}const zi=Fi?Yy(Mn):Ss;for(Yt=zi.length-1,Ce=dn-1;Ce>=0;Ce--){const Zr=zt+Ce,mn=Q[Zr],eo=Zr+1<ct?Q[Zr+1].el:_e;Mn[Ce]===0?$e(null,mn,se,eo,we,Ie,Ge,Le,qe):Fi&&(Yt<0||Ce!==zi[Yt]?qr(mn,se,eo,2):Yt--)}}},qr=(W,Q,se,_e,we=null)=>{const{el:Ie,type:Ge,transition:Le,children:qe,shapeFlag:Ce}=W;if(Ce&6){qr(W.component.subTree,Q,se,_e);return}if(Ce&128){W.suspense.move(Q,se,_e);return}if(Ce&64){Ge.move(W,Q,se,ve);return}if(Ge===go){w(Ie,Q,se);for(let Je=0;Je<qe.length;Je++)qr(qe[Je],Q,se,_e);w(W.anchor,Q,se);return}if(Ge===Jl){Mt(W,Q,se);return}if(_e!==2&&Ce&1&&Le)if(_e===0)Le.beforeEnter(Ie),w(Ie,Q,se),Ai(()=>Le.enter(Ie),we);else{const{leave:Je,delayLeave:pt,afterLeave:_t}=Le,zt=()=>w(Ie,Q,se),nr=()=>{Je(Ie,()=>{zt(),_t&&_t()})};pt?pt(Ie,zt,nr):nr()}else w(Ie,Q,se)},Wt=(W,Q,se,_e=!1,we=!1)=>{const{type:Ie,props:Ge,ref:Le,children:qe,dynamicChildren:Ce,shapeFlag:ct,patchFlag:Je,dirs:pt}=W;if(Le!=null&&cc(Le,null,se,W,!0),ct&256){Q.ctx.deactivate(W);return}const _t=ct&1&&pt,zt=!Yl(W);let nr;if(zt&&(nr=Ge&&Ge.onVnodeBeforeUnmount)&&No(nr,Q,W),ct&6)tn(W.component,se,_e);else{if(ct&128){W.suspense.unmount(se,_e);return}_t&&Ya(W,null,Q,"beforeUnmount"),ct&64?W.type.remove(W,Q,se,we,ve,_e):Ce&&(Ie!==go||Je>0&&Je&64)?vr(Ce,Q,se,!1,!0):(Ie===go&&Je&384||!we&&ct&16)&&vr(qe,Q,se),_e&&fn(W)}(zt&&(nr=Ge&&Ge.onVnodeUnmounted)||_t)&&Ai(()=>{nr&&No(nr,Q,W),_t&&Ya(W,null,Q,"unmounted")},se)},fn=W=>{const{type:Q,el:se,anchor:_e,transition:we}=W;if(Q===go){kn(se,_e);return}if(Q===Jl){ft(W);return}const Ie=()=>{T(se),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(W.shapeFlag&1&&we&&!we.persisted){const{leave:Ge,delayLeave:Le}=we,qe=()=>Ge(se,Ie);Le?Le(W.el,Ie,qe):qe()}else Ie()},kn=(W,Q)=>{let se;for(;W!==Q;)se=pe(W),T(W),W=se;T(Q)},tn=(W,Q,se)=>{const{bum:_e,scope:we,update:Ie,subTree:Ge,um:Le}=W;_e&&Xu(_e),we.stop(),Ie&&(Ie.active=!1,Wt(Ge,W,Q,se)),Le&&Ai(Le,Q),Ai(()=>{W.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},vr=(W,Q,se,_e=!1,we=!1,Ie=0)=>{for(let Ge=Ie;Ge<W.length;Ge++)Wt(W[Ge],Q,se,_e,we)},Ee=W=>W.shapeFlag&6?Ee(W.component.subTree):W.shapeFlag&128?W.suspense.next():pe(W.anchor||W.el),Ze=(W,Q,se)=>{W==null?Q._vnode&&Wt(Q._vnode,null,null,!0):$e(Q._vnode||null,W,Q,null,null,null,se),Qp(),hf(),Q._vnode=W},ve={p:$e,um:Wt,m:qr,r:fn,mt:Qn,mc:en,pc:Zt,pbc:Lr,n:Ee,o:u};let ut,Ot;return f&&([ut,Ot]=f(ve)),{render:Ze,hydrate:ut,createApp:jy(Ze,ut)}}function $a({effect:u,update:f},g){u.allowRecurse=f.allowRecurse=g}function Pf(u,f,g=!1){const w=u.children,T=f.children;if(Pt(w)&&Pt(T))for(let P=0;P<w.length;P++){const s=w[P];let G=T[P];G.shapeFlag&1&&!G.dynamicChildren&&((G.patchFlag<=0||G.patchFlag===32)&&(G=T[P]=Ca(T[P]),G.el=s.el),g||Pf(s,G)),G.type===yu&&(G.el=s.el)}}function Yy(u){const f=u.slice(),g=[0];let w,T,P,s,G;const k=u.length;for(w=0;w<k;w++){const J=u[w];if(J!==0){if(T=g[g.length-1],u[T]<J){f[w]=T,g.push(w);continue}for(P=0,s=g.length-1;P<s;)G=P+s>>1,u[g[G]]<J?P=G+1:s=G;J<u[g[P]]&&(P>0&&(f[w]=g[P-1]),g[P]=w)}}for(P=g.length,s=g[P-1];P-- >0;)g[P]=s,s=f[s];return g}const $y=u=>u.__isTeleport,go=Symbol.for("v-fgt"),yu=Symbol.for("v-txt"),vl=Symbol.for("v-cmt"),Jl=Symbol.for("v-stc"),hl=[];let bo=null;function El(u=!1){hl.push(bo=u?null:[])}function Jy(){hl.pop(),bo=hl[hl.length-1]||null}let xl=1;function ch(u){xl+=u}function Qy(u){return u.dynamicChildren=xl>0?bo||Ss:null,Jy(),xl>0&&bo&&bo.push(u),u}function Sl(u,f,g,w,T,P){return Qy(er(u,f,g,w,T,P,!0))}function pc(u){return u?u.__v_isVNode===!0:!1}function sl(u,f){return u.type===f.type&&u.key===f.key}const gu="__vInternal",zf=({key:u})=>u??null,Ql=({ref:u,ref_key:f,ref_for:g})=>(typeof u=="number"&&(u=""+u),u!=null?zn(u)||Jn(u)||Vt(u)?{i:xo,r:u,k:f,f:!!g}:u:null);function er(u,f=null,g=null,w=0,T=null,P=u===go?0:1,s=!1,G=!1){const k={__v_isVNode:!0,__v_skip:!0,type:u,props:f,key:f&&zf(f),ref:f&&Ql(f),scopeId:du,slotScopeIds:null,children:g,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:P,patchFlag:w,dynamicProps:T,dynamicChildren:null,appContext:null,ctx:xo};return G?(Bc(k,g),P&128&&u.normalize(k)):g&&(k.shapeFlag|=zn(g)?8:16),xl>0&&!s&&bo&&(k.patchFlag>0||P&6)&&k.patchFlag!==32&&bo.push(k),k}const yr=eg;function eg(u,f=null,g=null,w=0,T=null,P=!1){if((!u||u===Ly)&&(u=vl),pc(u)){const G=Ms(u,f,!0);return g&&Bc(G,g),xl>0&&!P&&bo&&(G.shapeFlag&6?bo[bo.indexOf(u)]=G:bo.push(G)),G.patchFlag|=-2,G}if(hg(u)&&(u=u.__vccOpts),f){f=tg(f);let{class:G,style:k}=f;G&&!zn(G)&&(f.class=wc(G)),Vr(k)&&(rf(k)&&!Pt(k)&&(k=Pn({},k)),f.style=bc(k))}const s=zn(u)?1:_y(u)?128:$y(u)?64:Vr(u)?4:Vt(u)?2:0;return er(u,f,g,w,T,s,P,!0)}function tg(u){return u?rf(u)||gu in u?Pn({},u):u:null}function Ms(u,f,g=!1){const{props:w,ref:T,patchFlag:P,children:s}=u,G=f?ng(w||{},f):w;return{__v_isVNode:!0,__v_skip:!0,type:u.type,props:G,key:G&&zf(G),ref:f&&f.ref?g&&T?Pt(T)?T.concat(Ql(f)):[T,Ql(f)]:Ql(f):T,scopeId:u.scopeId,slotScopeIds:u.slotScopeIds,children:s,target:u.target,targetAnchor:u.targetAnchor,staticCount:u.staticCount,shapeFlag:u.shapeFlag,patchFlag:f&&u.type!==go?P===-1?16:P|16:P,dynamicProps:u.dynamicProps,dynamicChildren:u.dynamicChildren,appContext:u.appContext,dirs:u.dirs,transition:u.transition,component:u.component,suspense:u.suspense,ssContent:u.ssContent&&Ms(u.ssContent),ssFallback:u.ssFallback&&Ms(u.ssFallback),el:u.el,anchor:u.anchor,ctx:u.ctx,ce:u.ce}}function zs(u=" ",f=0){return yr(yu,null,u,f)}function rg(u,f){const g=yr(Jl,null,u);return g.staticCount=f,g}function jo(u){return u==null||typeof u=="boolean"?yr(vl):Pt(u)?yr(go,null,u.slice()):typeof u=="object"?Ca(u):yr(yu,null,String(u))}function Ca(u){return u.el===null&&u.patchFlag!==-1||u.memo?u:Ms(u)}function Bc(u,f){let g=0;const{shapeFlag:w}=u;if(f==null)f=null;else if(Pt(f))g=16;else if(typeof f=="object")if(w&65){const T=f.default;T&&(T._c&&(T._d=!1),Bc(u,T()),T._c&&(T._d=!0));return}else{g=32;const T=f._;!T&&!(gu in f)?f._ctx=xo:T===3&&xo&&(xo.slots._===1?f._=1:(f._=2,u.patchFlag|=1024))}else Vt(f)?(f={default:f,_ctx:xo},g=32):(f=String(f),w&64?(g=16,f=[zs(f)]):g=8);u.children=f,u.shapeFlag|=g}function ng(...u){const f={};for(let g=0;g<u.length;g++){const w=u[g];for(const T in w)if(T==="class")f.class!==w.class&&(f.class=wc([f.class,w.class]));else if(T==="style")f.style=bc([f.style,w.style]);else if(au(T)){const P=f[T],s=w[T];s&&P!==s&&!(Pt(P)&&P.includes(s))&&(f[T]=P?[].concat(P,s):s)}else T!==""&&(f[T]=w[T])}return f}function No(u,f,g,w=null){Eo(u,f,7,[g,w])}const ig=Ef();let og=0;function ag(u,f,g){const w=u.type,T=(f?f.appContext:u.appContext)||ig,P={uid:og++,vnode:u,type:w,parent:f,appContext:T,root:null,next:null,subTree:null,effect:null,update:null,scope:new Im(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:f?f.provides:Object.create(T.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tf(w,T),emitsOptions:df(w,T),emit:null,emitted:null,propsDefaults:Ur,inheritAttrs:w.inheritAttrs,ctx:Ur,data:Ur,props:Ur,attrs:Ur,slots:Ur,refs:Ur,setupState:Ur,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:g,suspenseId:g?g.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return P.ctx={_:P},P.root=f?f.root:P,P.emit=fy.bind(null,P),u.ce&&u.ce(P),P}let qn=null,Oc,bs,ph="__VUE_INSTANCE_SETTERS__";(bs=ec()[ph])||(bs=ec()[ph]=[]),bs.push(u=>qn=u),Oc=u=>{bs.length>1?bs.forEach(f=>f(u)):bs[0](u)};const Ls=u=>{Oc(u),u.scope.on()},rs=()=>{qn&&qn.scope.off(),Oc(null)};function kf(u){return u.vnode.shapeFlag&4}let bl=!1;function sg(u,f=!1){bl=f;const{props:g,children:w}=u.vnode,T=kf(u);qy(u,g,T,f),Xy(u,w);const P=T?lg(u,f):void 0;return bl=!1,P}function lg(u,f){const g=u.type;u.accessCache=Object.create(null),u.proxy=nf(new Proxy(u.ctx,Dy));const{setup:w}=g;if(w){const T=u.setupContext=w.length>1?cg(u):null;Ls(u),Os();const P=ka(w,u,0,[u.props,T]);if(Fs(),rs(),Uh(P)){if(P.then(rs,rs),f)return P.then(s=>{hh(u,s,f)}).catch(s=>{hu(s,u,0)});u.asyncDep=P}else hh(u,P,f)}else Mf(u,f)}function hh(u,f,g){Vt(f)?u.type.__ssrInlineRender?u.ssrRender=f:u.render=f:Vr(f)&&(u.setupState=lf(f)),Mf(u,g)}let fh;function Mf(u,f,g){const w=u.type;if(!u.render){if(!f&&fh&&!w.render){const T=w.template||Rc(u).template;if(T){const{isCustomElement:P,compilerOptions:s}=u.appContext.config,{delimiters:G,compilerOptions:k}=w,J=Pn(Pn({isCustomElement:P,delimiters:G},s),k);w.render=fh(T,J)}}u.render=w.render||wo}Ls(u),Os(),By(u),Fs(),rs()}function ug(u){return u.attrsProxy||(u.attrsProxy=new Proxy(u.attrs,{get(f,g){return Ii(u,"get","$attrs"),f[g]}}))}function cg(u){const f=g=>{u.exposed=g||{}};return{get attrs(){return ug(u)},slots:u.slots,emit:u.emit,expose:f}}function Fc(u){if(u.exposed)return u.exposeProxy||(u.exposeProxy=new Proxy(lf(nf(u.exposed)),{get(f,g){if(g in f)return f[g];if(g in pl)return pl[g](u)},has(f,g){return g in f||g in pl}}))}function pg(u,f=!0){return Vt(u)?u.displayName||u.name:u.name||f&&u.__name}function hg(u){return Vt(u)&&"__vccOpts"in u}const vo=(u,f)=>sy(u,f,bl);function Lf(u,f,g){const w=arguments.length;return w===2?Vr(f)&&!Pt(f)?pc(f)?yr(u,null,[f]):yr(u,f):yr(u,null,f):(w>3?g=Array.prototype.slice.call(arguments,2):w===3&&pc(g)&&(g=[g]),yr(u,f,g))}const fg=Symbol.for("v-scx"),dg=()=>sa(fg),mg="3.3.4",yg="http://www.w3.org/2000/svg",es=typeof document<"u"?document:null,dh=es&&es.createElement("template"),gg={insert:(u,f,g)=>{f.insertBefore(u,g||null)},remove:u=>{const f=u.parentNode;f&&f.removeChild(u)},createElement:(u,f,g,w)=>{const T=f?es.createElementNS(yg,u):es.createElement(u,g?{is:g}:void 0);return u==="select"&&w&&w.multiple!=null&&T.setAttribute("multiple",w.multiple),T},createText:u=>es.createTextNode(u),createComment:u=>es.createComment(u),setText:(u,f)=>{u.nodeValue=f},setElementText:(u,f)=>{u.textContent=f},parentNode:u=>u.parentNode,nextSibling:u=>u.nextSibling,querySelector:u=>es.querySelector(u),setScopeId(u,f){u.setAttribute(f,"")},insertStaticContent(u,f,g,w,T,P){const s=g?g.previousSibling:f.lastChild;if(T&&(T===P||T.nextSibling))for(;f.insertBefore(T.cloneNode(!0),g),!(T===P||!(T=T.nextSibling)););else{dh.innerHTML=w?`<svg>${u}</svg>`:u;const G=dh.content;if(w){const k=G.firstChild;for(;k.firstChild;)G.appendChild(k.firstChild);G.removeChild(k)}f.insertBefore(G,g)}return[s?s.nextSibling:f.firstChild,g?g.previousSibling:f.lastChild]}};function _g(u,f,g){const w=u._vtc;w&&(f=(f?[f,...w]:[...w]).join(" ")),f==null?u.removeAttribute("class"):g?u.setAttribute("class",f):u.className=f}function vg(u,f,g){const w=u.style,T=zn(g);if(g&&!T){if(f&&!zn(f))for(const P in f)g[P]==null&&hc(w,P,"");for(const P in g)hc(w,P,g[P])}else{const P=w.display;T?f!==g&&(w.cssText=g):f&&u.removeAttribute("style"),"_vod"in u&&(w.display=P)}}const mh=/\s*!important$/;function hc(u,f,g){if(Pt(g))g.forEach(w=>hc(u,f,w));else if(g==null&&(g=""),f.startsWith("--"))u.setProperty(f,g);else{const w=xg(u,f);mh.test(g)?u.setProperty(Bs(w),g.replace(mh,""),"important"):u[w]=g}}const yh=["Webkit","Moz","ms"],Ku={};function xg(u,f){const g=Ku[f];if(g)return g;let w=Zo(f);if(w!=="filter"&&w in u)return Ku[f]=w;w=uu(w);for(let T=0;T<yh.length;T++){const P=yh[T]+w;if(P in u)return Ku[f]=P}return f}const gh="http://www.w3.org/1999/xlink";function bg(u,f,g,w,T){if(w&&f.startsWith("xlink:"))g==null?u.removeAttributeNS(gh,f.slice(6,f.length)):u.setAttributeNS(gh,f,g);else{const P=Am(f);g==null||P&&!jh(g)?u.removeAttribute(f):u.setAttribute(f,P?"":g)}}function wg(u,f,g,w,T,P,s){if(f==="innerHTML"||f==="textContent"){w&&s(w,T,P),u[f]=g??"";return}const G=u.tagName;if(f==="value"&&G!=="PROGRESS"&&!G.includes("-")){u._value=g;const J=G==="OPTION"?u.getAttribute("value"):u.value,$=g??"";J!==$&&(u.value=$),g==null&&u.removeAttribute(f);return}let k=!1;if(g===""||g==null){const J=typeof u[f];J==="boolean"?g=jh(g):g==null&&J==="string"?(g="",k=!0):J==="number"&&(g=0,k=!0)}try{u[f]=g}catch{}k&&u.removeAttribute(f)}function Eg(u,f,g,w){u.addEventListener(f,g,w)}function Sg(u,f,g,w){u.removeEventListener(f,g,w)}function Tg(u,f,g,w,T=null){const P=u._vei||(u._vei={}),s=P[f];if(w&&s)s.value=w;else{const[G,k]=Ag(f);if(w){const J=P[f]=Pg(w,T);Eg(u,G,J,k)}else s&&(Sg(u,G,s,k),P[f]=void 0)}}const _h=/(?:Once|Passive|Capture)$/;function Ag(u){let f;if(_h.test(u)){f={};let w;for(;w=u.match(_h);)u=u.slice(0,u.length-w[0].length),f[w[0].toLowerCase()]=!0}return[u[2]===":"?u.slice(3):Bs(u.slice(2)),f]}let Yu=0;const Ig=Promise.resolve(),Cg=()=>Yu||(Ig.then(()=>Yu=0),Yu=Date.now());function Pg(u,f){const g=w=>{if(!w._vts)w._vts=Date.now();else if(w._vts<=g.attached)return;Eo(zg(w,g.value),f,5,[w])};return g.value=u,g.attached=Cg(),g}function zg(u,f){if(Pt(f)){const g=u.stopImmediatePropagation;return u.stopImmediatePropagation=()=>{g.call(u),u._stopped=!0},f.map(w=>T=>!T._stopped&&w&&w(T))}else return f}const vh=/^on[a-z]/,kg=(u,f,g,w,T=!1,P,s,G,k)=>{f==="class"?_g(u,w,T):f==="style"?vg(u,g,w):au(f)?gc(f)||Tg(u,f,g,w,s):(f[0]==="."?(f=f.slice(1),!0):f[0]==="^"?(f=f.slice(1),!1):Mg(u,f,w,T))?wg(u,f,w,P,s,G,k):(f==="true-value"?u._trueValue=w:f==="false-value"&&(u._falseValue=w),bg(u,f,w,T))};function Mg(u,f,g,w){return w?!!(f==="innerHTML"||f==="textContent"||f in u&&vh.test(f)&&Vt(g)):f==="spellcheck"||f==="draggable"||f==="translate"||f==="form"||f==="list"&&u.tagName==="INPUT"||f==="type"&&u.tagName==="TEXTAREA"||vh.test(f)&&zn(g)?!1:f in u}const Lg=Pn({patchProp:kg},gg);let xh;function Rg(){return xh||(xh=Wy(Lg))}const Dg=(...u)=>{const f=Rg().createApp(...u),{mount:g}=f;return f.mount=w=>{const T=Bg(w);if(!T)return;const P=f._component;!Vt(P)&&!P.render&&!P.template&&(P.template=T.innerHTML),T.innerHTML="";const s=g(T,!1,T instanceof SVGElement);return T instanceof Element&&(T.removeAttribute("v-cloak"),T.setAttribute("data-v-app","")),s},f};function Bg(u){return zn(u)?document.querySelector(u):u}const Og="/Roaming_New_Routes/assets/authorspic-eb0de7a8.jpg";const Tl=(u,f)=>{const g=u.__vccOpts||u;for(const[w,T]of f)g[w]=T;return g},Fg={},Ug=u=>(Mc("data-v-68208864"),u=u(),Lc(),u),Vg=Ug(()=>er("img",{src:Og,alt:"authorpic"},null,-1));function Ng(u,f){return El(),Sl("div",null,[Vg,zs(" Shivani Bhakta")])}const jg=Tl(Fg,[["render",Ng],["__scopeId","data-v-68208864"]]),qg="/Roaming_New_Routes/assets/header-c12e51b3.jpg";const Zg={components:{AuthorInfo:jg}},Al=u=>(Mc("data-v-2272d429"),u=u(),Lc(),u),Gg={class:"topnav"},Xg={class:"topnav-left"},Hg=Al(()=>er("i",{class:"fa-solid fa-earth-americas"},null,-1)),Wg=Al(()=>er("span",null," |",-1)),Kg={class:"authorinfo"},Yg={class:"topnav-right"},$g={class:"navbar"},Jg={class:"dropdown"},Qg=Al(()=>er("button",{class:"dropbtn"},[zs("Menu "),er("i",{class:"fa fa-caret-down"})],-1)),e_={class:"dropdown-content"},t_=Al(()=>er("a",{href:""},"Login ",-1)),r_=Al(()=>er("div",{class:"img-container"},[er("img",{alt:"headerImg",src:qg}),er("div",{class:"title"},[er("h1",null,"life is short & the world is wide")])],-1)),n_=rg('<footer data-v-2272d429><div class="footer-container" data-v-2272d429><a href="" data-v-2272d429><i class="fa-brands fa-twitter" data-v-2272d429></i></a><a href="" data-v-2272d429><i class="fa-brands fa-instagram" data-v-2272d429></i></a><a href="" data-v-2272d429><i class="fa-brands fa-facebook" data-v-2272d429></i></a></div></footer>',1);function i_(u,f,g,w,T,P){const s=Ps("AuthorInfo"),G=Ps("RouterLink"),k=Ps("RouterView");return El(),Sl(go,null,[er("header",null,[er("div",Gg,[er("div",Xg,[Hg,zs(" Roaming New Routes "),Wg,er("div",Kg,[yr(s)])]),er("div",Yg,[er("div",$g,[er("div",Jg,[Qg,er("div",e_,[yr(G,{to:"/"},{default:aa(()=>[zs(" Home")]),_:1}),yr(G,{to:"/contact"},{default:aa(()=>[zs("Contact ")]),_:1}),t_])])])])]),r_]),yr(k),n_],64)}const o_=Tl(Zg,[["render",i_],["__scopeId","data-v-2272d429"]]),a_="modulepreload",s_=function(u){return"/Roaming_New_Routes/"+u},bh={},Ja=function(f,g,w){if(!g||g.length===0)return f();const T=document.getElementsByTagName("link");return Promise.all(g.map(P=>{if(P=s_(P),P in bh)return;bh[P]=!0;const s=P.endsWith(".css"),G=s?'[rel="stylesheet"]':"";if(!!w)for(let $=T.length-1;$>=0;$--){const oe=T[$];if(oe.href===P&&(!s||oe.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${P}"]${G}`))return;const J=document.createElement("link");if(J.rel=s?"stylesheet":a_,s||(J.as="script",J.crossOrigin=""),J.href=P,document.head.appendChild(J),s)return new Promise(($,oe)=>{J.addEventListener("load",$),J.addEventListener("error",()=>oe(new Error(`Unable to preload CSS for ${P}`)))})})).then(()=>f()).catch(P=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=P,window.dispatchEvent(s),!s.defaultPrevented)throw P})};/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ws=typeof window<"u";function l_(u){return u.__esModule||u[Symbol.toStringTag]==="Module"}const mr=Object.assign;function $u(u,f){const g={};for(const w in f){const T=f[w];g[w]=So(T)?T.map(u):u(T)}return g}const fl=()=>{},So=Array.isArray,u_=/\/$/,c_=u=>u.replace(u_,"");function Ju(u,f,g="/"){let w,T={},P="",s="";const G=f.indexOf("#");let k=f.indexOf("?");return G<k&&G>=0&&(k=-1),k>-1&&(w=f.slice(0,k),P=f.slice(k+1,G>-1?G:f.length),T=u(P)),G>-1&&(w=w||f.slice(0,G),s=f.slice(G,f.length)),w=d_(w??f,g),{fullPath:w+(P&&"?")+P+s,path:w,query:T,hash:s}}function p_(u,f){const g=f.query?u(f.query):"";return f.path+(g&&"?")+g+(f.hash||"")}function wh(u,f){return!f||!u.toLowerCase().startsWith(f.toLowerCase())?u:u.slice(f.length)||"/"}function h_(u,f,g){const w=f.matched.length-1,T=g.matched.length-1;return w>-1&&w===T&&Rs(f.matched[w],g.matched[T])&&Rf(f.params,g.params)&&u(f.query)===u(g.query)&&f.hash===g.hash}function Rs(u,f){return(u.aliasOf||u)===(f.aliasOf||f)}function Rf(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(const g in u)if(!f_(u[g],f[g]))return!1;return!0}function f_(u,f){return So(u)?Eh(u,f):So(f)?Eh(f,u):u===f}function Eh(u,f){return So(f)?u.length===f.length&&u.every((g,w)=>g===f[w]):u.length===1&&u[0]===f}function d_(u,f){if(u.startsWith("/"))return u;if(!u)return f;const g=f.split("/"),w=u.split("/"),T=w[w.length-1];(T===".."||T===".")&&w.push("");let P=g.length-1,s,G;for(s=0;s<w.length;s++)if(G=w[s],G!==".")if(G==="..")P>1&&P--;else break;return g.slice(0,P).join("/")+"/"+w.slice(s-(s===w.length?1:0)).join("/")}var wl;(function(u){u.pop="pop",u.push="push"})(wl||(wl={}));var dl;(function(u){u.back="back",u.forward="forward",u.unknown=""})(dl||(dl={}));function m_(u){if(!u)if(ws){const f=document.querySelector("base");u=f&&f.getAttribute("href")||"/",u=u.replace(/^\w+:\/\/[^\/]+/,"")}else u="/";return u[0]!=="/"&&u[0]!=="#"&&(u="/"+u),c_(u)}const y_=/^[^#]+#/;function g_(u,f){return u.replace(y_,"#")+f}function __(u,f){const g=document.documentElement.getBoundingClientRect(),w=u.getBoundingClientRect();return{behavior:f.behavior,left:w.left-g.left-(f.left||0),top:w.top-g.top-(f.top||0)}}const _u=()=>({left:window.pageXOffset,top:window.pageYOffset});function v_(u){let f;if("el"in u){const g=u.el,w=typeof g=="string"&&g.startsWith("#"),T=typeof g=="string"?w?document.getElementById(g.slice(1)):document.querySelector(g):g;if(!T)return;f=__(T,u)}else f=u;"scrollBehavior"in document.documentElement.style?window.scrollTo(f):window.scrollTo(f.left!=null?f.left:window.pageXOffset,f.top!=null?f.top:window.pageYOffset)}function Sh(u,f){return(history.state?history.state.position-f:-1)+u}const fc=new Map;function x_(u,f){fc.set(u,f)}function b_(u){const f=fc.get(u);return fc.delete(u),f}let w_=()=>location.protocol+"//"+location.host;function Df(u,f){const{pathname:g,search:w,hash:T}=f,P=u.indexOf("#");if(P>-1){let G=T.includes(u.slice(P))?u.slice(P).length:1,k=T.slice(G);return k[0]!=="/"&&(k="/"+k),wh(k,"")}return wh(g,u)+w+T}function E_(u,f,g,w){let T=[],P=[],s=null;const G=({state:pe})=>{const Me=Df(u,location),rt=g.value,$e=f.value;let gt=0;if(pe){if(g.value=Me,f.value=pe,s&&s===rt){s=null;return}gt=$e?pe.position-$e.position:0}else w(Me);T.forEach(je=>{je(g.value,rt,{delta:gt,type:wl.pop,direction:gt?gt>0?dl.forward:dl.back:dl.unknown})})};function k(){s=g.value}function J(pe){T.push(pe);const Me=()=>{const rt=T.indexOf(pe);rt>-1&&T.splice(rt,1)};return P.push(Me),Me}function $(){const{history:pe}=window;pe.state&&pe.replaceState(mr({},pe.state,{scroll:_u()}),"")}function oe(){for(const pe of P)pe();P=[],window.removeEventListener("popstate",G),window.removeEventListener("beforeunload",$)}return window.addEventListener("popstate",G),window.addEventListener("beforeunload",$,{passive:!0}),{pauseListeners:k,listen:J,destroy:oe}}function Th(u,f,g,w=!1,T=!1){return{back:u,current:f,forward:g,replaced:w,position:window.history.length,scroll:T?_u():null}}function S_(u){const{history:f,location:g}=window,w={value:Df(u,g)},T={value:f.state};T.value||P(w.value,{back:null,current:w.value,forward:null,position:f.length-1,replaced:!0,scroll:null},!0);function P(k,J,$){const oe=u.indexOf("#"),pe=oe>-1?(g.host&&document.querySelector("base")?u:u.slice(oe))+k:w_()+u+k;try{f[$?"replaceState":"pushState"](J,"",pe),T.value=J}catch(Me){console.error(Me),g[$?"replace":"assign"](pe)}}function s(k,J){const $=mr({},f.state,Th(T.value.back,k,T.value.forward,!0),J,{position:T.value.position});P(k,$,!0),w.value=k}function G(k,J){const $=mr({},T.value,f.state,{forward:k,scroll:_u()});P($.current,$,!0);const oe=mr({},Th(w.value,k,null),{position:$.position+1},J);P(k,oe,!1),w.value=k}return{location:w,state:T,push:G,replace:s}}function T_(u){u=m_(u);const f=S_(u),g=E_(u,f.state,f.location,f.replace);function w(P,s=!0){s||g.pauseListeners(),history.go(P)}const T=mr({location:"",base:u,go:w,createHref:g_.bind(null,u)},f,g);return Object.defineProperty(T,"location",{enumerable:!0,get:()=>f.location.value}),Object.defineProperty(T,"state",{enumerable:!0,get:()=>f.state.value}),T}function A_(u){return typeof u=="string"||u&&typeof u=="object"}function Bf(u){return typeof u=="string"||typeof u=="symbol"}const Ia={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Of=Symbol("");var Ah;(function(u){u[u.aborted=4]="aborted",u[u.cancelled=8]="cancelled",u[u.duplicated=16]="duplicated"})(Ah||(Ah={}));function Ds(u,f){return mr(new Error,{type:u,[Of]:!0},f)}function ia(u,f){return u instanceof Error&&Of in u&&(f==null||!!(u.type&f))}const Ih="[^/]+?",I_={sensitive:!1,strict:!1,start:!0,end:!0},C_=/[.+*?^${}()[\]/\\]/g;function P_(u,f){const g=mr({},I_,f),w=[];let T=g.start?"^":"";const P=[];for(const J of u){const $=J.length?[]:[90];g.strict&&!J.length&&(T+="/");for(let oe=0;oe<J.length;oe++){const pe=J[oe];let Me=40+(g.sensitive?.25:0);if(pe.type===0)oe||(T+="/"),T+=pe.value.replace(C_,"\\$&"),Me+=40;else if(pe.type===1){const{value:rt,repeatable:$e,optional:gt,regexp:je}=pe;P.push({name:rt,repeatable:$e,optional:gt});const yt=je||Ih;if(yt!==Ih){Me+=10;try{new RegExp(`(${yt})`)}catch(ft){throw new Error(`Invalid custom RegExp for param "${rt}" (${yt}): `+ft.message)}}let Mt=$e?`((?:${yt})(?:/(?:${yt}))*)`:`(${yt})`;oe||(Mt=gt&&J.length<2?`(?:/${Mt})`:"/"+Mt),gt&&(Mt+="?"),T+=Mt,Me+=20,gt&&(Me+=-8),$e&&(Me+=-20),yt===".*"&&(Me+=-50)}$.push(Me)}w.push($)}if(g.strict&&g.end){const J=w.length-1;w[J][w[J].length-1]+=.7000000000000001}g.strict||(T+="/?"),g.end?T+="$":g.strict&&(T+="(?:/|$)");const s=new RegExp(T,g.sensitive?"":"i");function G(J){const $=J.match(s),oe={};if(!$)return null;for(let pe=1;pe<$.length;pe++){const Me=$[pe]||"",rt=P[pe-1];oe[rt.name]=Me&&rt.repeatable?Me.split("/"):Me}return oe}function k(J){let $="",oe=!1;for(const pe of u){(!oe||!$.endsWith("/"))&&($+="/"),oe=!1;for(const Me of pe)if(Me.type===0)$+=Me.value;else if(Me.type===1){const{value:rt,repeatable:$e,optional:gt}=Me,je=rt in J?J[rt]:"";if(So(je)&&!$e)throw new Error(`Provided param "${rt}" is an array but it is not repeatable (* or + modifiers)`);const yt=So(je)?je.join("/"):je;if(!yt)if(gt)pe.length<2&&($.endsWith("/")?$=$.slice(0,-1):oe=!0);else throw new Error(`Missing required param "${rt}"`);$+=yt}}return $||"/"}return{re:s,score:w,keys:P,parse:G,stringify:k}}function z_(u,f){let g=0;for(;g<u.length&&g<f.length;){const w=f[g]-u[g];if(w)return w;g++}return u.length<f.length?u.length===1&&u[0]===40+40?-1:1:u.length>f.length?f.length===1&&f[0]===40+40?1:-1:0}function k_(u,f){let g=0;const w=u.score,T=f.score;for(;g<w.length&&g<T.length;){const P=z_(w[g],T[g]);if(P)return P;g++}if(Math.abs(T.length-w.length)===1){if(Ch(w))return 1;if(Ch(T))return-1}return T.length-w.length}function Ch(u){const f=u[u.length-1];return u.length>0&&f[f.length-1]<0}const M_={type:0,value:""},L_=/[a-zA-Z0-9_]/;function R_(u){if(!u)return[[]];if(u==="/")return[[M_]];if(!u.startsWith("/"))throw new Error(`Invalid path "${u}"`);function f(Me){throw new Error(`ERR (${g})/"${J}": ${Me}`)}let g=0,w=g;const T=[];let P;function s(){P&&T.push(P),P=[]}let G=0,k,J="",$="";function oe(){J&&(g===0?P.push({type:0,value:J}):g===1||g===2||g===3?(P.length>1&&(k==="*"||k==="+")&&f(`A repeatable param (${J}) must be alone in its segment. eg: '/:ids+.`),P.push({type:1,value:J,regexp:$,repeatable:k==="*"||k==="+",optional:k==="*"||k==="?"})):f("Invalid state to consume buffer"),J="")}function pe(){J+=k}for(;G<u.length;){if(k=u[G++],k==="\\"&&g!==2){w=g,g=4;continue}switch(g){case 0:k==="/"?(J&&oe(),s()):k===":"?(oe(),g=1):pe();break;case 4:pe(),g=w;break;case 1:k==="("?g=2:L_.test(k)?pe():(oe(),g=0,k!=="*"&&k!=="?"&&k!=="+"&&G--);break;case 2:k===")"?$[$.length-1]=="\\"?$=$.slice(0,-1)+k:g=3:$+=k;break;case 3:oe(),g=0,k!=="*"&&k!=="?"&&k!=="+"&&G--,$="";break;default:f("Unknown state");break}}return g===2&&f(`Unfinished custom RegExp for param "${J}"`),oe(),s(),T}function D_(u,f,g){const w=P_(R_(u.path),g),T=mr(w,{record:u,parent:f,children:[],alias:[]});return f&&!T.record.aliasOf==!f.record.aliasOf&&f.children.push(T),T}function B_(u,f){const g=[],w=new Map;f=kh({strict:!1,end:!0,sensitive:!1},f);function T($){return w.get($)}function P($,oe,pe){const Me=!pe,rt=O_($);rt.aliasOf=pe&&pe.record;const $e=kh(f,$),gt=[rt];if("alias"in $){const Mt=typeof $.alias=="string"?[$.alias]:$.alias;for(const ft of Mt)gt.push(mr({},rt,{components:pe?pe.record.components:rt.components,path:ft,aliasOf:pe?pe.record:rt}))}let je,yt;for(const Mt of gt){const{path:ft}=Mt;if(oe&&ft[0]!=="/"){const fr=oe.record.path,Mr=fr[fr.length-1]==="/"?"":"/";Mt.path=oe.record.path+(ft&&Mr+ft)}if(je=D_(Mt,oe,$e),pe?pe.alias.push(je):(yt=yt||je,yt!==je&&yt.alias.push(je),Me&&$.name&&!zh(je)&&s($.name)),rt.children){const fr=rt.children;for(let Mr=0;Mr<fr.length;Mr++)P(fr[Mr],je,pe&&pe.children[Mr])}pe=pe||je,(je.record.components&&Object.keys(je.record.components).length||je.record.name||je.record.redirect)&&k(je)}return yt?()=>{s(yt)}:fl}function s($){if(Bf($)){const oe=w.get($);oe&&(w.delete($),g.splice(g.indexOf(oe),1),oe.children.forEach(s),oe.alias.forEach(s))}else{const oe=g.indexOf($);oe>-1&&(g.splice(oe,1),$.record.name&&w.delete($.record.name),$.children.forEach(s),$.alias.forEach(s))}}function G(){return g}function k($){let oe=0;for(;oe<g.length&&k_($,g[oe])>=0&&($.record.path!==g[oe].record.path||!Ff($,g[oe]));)oe++;g.splice(oe,0,$),$.record.name&&!zh($)&&w.set($.record.name,$)}function J($,oe){let pe,Me={},rt,$e;if("name"in $&&$.name){if(pe=w.get($.name),!pe)throw Ds(1,{location:$});$e=pe.record.name,Me=mr(Ph(oe.params,pe.keys.filter(yt=>!yt.optional).map(yt=>yt.name)),$.params&&Ph($.params,pe.keys.map(yt=>yt.name))),rt=pe.stringify(Me)}else if("path"in $)rt=$.path,pe=g.find(yt=>yt.re.test(rt)),pe&&(Me=pe.parse(rt),$e=pe.record.name);else{if(pe=oe.name?w.get(oe.name):g.find(yt=>yt.re.test(oe.path)),!pe)throw Ds(1,{location:$,currentLocation:oe});$e=pe.record.name,Me=mr({},oe.params,$.params),rt=pe.stringify(Me)}const gt=[];let je=pe;for(;je;)gt.unshift(je.record),je=je.parent;return{name:$e,path:rt,params:Me,matched:gt,meta:U_(gt)}}return u.forEach($=>P($)),{addRoute:P,resolve:J,removeRoute:s,getRoutes:G,getRecordMatcher:T}}function Ph(u,f){const g={};for(const w of f)w in u&&(g[w]=u[w]);return g}function O_(u){return{path:u.path,redirect:u.redirect,name:u.name,meta:u.meta||{},aliasOf:void 0,beforeEnter:u.beforeEnter,props:F_(u),children:u.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in u?u.components||null:u.component&&{default:u.component}}}function F_(u){const f={},g=u.props||!1;if("component"in u)f.default=g;else for(const w in u.components)f[w]=typeof g=="object"?g[w]:g;return f}function zh(u){for(;u;){if(u.record.aliasOf)return!0;u=u.parent}return!1}function U_(u){return u.reduce((f,g)=>mr(f,g.meta),{})}function kh(u,f){const g={};for(const w in u)g[w]=w in f?f[w]:u[w];return g}function Ff(u,f){return f.children.some(g=>g===u||Ff(u,g))}const Uf=/#/g,V_=/&/g,N_=/\//g,j_=/=/g,q_=/\?/g,Vf=/\+/g,Z_=/%5B/g,G_=/%5D/g,Nf=/%5E/g,X_=/%60/g,jf=/%7B/g,H_=/%7C/g,qf=/%7D/g,W_=/%20/g;function Uc(u){return encodeURI(""+u).replace(H_,"|").replace(Z_,"[").replace(G_,"]")}function K_(u){return Uc(u).replace(jf,"{").replace(qf,"}").replace(Nf,"^")}function dc(u){return Uc(u).replace(Vf,"%2B").replace(W_,"+").replace(Uf,"%23").replace(V_,"%26").replace(X_,"`").replace(jf,"{").replace(qf,"}").replace(Nf,"^")}function Y_(u){return dc(u).replace(j_,"%3D")}function $_(u){return Uc(u).replace(Uf,"%23").replace(q_,"%3F")}function J_(u){return u==null?"":$_(u).replace(N_,"%2F")}function ou(u){try{return decodeURIComponent(""+u)}catch{}return""+u}function Q_(u){const f={};if(u===""||u==="?")return f;const w=(u[0]==="?"?u.slice(1):u).split("&");for(let T=0;T<w.length;++T){const P=w[T].replace(Vf," "),s=P.indexOf("="),G=ou(s<0?P:P.slice(0,s)),k=s<0?null:ou(P.slice(s+1));if(G in f){let J=f[G];So(J)||(J=f[G]=[J]),J.push(k)}else f[G]=k}return f}function Mh(u){let f="";for(let g in u){const w=u[g];if(g=Y_(g),w==null){w!==void 0&&(f+=(f.length?"&":"")+g);continue}(So(w)?w.map(P=>P&&dc(P)):[w&&dc(w)]).forEach(P=>{P!==void 0&&(f+=(f.length?"&":"")+g,P!=null&&(f+="="+P))})}return f}function ev(u){const f={};for(const g in u){const w=u[g];w!==void 0&&(f[g]=So(w)?w.map(T=>T==null?null:""+T):w==null?w:""+w)}return f}const tv=Symbol(""),Lh=Symbol(""),Vc=Symbol(""),Zf=Symbol(""),mc=Symbol("");function ll(){let u=[];function f(w){return u.push(w),()=>{const T=u.indexOf(w);T>-1&&u.splice(T,1)}}function g(){u=[]}return{add:f,list:()=>u.slice(),reset:g}}function Pa(u,f,g,w,T){const P=w&&(w.enterCallbacks[T]=w.enterCallbacks[T]||[]);return()=>new Promise((s,G)=>{const k=oe=>{oe===!1?G(Ds(4,{from:g,to:f})):oe instanceof Error?G(oe):A_(oe)?G(Ds(2,{from:f,to:oe})):(P&&w.enterCallbacks[T]===P&&typeof oe=="function"&&P.push(oe),s())},J=u.call(w&&w.instances[T],f,g,k);let $=Promise.resolve(J);u.length<3&&($=$.then(k)),$.catch(oe=>G(oe))})}function Qu(u,f,g,w){const T=[];for(const P of u)for(const s in P.components){let G=P.components[s];if(!(f!=="beforeRouteEnter"&&!P.instances[s]))if(rv(G)){const J=(G.__vccOpts||G)[f];J&&T.push(Pa(J,g,w,P,s))}else{let k=G();T.push(()=>k.then(J=>{if(!J)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${P.path}"`));const $=l_(J)?J.default:J;P.components[s]=$;const pe=($.__vccOpts||$)[f];return pe&&Pa(pe,g,w,P,s)()}))}}return T}function rv(u){return typeof u=="object"||"displayName"in u||"props"in u||"__vccOpts"in u}function Rh(u){const f=sa(Vc),g=sa(Zf),w=vo(()=>f.resolve(Is(u.to))),T=vo(()=>{const{matched:k}=w.value,{length:J}=k,$=k[J-1],oe=g.matched;if(!$||!oe.length)return-1;const pe=oe.findIndex(Rs.bind(null,$));if(pe>-1)return pe;const Me=Dh(k[J-2]);return J>1&&Dh($)===Me&&oe[oe.length-1].path!==Me?oe.findIndex(Rs.bind(null,k[J-2])):pe}),P=vo(()=>T.value>-1&&av(g.params,w.value.params)),s=vo(()=>T.value>-1&&T.value===g.matched.length-1&&Rf(g.params,w.value.params));function G(k={}){return ov(k)?f[Is(u.replace)?"replace":"push"](Is(u.to)).catch(fl):Promise.resolve()}return{route:w,href:vo(()=>w.value.href),isActive:P,isExactActive:s,navigate:G}}const nv=gf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Rh,setup(u,{slots:f}){const g=pu(Rh(u)),{options:w}=sa(Vc),T=vo(()=>({[Bh(u.activeClass,w.linkActiveClass,"router-link-active")]:g.isActive,[Bh(u.exactActiveClass,w.linkExactActiveClass,"router-link-exact-active")]:g.isExactActive}));return()=>{const P=f.default&&f.default(g);return u.custom?P:Lf("a",{"aria-current":g.isExactActive?u.ariaCurrentValue:null,href:g.href,onClick:g.navigate,class:T.value},P)}}}),iv=nv;function ov(u){if(!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)&&!u.defaultPrevented&&!(u.button!==void 0&&u.button!==0)){if(u.currentTarget&&u.currentTarget.getAttribute){const f=u.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(f))return}return u.preventDefault&&u.preventDefault(),!0}}function av(u,f){for(const g in f){const w=f[g],T=u[g];if(typeof w=="string"){if(w!==T)return!1}else if(!So(T)||T.length!==w.length||w.some((P,s)=>P!==T[s]))return!1}return!0}function Dh(u){return u?u.aliasOf?u.aliasOf.path:u.path:""}const Bh=(u,f,g)=>u??f??g,sv=gf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(u,{attrs:f,slots:g}){const w=sa(mc),T=vo(()=>u.route||w.value),P=sa(Lh,0),s=vo(()=>{let J=Is(P);const{matched:$}=T.value;let oe;for(;(oe=$[J])&&!oe.components;)J++;return J}),G=vo(()=>T.value.matched[s.value]);$l(Lh,vo(()=>s.value+1)),$l(tv,G),$l(mc,T);const k=ry();return Kl(()=>[k.value,G.value,u.name],([J,$,oe],[pe,Me,rt])=>{$&&($.instances[oe]=J,Me&&Me!==$&&J&&J===pe&&($.leaveGuards.size||($.leaveGuards=Me.leaveGuards),$.updateGuards.size||($.updateGuards=Me.updateGuards))),J&&$&&(!Me||!Rs($,Me)||!pe)&&($.enterCallbacks[oe]||[]).forEach($e=>$e(J))},{flush:"post"}),()=>{const J=T.value,$=u.name,oe=G.value,pe=oe&&oe.components[$];if(!pe)return Oh(g.default,{Component:pe,route:J});const Me=oe.props[$],rt=Me?Me===!0?J.params:typeof Me=="function"?Me(J):Me:null,gt=Lf(pe,mr({},rt,f,{onVnodeUnmounted:je=>{je.component.isUnmounted&&(oe.instances[$]=null)},ref:k}));return Oh(g.default,{Component:gt,route:J})||gt}}});function Oh(u,f){if(!u)return null;const g=u(f);return g.length===1?g[0]:g}const lv=sv;function uv(u){const f=B_(u.routes,u),g=u.parseQuery||Q_,w=u.stringifyQuery||Mh,T=u.history,P=ll(),s=ll(),G=ll(),k=ny(Ia);let J=Ia;ws&&u.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const $=$u.bind(null,Ee=>""+Ee),oe=$u.bind(null,J_),pe=$u.bind(null,ou);function Me(Ee,Ze){let ve,ut;return Bf(Ee)?(ve=f.getRecordMatcher(Ee),ut=Ze):ut=Ee,f.addRoute(ut,ve)}function rt(Ee){const Ze=f.getRecordMatcher(Ee);Ze&&f.removeRoute(Ze)}function $e(){return f.getRoutes().map(Ee=>Ee.record)}function gt(Ee){return!!f.getRecordMatcher(Ee)}function je(Ee,Ze){if(Ze=mr({},Ze||k.value),typeof Ee=="string"){const se=Ju(g,Ee,Ze.path),_e=f.resolve({path:se.path},Ze),we=T.createHref(se.fullPath);return mr(se,_e,{params:pe(_e.params),hash:ou(se.hash),redirectedFrom:void 0,href:we})}let ve;if("path"in Ee)ve=mr({},Ee,{path:Ju(g,Ee.path,Ze.path).path});else{const se=mr({},Ee.params);for(const _e in se)se[_e]==null&&delete se[_e];ve=mr({},Ee,{params:oe(se)}),Ze.params=oe(Ze.params)}const ut=f.resolve(ve,Ze),Ot=Ee.hash||"";ut.params=$(pe(ut.params));const W=p_(w,mr({},Ee,{hash:K_(Ot),path:ut.path})),Q=T.createHref(W);return mr({fullPath:W,hash:Ot,query:w===Mh?ev(Ee.query):Ee.query||{}},ut,{redirectedFrom:void 0,href:Q})}function yt(Ee){return typeof Ee=="string"?Ju(g,Ee,k.value.path):mr({},Ee)}function Mt(Ee,Ze){if(J!==Ee)return Ds(8,{from:Ze,to:Ee})}function ft(Ee){return Pr(Ee)}function fr(Ee){return ft(mr(yt(Ee),{replace:!0}))}function Mr(Ee){const Ze=Ee.matched[Ee.matched.length-1];if(Ze&&Ze.redirect){const{redirect:ve}=Ze;let ut=typeof ve=="function"?ve(Ee):ve;return typeof ut=="string"&&(ut=ut.includes("?")||ut.includes("#")?ut=yt(ut):{path:ut},ut.params={}),mr({query:Ee.query,hash:Ee.hash,params:"path"in ut?{}:Ee.params},ut)}}function Pr(Ee,Ze){const ve=J=je(Ee),ut=k.value,Ot=Ee.state,W=Ee.force,Q=Ee.replace===!0,se=Mr(ve);if(se)return Pr(mr(yt(se),{state:typeof se=="object"?mr({},Ot,se.state):Ot,force:W,replace:Q}),Ze||ve);const _e=ve;_e.redirectedFrom=Ze;let we;return!W&&h_(w,ut,ve)&&(we=Ds(16,{to:_e,from:ut}),qr(ut,ut,!0,!1)),(we?Promise.resolve(we):Lr(_e,ut)).catch(Ie=>ia(Ie)?ia(Ie,2)?Ie:Tr(Ie):Zt(Ie,_e,ut)).then(Ie=>{if(Ie){if(ia(Ie,2))return Pr(mr({replace:Q},yt(Ie.to),{state:typeof Ie.to=="object"?mr({},Ot,Ie.to.state):Ot,force:W}),Ze||_e)}else Ie=Nr(_e,ut,!0,Q,Ot);return En(_e,ut,Ie),Ie})}function en(Ee,Ze){const ve=Mt(Ee,Ze);return ve?Promise.reject(ve):Promise.resolve()}function Ci(Ee){const Ze=kn.values().next().value;return Ze&&typeof Ze.runWithContext=="function"?Ze.runWithContext(Ee):Ee()}function Lr(Ee,Ze){let ve;const[ut,Ot,W]=cv(Ee,Ze);ve=Qu(ut.reverse(),"beforeRouteLeave",Ee,Ze);for(const se of ut)se.leaveGuards.forEach(_e=>{ve.push(Pa(_e,Ee,Ze))});const Q=en.bind(null,Ee,Ze);return ve.push(Q),vr(ve).then(()=>{ve=[];for(const se of P.list())ve.push(Pa(se,Ee,Ze));return ve.push(Q),vr(ve)}).then(()=>{ve=Qu(Ot,"beforeRouteUpdate",Ee,Ze);for(const se of Ot)se.updateGuards.forEach(_e=>{ve.push(Pa(_e,Ee,Ze))});return ve.push(Q),vr(ve)}).then(()=>{ve=[];for(const se of W)if(se.beforeEnter)if(So(se.beforeEnter))for(const _e of se.beforeEnter)ve.push(Pa(_e,Ee,Ze));else ve.push(Pa(se.beforeEnter,Ee,Ze));return ve.push(Q),vr(ve)}).then(()=>(Ee.matched.forEach(se=>se.enterCallbacks={}),ve=Qu(W,"beforeRouteEnter",Ee,Ze),ve.push(Q),vr(ve))).then(()=>{ve=[];for(const se of s.list())ve.push(Pa(se,Ee,Ze));return ve.push(Q),vr(ve)}).catch(se=>ia(se,8)?se:Promise.reject(se))}function En(Ee,Ze,ve){G.list().forEach(ut=>Ci(()=>ut(Ee,Ze,ve)))}function Nr(Ee,Ze,ve,ut,Ot){const W=Mt(Ee,Ze);if(W)return W;const Q=Ze===Ia,se=ws?history.state:{};ve&&(ut||Q?T.replace(Ee.fullPath,mr({scroll:Q&&se&&se.scroll},Ot)):T.push(Ee.fullPath,Ot)),k.value=Ee,qr(Ee,Ze,ve,Q),Tr()}let dr;function Qn(){dr||(dr=T.listen((Ee,Ze,ve)=>{if(!tn.listening)return;const ut=je(Ee),Ot=Mr(ut);if(Ot){Pr(mr(Ot,{replace:!0}),ut).catch(fl);return}J=ut;const W=k.value;ws&&x_(Sh(W.fullPath,ve.delta),_u()),Lr(ut,W).catch(Q=>ia(Q,12)?Q:ia(Q,2)?(Pr(Q.to,ut).then(se=>{ia(se,20)&&!ve.delta&&ve.type===wl.pop&&T.go(-1,!1)}).catch(fl),Promise.reject()):(ve.delta&&T.go(-ve.delta,!1),Zt(Q,ut,W))).then(Q=>{Q=Q||Nr(ut,W,!1),Q&&(ve.delta&&!ia(Q,8)?T.go(-ve.delta,!1):ve.type===wl.pop&&ia(Q,20)&&T.go(-1,!1)),En(ut,W,Q)}).catch(fl)}))}let Pi=ll(),hr=ll(),qt;function Zt(Ee,Ze,ve){Tr(Ee);const ut=hr.list();return ut.length?ut.forEach(Ot=>Ot(Ee,Ze,ve)):console.error(Ee),Promise.reject(Ee)}function jr(){return qt&&k.value!==Ia?Promise.resolve():new Promise((Ee,Ze)=>{Pi.add([Ee,Ze])})}function Tr(Ee){return qt||(qt=!Ee,Qn(),Pi.list().forEach(([Ze,ve])=>Ee?ve(Ee):Ze()),Pi.reset()),Ee}function qr(Ee,Ze,ve,ut){const{scrollBehavior:Ot}=u;if(!ws||!Ot)return Promise.resolve();const W=!ve&&b_(Sh(Ee.fullPath,0))||(ut||!ve)&&history.state&&history.state.scroll||null;return cf().then(()=>Ot(Ee,Ze,W)).then(Q=>Q&&v_(Q)).catch(Q=>Zt(Q,Ee,Ze))}const Wt=Ee=>T.go(Ee);let fn;const kn=new Set,tn={currentRoute:k,listening:!0,addRoute:Me,removeRoute:rt,hasRoute:gt,getRoutes:$e,resolve:je,options:u,push:ft,replace:fr,go:Wt,back:()=>Wt(-1),forward:()=>Wt(1),beforeEach:P.add,beforeResolve:s.add,afterEach:G.add,onError:hr.add,isReady:jr,install(Ee){const Ze=this;Ee.component("RouterLink",iv),Ee.component("RouterView",lv),Ee.config.globalProperties.$router=Ze,Object.defineProperty(Ee.config.globalProperties,"$route",{enumerable:!0,get:()=>Is(k)}),ws&&!fn&&k.value===Ia&&(fn=!0,ft(T.location).catch(Ot=>{}));const ve={};for(const Ot in Ia)Object.defineProperty(ve,Ot,{get:()=>k.value[Ot],enumerable:!0});Ee.provide(Vc,Ze),Ee.provide(Zf,ef(ve)),Ee.provide(mc,k);const ut=Ee.unmount;kn.add(Ee),Ee.unmount=function(){kn.delete(Ee),kn.size<1&&(J=Ia,dr&&dr(),dr=null,k.value=Ia,fn=!1,qt=!1),ut()}}};function vr(Ee){return Ee.reduce((Ze,ve)=>Ze.then(()=>Ci(ve)),Promise.resolve())}return tn}function cv(u,f){const g=[],w=[],T=[],P=Math.max(f.matched.length,u.matched.length);for(let s=0;s<P;s++){const G=f.matched[s];G&&(u.matched.find(J=>Rs(J,G))?w.push(G):g.push(G));const k=u.matched[s];k&&(f.matched.find(J=>Rs(J,k))||T.push(k))}return[g,w,T]}const pv={props:{location:String,date:String,imageSrc:String}},hv={class:"travel-card"},fv=["src"],dv={class:"fadedbox"},mv={class:"titletext"};function yv(u,f,g,w,T,P){return El(),Sl("div",hv,[er("img",{src:g.imageSrc,alt:"Travel Image",width:"400",height:"250"},null,8,fv),er("div",dv,[er("div",mv,[er("h1",null,Gp(g.location),1),er("h2",null,Gp(g.date),1)])])])}const gv=Tl(pv,[["render",yv],["__scopeId","data-v-9f10d8b7"]]);var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vv(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Gf={exports:{}};(function(u,f){(function(g,w){u.exports=w()})(_v,function(){var g,w,T;function P(s,G){if(!g)g=G;else if(!w)w=G;else{var k="var sharedChunk = {}; ("+g+")(sharedChunk); ("+w+")(sharedChunk);",J={};g(J),T=G(J),T.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))}}return P(["exports"],function(s){function G(e,t){return e(t={exports:{}},t.exports),t.exports}var k=J;function J(e,t,r,a){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(a-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=a,this.p2x=r,this.p2y=a}J.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},J.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},J.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},J.prototype.solveCurveX=function(e,t){var r,a,c,p,d;for(t===void 0&&(t=1e-6),c=e,d=0;d<8;d++){if(p=this.sampleCurveX(c)-e,Math.abs(p)<t)return c;var _=this.sampleCurveDerivativeX(c);if(Math.abs(_)<1e-6)break;c-=p/_}if((c=e)<(r=0))return r;if(c>(a=1))return a;for(;r<a;){if(p=this.sampleCurveX(c),Math.abs(p-e)<t)return c;e>p?r=c:a=c,c=.5*(a-r)+r}return c},J.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var $=oe;function oe(e,t){this.x=e,this.y=t}function pe(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!pe(e[r],t[r]))return!1;return!0}if(typeof e=="object"&&e!==null&&t!==null){if(typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e)if(!pe(e[a],t[a]))return!1;return!0}return e===t}function Me(e,t,r,a){var c=new k(e,t,r,a);return function(p){return c.solve(p)}}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),a=t*this.x-r*this.y,c=r*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var r=Math.cos(e),a=Math.sin(e),c=t.x+r*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+r*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oe.convert=function(e){return e instanceof oe?e:Array.isArray(e)?new oe(e[0],e[1]):e};var rt=Me(.25,.1,.25,1);function $e(e,t,r){return Math.min(r,Math.max(t,e))}function gt(e,t,r){var a=r-t,c=((e-t)%a+a)%a+t;return c===t?r:c}function je(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var a=0,c=t;a<c.length;a+=1){var p=c[a];for(var d in p)e[d]=p[d]}return e}var yt=1;function Mt(){return yt++}function ft(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function fr(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Mr(e,t){e.forEach(function(r){t[r]&&(t[r]=t[r].bind(t))})}function Pr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function en(e,t,r){var a={};for(var c in e)a[c]=t.call(r||this,e[c],c,e);return a}function Ci(e,t,r){var a={};for(var c in e)t.call(r||this,e[c],c,e)&&(a[c]=e[c]);return a}function Lr(e){return Array.isArray(e)?e.map(Lr):typeof e=="object"&&e?en(e,Lr):e}var En={};function Nr(e){En[e]||(typeof console<"u"&&console.warn(e),En[e]=!0)}function dr(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function Qn(e){for(var t=0,r=0,a=e.length,c=a-1,p=void 0,d=void 0;r<a;c=r++)p=e[r],t+=((d=e[c]).x-p.x)*(p.y+d.y);return t}function Pi(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var hr,qt,Zt=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),jr=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Tr=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,qr={now:Zt,frame:function(e){var t=jr(e);return{cancel:function(){return Tr(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)},resolveURL:function(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},Wt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},fn={supported:!1,testSupport:function(e){kn||!qt||(tn?vr(e):hr=e)}},kn=!1,tn=!1;function vr(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,qt),e.isContextLost())return;fn.supported=!0}catch{}e.deleteTexture(t),kn=!0}self.document&&((qt=self.document.createElement("img")).onload=function(){hr&&vr(hr),hr=null,tn=!0},qt.onerror=function(){kn=!0,hr=null},qt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ee="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function Ze(e,t){var r=we(Wt.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,r.path!=="/"&&(e.path=""+r.path+e.path),!Wt.REQUIRE_ACCESS_TOKEN)return Ie(e);if(!(t=t||Wt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Ee);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Ee);return e.params.push("access_token="+t),Ie(e)}function ve(e){return e.indexOf("mapbox:")===0}var ut=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ot(e){return ut.test(e)}var W=/(\.(png|jpg)\d*)(?=$)/,Q=/\.[\w]+$/,se=function(e){var t=we(e);if(!t.path.match(/(^\/v4\/)/)||!t.path.match(Q))return e;var r="mapbox://tiles/";r+=t.path.replace("/v4/","");var a=t.params.filter(function(c){return!c.match(/^access_token=/)});return a.length&&(r+="?"+a.join("&")),r},_e=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function we(e){var t=e.match(_e);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ie(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Ge(e){if(!e)return null;var t,r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse((t=r[1],decodeURIComponent(self.atob(t).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var Le=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Le.prototype.getStorageKey=function(e){var t,r=Ge(Wt.ACCESS_TOKEN),a="";return r&&r.u?(t=r.u,a=self.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(c,p){return String.fromCharCode(+("0x"+p))}))):a=Wt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+a:"mapbox.eventData:"+a},Le.prototype.fetchEventData=function(){var e=Pi("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{var a=self.localStorage.getItem(t);a&&(this.eventData=JSON.parse(a));var c=self.localStorage.getItem(r);c&&(this.anonId=c)}catch{Nr("Unable to read from LocalStorage")}},Le.prototype.saveEventData=function(){var e=Pi("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Nr("Unable to write to LocalStorage")}},Le.prototype.processRequests=function(){},Le.prototype.postEvent=function(e,t,r){var a=this;if(Wt.EVENTS_URL){var c=we(Wt.EVENTS_URL);c.params.push("access_token="+(Wt.ACCESS_TOKEN||""));var p={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},d=t?je(p,t):p,_={url:Ie(c),headers:{"Content-Type":"text/plain"},body:JSON.stringify([d])};this.pendingRequest=Fi(_,function(b){a.pendingRequest=null,r(b),a.saveEventData(),a.processRequests()})}},Le.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()};var qe=function(e){function t(){e.call(this,"map.load"),this.success={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postMapLoadEvent=function(r,a){Wt.EVENTS_URL&&Wt.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(c){return ve(c)||Ot(c)})&&this.queueRequest({id:a,timestamp:Date.now()})},t.prototype.processRequests=function(){var r=this;if(!this.pendingRequest&&this.queue.length!==0){var a=this.queue.shift(),c=a.id,p=a.timestamp;c&&this.success[c]||(this.anonId||this.fetchEventData(),fr(this.anonId)||(this.anonId=ft()),this.postEvent(p,{},function(d){d||c&&(r.success[c]=!0)}))}},t}(Le),Ce=new(function(e){function t(){e.call(this,"appUserTurnstile")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postTurnstileEvent=function(r){Wt.EVENTS_URL&&Wt.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(a){return ve(a)||Ot(a)})&&this.queueRequest(Date.now())},t.prototype.processRequests=function(){var r=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var a=Ge(Wt.ACCESS_TOKEN),c=a?a.u:Wt.ACCESS_TOKEN,p=c!==this.eventData.tokenU;fr(this.anonId)||(this.anonId=ft(),p=!0);var d=this.queue.shift();if(this.eventData.lastSuccess){var _=new Date(this.eventData.lastSuccess),b=new Date(d),A=(d-this.eventData.lastSuccess)/864e5;p=p||A>=1||A<-1||_.getDate()!==b.getDate()}else p=!0;if(!p)return this.processRequests();this.postEvent(d,{"enabled.telemetry":!1},function(z){z||(r.eventData.lastSuccess=d,r.eventData.tokenU=c)})}},t}(Le)),ct=Ce.postTurnstileEvent.bind(Ce),Je=new qe,pt=Je.postMapLoadEvent.bind(Je),_t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(_t);var zt=function(e){function t(r,a,c){a===401&&Ot(c)&&(r+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,r),this.status=a,this.url=c,this.name=this.constructor.name,this.message=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error);function nr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}var Yt=nr()?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&e!=="null"&&e!=="file://")return e+self.location.pathname},sr=function(e,t){if(!/^file:/.test(e.url)){if(self.fetch&&self.Request&&self.AbortController)return function(r,a){var c=new self.AbortController,p=new self.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Yt(),signal:c.signal});return r.type==="json"&&p.headers.set("Accept","application/json"),self.fetch(p).then(function(d){d.ok?d[r.type||"text"]().then(function(_){a(null,_,d.headers.get("Cache-Control"),d.headers.get("Expires"))}).catch(function(_){return a(new Error(_.message))}):a(new zt(d.statusText,d.status,r.url))}).catch(function(d){d.code!==20&&a(new Error(d.message))}),{cancel:function(){return c.abort()}}}(e,t);if(nr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t)}return function(r,a){var c=new self.XMLHttpRequest;for(var p in c.open(r.method||"GET",r.url,!0),r.type==="arrayBuffer"&&(c.responseType="arraybuffer"),r.headers)c.setRequestHeader(p,r.headers[p]);return r.type==="json"&&c.setRequestHeader("Accept","application/json"),c.withCredentials=r.credentials==="include",c.onerror=function(){a(new Error(c.statusText))},c.onload=function(){if((c.status>=200&&c.status<300||c.status===0)&&c.response!==null){var d=c.response;if(r.type==="json")try{d=JSON.parse(c.response)}catch(_){return a(_)}a(null,d,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"))}else a(new zt(c.statusText,c.status,r.url))},c.send(r.body),{cancel:function(){return c.abort()}}}(e,t)},dn=function(e,t){return sr(je(e,{type:"arrayBuffer"}),t)},Fi=function(e,t){return sr(je(e,{method:"POST"}),t)},Qi,Mn;Qi=[],Mn=0;var zi=function(e,t){if(Mn>=Wt.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Qi.push(r),r}Mn++;var a=!1,c=function(){if(!a)for(a=!0,Mn--;Qi.length&&Mn<Wt.MAX_PARALLEL_IMAGE_REQUESTS;){var d=Qi.shift(),_=d.requestParameters,b=d.callback;d.cancelled||(d.cancel=zi(_,b).cancel)}},p=dn(e,function(d,_,b,A){if(c(),d)t(d);else if(_){var z=new self.Image,R=self.URL||self.webkitURL;z.onload=function(){t(null,z),R.revokeObjectURL(z.src)},z.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var N=new self.Blob([new Uint8Array(_)],{type:"image/png"});z.cacheControl=b,z.expires=A,z.src=_.byteLength?R.createObjectURL(N):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){p.cancel(),c()}}};function Zr(e,t,r){r[e]&&r[e].indexOf(t)!==-1||(r[e]=r[e]||[],r[e].push(t))}function mn(e,t,r){if(r&&r[e]){var a=r[e].indexOf(t);a!==-1&&r[e].splice(a,1)}}var eo=function(e,t){t===void 0&&(t={}),je(this,t),this.type=e},La=function(e){function t(r,a){a===void 0&&(a={}),e.call(this,"error",je({error:r},a))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(eo),Zn=function(){};Zn.prototype.on=function(e,t){return this._listeners=this._listeners||{},Zr(e,t,this._listeners),this},Zn.prototype.off=function(e,t){return mn(e,t,this._listeners),mn(e,t,this._oneTimeListeners),this},Zn.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Zr(e,t,this._oneTimeListeners),this},Zn.prototype.fire=function(e,t){typeof e=="string"&&(e=new eo(e,t||{}));var r=e.type;if(this.listens(r)){e.target=this;for(var a=0,c=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];a<c.length;a+=1)c[a].call(this,e);for(var p=0,d=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];p<d.length;p+=1){var _=d[p];mn(r,_,this._oneTimeListeners),_.call(this,e)}var b=this._eventedParent;b&&(je(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(e))}else e instanceof La&&console.error(e.error);return this},Zn.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Zn.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Oe=function(e,t,r,a){this.message=(e?e+": ":"")+r,a&&(this.identifier=a),t!=null&&t.__line__&&(this.line=t.__line__)};function ns(e){var t=e.key,r=e.value;return r?[new Oe(t,r,"constants have been deprecated as of v8")]:[]}function To(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var a=0,c=t;a<c.length;a+=1){var p=c[a];for(var d in p)e[d]=p[d]}return e}function xr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ft(e){return Array.isArray(e)?e.map(Ft):xr(e)}var ir=function(e){function t(r,a){e.call(this,a),this.message=a,this.key=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),br=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var r=0,a=t;r<a.length;r+=1){var c=a[r],p=c[0],d=c[1];this.bindings[p]=d}};br.prototype.concat=function(e){return new br(this,e)},br.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},br.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var tr={kind:"null"},Be={kind:"number"},It={kind:"string"},kt={kind:"boolean"},Ln={kind:"color"},Ui={kind:"object"},Et={kind:"value"},to={kind:"collator"},Ao={kind:"formatted"};function Rn(e,t){return{kind:"array",itemType:e,N:t}}function Gr(e){if(e.kind==="array"){var t=Gr(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var $t=[tr,Be,It,kt,Ln,Ao,Ui,Rn(Et)];function Sn(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Sn(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var r=0,a=$t;r<a.length;r+=1)if(!Sn(a[r],t))return null}}return"Expected "+Gr(e)+" but found "+Gr(t)+" instead."}var Ra=G(function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(b){return(b=Math.round(b))<0?0:b>255?255:b}function c(b){return b<0?0:b>1?1:b}function p(b){return b[b.length-1]==="%"?a(parseFloat(b)/100*255):a(parseInt(b))}function d(b){return b[b.length-1]==="%"?c(parseFloat(b)/100):c(parseFloat(b))}function _(b,A,z){return z<0?z+=1:z>1&&(z-=1),6*z<1?b+(A-b)*z*6:2*z<1?A:3*z<2?b+(A-b)*(2/3-z)*6:b}try{t.parseCSSColor=function(b){var A,z=b.replace(/ /g,"").toLowerCase();if(z in r)return r[z].slice();if(z[0]==="#")return z.length===4?(A=parseInt(z.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:z.length===7&&(A=parseInt(z.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var R=z.indexOf("("),N=z.indexOf(")");if(R!==-1&&N+1===z.length){var U=z.substr(0,R),j=z.substr(R+1,N-(R+1)).split(","),ee=1;switch(U){case"rgba":if(j.length!==4)return null;ee=d(j.pop());case"rgb":return j.length!==3?null:[p(j[0]),p(j[1]),p(j[2]),ee];case"hsla":if(j.length!==4)return null;ee=d(j.pop());case"hsl":if(j.length!==3)return null;var re=(parseFloat(j[0])%360+360)%360/360,he=d(j[1]),ye=d(j[2]),fe=ye<=.5?ye*(he+1):ye+he-ye*he,xe=2*ye-fe;return[a(255*_(xe,fe,re+1/3)),a(255*_(xe,fe,re)),a(255*_(xe,fe,re-1/3)),ee];default:return null}}return null}}catch{}}).parseCSSColor,Gt=function(e,t,r,a){a===void 0&&(a=1),this.r=e,this.g=t,this.b=r,this.a=a};Gt.parse=function(e){if(e){if(e instanceof Gt)return e;if(typeof e=="string"){var t=Ra(e);if(t)return new Gt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Gt.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],a=e[2],c=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(a)+","+c+")"},Gt.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,a=this.a;return a===0?[0,0,0,0]:[255*e/a,255*t/a,255*r/a,a]},Gt.black=new Gt(0,0,0,1),Gt.white=new Gt(1,1,1,1),Gt.transparent=new Gt(0,0,0,0),Gt.red=new Gt(1,0,0,1);var Io=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Io.prototype.compare=function(e,t){return this.collator.compare(e,t)},Io.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ro=function(e,t,r){this.text=e,this.scale=t,this.fontStack=r},rn=function(e){this.sections=e};function Da(e,t,r,a){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:"Invalid rgba value ["+[e,t,r,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof a=="number"?[e,t,r,a]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Dn(e){if(e===null)return tr;if(typeof e=="string")return It;if(typeof e=="boolean")return kt;if(typeof e=="number")return Be;if(e instanceof Gt)return Ln;if(e instanceof Io)return to;if(e instanceof rn)return Ao;if(Array.isArray(e)){for(var t,r=e.length,a=0,c=e;a<c.length;a+=1){var p=Dn(c[a]);if(t){if(t===p)continue;t=Et;break}t=p}return Rn(t||Et,r)}return Ui}function wr(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Gt||e instanceof rn?e.toString():JSON.stringify(e)}rn.fromString=function(e){return new rn([new ro(e,null,null)])},rn.prototype.toString=function(){return this.sections.map(function(e){return e.text}).join("")},rn.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var a=r[t];e.push(a.text);var c={};a.fontStack&&(c["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(c["font-scale"]=a.scale),e.push(c)}return e};var Gn=function(e,t){this.type=e,this.value=t};Gn.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function p(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Gt||d instanceof Io||d instanceof rn)return!0;if(Array.isArray(d)){for(var _=0,b=d;_<b.length;_+=1)if(!p(b[_]))return!1;return!0}if(typeof d=="object"){for(var A in d)if(!p(d[A]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var r=e[1],a=Dn(r),c=t.expectedType;return a.kind!=="array"||a.N!==0||!c||c.kind!=="array"||typeof c.N=="number"&&c.N!==0||(a=c),new Gn(a,r)},Gn.prototype.evaluate=function(){return this.value},Gn.prototype.eachChild=function(){},Gn.prototype.possibleOutputs=function(){return[this.value]},Gn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Gt?["rgba"].concat(this.value.toArray()):this.value instanceof rn?this.value.serialize():this.value};var nn=function(e){this.name="ExpressionEvaluationError",this.message=e};nn.prototype.toJSON=function(){return this.message};var ca={string:It,number:Be,boolean:kt,object:Ui},Ar=function(e,t){this.type=e,this.args=t};Ar.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,a=1,c=e[0];if(c==="array"){var p,d;if(e.length>2){var _=e[1];if(typeof _!="string"||!(_ in ca)||_==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);p=ca[_],a++}else p=Et;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],a++}r=Rn(p,d)}else r=ca[c];for(var b=[];a<e.length;a++){var A=t.parse(e[a],a,Et);if(!A)return null;b.push(A)}return new Ar(r,b)},Ar.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!Sn(this.type,Dn(r)))return r;if(t===this.args.length-1)throw new nn("Expected value to be of type "+Gr(this.type)+", but found "+Gr(Dn(r))+" instead.")}return null},Ar.prototype.eachChild=function(e){this.args.forEach(e)},Ar.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(t){return t.possibleOutputs()}))},Ar.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);var a=e.N;(typeof a=="number"||this.args.length>1)&&t.push(a)}}return t.concat(this.args.map(function(c){return c.serialize()}))};var Vi=function(e){this.type=Ao,this.sections=e};Vi.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var r=[],a=1;a<e.length-1;a+=2){var c=t.parse(e[a],1,Et);if(!c)return null;var p=c.type.kind;if(p!=="string"&&p!=="value"&&p!=="null")return t.error("Formatted text type must be 'string', 'value', or 'null'.");var d=e[a+1];if(typeof d!="object"||Array.isArray(d))return t.error("Format options argument must be an object.");var _=null;if(d["font-scale"]&&!(_=t.parse(d["font-scale"],1,Be)))return null;var b=null;if(d["text-font"]&&!(b=t.parse(d["text-font"],1,Rn(It))))return null;r.push({text:c,scale:_,font:b})}return new Vi(r)},Vi.prototype.evaluate=function(e){return new rn(this.sections.map(function(t){return new ro(wr(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)}))},Vi.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var a=r[t];e(a.text),a.scale&&e(a.scale),a.font&&e(a.font)}},Vi.prototype.possibleOutputs=function(){return[void 0]},Vi.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var a=r[t];e.push(a.text.serialize());var c={};a.scale&&(c["font-scale"]=a.scale.serialize()),a.font&&(c["text-font"]=a.font.serialize()),e.push(c)}return e};var Ba={"to-boolean":kt,"to-color":Ln,"to-number":Be,"to-string":It},on=function(e,t){this.type=e,this.args=t};on.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var a=Ba[r],c=[],p=1;p<e.length;p++){var d=t.parse(e[p],p,Et);if(!d)return null;c.push(d)}return new on(a,c)},on.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,r,a=0,c=this.args;a<c.length;a+=1){if(r=null,(t=c[a].evaluate(e))instanceof Gt)return t;if(typeof t=="string"){var p=e.parseColor(t);if(p)return p}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Da(t[0],t[1],t[2],t[3])))return new Gt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new nn(r||"Could not parse color from value '"+(typeof t=="string"?t:JSON.stringify(t))+"'")}if(this.type.kind==="number"){for(var d=null,_=0,b=this.args;_<b.length;_+=1){if((d=b[_].evaluate(e))===null)return 0;var A=Number(d);if(!isNaN(A))return A}throw new nn("Could not convert "+JSON.stringify(d)+" to number.")}return this.type.kind==="formatted"?rn.fromString(wr(this.args[0].evaluate(e))):wr(this.args[0].evaluate(e))},on.prototype.eachChild=function(e){this.args.forEach(e)},on.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(t){return t.possibleOutputs()}))},on.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vi([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var pa=["Unknown","Point","LineString","Polygon"],no=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};no.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},no.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?pa[this.feature.type]:this.feature.type:null},no.prototype.properties=function(){return this.feature&&this.feature.properties||{}},no.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Gt.parse(e)),t};var Xr=function(e,t,r,a){this.name=e,this.type=t,this._evaluate=r,this.args=a};Xr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Xr.prototype.eachChild=function(e){this.args.forEach(e)},Xr.prototype.possibleOutputs=function(){return[void 0]},Xr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Xr.parse=function(e,t){var r,a=e[0],c=Xr.definitions[a];if(!c)return t.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var p=Array.isArray(c)?c[0]:c.type,d=Array.isArray(c)?[[c[1],c[2]]]:c.overloads,_=d.filter(function(Dt){var At=Dt[0];return!Array.isArray(At)||At.length===e.length-1}),b=null,A=0,z=_;A<z.length;A+=1){var R=z[A],N=R[0],U=R[1];b=new B(t.registry,t.path,null,t.scope);for(var j=[],ee=!1,re=1;re<e.length;re++){var he=e[re],ye=Array.isArray(N)?N[re-1]:N.type,fe=b.parse(he,1+j.length,ye);if(!fe){ee=!0;break}j.push(fe)}if(!ee)if(Array.isArray(N)&&N.length!==j.length)b.error("Expected "+N.length+" arguments, but found "+j.length+" instead.");else{for(var xe=0;xe<j.length;xe++){var ze=Array.isArray(N)?N[xe]:N.type,Re=j[xe];b.concat(xe+1).checkSubtype(ze,Re.type)}if(b.errors.length===0)return new Xr(a,p,U,j)}}if(_.length===1)(r=t.errors).push.apply(r,b.errors);else{for(var Fe=(_.length?_:d).map(function(Dt){var At,or=Dt[0];return At=or,Array.isArray(At)?"("+At.map(Gr).join(", ")+")":"("+Gr(At.type)+"...)"}).join(" | "),Ne=[],st=1;st<e.length;st++){var lt=t.parse(e[st],1+Ne.length);if(!lt)return null;Ne.push(Gr(lt.type))}t.error("Expected arguments of type "+Fe+", but found ("+Ne.join(", ")+") instead.")}return null},Xr.register=function(e,t){for(var r in Xr.definitions=t,t)e[r]=Xr};var lr=function(e,t,r){this.type=to,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};function x(e){if(e instanceof Xr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name)))return!1;var t=!0;return e.eachChild(function(r){t&&!x(r)&&(t=!1)}),t}function E(e){if(e instanceof Xr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(r){t&&!E(r)&&(t=!1)}),t}function I(e,t){if(e instanceof Xr&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(a){r&&!I(a,t)&&(r=!1)}),r}lr.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");var a=t.parse(r["case-sensitive"]!==void 0&&r["case-sensitive"],1,kt);if(!a)return null;var c=t.parse(r["diacritic-sensitive"]!==void 0&&r["diacritic-sensitive"],1,kt);if(!c)return null;var p=null;return r.locale&&!(p=t.parse(r.locale,1,It))?null:new lr(a,c,p)},lr.prototype.evaluate=function(e){return new Io(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},lr.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},lr.prototype.possibleOutputs=function(){return[void 0]},lr.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var M=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};M.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new M(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},M.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},M.prototype.eachChild=function(){},M.prototype.possibleOutputs=function(){return[void 0]},M.prototype.serialize=function(){return["var",this.name]};var B=function(e,t,r,a,c){t===void 0&&(t=[]),a===void 0&&(a=new br),c===void 0&&(c=[]),this.registry=e,this.path=t,this.key=t.map(function(p){return"["+p+"]"}).join(""),this.scope=a,this.errors=c,this.expectedType=r};function D(e,t){for(var r,a,c=0,p=e.length-1,d=0;c<=p;){if(r=e[d=Math.floor((c+p)/2)],a=e[d+1],t===r||t>r&&t<a)return d;if(r<t)c=d+1;else{if(!(r>t))throw new nn("Input is not a number.");p=d-1}}return Math.max(d-1,0)}B.prototype.parse=function(e,t,r,a,c){return c===void 0&&(c={}),t?this.concat(t,r,a)._parse(e,c):this._parse(e,c)},B.prototype._parse=function(e,t){function r(A,z,R){return R==="assert"?new Ar(z,[A]):R==="coerce"?new on(z,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=e[0];if(typeof a!="string")return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var c=this.registry[a];if(c){var p=c.parse(e,this);if(!p)return null;if(this.expectedType){var d=this.expectedType,_=p.type;if(d.kind!=="string"&&d.kind!=="number"&&d.kind!=="boolean"&&d.kind!=="object"&&d.kind!=="array"||_.kind!=="value")if(d.kind!=="color"&&d.kind!=="formatted"||_.kind!=="value"&&_.kind!=="string"){if(this.checkSubtype(d,_))return null}else p=r(p,d,t.typeAnnotation||"coerce");else p=r(p,d,t.typeAnnotation||"assert")}if(!(p instanceof Gn)&&function A(z){if(z instanceof M)return A(z.boundExpression);if(z instanceof Xr&&z.name==="error"||z instanceof lr)return!1;var R=z instanceof on||z instanceof Ar,N=!0;return z.eachChild(function(U){N=R?N&&A(U):N&&U instanceof Gn}),N?x(z)&&I(z,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}(p)){var b=new no;try{p=new Gn(p.type,p.evaluate(b))}catch(A){return this.error(A.message),null}}return p}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return e===void 0?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},B.prototype.concat=function(e,t,r){var a=typeof e=="number"?this.path.concat(e):this.path,c=r?this.scope.concat(r):this.scope;return new B(this.registry,a,t||null,c,this.errors)},B.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var a=""+this.key+t.map(function(c){return"["+c+"]"}).join("");this.errors.push(new ir(a,e))},B.prototype.checkSubtype=function(e,t){var r=Sn(e,t);return r&&this.error(r),r};var Z=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var a=0,c=r;a<c.length;a+=1){var p=c[a],d=p[0],_=p[1];this.labels.push(d),this.outputs.push(_)}};function F(e,t,r){return e*(1-r)+t*r}Z.parse=function(e,t){var r=e[1],a=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,1,Be)))return null;var c=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType),a.unshift(-1/0);for(var d=0;d<a.length;d+=2){var _=a[d],b=a[d+1],A=d+1,z=d+2;if(typeof _!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(c.length&&c[c.length-1][0]>=_)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var R=t.parse(b,z,p);if(!R)return null;p=p||R.type,c.push([_,R])}return new Z(p,r,c)},Z.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);var a=this.input.evaluate(e);if(a<=t[0])return r[0].evaluate(e);var c=t.length;return a>=t[c-1]?r[c-1].evaluate(e):r[D(t,a)].evaluate(e)},Z.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},Z.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(t){return t.possibleOutputs()}))},Z.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var H=Object.freeze({number:F,color:function(e,t,r){return new Gt(F(e.r,t.r,r),F(e.g,t.g,r),F(e.b,t.b,r),F(e.a,t.a,r))},array:function(e,t,r){return e.map(function(a,c){return F(a,t[c],r)})}}),q=.95047,ue=1,de=1.08883,ne=4/29,me=6/29,Te=3*me*me,Ue=me*me*me,Pe=Math.PI/180,Ve=180/Math.PI;function Ke(e){return e>Ue?Math.pow(e,1/3):e/Te+ne}function Xe(e){return e>me?e*e*e:Te*(e-ne)}function Ye(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function He(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=He(e.r),r=He(e.g),a=He(e.b),c=Ke((.4124564*t+.3575761*r+.1804375*a)/q),p=Ke((.2126729*t+.7151522*r+.072175*a)/ue);return{l:116*p-16,a:500*(c-p),b:200*(p-Ke((.0193339*t+.119192*r+.9503041*a)/de)),alpha:e.a}}function dt(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,a=isNaN(e.b)?t:t-e.b/200;return t=ue*Xe(t),r=q*Xe(r),a=de*Xe(a),new Gt(Ye(3.2404542*r-1.5371385*t-.4985314*a),Ye(-.969266*r+1.8760108*t+.041556*a),Ye(.0556434*r-.2040259*t+1.0572252*a),e.alpha)}function St(e,t,r){var a=t-e;return e+r*(a>180||a<-180?a-360*Math.round(a/360):a)}var Lt={forward:ht,reverse:dt,interpolate:function(e,t,r){return{l:F(e.l,t.l,r),a:F(e.a,t.a,r),b:F(e.b,t.b,r),alpha:F(e.alpha,t.alpha,r)}}},xt={forward:function(e){var t=ht(e),r=t.l,a=t.a,c=t.b,p=Math.atan2(c,a)*Ve;return{h:p<0?p+360:p,c:Math.sqrt(a*a+c*c),l:r,alpha:e.a}},reverse:function(e){var t=e.h*Pe,r=e.c;return dt({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:St(e.h,t.h,r),c:F(e.c,t.c,r),l:F(e.l,t.l,r),alpha:F(e.alpha,t.alpha,r)}}},Kt=Object.freeze({lab:Lt,hcl:xt}),Qe=function(e,t,r,a,c){this.type=e,this.operator=t,this.interpolation=r,this.input=a,this.labels=[],this.outputs=[];for(var p=0,d=c;p<d.length;p+=1){var _=d[p],b=_[0],A=_[1];this.labels.push(b),this.outputs.push(A)}};function Rt(e,t,r,a){var c=a-r,p=e-r;return c===0?0:t===1?p/c:(Math.pow(t,p)-1)/(Math.pow(t,c)-1)}Qe.interpolationFactor=function(e,t,r,a){var c=0;if(e.name==="exponential")c=Rt(t,e.base,r,a);else if(e.name==="linear")c=Rt(t,1,r,a);else if(e.name==="cubic-bezier"){var p=e.controlPoints;c=new k(p[0],p[1],p[2],p[3]).solve(Rt(t,1,r,a))}return c},Qe.parse=function(e,t){var r=e[0],a=e[1],c=e[2],p=e.slice(3);if(!Array.isArray(a)||a.length===0)return t.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){var d=a[1];if(typeof d!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:d}}else{if(a[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(a[0]),1,0);var _=a.slice(1);if(_.length!==4||_.some(function(re){return typeof re!="number"||re<0||re>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:_}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(c=t.parse(c,2,Be)))return null;var b=[],A=null;r==="interpolate-hcl"||r==="interpolate-lab"?A=Ln:t.expectedType&&t.expectedType.kind!=="value"&&(A=t.expectedType);for(var z=0;z<p.length;z+=2){var R=p[z],N=p[z+1],U=z+3,j=z+4;if(typeof R!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(b.length&&b[b.length-1][0]>=R)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);var ee=t.parse(N,j,A);if(!ee)return null;A=A||ee.type,b.push([R,ee])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Qe(A,r,a,c,b):t.error("Type "+Gr(A)+" is not interpolatable.")},Qe.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);var a=this.input.evaluate(e);if(a<=t[0])return r[0].evaluate(e);var c=t.length;if(a>=t[c-1])return r[c-1].evaluate(e);var p=D(t,a),d=t[p],_=t[p+1],b=Qe.interpolationFactor(this.interpolation,a,d,_),A=r[p].evaluate(e),z=r[p+1].evaluate(e);return this.operator==="interpolate"?H[this.type.kind.toLowerCase()](A,z,b):this.operator==="interpolate-hcl"?xt.reverse(xt.interpolate(xt.forward(A),xt.forward(z),b)):Lt.reverse(Lt.interpolate(Lt.forward(A),Lt.forward(z),b))},Qe.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},Qe.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(t){return t.possibleOutputs()}))},Qe.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var Xt=function(e,t){this.type=e,this.args=t};Xt.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,a=t.expectedType;a&&a.kind!=="value"&&(r=a);for(var c=[],p=0,d=e.slice(1);p<d.length;p+=1){var _=d[p],b=t.parse(_,1+c.length,r,void 0,{typeAnnotation:"omit"});if(!b)return null;r=r||b.type,c.push(b)}var A=a&&c.some(function(z){return Sn(a,z.type)});return new Xt(A?Et:r,c)},Xt.prototype.evaluate=function(e){for(var t=null,r=0,a=this.args;r<a.length&&(t=a[r].evaluate(e))===null;r+=1);return t},Xt.prototype.eachChild=function(e){this.args.forEach(e)},Xt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(t){return t.possibleOutputs()}))},Xt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ut=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Ut.prototype.evaluate=function(e){return this.result.evaluate(e)},Ut.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1)e(r[t][1]);e(this.result)},Ut.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],a=1;a<e.length-1;a+=2){var c=e[a];if(typeof c!="string")return t.error("Expected string, but found "+typeof c+" instead.",a);if(/[^a-zA-Z0-9_]/.test(c))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);var p=t.parse(e[a+1],a+1);if(!p)return null;r.push([c,p])}var d=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return d?new Ut(r,d):null},Ut.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Ut.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var a=r[t],c=a[0],p=a[1];e.push(c,p.serialize())}return e.push(this.result.serialize()),e};var zr=function(e,t,r){this.type=e,this.index=t,this.input=r};zr.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Be),a=t.parse(e[2],2,Rn(t.expectedType||Et));if(!r||!a)return null;var c=a.type;return new zr(c.itemType,r,a)},zr.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new nn("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new nn("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new nn("Array index must be an integer, but found "+t+" instead.");return r[t]},zr.prototype.eachChild=function(e){e(this.index),e(this.input)},zr.prototype.possibleOutputs=function(){return[void 0]},zr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Rr=function(e,t,r,a,c,p){this.inputType=e,this.type=t,this.input=r,this.cases=a,this.outputs=c,this.otherwise=p};Rr.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,a;t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);for(var c={},p=[],d=2;d<e.length-1;d+=2){var _=e[d],b=e[d+1];Array.isArray(_)||(_=[_]);var A=t.concat(d);if(_.length===0)return A.error("Expected at least one branch label.");for(var z=0,R=_;z<R.length;z+=1){var N=R[z];if(typeof N!="number"&&typeof N!="string")return A.error("Branch labels must be numbers or strings.");if(typeof N=="number"&&Math.abs(N)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof N=="number"&&Math.floor(N)!==N)return A.error("Numeric branch labels must be integer values.");if(r){if(A.checkSubtype(r,Dn(N)))return null}else r=Dn(N);if(c[String(N)]!==void 0)return A.error("Branch labels must be unique.");c[String(N)]=p.length}var U=t.parse(b,d,a);if(!U)return null;a=a||U.type,p.push(U)}var j=t.parse(e[1],1,Et);if(!j)return null;var ee=t.parse(e[e.length-1],e.length-1,a);return ee?j.type.kind!=="value"&&t.concat(1).checkSubtype(r,j.type)?null:new Rr(r,a,j,c,p,ee):null},Rr.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Dn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Rr.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Rr.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Rr.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],a={},c=0,p=Object.keys(this.cases).sort();c<p.length;c+=1){var d=p[c];(R=a[this.cases[d]])===void 0?(a[this.cases[d]]=r.length,r.push([this.cases[d],[d]])):r[R][1].push(d)}for(var _=function(U){return e.inputType.kind==="number"?Number(U):U},b=0,A=r;b<A.length;b+=1){var z=A[b],R=z[0],N=z[1];N.length===1?t.push(_(N[0])):t.push(N.map(_)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Ir=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};function Bn(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ei(e,t,r,a){return a.compare(t,r)===0}function di(e,t,r){var a=e!=="=="&&e!=="!=";return function(){function c(p,d,_){this.type=kt,this.lhs=p,this.rhs=d,this.collator=_,this.hasUntypedArgument=p.type.kind==="value"||d.type.kind==="value"}return c.parse=function(p,d){if(p.length!==3&&p.length!==4)return d.error("Expected two or three arguments.");var _=p[0],b=d.parse(p[1],1,Et);if(!b)return null;if(!Bn(_,b.type))return d.concat(1).error('"'+_+`" comparisons are not supported for type '`+Gr(b.type)+"'.");var A=d.parse(p[2],2,Et);if(!A)return null;if(!Bn(_,A.type))return d.concat(2).error('"'+_+`" comparisons are not supported for type '`+Gr(A.type)+"'.");if(b.type.kind!==A.type.kind&&b.type.kind!=="value"&&A.type.kind!=="value")return d.error("Cannot compare types '"+Gr(b.type)+"' and '"+Gr(A.type)+"'.");a&&(b.type.kind==="value"&&A.type.kind!=="value"?b=new Ar(A.type,[b]):b.type.kind!=="value"&&A.type.kind==="value"&&(A=new Ar(b.type,[A])));var z=null;if(p.length===4){if(b.type.kind!=="string"&&A.type.kind!=="string"&&b.type.kind!=="value"&&A.type.kind!=="value")return d.error("Cannot use collator to compare non-string types.");if(!(z=d.parse(p[3],3,to)))return null}return new c(b,A,z)},c.prototype.evaluate=function(p){var d=this.lhs.evaluate(p),_=this.rhs.evaluate(p);if(a&&this.hasUntypedArgument){var b=Dn(d),A=Dn(_);if(b.kind!==A.kind||b.kind!=="string"&&b.kind!=="number")throw new nn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+b.kind+", "+A.kind+") instead.")}if(this.collator&&!a&&this.hasUntypedArgument){var z=Dn(d),R=Dn(_);if(z.kind!=="string"||R.kind!=="string")return t(p,d,_)}return this.collator?r(p,d,_,this.collator.evaluate(p)):t(p,d,_)},c.prototype.eachChild=function(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)},c.prototype.possibleOutputs=function(){return[!0,!1]},c.prototype.serialize=function(){var p=[e];return this.eachChild(function(d){p.push(d.serialize())}),p},c}()}Ir.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);for(var a=[],c=1;c<e.length-1;c+=2){var p=t.parse(e[c],c,kt);if(!p)return null;var d=t.parse(e[c+1],c+1,r);if(!d)return null;a.push([p,d]),r=r||d.type}var _=t.parse(e[e.length-1],e.length-1,r);return _?new Ir(r,a,_):null},Ir.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var a=r[t],c=a[0],p=a[1];if(c.evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Ir.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var a=r[t],c=a[0],p=a[1];e(c),e(p)}e(this.otherwise)},Ir.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ir.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Co=di("==",function(e,t,r){return t===r},ei),Po=di("!=",function(e,t,r){return t!==r},function(e,t,r,a){return!ei(0,t,r,a)}),io=di("<",function(e,t,r){return t<r},function(e,t,r,a){return a.compare(t,r)<0}),zo=di(">",function(e,t,r){return t>r},function(e,t,r,a){return a.compare(t,r)>0}),Ni=di("<=",function(e,t,r){return t<=r},function(e,t,r,a){return a.compare(t,r)<=0}),ji=di(">=",function(e,t,r){return t>=r},function(e,t,r,a){return a.compare(t,r)>=0}),On=function(e,t,r,a,c){this.type=It,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=a,this.maxFractionDigits=c};On.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var r=t.parse(e[1],1,Be);if(!r)return null;var a=e[2];if(typeof a!="object"||Array.isArray(a))return t.error("NumberFormat options argument must be an object.");var c=null;if(a.locale&&!(c=t.parse(a.locale,1,It)))return null;var p=null;if(a.currency&&!(p=t.parse(a.currency,1,It)))return null;var d=null;if(a["min-fraction-digits"]&&!(d=t.parse(a["min-fraction-digits"],1,Be)))return null;var _=null;return a["max-fraction-digits"]&&!(_=t.parse(a["max-fraction-digits"],1,Be))?null:new On(r,c,p,d,_)},On.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},On.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},On.prototype.possibleOutputs=function(){return[void 0]},On.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Xn=function(e){this.type=Be,this.input=e};Xn.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Gr(r.type)+" instead."):new Xn(r):null},Xn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new nn("Expected value to be of type string or array, but found "+Gr(Dn(t))+" instead.")},Xn.prototype.eachChild=function(e){e(this.input)},Xn.prototype.possibleOutputs=function(){return[void 0]},Xn.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var mi={"==":Co,"!=":Po,">":zo,"<":io,">=":ji,"<=":Ni,array:Ar,at:zr,boolean:Ar,case:Ir,coalesce:Xt,collator:lr,format:Vi,interpolate:Qe,"interpolate-hcl":Qe,"interpolate-lab":Qe,length:Xn,let:Ut,literal:Gn,match:Rr,number:Ar,"number-format":On,object:Ar,step:Z,string:Ar,"to-boolean":on,"to-color":on,"to-number":on,"to-string":on,var:M};function ki(e,t){var r=t[0],a=t[1],c=t[2],p=t[3];r=r.evaluate(e),a=a.evaluate(e),c=c.evaluate(e);var d=p?p.evaluate(e):1,_=Da(r,a,c,d);if(_)throw new nn(_);return new Gt(r/255*d,a/255*d,c/255*d,d)}function oo(e,t){return e in t}function an(e,t){var r=t[e];return r===void 0?null:r}function Jt(e){return{type:e}}function Hr(e){return{result:"success",value:e}}function $r(e){return{result:"error",value:e}}function Jr(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function qi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Hn(e){return!!e.expression&&e.expression.interpolated}function Nt(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function ti(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function vt(e){return e}function it(e,t,r){return e!==void 0?e:t!==void 0?t:r!==void 0?r:void 0}function Us(e,t,r,a,c){return it(typeof r===c?a[r]:void 0,e.default,t.default)}function ha(e,t,r){if(Nt(r)!=="number")return it(e.default,t.default);var a=e.stops.length;if(a===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[a-1][0])return e.stops[a-1][1];var c=Fa(e.stops,r);return e.stops[c][1]}function Go(e,t,r){var a=e.base!==void 0?e.base:1;if(Nt(r)!=="number")return it(e.default,t.default);var c=e.stops.length;if(c===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[c-1][0])return e.stops[c-1][1];var p=Fa(e.stops,r),d=function(R,N,U,j){var ee=j-U,re=R-U;return ee===0?0:N===1?re/ee:(Math.pow(N,re)-1)/(Math.pow(N,ee)-1)}(r,a,e.stops[p][0],e.stops[p+1][0]),_=e.stops[p][1],b=e.stops[p+1][1],A=H[t.type]||vt;if(e.colorSpace&&e.colorSpace!=="rgb"){var z=Kt[e.colorSpace];A=function(R,N){return z.reverse(z.interpolate(z.forward(R),z.forward(N),d))}}return typeof _.evaluate=="function"?{evaluate:function(){for(var R=[],N=arguments.length;N--;)R[N]=arguments[N];var U=_.evaluate.apply(void 0,R),j=b.evaluate.apply(void 0,R);if(U!==void 0&&j!==void 0)return A(U,j,d)}}:A(_,b,d)}function Oa(e,t,r){return t.type==="color"?r=Gt.parse(r):t.type==="formatted"?r=rn.fromString(r.toString()):Nt(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0),it(r,e.default,t.default)}function Fa(e,t){for(var r,a,c=0,p=e.length-1,d=0;c<=p;){if(r=e[d=Math.floor((c+p)/2)][0],a=e[d+1][0],t===r||t>r&&t<a)return d;r<t?c=d+1:r>t&&(p=d-1)}return Math.max(d-1,0)}Xr.register(mi,{error:[{kind:"error"},[It],function(e,t){var r=t[0];throw new nn(r.evaluate(e))}],typeof:[It,[Et],function(e,t){return Gr(Dn(t[0].evaluate(e)))}],"to-rgba":[Rn(Be,4),[Ln],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ln,[Be,Be,Be],ki],rgba:[Ln,[Be,Be,Be,Be],ki],has:{type:kt,overloads:[[[It],function(e,t){return oo(t[0].evaluate(e),e.properties())}],[[It,Ui],function(e,t){var r=t[0],a=t[1];return oo(r.evaluate(e),a.evaluate(e))}]]},get:{type:Et,overloads:[[[It],function(e,t){return an(t[0].evaluate(e),e.properties())}],[[It,Ui],function(e,t){var r=t[0],a=t[1];return an(r.evaluate(e),a.evaluate(e))}]]},"feature-state":[Et,[It],function(e,t){return an(t[0].evaluate(e),e.featureState||{})}],properties:[Ui,[],function(e){return e.properties()}],"geometry-type":[It,[],function(e){return e.geometryType()}],id:[Et,[],function(e){return e.id()}],zoom:[Be,[],function(e){return e.globals.zoom}],"heatmap-density":[Be,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Be,[],function(e){return e.globals.lineProgress||0}],accumulated:[Et,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Be,Jt(Be),function(e,t){for(var r=0,a=0,c=t;a<c.length;a+=1)r+=c[a].evaluate(e);return r}],"*":[Be,Jt(Be),function(e,t){for(var r=1,a=0,c=t;a<c.length;a+=1)r*=c[a].evaluate(e);return r}],"-":{type:Be,overloads:[[[Be,Be],function(e,t){var r=t[0],a=t[1];return r.evaluate(e)-a.evaluate(e)}],[[Be],function(e,t){return-t[0].evaluate(e)}]]},"/":[Be,[Be,Be],function(e,t){var r=t[0],a=t[1];return r.evaluate(e)/a.evaluate(e)}],"%":[Be,[Be,Be],function(e,t){var r=t[0],a=t[1];return r.evaluate(e)%a.evaluate(e)}],ln2:[Be,[],function(){return Math.LN2}],pi:[Be,[],function(){return Math.PI}],e:[Be,[],function(){return Math.E}],"^":[Be,[Be,Be],function(e,t){var r=t[0],a=t[1];return Math.pow(r.evaluate(e),a.evaluate(e))}],sqrt:[Be,[Be],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[Be,[Be],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[Be,[Be],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[Be,[Be],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[Be,[Be],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[Be,[Be],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[Be,[Be],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[Be,[Be],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[Be,[Be],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[Be,[Be],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[Be,Jt(Be),function(e,t){return Math.min.apply(Math,t.map(function(r){return r.evaluate(e)}))}],max:[Be,Jt(Be),function(e,t){return Math.max.apply(Math,t.map(function(r){return r.evaluate(e)}))}],abs:[Be,[Be],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[Be,[Be],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Be,[Be],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[Be,[Be],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[kt,[It,Et],function(e,t){var r=t[0],a=t[1];return e.properties()[r.value]===a.value}],"filter-id-==":[kt,[Et],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[kt,[It],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[kt,[It,Et],function(e,t){var r=t[0],a=t[1],c=e.properties()[r.value],p=a.value;return typeof c==typeof p&&c<p}],"filter-id-<":[kt,[Et],function(e,t){var r=t[0],a=e.id(),c=r.value;return typeof a==typeof c&&a<c}],"filter->":[kt,[It,Et],function(e,t){var r=t[0],a=t[1],c=e.properties()[r.value],p=a.value;return typeof c==typeof p&&c>p}],"filter-id->":[kt,[Et],function(e,t){var r=t[0],a=e.id(),c=r.value;return typeof a==typeof c&&a>c}],"filter-<=":[kt,[It,Et],function(e,t){var r=t[0],a=t[1],c=e.properties()[r.value],p=a.value;return typeof c==typeof p&&c<=p}],"filter-id-<=":[kt,[Et],function(e,t){var r=t[0],a=e.id(),c=r.value;return typeof a==typeof c&&a<=c}],"filter->=":[kt,[It,Et],function(e,t){var r=t[0],a=t[1],c=e.properties()[r.value],p=a.value;return typeof c==typeof p&&c>=p}],"filter-id->=":[kt,[Et],function(e,t){var r=t[0],a=e.id(),c=r.value;return typeof a==typeof c&&a>=c}],"filter-has":[kt,[Et],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[kt,[],function(e){return e.id()!==null}],"filter-type-in":[kt,[Rn(It)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[kt,[Rn(Et)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[kt,[It,Rn(Et)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[kt,[It,Rn(Et)],function(e,t){var r=t[0],a=t[1];return function(c,p,d,_){for(;d<=_;){var b=d+_>>1;if(p[b]===c)return!0;p[b]>c?_=b-1:d=b+1}return!1}(e.properties()[r.value],a.value,0,a.value.length-1)}],all:{type:kt,overloads:[[[kt,kt],function(e,t){var r=t[0],a=t[1];return r.evaluate(e)&&a.evaluate(e)}],[Jt(kt),function(e,t){for(var r=0,a=t;r<a.length;r+=1)if(!a[r].evaluate(e))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],function(e,t){var r=t[0],a=t[1];return r.evaluate(e)||a.evaluate(e)}],[Jt(kt),function(e,t){for(var r=0,a=t;r<a.length;r+=1)if(a[r].evaluate(e))return!0;return!1}]]},"!":[kt,[kt],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[kt,[It],function(e,t){var r=t[0],a=e.globals&&e.globals.isSupportedScript;return!a||a(r.evaluate(e))}],upcase:[It,[It],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[It,[It],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[It,Jt(Et),function(e,t){return t.map(function(r){return wr(r.evaluate(e))}).join("")}],"resolved-locale":[It,[to],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var fa=function(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new no,this._defaultValue=t?(r=t).type==="color"&&ti(r.default)?new Gt(0,0,0,0):r.type==="color"?Gt.parse(r.default)||null:r.default===void 0?null:r.default:null,this._enumValues=t&&t.type==="enum"?t.values:null};function da(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in mi}function Xo(e,t){var r=new B(mi,[],t?function(c){var p={color:Ln,string:It,number:Be,enum:It,boolean:kt,formatted:Ao};return c.type==="array"?Rn(p[c.value]||Et,c.length):p[c.type]}(t):void 0),a=r.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?Hr(new fa(a,t)):$r(r.errors)}fa.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},fa.prototype.evaluate=function(e,t,r){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null;try{var a=this.expression.evaluate(this._evaluator);if(a==null)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new nn("Expected value to be one of "+Object.keys(this._enumValues).map(function(c){return JSON.stringify(c)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(c){return this._warningHistory[c.message]||(this._warningHistory[c.message]=!0,typeof console<"u"&&console.warn(c.message)),this._defaultValue}};var Fn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!E(t.expression)};Fn.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},Fn.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)};var ko=function(e,t,r){this.kind=e,this.zoomStops=r.labels,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!E(t.expression),r instanceof Qe&&(this._interpolationType=r.interpolation)};function Ho(e,t){if((e=Xo(e,t)).result==="error")return e;var r=e.value.expression,a=x(r);if(!a&&!Jr(t))return $r([new ir("","data expressions not supported")]);var c=I(r,["zoom"]);if(!c&&!qi(t))return $r([new ir("","zoom expressions not supported")]);var p=function d(_){var b=null;if(_ instanceof Ut)b=d(_.result);else if(_ instanceof Xt)for(var A=0,z=_.args;A<z.length;A+=1){var R=z[A];if(b=d(R))break}else(_ instanceof Z||_ instanceof Qe)&&_.input instanceof Xr&&_.input.name==="zoom"&&(b=_);return b instanceof ir||_.eachChild(function(N){var U=d(N);U instanceof ir?b=U:!b&&U?b=new ir("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):b&&U&&b!==U&&(b=new ir("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),b}(r);return p||c?p instanceof ir?$r([p]):p instanceof Qe&&!Hn(t)?$r([new ir("",'"interpolate" expressions cannot be used with this property')]):Hr(p?new ko(a?"camera":"composite",e.value,p):new Fn(a?"constant":"source",e.value)):$r([new ir("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ko.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},ko.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)},ko.prototype.interpolationFactor=function(e,t,r){return this._interpolationType?Qe.interpolationFactor(this._interpolationType,e,t,r):0};var Mi=function(e,t){this._parameters=e,this._specification=t,To(this,function r(a,c){var p,d,_,b=c.type==="color",A=a.stops&&typeof a.stops[0][0]=="object",z=A||a.property!==void 0,R=A||!z,N=a.type||(Hn(c)?"exponential":"interval");if(b&&((a=To({},a)).stops&&(a.stops=a.stops.map(function(st){return[st[0],Gt.parse(st[1])]})),a.default?a.default=Gt.parse(a.default):a.default=Gt.parse(c.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Kt[a.colorSpace])throw new Error("Unknown color space: "+a.colorSpace);if(N==="exponential")p=Go;else if(N==="interval")p=ha;else if(N==="categorical"){p=Us,d=Object.create(null);for(var U=0,j=a.stops;U<j.length;U+=1){var ee=j[U];d[ee[0]]=ee[1]}_=typeof a.stops[0][0]}else{if(N!=="identity")throw new Error('Unknown function type "'+N+'"');p=Oa}if(A){for(var re={},he=[],ye=0;ye<a.stops.length;ye++){var fe=a.stops[ye],xe=fe[0].zoom;re[xe]===void 0&&(re[xe]={zoom:xe,type:a.type,property:a.property,default:a.default,stops:[]},he.push(xe)),re[xe].stops.push([fe[0].value,fe[1]])}for(var ze=[],Re=0,Fe=he;Re<Fe.length;Re+=1){var Ne=Fe[Re];ze.push([re[Ne].zoom,r(re[Ne],c)])}return{kind:"composite",interpolationFactor:Qe.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:ze.map(function(st){return st[0]}),evaluate:function(st,lt){var Dt=st.zoom;return Go({stops:ze,base:a.base},c,Dt).evaluate(Dt,lt)}}}return R?{kind:"camera",interpolationFactor:N==="exponential"?Qe.interpolationFactor.bind(void 0,{name:"exponential",base:a.base!==void 0?a.base:1}):function(){return 0},zoomStops:a.stops.map(function(st){return st[0]}),evaluate:function(st){var lt=st.zoom;return p(a,c,lt,d,_)}}:{kind:"source",evaluate:function(st,lt){var Dt=lt&&lt.properties?lt.properties[a.property]:void 0;return Dt===void 0?it(a.default,c.default):p(a,c,Dt,d,_)}}}(this._parameters,this._specification))};function Zi(e,t){if(ti(e))return new Mi(e,t);if(da(e)){var r=Ho(e,t);if(r.result==="error")throw new Error(r.value.map(function(c){return c.key+": "+c.message}).join(", "));return r.value}var a=e;return typeof e=="string"&&t.type==="color"&&(a=Gt.parse(e)),{kind:"constant",evaluate:function(){return a}}}function Tn(e){var t=e.key,r=e.value,a=e.valueSpec||{},c=e.objectElementValidators||{},p=e.style,d=e.styleSpec,_=[],b=Nt(r);if(b!=="object")return[new Oe(t,r,"object expected, "+b+" found")];for(var A in r){var z=A.split(".")[0],R=a[z]||a["*"],N=void 0;if(c[z])N=c[z];else if(a[z])N=An;else if(c["*"])N=c["*"];else{if(!a["*"]){_.push(new Oe(t,r[A],'unknown property "'+A+'"'));continue}N=An}_=_.concat(N({key:(t&&t+".")+A,value:r[A],valueSpec:R,style:p,styleSpec:d,object:r,objectKey:A},r))}for(var U in a)c[U]||a[U].required&&a[U].default===void 0&&r[U]===void 0&&_.push(new Oe(t,r,'missing required property "'+U+'"'));return _}function Wo(e){var t=e.value,r=e.valueSpec,a=e.style,c=e.styleSpec,p=e.key,d=e.arrayElementValidator||An;if(Nt(t)!=="array")return[new Oe(p,t,"array expected, "+Nt(t)+" found")];if(r.length&&t.length!==r.length)return[new Oe(p,t,"array length "+r.length+" expected, length "+t.length+" found")];if(r["min-length"]&&t.length<r["min-length"])return[new Oe(p,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")];var _={type:r.value};c.$version<7&&(_.function=r.function),Nt(r.value)==="object"&&(_=r.value);for(var b=[],A=0;A<t.length;A++)b=b.concat(d({array:t,arrayIndex:A,value:t[A],valueSpec:_,style:a,styleSpec:c,key:p+"["+A+"]"}));return b}function ma(e){var t=e.key,r=e.value,a=e.valueSpec,c=Nt(r);return c!=="number"?[new Oe(t,r,"number expected, "+c+" found")]:"minimum"in a&&r<a.minimum?[new Oe(t,r,r+" is less than the minimum value "+a.minimum)]:"maximum"in a&&r>a.maximum?[new Oe(t,r,r+" is greater than the maximum value "+a.maximum)]:[]}function Ua(e){var t,r,a,c=e.valueSpec,p=xr(e.value.type),d={},_=p!=="categorical"&&e.value.property===void 0,b=!_,A=Nt(e.value.stops)==="array"&&Nt(e.value.stops[0])==="array"&&Nt(e.value.stops[0][0])==="object",z=Tn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(U){if(p==="identity")return[new Oe(U.key,U.value,'identity function may not have a "stops" property')];var j=[],ee=U.value;return j=j.concat(Wo({key:U.key,value:ee,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:R})),Nt(ee)==="array"&&ee.length===0&&j.push(new Oe(U.key,ee,"array must have at least one stop")),j},default:function(U){return An({key:U.key,value:U.value,valueSpec:c,style:U.style,styleSpec:U.styleSpec})}}});return p==="identity"&&_&&z.push(new Oe(e.key,e.value,'missing required property "property"')),p==="identity"||e.value.stops||z.push(new Oe(e.key,e.value,'missing required property "stops"')),p==="exponential"&&e.valueSpec.expression&&!Hn(e.valueSpec)&&z.push(new Oe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(b&&!Jr(e.valueSpec)?z.push(new Oe(e.key,e.value,"property functions not supported")):_&&!qi(e.valueSpec)&&z.push(new Oe(e.key,e.value,"zoom functions not supported"))),p!=="categorical"&&!A||e.value.property!==void 0||z.push(new Oe(e.key,e.value,'"property" property is required')),z;function R(U){var j=[],ee=U.value,re=U.key;if(Nt(ee)!=="array")return[new Oe(re,ee,"array expected, "+Nt(ee)+" found")];if(ee.length!==2)return[new Oe(re,ee,"array length 2 expected, length "+ee.length+" found")];if(A){if(Nt(ee[0])!=="object")return[new Oe(re,ee,"object expected, "+Nt(ee[0])+" found")];if(ee[0].zoom===void 0)return[new Oe(re,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Oe(re,ee,"object stop key must have value")];if(a&&a>xr(ee[0].zoom))return[new Oe(re,ee[0].zoom,"stop zoom values must appear in ascending order")];xr(ee[0].zoom)!==a&&(a=xr(ee[0].zoom),r=void 0,d={}),j=j.concat(Tn({key:re+"[0]",value:ee[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:ma,value:N}}))}else j=j.concat(N({key:re+"[0]",value:ee[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},ee));return da(Ft(ee[1]))?j.concat([new Oe(re+"[1]",ee[1],"expressions are not allowed in function stops.")]):j.concat(An({key:re+"[1]",value:ee[1],valueSpec:c,style:U.style,styleSpec:U.styleSpec}))}function N(U,j){var ee=Nt(U.value),re=xr(U.value),he=U.value!==null?U.value:j;if(t){if(ee!==t)return[new Oe(U.key,he,ee+" stop domain type must match previous stop domain type "+t)]}else t=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Oe(U.key,he,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&p!=="categorical"){var ye="number expected, "+ee+" found";return Jr(c)&&p===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Oe(U.key,he,ye)]}return p!=="categorical"||ee!=="number"||isFinite(re)&&Math.floor(re)===re?p!=="categorical"&&ee==="number"&&r!==void 0&&re<r?[new Oe(U.key,he,"stop domain values must appear in ascending order")]:(r=re,p==="categorical"&&re in d?[new Oe(U.key,he,"stop domain values must be unique")]:(d[re]=!0,[])):[new Oe(U.key,he,"integer expected, found "+re)]}}function Ko(e){var t=(e.expressionContext==="property"?Ho:Xo)(Ft(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(a){return new Oe(""+e.key+a.key,e.value,a.message)});var r=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&r.possibleOutputs().indexOf(void 0)!==-1)return[new Oe(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!E(r))return[new Oe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!E(r))return[new Oe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!I(r,["zoom","feature-state"]))return[new Oe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!x(r))return[new Oe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Li(e){var t=e.key,r=e.value,a=e.valueSpec,c=[];return Array.isArray(a.values)?a.values.indexOf(xr(r))===-1&&c.push(new Oe(t,r,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(r)+" found")):Object.keys(a.values).indexOf(xr(r))===-1&&c.push(new Oe(t,r,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(r)+" found")),c}function Va(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var a=r[t];if(!Va(a)&&typeof a!="boolean")return!1}return!0;default:return!0}}Mi.deserialize=function(e){return new Mi(e._parameters,e._specification)},Mi.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Vs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mo(e){if(e==null)return function(){return!0};Va(e)||(e=ya(e));var t=Xo(e,Vs);if(t.result==="error")throw new Error(t.value.map(function(r){return r.key+": "+r.message}).join(", "));return function(r,a){return t.value.evaluate(r,a)}}function is(e,t){return e<t?-1:e>t?1:0}function ya(e){if(!e)return!0;var t,r=e[0];return e.length<=1?r!=="any":r==="=="?ga(e[1],e[2],"=="):r==="!="?_a(ga(e[1],e[2],"==")):r==="<"||r===">"||r==="<="||r===">="?ga(e[1],e[2],r):r==="any"?(t=e.slice(1),["any"].concat(t.map(ya))):r==="all"?["all"].concat(e.slice(1).map(ya)):r==="none"?["all"].concat(e.slice(1).map(ya).map(_a)):r==="in"?Lo(e[1],e.slice(2)):r==="!in"?_a(Lo(e[1],e.slice(2))):r==="has"?Na(e[1]):r!=="!has"||_a(Na(e[1]))}function ga(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function Lo(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(r){return typeof r!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(is)]]:["filter-in-small",e,["literal",t]]}}function Na(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function _a(e){return["!",e]}function os(e){return Va(Ft(e.value))?Ko(To({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(r){var a=r.value,c=r.key;if(Nt(a)!=="array")return[new Oe(c,a,"array expected, "+Nt(a)+" found")];var p=r.styleSpec,d,_=[];if(a.length<1)return[new Oe(c,a,"filter array must have at least 1 element")];switch(_=_.concat(Li({key:c+"[0]",value:a[0],valueSpec:p.filter_operator,style:r.style,styleSpec:r.styleSpec})),xr(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&xr(a[1])==="$type"&&_.push(new Oe(c,a,'"$type" cannot be use with operator "'+a[0]+'"'));case"==":case"!=":a.length!==3&&_.push(new Oe(c,a,'filter array for operator "'+a[0]+'" must have 3 elements'));case"in":case"!in":a.length>=2&&(d=Nt(a[1]))!=="string"&&_.push(new Oe(c+"[1]",a[1],"string expected, "+d+" found"));for(var b=2;b<a.length;b++)d=Nt(a[b]),xr(a[1])==="$type"?_=_.concat(Li({key:c+"["+b+"]",value:a[b],valueSpec:p.geometry_type,style:r.style,styleSpec:r.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&_.push(new Oe(c+"["+b+"]",a[b],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var A=1;A<a.length;A++)_=_.concat(t({key:c+"["+A+"]",value:a[A],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":d=Nt(a[1]),a.length!==2?_.push(new Oe(c,a,'filter array for "'+a[0]+'" operator must have 2 elements')):d!=="string"&&_.push(new Oe(c+"[1]",a[1],"string expected, "+d+" found"))}return _}(e)}function ao(e,t){var r=e.key,a=e.style,c=e.styleSpec,p=e.value,d=e.objectKey,_=c[t+"_"+e.layerType];if(!_)return[];var b=d.match(/^(.*)-transition$/);if(t==="paint"&&b&&_[b[1]]&&_[b[1]].transition)return An({key:r,value:p,valueSpec:c.transition,style:a,styleSpec:c});var A,z=e.valueSpec||_[d];if(!z)return[new Oe(r,p,'unknown property "'+d+'"')];if(Nt(p)==="string"&&Jr(z)&&!z.tokens&&(A=/^{([^}]+)}$/.exec(p)))return[new Oe(r,p,'"'+d+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var R=[];return e.layerType==="symbol"&&(d==="text-field"&&a&&!a.glyphs&&R.push(new Oe(r,p,'use of "text-field" requires a style "glyphs" property')),d==="text-font"&&ti(Ft(p))&&xr(p.type)==="identity"&&R.push(new Oe(r,p,'"text-font" does not support identity functions'))),R.concat(An({key:e.key,value:p,valueSpec:z,style:a,styleSpec:c,expressionContext:"property",propertyType:t,propertyKey:d}))}function ja(e){return ao(e,"paint")}function Ns(e){return ao(e,"layout")}function Ro(e){var t=[],r=e.value,a=e.key,c=e.style,p=e.styleSpec;r.type||r.ref||t.push(new Oe(a,r,'either "type" or "ref" is required'));var d,_=xr(r.type),b=xr(r.ref);if(r.id)for(var A=xr(r.id),z=0;z<e.arrayIndex;z++){var R=c.layers[z];xr(R.id)===A&&t.push(new Oe(a,r.id,'duplicate layer id "'+r.id+'", previously used at line '+R.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(j){j in r&&t.push(new Oe(a,r[j],'"'+j+'" is prohibited for ref layers'))}),c.layers.forEach(function(j){xr(j.id)===b&&(d=j)}),d?d.ref?t.push(new Oe(a,r.ref,"ref cannot reference another ref layer")):_=xr(d.type):t.push(new Oe(a,r.ref,'ref layer "'+b+'" not found'));else if(_!=="background")if(r.source){var N=c.sources&&c.sources[r.source],U=N&&xr(N.type);N?U==="vector"&&_==="raster"?t.push(new Oe(a,r.source,'layer "'+r.id+'" requires a raster source')):U==="raster"&&_!=="raster"?t.push(new Oe(a,r.source,'layer "'+r.id+'" requires a vector source')):U!=="vector"||r["source-layer"]?U==="raster-dem"&&_!=="hillshade"?t.push(new Oe(a,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!r.paint||!r.paint["line-gradient"]||U==="geojson"&&N.lineMetrics||t.push(new Oe(a,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Oe(a,r,'layer "'+r.id+'" must specify a "source-layer"')):t.push(new Oe(a,r.source,'source "'+r.source+'" not found'))}else t.push(new Oe(a,r,'missing required property "source"'));return t=t.concat(Tn({key:a,value:r,valueSpec:p.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return An({key:a+".type",value:r.type,valueSpec:p.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:os,layout:function(j){return Tn({layer:r,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":function(ee){return Ns(To({layerType:_},ee))}}})},paint:function(j){return Tn({layer:r,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":function(ee){return ja(To({layerType:_},ee))}}})}}}))}function qa(e){var t=e.value,r=e.key,a=e.styleSpec,c=e.style;if(!t.type)return[new Oe(r,t,'"type" is required')];var p,d=xr(t.type);switch(d){case"vector":case"raster":case"raster-dem":if(p=Tn({key:r,value:t,valueSpec:a["source_"+d.replace("-","_")],style:e.style,styleSpec:a}),"url"in t)for(var _ in t)["type","url","tileSize"].indexOf(_)<0&&p.push(new Oe(r+"."+_,t[_],'a source with a "url" property may not include a "'+_+'" property'));return p;case"geojson":if(p=Tn({key:r,value:t,valueSpec:a.source_geojson,style:c,styleSpec:a}),t.cluster)for(var b in t.clusterProperties){var A=t.clusterProperties[b],z=A[0],R=A[1],N=typeof z=="string"?[z,["accumulated"],["get",b]]:z;p.push.apply(p,Ko({key:r+"."+b+".map",value:R,expressionContext:"cluster-map"})),p.push.apply(p,Ko({key:r+"."+b+".reduce",value:N,expressionContext:"cluster-reduce"}))}return p;case"video":return Tn({key:r,value:t,valueSpec:a.source_video,style:c,styleSpec:a});case"image":return Tn({key:r,value:t,valueSpec:a.source_image,style:c,styleSpec:a});case"canvas":return[new Oe(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Li({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:c,styleSpec:a})}}function Yo(e){var t=e.value,r=e.styleSpec,a=r.light,c=e.style,p=[],d=Nt(t);if(t===void 0)return p;if(d!=="object")return p=p.concat([new Oe("light",t,"object expected, "+d+" found")]);for(var _ in t){var b=_.match(/^(.*)-transition$/);p=b&&a[b[1]]&&a[b[1]].transition?p.concat(An({key:_,value:t[_],valueSpec:r.transition,style:c,styleSpec:r})):a[_]?p.concat(An({key:_,value:t[_],valueSpec:a[_],style:c,styleSpec:r})):p.concat([new Oe(_,t[_],'unknown property "'+_+'"')])}return p}function so(e){var t=e.value,r=e.key,a=Nt(t);return a!=="string"?[new Oe(r,t,"string expected, "+a+" found")]:[]}var Do={"*":function(){return[]},array:Wo,boolean:function(e){var t=e.value,r=e.key,a=Nt(t);return a!=="boolean"?[new Oe(r,t,"boolean expected, "+a+" found")]:[]},number:ma,color:function(e){var t=e.key,r=e.value,a=Nt(r);return a!=="string"?[new Oe(t,r,"color expected, "+a+" found")]:Ra(r)===null?[new Oe(t,r,'color expected, "'+r+'" found')]:[]},constants:ns,enum:Li,filter:os,function:Ua,layer:Ro,object:Tn,source:qa,light:Yo,string:so,formatted:function(e){return so(e).length===0?[]:Ko(e)}};function An(e){var t=e.value,r=e.valueSpec,a=e.styleSpec;return r.expression&&ti(xr(t))?Ua(e):r.expression&&da(Ft(t))?Ko(e):r.type&&Do[r.type]?Do[r.type](e):Tn(To({},e,{valueSpec:r.type?a[r.type]:r}))}function $o(e){var t=e.value,r=e.key,a=so(e);return a.length||(t.indexOf("{fontstack}")===-1&&a.push(new Oe(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&a.push(new Oe(r,t,'"glyphs" url must include a "{range}" token'))),a}function Cr(e,t){t=t||be;var r=[];return r=r.concat(An({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:$o,"*":function(){return[]}}})),e.constants&&(r=r.concat(ns({key:"constants",value:e.constants,style:e,styleSpec:t}))),Jo(r)}function Jo(e){return[].concat(e).sort(function(t,r){return t.line-r.line})}function Ri(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Jo(e.apply(this,t))}}Cr.source=Ri(qa),Cr.light=Ri(Yo),Cr.layer=Ri(Ro),Cr.filter=Ri(os),Cr.paintProperty=Ri(ja),Cr.layoutProperty=Ri(Ns);var Qo=Cr,va=Cr.light,as=Cr.paintProperty,ss=Cr.layoutProperty;function ea(e,t){var r=!1;if(t&&t.length)for(var a=0,c=t;a<c.length;a+=1){var p=c[a];e.fire(new La(new Error(p.message))),r=!0}return r}var yi=yn,Gi=3;function yn(e,t,r){var a=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var c=new Int32Array(this.arrayBuffer);e=c[0],t=c[1],r=c[2],this.d=t+2*r;for(var p=0;p<this.d*this.d;p++){var d=c[Gi+p],_=c[Gi+p+1];a.push(d===_?null:c.subarray(d,_))}var b=c[Gi+a.length],A=c[Gi+a.length+1];this.keys=c.subarray(b,A),this.bboxes=c.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var z=0;z<this.d*this.d;z++)a.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var R=r/t*e;this.min=-R,this.max=e+R}yn.prototype.insert=function(e,t,r,a,c){this._forEachCell(t,r,a,c,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(c)},yn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},yn.prototype._insertCell=function(e,t,r,a,c,p){this.cells[c].push(p)},yn.prototype.query=function(e,t,r,a,c){var p=this.min,d=this.max;if(e<=p&&t<=p&&d<=r&&d<=a&&!c)return Array.prototype.slice.call(this.keys);var _=[];return this._forEachCell(e,t,r,a,this._queryCell,_,{},c),_},yn.prototype._queryCell=function(e,t,r,a,c,p,d,_){var b=this.cells[c];if(b!==null)for(var A=this.keys,z=this.bboxes,R=0;R<b.length;R++){var N=b[R];if(d[N]===void 0){var U=4*N;(_?_(z[U+0],z[U+1],z[U+2],z[U+3]):e<=z[U+2]&&t<=z[U+3]&&r>=z[U+0]&&a>=z[U+1])?(d[N]=!0,p.push(A[N])):d[N]=!1}}},yn.prototype._forEachCell=function(e,t,r,a,c,p,d,_){for(var b=this._convertToCellCoord(e),A=this._convertToCellCoord(t),z=this._convertToCellCoord(r),R=this._convertToCellCoord(a),N=b;N<=z;N++)for(var U=A;U<=R;U++){var j=this.d*U+N;if((!_||_(this._convertFromCellCoord(N),this._convertFromCellCoord(U),this._convertFromCellCoord(N+1),this._convertFromCellCoord(U+1)))&&c.call(this,e,t,r,a,j,p,d,_))return}},yn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},yn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},yn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Gi+this.cells.length+1+1,r=0,a=0;a<this.cells.length;a++)r+=this.cells[a].length;var c=new Int32Array(t+r+this.keys.length+this.bboxes.length);c[0]=this.extent,c[1]=this.n,c[2]=this.padding;for(var p=t,d=0;d<e.length;d++){var _=e[d];c[Gi+d]=p,c.set(_,p),p+=_.length}return c[Gi+e.length]=p,c.set(this.keys,p),p+=this.keys.length,c[Gi+e.length+1]=p,c.set(this.bboxes,p),p+=this.bboxes.length,c.buffer};var Dr=self.ImageData,Xi={};function We(e,t,r){r===void 0&&(r={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Xi[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}for(var ta in We("Object",Object),yi.serialize=function(e,t){var r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},yi.deserialize=function(e){return new yi(e.buffer)},We("Grid",yi),We("Color",Gt),We("Error",Error),We("StylePropertyFunction",Mi),We("StyleExpression",fa,{omit:["_evaluator"]}),We("ZoomDependentExpression",ko),We("ZoomConstantExpression",Fn),We("CompoundExpression",Xr,{omit:["_evaluate"]}),mi)mi[ta]._classRegistryKey||We("Expression_"+ta,mi[ta]);function jt(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return t&&t.push(r.buffer),r}if(e instanceof Dr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var a=[],c=0,p=e;c<p.length;c+=1){var d=p[c];a.push(jt(d,t))}return a}if(typeof e=="object"){var _=e.constructor,b=_._classRegistryKey;if(!b)throw new Error("can't serialize object of unregistered class");var A=_.serialize?_.serialize(e,t):{};if(!_.serialize){for(var z in e)if(e.hasOwnProperty(z)&&!(Xi[b].omit.indexOf(z)>=0)){var R=e[z];A[z]=Xi[b].shallow.indexOf(z)>=0?R:jt(R,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return b!=="Object"&&(A.$name=b),A}throw new Error("can't serialize object of type "+typeof e)}function rr(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof Dr)return e;if(Array.isArray(e))return e.map(rr);if(typeof e=="object"){var t=e.$name||"Object",r=Xi[t].klass;if(!r)throw new Error("can't deserialize unregistered class "+t);if(r.deserialize)return r.deserialize(e);for(var a=Object.create(r.prototype),c=0,p=Object.keys(e);c<p.length;c+=1){var d=p[c];if(d!=="$name"){var _=e[d];a[d]=Xi[t].shallow.indexOf(d)>=0?_:rr(_)}}return a}throw new Error("can't deserialize object of type "+typeof e)}var ri=function(){this.first=!0};ri.prototype.update=function(e,t){var r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))};var De={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Bo(e){for(var t=0,r=e;t<r.length;t+=1)if(gn(r[t].charCodeAt(0)))return!0;return!1}function ls(e){return!De.Arabic(e)&&!De["Arabic Supplement"](e)&&!De["Arabic Extended-A"](e)&&!De["Arabic Presentation Forms-A"](e)&&!De["Arabic Presentation Forms-B"](e)}function gn(e){return e===746||e===747||!(e<4352)&&(!!De["Bopomofo Extended"](e)||!!De.Bopomofo(e)||!(!De["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!De["CJK Compatibility Ideographs"](e)||!!De["CJK Compatibility"](e)||!!De["CJK Radicals Supplement"](e)||!!De["CJK Strokes"](e)||!(!De["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||!!De["CJK Unified Ideographs Extension A"](e)||!!De["CJK Unified Ideographs"](e)||!!De["Enclosed CJK Letters and Months"](e)||!!De["Hangul Compatibility Jamo"](e)||!!De["Hangul Jamo Extended-A"](e)||!!De["Hangul Jamo Extended-B"](e)||!!De["Hangul Jamo"](e)||!!De["Hangul Syllables"](e)||!!De.Hiragana(e)||!!De["Ideographic Description Characters"](e)||!!De.Kanbun(e)||!!De["Kangxi Radicals"](e)||!!De["Katakana Phonetic Extensions"](e)||!(!De.Katakana(e)||e===12540)||!(!De["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!De["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!De["Unified Canadian Aboriginal Syllabics"](e)||!!De["Unified Canadian Aboriginal Syllabics Extended"](e)||!!De["Vertical Forms"](e)||!!De["Yijing Hexagram Symbols"](e)||!!De["Yi Syllables"](e)||!!De["Yi Radicals"](e))}function Un(e){return!(gn(e)||function(t){return!!(De["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||De["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||De["Letterlike Symbols"](t)||De["Number Forms"](t)||De["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||De["Control Pictures"](t)&&t!==9251||De["Optical Character Recognition"](t)||De["Enclosed Alphanumerics"](t)||De["Geometric Shapes"](t)||De["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||De["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||De["CJK Symbols and Punctuation"](t)||De.Katakana(t)||De["Private Use Area"](t)||De["CJK Compatibility Forms"](t)||De["Small Form Variants"](t)||De["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function us(e,t){return!(!t&&(e>=1424&&e<=2303||De["Arabic Presentation Forms-A"](e)||De["Arabic Presentation Forms-B"](e)))&&!(e>=2304&&e<=3583||e>=3840&&e<=4255||De.Khmer(e))}var kr,js=!1,Br=null,xa=!1,qs=new Zn,Vn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xa||Vn.applyArabicShaping!=null}},Or=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ri,this.transition={})};Or.prototype.isSupportedScript=function(e){return function(t,r){for(var a=0,c=t;a<c.length;a+=1)if(!us(c[a].charCodeAt(0),r))return!1;return!0}(e,Vn.isLoaded())},Or.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Or.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}};var _n=function(e,t){this.property=e,this.value=t,this.expression=Zi(t===void 0?e.specification.default:t,e.specification)};_n.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},_n.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var ba=function(e){this.property=e,this.value=new _n(e,void 0)};ba.prototype.transitioned=function(e,t){return new Di(this.property,this.value,t,je({},e.transition,this.transition),e.now)},ba.prototype.untransitioned=function(){return new Di(this.property,this.value,null,{},0)};var lo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};lo.prototype.getValue=function(e){return Lr(this._values[e].value.value)},lo.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ba(this._values[e].property)),this._values[e].value=new _n(this._values[e].property,t===null?void 0:Lr(t))},lo.prototype.getTransition=function(e){return Lr(this._values[e].transition)},lo.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ba(this._values[e].property)),this._values[e].transition=Lr(t)||void 0},lo.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var a=r[t],c=this.getValue(a);c!==void 0&&(e[a]=c);var p=this.getTransition(a);p!==void 0&&(e[a+"-transition"]=p)}return e},lo.prototype.transitioned=function(e,t){for(var r=new Hi(this._properties),a=0,c=Object.keys(this._values);a<c.length;a+=1){var p=c[a];r._values[p]=this._values[p].transitioned(e,t._values[p])}return r},lo.prototype.untransitioned=function(){for(var e=new Hi(this._properties),t=0,r=Object.keys(this._values);t<r.length;t+=1){var a=r[t];e._values[a]=this._values[a].untransitioned()}return e};var Di=function(e,t,r,a,c){this.property=e,this.value=t,this.begin=c+a.delay||0,this.end=this.begin+a.duration||0,e.specification.transition&&(a.delay||a.duration)&&(this.prior=r)};Di.prototype.possiblyEvaluate=function(e){var t=e.now||0,r=this.value.possiblyEvaluate(e),a=this.prior;if(a){if(t>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(t<this.begin)return a.possiblyEvaluate(e);var c=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e),r,function(p){if(p<=0)return 0;if(p>=1)return 1;var d=p*p,_=d*p;return 4*(p<.5?_:3*(p-d)+_-.75)}(c))}return r};var Hi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Hi.prototype.possiblyEvaluate=function(e){for(var t=new Zs(this._properties),r=0,a=Object.keys(this._values);r<a.length;r+=1){var c=a[r];t._values[c]=this._values[c].possiblyEvaluate(e)}return t},Hi.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var r=t[e];if(this._values[r].prior)return!0}return!1};var uo=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};uo.prototype.getValue=function(e){return Lr(this._values[e].value)},uo.prototype.setValue=function(e,t){this._values[e]=new _n(this._values[e].property,t===null?void 0:Lr(t))},uo.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var a=r[t],c=this.getValue(a);c!==void 0&&(e[a]=c)}return e},uo.prototype.possiblyEvaluate=function(e){for(var t=new Zs(this._properties),r=0,a=Object.keys(this._values);r<a.length;r+=1){var c=a[r];t._values[c]=this._values[c].possiblyEvaluate(e)}return t};var ni=function(e,t,r){this.property=e,this.value=t,this.parameters=r};ni.prototype.isConstant=function(){return this.value.kind==="constant"},ni.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},ni.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var Zs=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Zs.prototype.get=function(e){return this._values[e]};var nt=function(e){this.specification=e};nt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},nt.prototype.interpolate=function(e,t,r){var a=H[this.specification.type];return a?a(e,t,r):e};var mt=function(e){this.specification=e};mt.prototype.possiblyEvaluate=function(e,t){return e.expression.kind==="constant"||e.expression.kind==="camera"?new ni(this,{kind:"constant",value:e.expression.evaluate(t)},t):new ni(this,e.expression,t)},mt.prototype.interpolate=function(e,t,r){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new ni(this,{kind:"constant",value:void 0},e.parameters);var a=H[this.specification.type];return a?new ni(this,{kind:"constant",value:a(e.value.value,t.value.value,r)},e.parameters):e},mt.prototype.evaluate=function(e,t,r,a){return e.kind==="constant"?e.value:e.evaluate(t,r,a)};var wa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(r,a){if(r.value===void 0)return new ni(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){var c=r.expression.evaluate(a),p=this._calculate(c,c,c,a);return new ni(this,{kind:"constant",value:p},a)}if(r.expression.kind==="camera"){var d=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new ni(this,{kind:"constant",value:d},a)}return new ni(this,r.expression,a)},t.prototype.evaluate=function(r,a,c,p){if(r.kind==="source"){var d=r.evaluate(a,c,p);return this._calculate(d,d,d,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},c,p),r.evaluate({zoom:Math.floor(a.zoom)},c,p),r.evaluate({zoom:Math.floor(a.zoom)+1},c,p),a):r.value},t.prototype._calculate=function(r,a,c,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:c,to:a}},t.prototype.interpolate=function(r){return r},t}(mt),Ea=function(e){this.specification=e};Ea.prototype.possiblyEvaluate=function(e,t){if(e.value!==void 0){if(e.expression.kind==="constant"){var r=e.expression.evaluate(t);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new Or(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Or(Math.floor(t.zoom),t)),e.expression.evaluate(new Or(Math.floor(t.zoom+1),t)),t)}},Ea.prototype._calculate=function(e,t,r,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}},Ea.prototype.interpolate=function(e){return e};var co=function(e){this.specification=e};co.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},co.prototype.interpolate=function(){return!1};var ii=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var r=e[t],a=this.defaultPropertyValues[t]=new _n(r,void 0),c=this.defaultTransitionablePropertyValues[t]=new ba(r);this.defaultTransitioningPropertyValues[t]=c.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=a.possiblyEvaluate({})}};We("DataDrivenProperty",mt),We("DataConstantProperty",nt),We("CrossFadedDataDrivenProperty",wa),We("CrossFadedProperty",Ea),We("ColorRampProperty",co);var gi=function(e){function t(r,a){if(e.call(this),this.id=r.id,this.type=r.type,this.visibility="visible",this._featureFilter=function(){return!0},r.type!=="custom"&&(r=r,this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new uo(a.layout)),a.paint)){for(var c in this._transitionablePaint=new lo(a.paint),r.paint)this.setPaintProperty(c,r.paint[c],{validate:!1});for(var p in r.layout)this.setLayoutProperty(p,r.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)},t.prototype.setLayoutProperty=function(r,a,c){if(c===void 0&&(c={}),a!=null){var p="layers."+this.id+".layout."+r;if(this._validate(ss,p,r,a,c))return}r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a==="none"?a:"visible"},t.prototype.getPaintProperty=function(r){return Pr(r,"-transition")?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)},t.prototype.setPaintProperty=function(r,a,c){if(c===void 0&&(c={}),a!=null){var p="layers."+this.id+".paint."+r;if(this._validate(as,p,r,a,c))return!1}if(Pr(r,"-transition"))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;var d=this._transitionablePaint._values[r],_=d.property.specification["property-type"]==="cross-faded-data-driven"&&!d.value.value&&a,b=this._transitionablePaint._values[r].value.isDataDriven();this._transitionablePaint.setValue(r,a);var A=this._transitionablePaint._values[r].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(r),A||b||_},t.prototype._handleSpecialPaintPropertyUpdate=function(r){},t.prototype.isHidden=function(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(r){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r)),this.paint=this._transitioningPaint.possiblyEvaluate(r)},t.prototype.serialize=function(){var r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility==="none"&&(r.layout=r.layout||{},r.layout.visibility="none"),Ci(r,function(a,c){return!(a===void 0||c==="layout"&&!Object.keys(a).length||c==="paint"&&!Object.keys(a).length)})},t.prototype._validate=function(r,a,c,p,d){return d===void 0&&(d={}),(!d||d.validate!==!1)&&ea(this,r.call(Qo,{key:a,layerType:this.type,objectKey:c,value:p,styleSpec:be,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var r in this.paint._values){var a=this.paint.get(r);if(a instanceof ni&&Jr(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1},t}(Zn),Il={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Bi=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ur=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function vn(e,t){t===void 0&&(t=1);var r=0,a=0;return{members:e.map(function(c){var p,d=(p=c.type,Il[p].BYTES_PER_ELEMENT),_=r=Cl(r,Math.max(t,d)),b=c.components||1;return a=Math.max(a,d),r+=d*b,{name:c.name,type:c.type,components:b,offset:_}}),size:Cl(r,Math.max(a,t)),alignment:t}}function Cl(e,t){return Math.ceil(e/t)*t}ur.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},ur.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},ur.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ur.prototype.clear=function(){this.length=0},ur.prototype.resize=function(e){this.reserve(e),this.length=e},ur.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},ur.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Za=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a){var c=this.length;return this.resize(c+1),this.emplace(c,r,a)},t.prototype.emplace=function(r,a,c){var p=2*r;return this.int16[p+0]=a,this.int16[p+1]=c,r},t}(ur);Za.prototype.bytesPerElement=4,We("StructArrayLayout2i4",Za);var po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p){var d=this.length;return this.resize(d+1),this.emplace(d,r,a,c,p)},t.prototype.emplace=function(r,a,c,p,d){var _=4*r;return this.int16[_+0]=a,this.int16[_+1]=c,this.int16[_+2]=p,this.int16[_+3]=d,r},t}(ur);po.prototype.bytesPerElement=8,We("StructArrayLayout4i8",po);var cs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_){var b=this.length;return this.resize(b+1),this.emplace(b,r,a,c,p,d,_)},t.prototype.emplace=function(r,a,c,p,d,_,b){var A=6*r;return this.int16[A+0]=a,this.int16[A+1]=c,this.int16[A+2]=p,this.int16[A+3]=d,this.int16[A+4]=_,this.int16[A+5]=b,r},t}(ur);cs.prototype.bytesPerElement=12,We("StructArrayLayout2i4i12",cs);var Sa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A){var z=this.length;return this.resize(z+1),this.emplace(z,r,a,c,p,d,_,b,A)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z){var R=6*r,N=12*r;return this.int16[R+0]=a,this.int16[R+1]=c,this.int16[R+2]=p,this.int16[R+3]=d,this.uint8[N+8]=_,this.uint8[N+9]=b,this.uint8[N+10]=A,this.uint8[N+11]=z,r},t}(ur);Sa.prototype.bytesPerElement=12,We("StructArrayLayout4i4ub12",Sa);var Nn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A){var z=this.length;return this.resize(z+1),this.emplace(z,r,a,c,p,d,_,b,A)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z){var R=8*r;return this.uint16[R+0]=a,this.uint16[R+1]=c,this.uint16[R+2]=p,this.uint16[R+3]=d,this.uint16[R+4]=_,this.uint16[R+5]=b,this.uint16[R+6]=A,this.uint16[R+7]=z,r},t}(ur);Nn.prototype.bytesPerElement=16,We("StructArrayLayout8ui16",Nn);var Gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A){var z=this.length;return this.resize(z+1),this.emplace(z,r,a,c,p,d,_,b,A)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z){var R=8*r;return this.int16[R+0]=a,this.int16[R+1]=c,this.int16[R+2]=p,this.int16[R+3]=d,this.uint16[R+4]=_,this.uint16[R+5]=b,this.uint16[R+6]=A,this.uint16[R+7]=z,r},t}(ur);Gs.prototype.bytesPerElement=16,We("StructArrayLayout4i4ui16",Gs);var Xs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c){var p=this.length;return this.resize(p+1),this.emplace(p,r,a,c)},t.prototype.emplace=function(r,a,c,p){var d=3*r;return this.float32[d+0]=a,this.float32[d+1]=c,this.float32[d+2]=p,r},t}(ur);Xs.prototype.bytesPerElement=12,We("StructArrayLayout3f12",Xs);var ps=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r){var a=this.length;return this.resize(a+1),this.emplace(a,r)},t.prototype.emplace=function(r,a){var c=1*r;return this.uint32[c+0]=a,r},t}(ur);ps.prototype.bytesPerElement=4,We("StructArrayLayout1ul4",ps);var n=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A,z,R,N){var U=this.length;return this.resize(U+1),this.emplace(U,r,a,c,p,d,_,b,A,z,R,N)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z,R,N,U){var j=12*r,ee=6*r;return this.int16[j+0]=a,this.int16[j+1]=c,this.int16[j+2]=p,this.int16[j+3]=d,this.int16[j+4]=_,this.int16[j+5]=b,this.uint32[ee+3]=A,this.uint16[j+8]=z,this.uint16[j+9]=R,this.int16[j+10]=N,this.int16[j+11]=U,r},t}(ur);n.prototype.bytesPerElement=24,We("StructArrayLayout6i1ul2ui2i24",n);var i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_){var b=this.length;return this.resize(b+1),this.emplace(b,r,a,c,p,d,_)},t.prototype.emplace=function(r,a,c,p,d,_,b){var A=6*r;return this.int16[A+0]=a,this.int16[A+1]=c,this.int16[A+2]=p,this.int16[A+3]=d,this.int16[A+4]=_,this.int16[A+5]=b,r},t}(ur);i.prototype.bytesPerElement=12,We("StructArrayLayout2i2i2i12",i);var o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a){var c=this.length;return this.resize(c+1),this.emplace(c,r,a)},t.prototype.emplace=function(r,a,c){var p=4*r;return this.uint8[p+0]=a,this.uint8[p+1]=c,r},t}(ur);o.prototype.bytesPerElement=4,We("StructArrayLayout2ub4",o);var l=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A,z,R,N,U,j,ee){var re=this.length;return this.resize(re+1),this.emplace(re,r,a,c,p,d,_,b,A,z,R,N,U,j,ee)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z,R,N,U,j,ee,re){var he=20*r,ye=10*r,fe=40*r;return this.int16[he+0]=a,this.int16[he+1]=c,this.uint16[he+2]=p,this.uint16[he+3]=d,this.uint32[ye+2]=_,this.uint32[ye+3]=b,this.uint32[ye+4]=A,this.uint16[he+10]=z,this.uint16[he+11]=R,this.uint16[he+12]=N,this.float32[ye+7]=U,this.float32[ye+8]=j,this.uint8[fe+36]=ee,this.uint8[fe+37]=re,r},t}(ur);l.prototype.bytesPerElement=40,We("StructArrayLayout2i2ui3ul3ui2f2ub40",l);var h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p,d,_,b,A,z,R,N,U,j,ee){var re=this.length;return this.resize(re+1),this.emplace(re,r,a,c,p,d,_,b,A,z,R,N,U,j,ee)},t.prototype.emplace=function(r,a,c,p,d,_,b,A,z,R,N,U,j,ee,re){var he=16*r,ye=8*r;return this.int16[he+0]=a,this.int16[he+1]=c,this.int16[he+2]=p,this.int16[he+3]=d,this.uint16[he+4]=_,this.uint16[he+5]=b,this.uint16[he+6]=A,this.uint16[he+7]=z,this.uint16[he+8]=R,this.uint16[he+9]=N,this.uint16[he+10]=U,this.uint16[he+11]=j,this.uint16[he+12]=ee,this.uint32[ye+7]=re,r},t}(ur);h.prototype.bytesPerElement=32,We("StructArrayLayout4i9ui1ul32",h);var m=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r){var a=this.length;return this.resize(a+1),this.emplace(a,r)},t.prototype.emplace=function(r,a){var c=1*r;return this.float32[c+0]=a,r},t}(ur);m.prototype.bytesPerElement=4,We("StructArrayLayout1f4",m);var y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c){var p=this.length;return this.resize(p+1),this.emplace(p,r,a,c)},t.prototype.emplace=function(r,a,c,p){var d=3*r;return this.int16[d+0]=a,this.int16[d+1]=c,this.int16[d+2]=p,r},t}(ur);y.prototype.bytesPerElement=6,We("StructArrayLayout3i6",y);var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c){var p=this.length;return this.resize(p+1),this.emplace(p,r,a,c)},t.prototype.emplace=function(r,a,c,p){var d=2*r,_=4*r;return this.uint32[d+0]=a,this.uint16[_+2]=c,this.uint16[_+3]=p,r},t}(ur);v.prototype.bytesPerElement=8,We("StructArrayLayout1ul2ui8",v);var S=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c){var p=this.length;return this.resize(p+1),this.emplace(p,r,a,c)},t.prototype.emplace=function(r,a,c,p){var d=3*r;return this.uint16[d+0]=a,this.uint16[d+1]=c,this.uint16[d+2]=p,r},t}(ur);S.prototype.bytesPerElement=6,We("StructArrayLayout3ui6",S);var C=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a){var c=this.length;return this.resize(c+1),this.emplace(c,r,a)},t.prototype.emplace=function(r,a,c){var p=2*r;return this.uint16[p+0]=a,this.uint16[p+1]=c,r},t}(ur);C.prototype.bytesPerElement=4,We("StructArrayLayout2ui4",C);var L=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r){var a=this.length;return this.resize(a+1),this.emplace(a,r)},t.prototype.emplace=function(r,a){var c=1*r;return this.uint16[c+0]=a,r},t}(ur);L.prototype.bytesPerElement=2,We("StructArrayLayout1ui2",L);var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a){var c=this.length;return this.resize(c+1),this.emplace(c,r,a)},t.prototype.emplace=function(r,a,c){var p=2*r;return this.float32[p+0]=a,this.float32[p+1]=c,r},t}(ur);O.prototype.bytesPerElement=8,We("StructArrayLayout2f8",O);var V=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(r,a,c,p){var d=this.length;return this.resize(d+1),this.emplace(d,r,a,c,p)},t.prototype.emplace=function(r,a,c,p,d){var _=4*r;return this.float32[_+0]=a,this.float32[_+1]=c,this.float32[_+2]=p,this.float32[_+3]=d,r},t}(ur);V.prototype.bytesPerElement=16,We("StructArrayLayout4f16",V);var Y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(a){this._structArray.int16[this._pos2+0]=a},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(a){this._structArray.int16[this._pos2+1]=a},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(a){this._structArray.int16[this._pos2+2]=a},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(a){this._structArray.int16[this._pos2+3]=a},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(a){this._structArray.int16[this._pos2+4]=a},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(a){this._structArray.int16[this._pos2+5]=a},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+8]=a},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(a){this._structArray.int16[this._pos2+10]=a},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+11]=a},r.anchorPoint.get=function(){return new $(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,r),t}(Bi);Y.prototype.size=24;var K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return new Y(this,r)},t}(n);We("CollisionBoxArray",K);var X=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(a){this._structArray.uint16[this._pos2+3]=a},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(a){this._structArray.uint32[this._pos4+2]=a},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(a){this._structArray.uint32[this._pos4+4]=a},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(a){this._structArray.uint16[this._pos2+10]=a},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(a){this._structArray.uint16[this._pos2+11]=a},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(a){this._structArray.uint16[this._pos2+12]=a},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(a){this._structArray.float32[this._pos4+7]=a},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(a){this._structArray.float32[this._pos4+8]=a},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(a){this._structArray.uint8[this._pos1+36]=a},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(a){this._structArray.uint8[this._pos1+37]=a},Object.defineProperties(t.prototype,r),t}(Bi);X.prototype.size=40;var te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return new X(this,r)},t}(l);We("PlacedSymbolArray",te);var ae=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},r.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.horizontalPlacedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+2]=a},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.verticalPlacedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+3]=a},r.key.get=function(){return this._structArray.uint16[this._pos2+4]},r.key.set=function(a){this._structArray.uint16[this._pos2+4]=a},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},r.textBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+5]=a},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},r.textBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+6]=a},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.iconBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+7]=a},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.iconBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+8]=a},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.featureIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},r.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},r.numGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+10]=a},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},r.numVerticalGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+11]=a},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numIconVertices.set=function(a){this._structArray.uint16[this._pos2+12]=a},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},r.crossTileID.set=function(a){this._structArray.uint32[this._pos4+7]=a},Object.defineProperties(t.prototype,r),t}(Bi);ae.prototype.size=32;var le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return new ae(this,r)},t}(h);We("SymbolInstanceArray",le);var ie=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(a){this._structArray.float32[this._pos4+0]=a},Object.defineProperties(t.prototype,r),t}(Bi);ie.prototype.size=4;var ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(r){return this.float32[1*r+0]},t.prototype.get=function(r){return new ie(this,r)},t}(m);We("GlyphOffsetArray",ce);var ge=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(a){this._structArray.int16[this._pos2+0]=a},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(a){this._structArray.int16[this._pos2+1]=a},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+2]=a},Object.defineProperties(t.prototype,r),t}(Bi);ge.prototype.size=6;var Se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(r){return this.int16[3*r+0]},t.prototype.gety=function(r){return this.int16[3*r+1]},t.prototype.gettileUnitDistanceFromAnchor=function(r){return this.int16[3*r+2]},t.prototype.get=function(r){return new ge(this,r)},t}(y);We("SymbolLineVertexArray",Se);var Ae=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(a){this._structArray.uint32[this._pos4+0]=a},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+3]=a},Object.defineProperties(t.prototype,r),t}(Bi);Ae.prototype.size=8;var et=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return new Ae(this,r)},t}(v);We("FeatureIndexArray",et);var at=vn([{name:"a_pos",components:2,type:"Int16"}],4),ot=at.members,ke=(at.size,at.alignment,function(e){e===void 0&&(e=[]),this.segments=e});function bt(e,t){return 256*(e=$e(Math.floor(e),0,255))+(t=$e(Math.floor(t),0,255))}ke.prototype.prepareSegment=function(e,t,r,a){var c=this.segments[this.segments.length-1];return e>ke.MAX_VERTEX_ARRAY_LENGTH&&Nr("Max vertices per segment is "+ke.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!c||c.vertexLength+e>ke.MAX_VERTEX_ARRAY_LENGTH||c.sortKey!==a)&&(c={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},a!==void 0&&(c.sortKey=a),this.segments.push(c)),c},ke.prototype.get=function(){return this.segments},ke.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var r=t[e];for(var a in r.vaos)r.vaos[a].destroy()}},ke.simpleSegment=function(e,t,r,a){return new ke([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:a,vaos:{},sortKey:0}])},ke.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,We("SegmentVector",ke);var tt=function(){this.ids=[],this.positions=[],this.indexed=!1};function Qt(e,t,r){var a=e[t];e[t]=e[r],e[r]=a}tt.prototype.add=function(e,t,r,a){this.ids.push(e),this.positions.push(t,r,a)},tt.prototype.getPositions=function(e){for(var t=0,r=this.ids.length-1;t<r;){var a=t+r>>1;this.ids[a]>=e?r=a:t=a+1}for(var c=[];this.ids[t]===e;){var p=this.positions[3*t],d=this.positions[3*t+1],_=this.positions[3*t+2];c.push({index:p,start:d,end:_}),t++}return c},tt.serialize=function(e,t){var r=new Float64Array(e.ids),a=new Uint32Array(e.positions);return function c(p,d,_,b){if(!(_>=b)){for(var A=p[_+b>>1],z=_-1,R=b+1;;){do z++;while(p[z]<A);do R--;while(p[R]>A);if(z>=R)break;Qt(p,z,R),Qt(d,3*z,3*R),Qt(d,3*z+1,3*R+1),Qt(d,3*z+2,3*R+2)}c(p,d,_,R),c(p,d,R+1,b)}}(r,a,0,r.length-1),t.push(r.buffer,a.buffer),{ids:r,positions:a}},tt.deserialize=function(e){var t=new tt;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},We("FeaturePositionMap",tt);var wt=function(e,t){this.gl=e.gl,this.location=t},cr=function(e){function t(r,a){e.call(this,r,a),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))},t}(wt),Ht=function(e){function t(r,a){e.call(this,r,a),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))},t}(wt),Tt=function(e){function t(r,a){e.call(this,r,a),this.current=[0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))},t}(wt),Er=function(e){function t(r,a){e.call(this,r,a),this.current=[0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))},t}(wt),Wi=function(e){function t(r,a){e.call(this,r,a),this.current=[0,0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))},t}(wt),Ki=function(e){function t(r,a){e.call(this,r,a),this.current=Gt.transparent}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))},t}(wt),Oo=new Float32Array(16),ho=function(e){function t(r,a){e.call(this,r,a),this.current=Oo}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(var a=1;a<16;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}},t}(wt);function _i(e){return[bt(255*e.r,255*e.g),bt(255*e.b,255*e.a)]}var sn=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=r,this.maxValue=-1/0};sn.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},sn.prototype.setConstantPatternPositions=function(){},sn.prototype.populatePaintArray=function(){},sn.prototype.updatePaintArray=function(){},sn.prototype.upload=function(){},sn.prototype.destroy=function(){},sn.prototype.setUniforms=function(e,t,r,a){t.set(a.constantOr(this.value))},sn.prototype.getBinding=function(e,t){return this.type==="color"?new Ki(e,t):new Ht(e,t)},sn.serialize=function(e){var t=e.value,r=e.names,a=e.type;return{value:jt(t),names:r,type:a}},sn.deserialize=function(e){var t=e.value,r=e.names,a=e.type;return new sn(rr(t),r,a)};var vi=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};vi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},vi.prototype.populatePaintArray=function(){},vi.prototype.updatePaintArray=function(){},vi.prototype.upload=function(){},vi.prototype.destroy=function(){},vi.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},vi.prototype.setUniforms=function(e,t,r,a,c){var p=this.patternPositions;c==="u_pattern_to"&&p.patternTo&&t.set(p.patternTo),c==="u_pattern_from"&&p.patternFrom&&t.set(p.patternFrom)},vi.prototype.getBinding=function(e,t){return new Wi(e,t)};var oi=function(e,t,r,a){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map(function(c){return"a_"+c}),this.maxValue=-1/0,this.paintVertexAttributes=t.map(function(c){return{name:"a_"+c,type:"Float32",components:r==="color"?2:1,offset:0}}),this.paintVertexArray=new a};oi.prototype.defines=function(){return[]},oi.prototype.setConstantPatternPositions=function(){},oi.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,a=r.length;r.reserve(e);var c=this.expression.evaluate(new Or(0),t,{});if(this.type==="color")for(var p=_i(c),d=a;d<e;d++)r.emplaceBack(p[0],p[1]);else{for(var _=a;_<e;_++)r.emplaceBack(c);this.maxValue=Math.max(this.maxValue,c)}},oi.prototype.updatePaintArray=function(e,t,r,a){var c=this.paintVertexArray,p=this.expression.evaluate({zoom:0},r,a);if(this.type==="color")for(var d=_i(p),_=e;_<t;_++)c.emplace(_,d[0],d[1]);else{for(var b=e;b<t;b++)c.emplace(b,p);this.maxValue=Math.max(this.maxValue,p)}},oi.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},oi.prototype.setUniforms=function(e,t){t.set(0)},oi.prototype.getBinding=function(e,t){return new Ht(e,t)};var ai=function(e,t,r,a,c,p){this.expression=e,this.names=t,this.uniformNames=this.names.map(function(_){return"a_"+_+"_t"}),this.type=r,this.useIntegerZoom=a,this.zoom=c,this.maxValue=-1/0;var d=p;this.paintVertexAttributes=t.map(function(_){return{name:"a_"+_,type:"Float32",components:r==="color"?4:2,offset:0}}),this.paintVertexArray=new d};ai.prototype.defines=function(){return[]},ai.prototype.setConstantPatternPositions=function(){},ai.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,a=r.length;r.reserve(e);var c=this.expression.evaluate(new Or(this.zoom),t,{}),p=this.expression.evaluate(new Or(this.zoom+1),t,{});if(this.type==="color")for(var d=_i(c),_=_i(p),b=a;b<e;b++)r.emplaceBack(d[0],d[1],_[0],_[1]);else{for(var A=a;A<e;A++)r.emplaceBack(c,p);this.maxValue=Math.max(this.maxValue,c,p)}},ai.prototype.updatePaintArray=function(e,t,r,a){var c=this.paintVertexArray,p=this.expression.evaluate({zoom:this.zoom},r,a),d=this.expression.evaluate({zoom:this.zoom+1},r,a);if(this.type==="color")for(var _=_i(p),b=_i(d),A=e;A<t;A++)c.emplace(A,_[0],_[1],b[0],b[1]);else{for(var z=e;z<t;z++)c.emplace(z,p,d);this.maxValue=Math.max(this.maxValue,p,d)}},ai.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ai.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ai.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},ai.prototype.setUniforms=function(e,t,r){t.set(this.interpolationFactor(r.zoom))},ai.prototype.getBinding=function(e,t){return new Ht(e,t)};var xi=function(e,t,r,a,c,p,d){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map(function(_){return"a_"+_+"_t"}),this.useIntegerZoom=a,this.zoom=c,this.maxValue=-1/0,this.layerId=d,this.paintVertexAttributes=t.map(function(_){return{name:"a_"+_,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};xi.prototype.defines=function(){return[]},xi.prototype.setConstantPatternPositions=function(){},xi.prototype.populatePaintArray=function(e,t,r){var a=this.zoomInPaintVertexArray,c=this.zoomOutPaintVertexArray,p=this.layerId,d=a.length;if(a.reserve(e),c.reserve(e),r&&t.patterns&&t.patterns[p]){var _=t.patterns[p],b=_.min,A=_.mid,z=_.max,R=r[b],N=r[A],U=r[z];if(!R||!N||!U)return;for(var j=d;j<e;j++)a.emplaceBack(N.tl[0],N.tl[1],N.br[0],N.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1]),c.emplaceBack(N.tl[0],N.tl[1],N.br[0],N.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1])}},xi.prototype.updatePaintArray=function(e,t,r,a,c){var p=this.zoomInPaintVertexArray,d=this.zoomOutPaintVertexArray,_=this.layerId;if(c&&r.patterns&&r.patterns[_]){var b=r.patterns[_],A=b.min,z=b.mid,R=b.max,N=c[A],U=c[z],j=c[R];if(!N||!U||!j)return;for(var ee=e;ee<t;ee++)p.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1]),d.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1])}},xi.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},xi.prototype.setUniforms=function(e,t){t.set(0)},xi.prototype.getBinding=function(e,t){return new Ht(e,t)};var xn=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new tt,this._bufferOffset=0};xn.createDynamic=function(e,t,r){var a=new xn,c=[];for(var p in e.paint._values)if(r(p)){var d=e.paint.get(p);if(d instanceof ni&&Jr(d.property.specification)){var _=Pl(p,e.type),b=d.property.specification.type,A=d.property.useIntegerZoom;if(d.property.specification["property-type"]==="cross-faded"||d.property.specification["property-type"]==="cross-faded-data-driven")if(d.value.kind==="constant")a.binders[p]=new vi(d.value.value,_,b),c.push("/u_"+p);else{var z=Ga(p,b,"source");a.binders[p]=new xi(d.value,_,b,A,t,z,e.id),c.push("/a_"+p)}else if(d.value.kind==="constant")a.binders[p]=new sn(d.value.value,_,b),c.push("/u_"+p);else if(d.value.kind==="source"){var R=Ga(p,b,"source");a.binders[p]=new oi(d.value,_,b,R),c.push("/a_"+p)}else{var N=Ga(p,b,"composite");a.binders[p]=new ai(d.value,_,b,A,t,N),c.push("/z_"+p)}}}return a.cacheKey=c.sort().join(""),a},xn.prototype.populatePaintArrays=function(e,t,r,a){for(var c in this.binders)this.binders[c].populatePaintArray(e,t,a);t.id!==void 0&&this._featureMap.add(+t.id,r,this._bufferOffset,e),this._bufferOffset=e},xn.prototype.setConstantPatternPositions=function(e,t){for(var r in this.binders)this.binders[r].setConstantPatternPositions(e,t)},xn.prototype.updatePaintArrays=function(e,t,r,a){var c=!1;for(var p in e)for(var d=0,_=this._featureMap.getPositions(+p);d<_.length;d+=1){var b=_[d],A=t.feature(b.index);for(var z in this.binders){var R=this.binders[z];if(!(R instanceof sn||R instanceof vi)&&R.expression.isStateDependent===!0){var N=r.paint.get(z);R.expression=N.value,R.updatePaintArray(b.start,b.end,A,e[p],a),c=!0}}}return c},xn.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},xn.prototype.getPaintVertexBuffers=function(){return this._buffers},xn.prototype.getUniforms=function(e,t){var r={};for(var a in this.binders)for(var c=this.binders[a],p=0,d=c.uniformNames;p<d.length;p+=1){var _=d[p];r[_]=c.getBinding(e,t[_])}return r},xn.prototype.setUniforms=function(e,t,r,a){for(var c in this.binders)for(var p=this.binders[c],d=0,_=p.uniformNames;d<_.length;d+=1){var b=_[d];p.setUniforms(e,t[b],a,r.get(c),b)}},xn.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var r in this.binders){var a=this.binders[r];if(a instanceof xi){var c=e.fromScale===2?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;c&&t.push(c)}else(a instanceof oi||a instanceof ai)&&a.paintVertexBuffer&&t.push(a.paintVertexBuffer)}this._buffers=t},xn.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var r=[];for(var a in this.binders){var c=this.binders[a];(c instanceof oi||c instanceof ai)&&c.paintVertexBuffer&&r.push(c.paintVertexBuffer)}this._buffers=r},xn.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var si=function(e,t,r,a){a===void 0&&(a=function(){return!0}),this.programConfigurations={};for(var c=0,p=t;c<p.length;c+=1){var d=p[c];this.programConfigurations[d.id]=xn.createDynamic(d,r,a),this.programConfigurations[d.id].layoutAttributes=e}this.needsUpload=!1};function Pl(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Ga(e,t,r){var a={color:{source:O,composite:V},number:{source:m,composite:O}},c=function(p){return{"line-pattern":{source:Nn,composite:Nn},"fill-pattern":{source:Nn,composite:Nn},"fill-extrusion-pattern":{source:Nn,composite:Nn}}[p]}(e);return c&&c[r]||a[t][r]}si.prototype.populatePaintArrays=function(e,t,r,a){for(var c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(e,t,r,a);this.needsUpload=!0},si.prototype.updatePaintArrays=function(e,t,r,a){for(var c=0,p=r;c<p.length;c+=1){var d=p[c];this.needsUpload=this.programConfigurations[d.id].updatePaintArrays(e,t,d,a)||this.needsUpload}},si.prototype.get=function(e){return this.programConfigurations[e]},si.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},si.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},We("ConstantBinder",sn),We("CrossFadedConstantBinder",vi),We("SourceExpressionBinder",oi),We("CrossFadedCompositeBinder",xi),We("CompositeExpressionBinder",ai),We("ProgramConfiguration",xn,{omit:["_buffers"]}),We("ProgramConfigurationSet",si);var ln=8192,Xa,li=(Xa=16,{min:-1*Math.pow(2,Xa-1),max:Math.pow(2,Xa-1)-1});function Fo(e){for(var t=ln/e.extent,r=e.loadGeometry(),a=0;a<r.length;a++)for(var c=r[a],p=0;p<c.length;p++){var d=c[p];d.x=Math.round(d.x*t),d.y=Math.round(d.y*t),(d.x<li.min||d.x>li.max||d.y<li.min||d.y>li.max)&&Nr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function hs(e,t,r,a,c){e.emplaceBack(2*t+(a+1)/2,2*r+(c+1)/2)}var Yi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Za,this.indexArray=new S,this.segments=new ke,this.programConfigurations=new si(ot,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Nc(e,t){for(var r=0;r<e.length;r++)if(fs(t,e[r]))return!0;for(var a=0;a<t.length;a++)if(fs(e,t[a]))return!0;return!!vu(e,t)}function Hf(e,t,r){return!!fs(e,t)||!!xu(t,e,r)}function jc(e,t){if(e.length===1)return Zc(t,e[0]);for(var r=0;r<t.length;r++)for(var a=t[r],c=0;c<a.length;c++)if(fs(e,a[c]))return!0;for(var p=0;p<e.length;p++)if(Zc(t,e[p]))return!0;for(var d=0;d<t.length;d++)if(vu(e,t[d]))return!0;return!1}function Wf(e,t,r){if(e.length>1){if(vu(e,t))return!0;for(var a=0;a<t.length;a++)if(xu(t[a],e,r))return!0}for(var c=0;c<e.length;c++)if(xu(e[c],t,r))return!0;return!1}function vu(e,t){if(e.length===0||t.length===0)return!1;for(var r=0;r<e.length-1;r++)for(var a=e[r],c=e[r+1],p=0;p<t.length-1;p++)if(Kf(a,c,t[p],t[p+1]))return!0;return!1}function Kf(e,t,r,a){return dr(e,r,a)!==dr(t,r,a)&&dr(e,t,r)!==dr(e,t,a)}function xu(e,t,r){var a=r*r;if(t.length===1)return e.distSqr(t[0])<a;for(var c=1;c<t.length;c++)if(qc(e,t[c-1],t[c])<a)return!0;return!1}function qc(e,t,r){var a=t.distSqr(r);if(a===0)return e.distSqr(t);var c=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/a;return c<0?e.distSqr(t):c>1?e.distSqr(r):e.distSqr(r.sub(t)._mult(c)._add(t))}function Zc(e,t){for(var r,a,c,p=!1,d=0;d<e.length;d++)for(var _=0,b=(r=e[d]).length-1;_<r.length;b=_++)a=r[_],c=r[b],a.y>t.y!=c.y>t.y&&t.x<(c.x-a.x)*(t.y-a.y)/(c.y-a.y)+a.x&&(p=!p);return p}function fs(e,t){for(var r=!1,a=0,c=e.length-1;a<e.length;c=a++){var p=e[a],d=e[c];p.y>t.y!=d.y>t.y&&t.x<(d.x-p.x)*(t.y-p.y)/(d.y-p.y)+p.x&&(r=!r)}return r}function Yf(e,t,r){var a=r[0],c=r[2];if(e.x<a.x&&t.x<a.x||e.x>c.x&&t.x>c.x||e.y<a.y&&t.y<a.y||e.y>c.y&&t.y>c.y)return!1;var p=dr(e,t,r[0]);return p!==dr(e,t,r[1])||p!==dr(e,t,r[2])||p!==dr(e,t,r[3])}function Hs(e,t,r){var a=t.paint.get(e).value;return a.kind==="constant"?a.value:r.programConfigurations.get(t.id).binders[e].maxValue}function zl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function kl(e,t,r,a,c){if(!t[0]&&!t[1])return e;var p=$.convert(t)._mult(c);r==="viewport"&&p._rotate(-a);for(var d=[],_=0;_<e.length;_++){var b=e[_];d.push(b.sub(p))}return d}Yi.prototype.populate=function(e,t){for(var r=0,a=e;r<a.length;r+=1){var c=a[r],p=c.feature,d=c.index,_=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Or(this.zoom),p)){var b=Fo(p);this.addFeature(p,b,d),t.featureIndex.insert(p,b,d,_,this.index)}}},Yi.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},Yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ot),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yi.prototype.addFeature=function(e,t,r){for(var a=0,c=t;a<c.length;a+=1)for(var p=0,d=c[a];p<d.length;p+=1){var _=d[p],b=_.x,A=_.y;if(!(b<0||b>=ln||A<0||A>=ln)){var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=z.vertexLength;hs(this.layoutVertexArray,b,A,-1,-1),hs(this.layoutVertexArray,b,A,1,-1),hs(this.layoutVertexArray,b,A,1,1),hs(this.layoutVertexArray,b,A,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),z.vertexLength+=4,z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{})},We("CircleBucket",Yi,{omit:["layers"]});var $f={paint:new ii({"circle-radius":new mt(be.paint_circle["circle-radius"]),"circle-color":new mt(be.paint_circle["circle-color"]),"circle-blur":new mt(be.paint_circle["circle-blur"]),"circle-opacity":new mt(be.paint_circle["circle-opacity"]),"circle-translate":new nt(be.paint_circle["circle-translate"]),"circle-translate-anchor":new nt(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nt(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nt(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mt(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mt(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mt(be.paint_circle["circle-stroke-opacity"])})},ui=typeof Float32Array<"u"?Float32Array:Array;function Gc(){var e=new ui(9);return ui!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Xc(){var e=new ui(3);return ui!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Hc(e,t,r){var a=new ui(3);return a[0]=e,a[1]=t,a[2]=r,a}Xc();function Ml(e,t,r){var a=t[0],c=t[1],p=t[2],d=t[3];return e[0]=r[0]*a+r[4]*c+r[8]*p+r[12]*d,e[1]=r[1]*a+r[5]*c+r[9]*p+r[13]*d,e[2]=r[2]*a+r[6]*c+r[10]*p+r[14]*d,e[3]=r[3]*a+r[7]*c+r[11]*p+r[15]*d,e}(function(){var e;e=new ui(4),ui!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)})();function Wc(){var e=new ui(4);return ui!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Xc(),Hc(1,0,0),Hc(0,1,0),Wc(),Wc(),Gc(),function(){var e;e=new ui(2),ui!=Float32Array&&(e[0]=0,e[1]=0)}();var Jf=function(e){function t(r){e.call(this,r,$f)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(r){return new Yi(r)},t.prototype.queryRadius=function(r){var a=r;return Hs("circle-radius",this,a)+Hs("circle-stroke-width",this,a)+zl(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(r,a,c,p,d,_,b,A){for(var z=kl(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,b),R=this.paint.get("circle-radius").evaluate(a,c)+this.paint.get("circle-stroke-width").evaluate(a,c),N=this.paint.get("circle-pitch-alignment")==="map",U=N?z:function(Fe,Ne){return Fe.map(function(st){return Kc(st,Ne)})}(z,A),j=N?R*b:R,ee=0,re=p;ee<re.length;ee+=1)for(var he=0,ye=re[ee];he<ye.length;he+=1){var fe=ye[he],xe=N?fe:Kc(fe,A),ze=j,Re=Ml([],[fe.x,fe.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=Re[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=_.cameraToCenterDistance/Re[3]),Hf(U,xe,ze))return!0}return!1},t}(gi);function Kc(e,t){var r=Ml([],[e.x,e.y,0,1],t);return new $(r[0]/r[3],r[1]/r[3])}var Yc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Yi);function bu(e,t,r,a){var c=t.width,p=t.height;if(a){if(a.length!==c*p*r)throw new RangeError("mismatched image size")}else a=new Uint8Array(c*p*r);return e.width=c,e.height=p,e.data=a,e}function $c(e,t,r){var a=t.width,c=t.height;if(a!==e.width||c!==e.height){var p=bu({},{width:a,height:c},r);wu(e,p,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,a),height:Math.min(e.height,c)},r),e.width=a,e.height=c,e.data=p.data}}function wu(e,t,r,a,c,p){if(c.width===0||c.height===0)return t;if(c.width>e.width||c.height>e.height||r.x>e.width-c.width||r.y>e.height-c.height)throw new RangeError("out of range source coordinates for image copy");if(c.width>t.width||c.height>t.height||a.x>t.width-c.width||a.y>t.height-c.height)throw new RangeError("out of range destination coordinates for image copy");for(var d=e.data,_=t.data,b=0;b<c.height;b++)for(var A=((r.y+b)*e.width+r.x)*p,z=((a.y+b)*t.width+a.x)*p,R=0;R<c.width*p;R++)_[z+R]=d[A+R];return t}We("HeatmapBucket",Yc,{omit:["layers"]});var Ha=function(e,t){bu(this,e,1,t)};Ha.prototype.resize=function(e){$c(this,e,1)},Ha.prototype.clone=function(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))},Ha.copy=function(e,t,r,a,c){wu(e,t,r,a,c,1)};var ci=function(e,t){bu(this,e,4,t)};ci.prototype.resize=function(e){$c(this,e,4)},ci.prototype.clone=function(){return new ci({width:this.width,height:this.height},new Uint8Array(this.data))},ci.copy=function(e,t,r,a,c){wu(e,t,r,a,c,4)},We("AlphaImage",Ha),We("RGBAImage",ci);var Qf={paint:new ii({"heatmap-radius":new mt(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mt(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nt(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new co(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nt(be.paint_heatmap["heatmap-opacity"])})};function Jc(e,t){for(var r=new Uint8Array(1024),a={},c=0,p=0;c<256;c++,p+=4){a[t]=c/255;var d=e.evaluate(a);r[p+0]=Math.floor(255*d.r/d.a),r[p+1]=Math.floor(255*d.g/d.a),r[p+2]=Math.floor(255*d.b/d.a),r[p+3]=Math.floor(255*d.a)}return new ci({width:256,height:1},r)}var ed=function(e){function t(r){e.call(this,r,Qf),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(r){return new Yc(r)},t.prototype._handleSpecialPaintPropertyUpdate=function(r){r==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var r=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Jc(r,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(gi),td={paint:new ii({"hillshade-illumination-direction":new nt(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nt(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nt(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nt(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nt(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nt(be.paint_hillshade["hillshade-accent-color"])})},rd=function(e){function t(r){e.call(this,r,td)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(gi),Eu=vn([{name:"a_pos",components:2,type:"Int16"}],4),Qc=Eu.members,Su=(Eu.size,Eu.alignment,Ll),nd=Ll;function Ll(e,t,r){r=r||2;var a,c,p,d,_,b,A,z=t&&t.length,R=z?t[0]*r:e.length,N=ep(e,0,R,r,!0),U=[];if(!N||N.next===N.prev)return U;if(z&&(N=function(ee,re,he,ye){var fe,xe,ze,Re,Fe,Ne=[];for(fe=0,xe=re.length;fe<xe;fe++)ze=re[fe]*ye,Re=fe<xe-1?re[fe+1]*ye:ee.length,(Fe=ep(ee,ze,Re,ye,!1))===Fe.next&&(Fe.steiner=!0),Ne.push(cd(Fe));for(Ne.sort(ld),fe=0;fe<Ne.length;fe++)ud(Ne[fe],he),he=Ws(he,he.next);return he}(e,t,N,r)),e.length>80*r){a=p=e[0],c=d=e[1];for(var j=r;j<R;j+=r)(_=e[j])<a&&(a=_),(b=e[j+1])<c&&(c=b),_>p&&(p=_),b>d&&(d=b);A=(A=Math.max(p-a,d-c))!==0?1/A:0}return Ks(N,U,r,a,c,A),U}function ep(e,t,r,a,c){var p,d;if(c===Iu(e,t,r,a)>0)for(p=t;p<r;p+=a)d=np(p,e[p],e[p+1],d);else for(p=r-a;p>=t;p-=a)d=np(p,e[p],e[p+1],d);return d&&Wa(d,d.next)&&($s(d),d=d.next),d}function Ws(e,t){if(!e)return e;t||(t=e);var r,a=e;do if(r=!1,a.steiner||!Wa(a,a.next)&&jn(a.prev,a,a.next)!==0)a=a.next;else{if($s(a),(a=t=a.prev)===a.next)break;r=!0}while(r||a!==t);return t}function Ks(e,t,r,a,c,p,d){if(e){!d&&p&&function(z,R,N,U){var j=z;do j.z===null&&(j.z=Tu(j.x,j.y,R,N,U)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==z);j.prevZ.nextZ=null,j.prevZ=null,function(ee){var re,he,ye,fe,xe,ze,Re,Fe,Ne=1;do{for(he=ee,ee=null,xe=null,ze=0;he;){for(ze++,ye=he,Re=0,re=0;re<Ne&&(Re++,ye=ye.nextZ);re++);for(Fe=Ne;Re>0||Fe>0&&ye;)Re!==0&&(Fe===0||!ye||he.z<=ye.z)?(fe=he,he=he.nextZ,Re--):(fe=ye,ye=ye.nextZ,Fe--),xe?xe.nextZ=fe:ee=fe,fe.prevZ=xe,xe=fe;he=ye}xe.nextZ=null,Ne*=2}while(ze>1)}(j)}(e,a,c,p);for(var _,b,A=e;e.prev!==e.next;)if(_=e.prev,b=e.next,p?od(e,a,c,p):id(e))t.push(_.i/r),t.push(e.i/r),t.push(b.i/r),$s(e),e=b.next,A=b.next;else if((e=b)===A){d?d===1?Ks(e=ad(e,t,r),t,r,a,c,p,2):d===2&&sd(e,t,r,a,c,p):Ks(Ws(e),t,r,a,c,p,1);break}}}function id(e){var t=e.prev,r=e,a=e.next;if(jn(t,r,a)>=0)return!1;for(var c=e.next.next;c!==e.prev;){if(ds(t.x,t.y,r.x,r.y,a.x,a.y,c.x,c.y)&&jn(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function od(e,t,r,a){var c=e.prev,p=e,d=e.next;if(jn(c,p,d)>=0)return!1;for(var _=c.x<p.x?c.x<d.x?c.x:d.x:p.x<d.x?p.x:d.x,b=c.y<p.y?c.y<d.y?c.y:d.y:p.y<d.y?p.y:d.y,A=c.x>p.x?c.x>d.x?c.x:d.x:p.x>d.x?p.x:d.x,z=c.y>p.y?c.y>d.y?c.y:d.y:p.y>d.y?p.y:d.y,R=Tu(_,b,t,r,a),N=Tu(A,z,t,r,a),U=e.prevZ,j=e.nextZ;U&&U.z>=R&&j&&j.z<=N;){if(U!==e.prev&&U!==e.next&&ds(c.x,c.y,p.x,p.y,d.x,d.y,U.x,U.y)&&jn(U.prev,U,U.next)>=0||(U=U.prevZ,j!==e.prev&&j!==e.next&&ds(c.x,c.y,p.x,p.y,d.x,d.y,j.x,j.y)&&jn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;U&&U.z>=R;){if(U!==e.prev&&U!==e.next&&ds(c.x,c.y,p.x,p.y,d.x,d.y,U.x,U.y)&&jn(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;j&&j.z<=N;){if(j!==e.prev&&j!==e.next&&ds(c.x,c.y,p.x,p.y,d.x,d.y,j.x,j.y)&&jn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function ad(e,t,r){var a=e;do{var c=a.prev,p=a.next.next;!Wa(c,p)&&tp(c,a,a.next,p)&&Ys(c,p)&&Ys(p,c)&&(t.push(c.i/r),t.push(a.i/r),t.push(p.i/r),$s(a),$s(a.next),a=e=p),a=a.next}while(a!==e);return a}function sd(e,t,r,a,c,p){var d=e;do{for(var _=d.next.next;_!==d.prev;){if(d.i!==_.i&&pd(d,_)){var b=rp(d,_);return d=Ws(d,d.next),b=Ws(b,b.next),Ks(d,t,r,a,c,p),void Ks(b,t,r,a,c,p)}_=_.next}d=d.next}while(d!==e)}function ld(e,t){return e.x-t.x}function ud(e,t){if(t=function(a,c){var p,d=c,_=a.x,b=a.y,A=-1/0;do{if(b<=d.y&&b>=d.next.y&&d.next.y!==d.y){var z=d.x+(b-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(z<=_&&z>A){if(A=z,z===_){if(b===d.y)return d;if(b===d.next.y)return d.next}p=d.x<d.next.x?d:d.next}}d=d.next}while(d!==c);if(!p)return null;if(_===A)return p.prev;var R,N=p,U=p.x,j=p.y,ee=1/0;for(d=p.next;d!==N;)_>=d.x&&d.x>=U&&_!==d.x&&ds(b<j?_:A,b,U,j,b<j?A:_,b,d.x,d.y)&&((R=Math.abs(b-d.y)/(_-d.x))<ee||R===ee&&d.x>p.x)&&Ys(d,a)&&(p=d,ee=R),d=d.next;return p}(e,t)){var r=rp(t,e);Ws(r,r.next)}}function Tu(e,t,r,a,c){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*c)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-a)*c)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function cd(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function ds(e,t,r,a,c,p,d,_){return(c-d)*(t-_)-(e-d)*(p-_)>=0&&(e-d)*(a-_)-(r-d)*(t-_)>=0&&(r-d)*(p-_)-(c-d)*(a-_)>=0}function pd(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(r,a){var c=r;do{if(c.i!==r.i&&c.next.i!==r.i&&c.i!==a.i&&c.next.i!==a.i&&tp(c,c.next,r,a))return!0;c=c.next}while(c!==r);return!1}(e,t)&&Ys(e,t)&&Ys(t,e)&&function(r,a){var c=r,p=!1,d=(r.x+a.x)/2,_=(r.y+a.y)/2;do c.y>_!=c.next.y>_&&c.next.y!==c.y&&d<(c.next.x-c.x)*(_-c.y)/(c.next.y-c.y)+c.x&&(p=!p),c=c.next;while(c!==r);return p}(e,t)}function jn(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Wa(e,t){return e.x===t.x&&e.y===t.y}function tp(e,t,r,a){return!!(Wa(e,t)&&Wa(r,a)||Wa(e,a)&&Wa(r,t))||jn(e,t,r)>0!=jn(e,t,a)>0&&jn(r,a,e)>0!=jn(r,a,t)>0}function Ys(e,t){return jn(e.prev,e,e.next)<0?jn(e,t,e.next)>=0&&jn(e,e.prev,t)>=0:jn(e,t,e.prev)<0||jn(e,e.next,t)<0}function rp(e,t){var r=new Au(e.i,e.x,e.y),a=new Au(t.i,t.x,t.y),c=e.next,p=t.prev;return e.next=t,t.prev=e,r.next=c,c.prev=r,a.next=r,r.prev=a,p.next=a,a.prev=p,a}function np(e,t,r,a){var c=new Au(e,t,r);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function $s(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Au(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Iu(e,t,r,a){for(var c=0,p=t,d=r-a;p<r;p+=a)c+=(e[d]-e[p])*(e[p+1]+e[d+1]),d=p;return c}function hd(e,t,r,a,c){(function p(d,_,b,A,z){for(;A>b;){if(A-b>600){var R=A-b+1,N=_-b+1,U=Math.log(R),j=.5*Math.exp(2*U/3),ee=.5*Math.sqrt(U*j*(R-j)/R)*(N-R/2<0?-1:1),re=Math.max(b,Math.floor(_-N*j/R+ee)),he=Math.min(A,Math.floor(_+(R-N)*j/R+ee));p(d,_,re,he,z)}var ye=d[_],fe=b,xe=A;for(Js(d,b,_),z(d[A],ye)>0&&Js(d,b,A);fe<xe;){for(Js(d,fe,xe),fe++,xe--;z(d[fe],ye)<0;)fe++;for(;z(d[xe],ye)>0;)xe--}z(d[b],ye)===0?Js(d,b,xe):Js(d,++xe,A),xe<=_&&(b=xe+1),_<=xe&&(A=xe-1)}})(e,t,r||0,a||e.length-1,c||fd)}function Js(e,t,r){var a=e[t];e[t]=e[r],e[r]=a}function fd(e,t){return e<t?-1:e>t?1:0}function Cu(e,t){var r=e.length;if(r<=1)return[e];for(var a,c,p=[],d=0;d<r;d++){var _=Qn(e[d]);_!==0&&(e[d].area=Math.abs(_),c===void 0&&(c=_<0),c===_<0?(a&&p.push(a),a=[e[d]]):a.push(e[d]))}if(a&&p.push(a),t>1)for(var b=0;b<p.length;b++)p[b].length<=t||(hd(p[b],t,1,p[b].length-1,dd),p[b]=p[b].slice(0,t));return p}function dd(e,t){return t.area-e.area}function Pu(e,t,r){for(var a=r.patternDependencies,c=!1,p=0,d=t;p<d.length;p+=1){var _=d[p].paint.get(e+"-pattern");_.isConstant()||(c=!0);var b=_.constantOr(null);b&&(c=!0,a[b.to]=!0,a[b.from]=!0)}return c}function zu(e,t,r,a,c){for(var p=c.patternDependencies,d=0,_=t;d<_.length;d+=1){var b=_[d],A=b.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var z=A.evaluate({zoom:a-1},r,{}),R=A.evaluate({zoom:a},r,{}),N=A.evaluate({zoom:a+1},r,{});p[z]=!0,p[R]=!0,p[N]=!0,r.patterns[b.id]={min:z,mid:R,max:N}}}return r}Ll.deviation=function(e,t,r,a){var c=t&&t.length,p=c?t[0]*r:e.length,d=Math.abs(Iu(e,0,p,r));if(c)for(var _=0,b=t.length;_<b;_++){var A=t[_]*r,z=_<b-1?t[_+1]*r:e.length;d-=Math.abs(Iu(e,A,z,r))}var R=0;for(_=0;_<a.length;_+=3){var N=a[_]*r,U=a[_+1]*r,j=a[_+2]*r;R+=Math.abs((e[N]-e[j])*(e[U+1]-e[N+1])-(e[N]-e[U])*(e[j+1]-e[N+1]))}return d===0&&R===0?0:Math.abs((R-d)/d)},Ll.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},a=0,c=0;c<e.length;c++){for(var p=0;p<e[c].length;p++)for(var d=0;d<t;d++)r.vertices.push(e[c][p][d]);c>0&&(a+=e[c-1].length,r.holes.push(a))}return r},Su.default=nd;var fo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Za,this.indexArray=new S,this.indexArray2=new C,this.programConfigurations=new si(Qc,e.layers,e.zoom),this.segments=new ke,this.segments2=new ke,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};fo.prototype.populate=function(e,t){this.features=[],this.hasPattern=Pu("fill",this.layers,t);for(var r=0,a=e;r<a.length;r+=1){var c=a[r],p=c.feature,d=c.index,_=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Or(this.zoom),p)){var b=Fo(p),A={sourceLayerIndex:_,index:d,geometry:b,properties:p.properties,type:p.type,patterns:{}};p.id!==void 0&&(A.id=p.id),this.hasPattern?this.features.push(zu("fill",this.layers,A,this.zoom,t)):this.addFeature(A,b,d,{}),t.featureIndex.insert(p,b,d,_,this.index)}}},fo.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},fo.prototype.addFeatures=function(e,t){for(var r=0,a=this.features;r<a.length;r+=1){var c=a[r],p=c.geometry;this.addFeature(c,p,c.index,t)}},fo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Qc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},fo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},fo.prototype.addFeature=function(e,t,r,a){for(var c=0,p=Cu(t,500);c<p.length;c+=1){for(var d=p[c],_=0,b=0,A=d;b<A.length;b+=1)_+=A[b].length;for(var z=this.segments.prepareSegment(_,this.layoutVertexArray,this.indexArray),R=z.vertexLength,N=[],U=[],j=0,ee=d;j<ee.length;j+=1){var re=ee[j];if(re.length!==0){re!==d[0]&&U.push(N.length/2);var he=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),ye=he.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(ye+re.length-1,ye),N.push(re[0].x),N.push(re[0].y);for(var fe=1;fe<re.length;fe++)this.layoutVertexArray.emplaceBack(re[fe].x,re[fe].y),this.indexArray2.emplaceBack(ye+fe-1,ye+fe),N.push(re[fe].x),N.push(re[fe].y);he.vertexLength+=re.length,he.primitiveLength+=re.length}}for(var xe=Su(N,U),ze=0;ze<xe.length;ze+=3)this.indexArray.emplaceBack(R+xe[ze],R+xe[ze+1],R+xe[ze+2]);z.vertexLength+=_,z.primitiveLength+=xe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a)},We("FillBucket",fo,{omit:["layers","features"]});var md={paint:new ii({"fill-antialias":new nt(be.paint_fill["fill-antialias"]),"fill-opacity":new mt(be.paint_fill["fill-opacity"]),"fill-color":new mt(be.paint_fill["fill-color"]),"fill-outline-color":new mt(be.paint_fill["fill-outline-color"]),"fill-translate":new nt(be.paint_fill["fill-translate"]),"fill-translate-anchor":new nt(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new wa(be.paint_fill["fill-pattern"])})},yd=function(e){function t(r){e.call(this,r,md)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(r){e.prototype.recalculate.call(this,r);var a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(r){return new fo(r)},t.prototype.queryRadius=function(){return zl(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(r,a,c,p,d,_,b){return jc(kl(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,b),p)},t}(gi),ku=vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ip=ku.members,Mu=(ku.size,ku.alignment,Math.pow(2,13));function Qs(e,t,r,a,c,p,d,_){e.emplaceBack(t,r,2*Math.floor(a*Mu)+d,c*Mu*2,p*Mu*2,Math.round(_))}var mo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new S,this.programConfigurations=new si(ip,e.layers,e.zoom),this.segments=new ke,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function gd(e,t){return e.x===t.x&&(e.x<0||e.x>ln)||e.y===t.y&&(e.y<0||e.y>ln)}function _d(e){return e.every(function(t){return t.x<0})||e.every(function(t){return t.x>ln})||e.every(function(t){return t.y<0})||e.every(function(t){return t.y>ln})}mo.prototype.populate=function(e,t){this.features=[],this.hasPattern=Pu("fill-extrusion",this.layers,t);for(var r=0,a=e;r<a.length;r+=1){var c=a[r],p=c.feature,d=c.index,_=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Or(this.zoom),p)){var b=Fo(p),A={sourceLayerIndex:_,index:d,geometry:b,properties:p.properties,type:p.type,patterns:{}};p.id!==void 0&&(A.id=p.id),this.hasPattern?this.features.push(zu("fill-extrusion",this.layers,A,this.zoom,t)):this.addFeature(A,b,d,{}),t.featureIndex.insert(p,b,d,_,this.index,!0)}}},mo.prototype.addFeatures=function(e,t){for(var r=0,a=this.features;r<a.length;r+=1){var c=a[r],p=c.geometry;this.addFeature(c,p,c.index,t)}},mo.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},mo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ip),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mo.prototype.addFeature=function(e,t,r,a){for(var c=0,p=Cu(t,500);c<p.length;c+=1){for(var d=p[c],_=0,b=0,A=d;b<A.length;b+=1)_+=A[b].length;for(var z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=0,N=d;R<N.length;R+=1){var U=N[R];if(U.length!==0&&!_d(U))for(var j=0,ee=0;ee<U.length;ee++){var re=U[ee];if(ee>=1){var he=U[ee-1];if(!gd(re,he)){z.vertexLength+4>ke.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ye=re.sub(he)._perp()._unit(),fe=he.dist(re);j+fe>32768&&(j=0),Qs(this.layoutVertexArray,re.x,re.y,ye.x,ye.y,0,0,j),Qs(this.layoutVertexArray,re.x,re.y,ye.x,ye.y,0,1,j),j+=fe,Qs(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,0,j),Qs(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,1,j);var xe=z.vertexLength;this.indexArray.emplaceBack(xe,xe+2,xe+1),this.indexArray.emplaceBack(xe+1,xe+2,xe+3),z.vertexLength+=4,z.primitiveLength+=2}}}}z.vertexLength+_>ke.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(_,this.layoutVertexArray,this.indexArray));for(var ze=[],Re=[],Fe=z.vertexLength,Ne=0,st=d;Ne<st.length;Ne+=1){var lt=st[Ne];if(lt.length!==0){lt!==d[0]&&Re.push(ze.length/2);for(var Dt=0;Dt<lt.length;Dt++){var At=lt[Dt];Qs(this.layoutVertexArray,At.x,At.y,0,0,1,1,0),ze.push(At.x),ze.push(At.y)}}}for(var or=Su(ze,Re),Ct=0;Ct<or.length;Ct+=3)this.indexArray.emplaceBack(Fe+or[Ct],Fe+or[Ct+2],Fe+or[Ct+1]);z.primitiveLength+=or.length/3,z.vertexLength+=_}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a)},We("FillExtrusionBucket",mo,{omit:["layers","features"]});var vd={paint:new ii({"fill-extrusion-opacity":new nt(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mt(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nt(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nt(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wa(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mt(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mt(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nt(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xd=function(e){function t(r){e.call(this,r,vd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(r){return new mo(r)},t.prototype.queryRadius=function(){return zl(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(r,a,c,p,d,_,b,A){var z=kl(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,b),R=this.paint.get("fill-extrusion-height").evaluate(a,c),N=this.paint.get("fill-extrusion-base").evaluate(a,c),U=function(ee,re,he,ye){for(var fe=[],xe=0,ze=ee;xe<ze.length;xe+=1){var Re=ze[xe],Fe=[Re.x,Re.y,ye,1];Ml(Fe,Fe,re),fe.push(new $(Fe[0]/Fe[3],Fe[1]/Fe[3]))}return fe}(z,A,0,0),j=function(ee,re,he,ye){for(var fe=[],xe=[],ze=ye[8]*re,Re=ye[9]*re,Fe=ye[10]*re,Ne=ye[11]*re,st=ye[8]*he,lt=ye[9]*he,Dt=ye[10]*he,At=ye[11]*he,or=0,Ct=ee;or<Ct.length;or+=1){for(var bn=Ct[or],wn=[],Bt=[],un=0,_r=bn;un<_r.length;un+=1){var Wn=_r[un],Kn=Wn.x,cn=Wn.y,Oi=ye[0]*Kn+ye[4]*cn+ye[12],Ei=ye[1]*Kn+ye[5]*cn+ye[13],hi=ye[2]*Kn+ye[6]*cn+ye[14],Yn=ye[3]*Kn+ye[7]*cn+ye[15],Si=Oi+ze,$i=Ei+Re,In=hi+Fe,Fr=Yn+Ne,Ji=Oi+st,Uo=Ei+lt,Cn=hi+Dt,pn=Yn+At,Vo=new $(Si/Fr,$i/Fr);Vo.z=In/Fr,wn.push(Vo);var hn=new $(Ji/pn,Uo/pn);hn.z=Cn/pn,Bt.push(hn)}fe.push(wn),xe.push(Bt)}return[fe,xe]}(p,N,R,A);return function(ee,re,he){var ye=1/0;jc(he,re)&&(ye=op(he,re[0]));for(var fe=0;fe<re.length;fe++)for(var xe=re[fe],ze=ee[fe],Re=0;Re<xe.length-1;Re++){var Fe=xe[Re],Ne=xe[Re+1],st=ze[Re],lt=ze[Re+1],Dt=[Fe,Ne,lt,st,Fe];Nc(he,Dt)&&(ye=Math.min(ye,op(he,Dt)))}return ye!==1/0&&ye}(j[0],j[1],U)},t.prototype.hasOffscreenPass=function(){return this.paint.get("fill-extrusion-opacity")!==0&&this.visibility!=="none"},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(gi);function el(e,t){return e.x*t.x+e.y*t.y}function op(e,t){if(e.length===1){var r=t[0],a=t[1],c=t[3],p=e[0],d=a.sub(r),_=c.sub(r),b=p.sub(r),A=el(d,d),z=el(d,_),R=el(_,_),N=el(b,d),U=el(b,_),j=A*R-z*z,ee=(R*N-z*U)/j,re=(A*U-z*N)/j,he=1-ee-re;return r.z*he+a.z*ee+c.z*re}for(var ye=1/0,fe=0,xe=t;fe<xe.length;fe+=1){var ze=xe[fe];ye=Math.min(ye,ze.z)}return ye}var Lu=vn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),ap=Lu.members,sp=(Lu.size,Lu.alignment,ms);function ms(e,t,r,a,c){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(bd,this,t)}function bd(e,t,r){e==1?t.id=r.readVarint():e==2?function(a,c){for(var p=a.readVarint()+a.pos;a.pos<p;){var d=c._keys[a.readVarint()],_=c._values[a.readVarint()];c.properties[d]=_}}(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function wd(e){for(var t,r,a=0,c=0,p=e.length,d=p-1;c<p;d=c++)t=e[c],a+=((r=e[d]).x-t.x)*(t.y+r.y);return a}ms.types=["Unknown","Point","LineString","Polygon"],ms.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,a=1,c=0,p=0,d=0,_=[];e.pos<r;){if(c<=0){var b=e.readVarint();a=7&b,c=b>>3}if(c--,a===1||a===2)p+=e.readSVarint(),d+=e.readSVarint(),a===1&&(t&&_.push(t),t=[]),t.push(new $(p,d));else{if(a!==7)throw new Error("unknown command "+a);t&&t.push(t[0].clone())}}return t&&_.push(t),_},ms.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,a=0,c=0,p=0,d=1/0,_=-1/0,b=1/0,A=-1/0;e.pos<t;){if(a<=0){var z=e.readVarint();r=7&z,a=z>>3}if(a--,r===1||r===2)(c+=e.readSVarint())<d&&(d=c),c>_&&(_=c),(p+=e.readSVarint())<b&&(b=p),p>A&&(A=p);else if(r!==7)throw new Error("unknown command "+r)}return[d,b,_,A]},ms.prototype.toGeoJSON=function(e,t,r){var a,c,p=this.extent*Math.pow(2,r),d=this.extent*e,_=this.extent*t,b=this.loadGeometry(),A=ms.types[this.type];function z(U){for(var j=0;j<U.length;j++){var ee=U[j],re=180-360*(ee.y+_)/p;U[j]=[360*(ee.x+d)/p-180,360/Math.PI*Math.atan(Math.exp(re*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(a=0;a<b.length;a++)R[a]=b[a][0];z(b=R);break;case 2:for(a=0;a<b.length;a++)z(b[a]);break;case 3:for(b=function(U){var j=U.length;if(j<=1)return[U];for(var ee,re,he=[],ye=0;ye<j;ye++){var fe=wd(U[ye]);fe!==0&&(re===void 0&&(re=fe<0),re===fe<0?(ee&&he.push(ee),ee=[U[ye]]):ee.push(U[ye]))}return ee&&he.push(ee),he}(b),a=0;a<b.length;a++)for(c=0;c<b[a].length;c++)z(b[a][c])}b.length===1?b=b[0]:A="Multi"+A;var N={type:"Feature",geometry:{type:A,coordinates:b},properties:this.properties};return"id"in this&&(N.id=this.id),N};var lp=up;function up(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ed,this,t),this.length=this._features.length}function Ed(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(function(a){for(var c=null,p=a.readVarint()+a.pos;a.pos<p;){var d=a.readVarint()>>3;c=d===1?a.readString():d===2?a.readFloat():d===3?a.readDouble():d===4?a.readVarint64():d===5?a.readVarint():d===6?a.readSVarint():d===7?a.readBoolean():null}return c}(r))}function Sd(e,t,r){if(e===3){var a=new lp(r,r.readVarint()+r.pos);a.length&&(t[a.name]=a)}}up.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new sp(this._pbf,t,this.extent,this._keys,this._values)};var tl={VectorTile:function(e,t){this.layers=e.readFields(Sd,{},t)},VectorTileFeature:sp,VectorTileLayer:lp},Td=tl.VectorTileFeature.types,cp=63,Ad=Math.cos(Math.PI/180*37.5),Ru=.5,pp=Math.pow(2,14)/Ru;function Du(e,t,r,a,c,p,d){e.emplaceBack(t.x,t.y,a?1:0,c?1:-1,Math.round(cp*r.x)+128,Math.round(cp*r.y)+128,1+(p===0?0:p<0?-1:1)|(d*Ru&63)<<2,d*Ru>>6)}var bi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Sa,this.indexArray=new S,this.programConfigurations=new si(ap,e.layers,e.zoom),this.segments=new ke,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function hp(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(pp-1)}bi.prototype.populate=function(e,t){this.features=[],this.hasPattern=Pu("line",this.layers,t);for(var r=0,a=e;r<a.length;r+=1){var c=a[r],p=c.feature,d=c.index,_=c.sourceLayerIndex;if(this.layers[0]._featureFilter(new Or(this.zoom),p)){var b=Fo(p),A={sourceLayerIndex:_,index:d,geometry:b,properties:p.properties,type:p.type,patterns:{}};p.id!==void 0&&(A.id=p.id),this.hasPattern?this.features.push(zu("line",this.layers,A,this.zoom,t)):this.addFeature(A,b,d,{}),t.featureIndex.insert(p,b,d,_,this.index)}}},bi.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},bi.prototype.addFeatures=function(e,t){for(var r=0,a=this.features;r<a.length;r+=1){var c=a[r],p=c.geometry;this.addFeature(c,p,c.index,t)}},bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ap),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bi.prototype.addFeature=function(e,t,r,a){for(var c=this.layers[0].layout,p=c.get("line-join").evaluate(e,{}),d=c.get("line-cap"),_=c.get("line-miter-limit"),b=c.get("line-round-limit"),A=0,z=t;A<z.length;A+=1){var R=z[A];this.addLine(R,e,p,d,_,b,r,a)}},bi.prototype.addLine=function(e,t,r,a,c,p,d,_){var b=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(b={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var A=Td[t.type]==="Polygon",z=e.length;z>=2&&e[z-1].equals(e[z-2]);)z--;for(var R=0;R<z-1&&e[R].equals(e[R+1]);)R++;if(!(z<(A?3:2))){b&&(b.tileTotal=function($i,In,Fr){for(var Ji,Uo,Cn=0,pn=In;pn<Fr-1;pn++)Ji=$i[pn],Uo=$i[pn+1],Cn+=Ji.dist(Uo);return Cn}(e,R,z)),r==="bevel"&&(c=1.05);var N=ln/(512*this.overscaling)*15,U=e[R],j=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);this.distance=0;var ee,re,he,ye=a,fe=A?"butt":a,xe=!0,ze=void 0,Re=void 0,Fe=void 0,Ne=void 0;this.e1=this.e2=this.e3=-1,A&&(ee=e[z-2],Ne=U.sub(ee)._unit()._perp());for(var st=R;st<z;st++)if(!(Re=A&&st===z-1?e[R+1]:e[st+1])||!e[st].equals(Re)){Ne&&(Fe=Ne),ee&&(ze=ee),ee=e[st],Ne=Re?Re.sub(ee)._unit()._perp():Fe;var lt=(Fe=Fe||Ne).add(Ne);lt.x===0&&lt.y===0||lt._unit();var Dt=lt.x*Ne.x+lt.y*Ne.y,At=Dt!==0?1/Dt:1/0,or=Dt<Ad&&ze&&Re;if(or&&st>R){var Ct=ee.dist(ze);if(Ct>2*N){var bn=ee.sub(ee.sub(ze)._mult(N/Ct)._round());this.distance+=bn.dist(ze),this.addCurrentVertex(bn,this.distance,Fe.mult(1),0,0,!1,j,b),ze=bn}}var wn=ze&&Re,Bt=wn?r:Re?ye:fe;if(wn&&Bt==="round"&&(At<p?Bt="miter":At<=2&&(Bt="fakeround")),Bt==="miter"&&At>c&&(Bt="bevel"),Bt==="bevel"&&(At>2&&(Bt="flipbevel"),At<c&&(Bt="miter")),ze&&(this.distance+=ee.dist(ze)),Bt==="miter")lt._mult(At),this.addCurrentVertex(ee,this.distance,lt,0,0,!1,j,b);else if(Bt==="flipbevel"){if(At>100)lt=Ne.clone().mult(-1);else{var un=Fe.x*Ne.y-Fe.y*Ne.x>0?-1:1,_r=At*Fe.add(Ne).mag()/Fe.sub(Ne).mag();lt._perp()._mult(_r*un)}this.addCurrentVertex(ee,this.distance,lt,0,0,!1,j,b),this.addCurrentVertex(ee,this.distance,lt.mult(-1),0,0,!1,j,b)}else if(Bt==="bevel"||Bt==="fakeround"){var Wn=Fe.x*Ne.y-Fe.y*Ne.x>0,Kn=-Math.sqrt(At*At-1);if(Wn?(he=0,re=Kn):(re=0,he=Kn),xe||this.addCurrentVertex(ee,this.distance,Fe,re,he,!1,j,b),Bt==="fakeround"){for(var cn=Math.floor(8*(.5-(Dt-.5))),Oi=void 0,Ei=0;Ei<cn;Ei++)Oi=Ne.mult((Ei+1)/(cn+1))._add(Fe)._unit(),this.addPieSliceVertex(ee,this.distance,Oi,Wn,j,b);this.addPieSliceVertex(ee,this.distance,lt,Wn,j,b);for(var hi=cn-1;hi>=0;hi--)Oi=Fe.mult((hi+1)/(cn+1))._add(Ne)._unit(),this.addPieSliceVertex(ee,this.distance,Oi,Wn,j,b)}Re&&this.addCurrentVertex(ee,this.distance,Ne,-re,-he,!1,j,b)}else Bt==="butt"?(xe||this.addCurrentVertex(ee,this.distance,Fe,0,0,!1,j,b),Re&&this.addCurrentVertex(ee,this.distance,Ne,0,0,!1,j,b)):Bt==="square"?(xe||(this.addCurrentVertex(ee,this.distance,Fe,1,1,!1,j,b),this.e1=this.e2=-1),Re&&this.addCurrentVertex(ee,this.distance,Ne,-1,-1,!1,j,b)):Bt==="round"&&(xe||(this.addCurrentVertex(ee,this.distance,Fe,0,0,!1,j,b),this.addCurrentVertex(ee,this.distance,Fe,1,1,!0,j,b),this.e1=this.e2=-1),Re&&(this.addCurrentVertex(ee,this.distance,Ne,-1,-1,!0,j,b),this.addCurrentVertex(ee,this.distance,Ne,0,0,!1,j,b)));if(or&&st<z-1){var Yn=ee.dist(Re);if(Yn>2*N){var Si=ee.add(Re.sub(ee)._mult(N/Yn)._round());this.distance+=Si.dist(ee),this.addCurrentVertex(Si,this.distance,Ne.mult(1),0,0,!1,j,b),ee=Si}}xe=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,_)}},bi.prototype.addCurrentVertex=function(e,t,r,a,c,p,d,_){var b,A=this.layoutVertexArray,z=this.indexArray;_&&(t=hp(t,_)),b=r.clone(),a&&b._sub(r.perp()._mult(a)),Du(A,e,b,p,!1,a,t),this.e3=d.vertexLength++,this.e1>=0&&this.e2>=0&&(z.emplaceBack(this.e1,this.e2,this.e3),d.primitiveLength++),this.e1=this.e2,this.e2=this.e3,b=r.mult(-1),c&&b._sub(r.perp()._mult(c)),Du(A,e,b,p,!0,-c,t),this.e3=d.vertexLength++,this.e1>=0&&this.e2>=0&&(z.emplaceBack(this.e1,this.e2,this.e3),d.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>pp/2&&!_&&(this.distance=0,this.addCurrentVertex(e,this.distance,r,a,c,p,d))},bi.prototype.addPieSliceVertex=function(e,t,r,a,c,p){r=r.mult(a?-1:1);var d=this.layoutVertexArray,_=this.indexArray;p&&(t=hp(t,p)),Du(d,e,r,!1,a,0,t),this.e3=c.vertexLength++,this.e1>=0&&this.e2>=0&&(_.emplaceBack(this.e1,this.e2,this.e3),c.primitiveLength++),a?this.e2=this.e3:this.e1=this.e3},We("LineBucket",bi,{omit:["layers","features"]});var Id=new ii({"line-cap":new nt(be.layout_line["line-cap"]),"line-join":new mt(be.layout_line["line-join"]),"line-miter-limit":new nt(be.layout_line["line-miter-limit"]),"line-round-limit":new nt(be.layout_line["line-round-limit"])}),fp={paint:new ii({"line-opacity":new mt(be.paint_line["line-opacity"]),"line-color":new mt(be.paint_line["line-color"]),"line-translate":new nt(be.paint_line["line-translate"]),"line-translate-anchor":new nt(be.paint_line["line-translate-anchor"]),"line-width":new mt(be.paint_line["line-width"]),"line-gap-width":new mt(be.paint_line["line-gap-width"]),"line-offset":new mt(be.paint_line["line-offset"]),"line-blur":new mt(be.paint_line["line-blur"]),"line-dasharray":new Ea(be.paint_line["line-dasharray"]),"line-pattern":new wa(be.paint_line["line-pattern"]),"line-gradient":new co(be.paint_line["line-gradient"])}),layout:Id},dp=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(r,a){return a=new Or(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),e.prototype.possiblyEvaluate.call(this,r,a)},t.prototype.evaluate=function(r,a,c,p){return a=je({},a,{zoom:Math.floor(a.zoom)}),e.prototype.evaluate.call(this,r,a,c,p)},t}(mt))(fp.paint.properties["line-width"].specification);dp.useIntegerZoom=!0;var Cd=function(e){function t(r){e.call(this,r,fp)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(r){r==="line-gradient"&&this._updateGradient()},t.prototype._updateGradient=function(){var r=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Jc(r,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(r){e.prototype.recalculate.call(this,r),this.paint._values["line-floorwidth"]=dp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)},t.prototype.createBucket=function(r){return new bi(r)},t.prototype.queryRadius=function(r){var a=r,c=mp(Hs("line-width",this,a),Hs("line-gap-width",this,a)),p=Hs("line-offset",this,a);return c/2+Math.abs(p)+zl(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(r,a,c,p,d,_,b){var A=kl(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,b),z=b/2*mp(this.paint.get("line-width").evaluate(a,c),this.paint.get("line-gap-width").evaluate(a,c)),R=this.paint.get("line-offset").evaluate(a,c);return R&&(p=function(N,U){for(var j=[],ee=new $(0,0),re=0;re<N.length;re++){for(var he=N[re],ye=[],fe=0;fe<he.length;fe++){var xe=he[fe-1],ze=he[fe],Re=he[fe+1],Fe=fe===0?ee:ze.sub(xe)._unit()._perp(),Ne=fe===he.length-1?ee:Re.sub(ze)._unit()._perp(),st=Fe._add(Ne)._unit(),lt=st.x*Ne.x+st.y*Ne.y;st._mult(1/lt),ye.push(st._mult(U)._add(ze))}j.push(ye)}return j}(p,R*b)),function(N,U,j){for(var ee=0;ee<U.length;ee++){var re=U[ee];if(N.length>=3){for(var he=0;he<re.length;he++)if(fs(N,re[he]))return!0}if(Wf(N,re,j))return!0}return!1}(A,p,z)},t}(gi);function mp(e,t){return t>0?t+2*e:e}var Bu=vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Pd=vn([{name:"a_projected_pos",components:3,type:"Float32"}],4),zd=(vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),vn([{name:"a_placed",components:2,type:"Uint8"}],4)),kd=(vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Md=vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),vn([{type:"Float32",name:"offsetX"}]),vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Ld(e,t,r){return e.sections.forEach(function(a){a.text=function(c,p,d){var _=p.layout.get("text-transform").evaluate(d,{});return _==="uppercase"?c=c.toLocaleUpperCase():_==="lowercase"&&(c=c.toLocaleLowerCase()),Vn.applyArabicShaping&&(c=Vn.applyArabicShaping(c)),c}(a.text,t,r)}),e}var rl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yp=function(e){function t(r,a,c,p){e.call(this,r,a),this.angle=c,p!==void 0&&(this.segment=p)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}($);We("Anchor",yp);var Rl=256;function gp(e,t){var r=t.expression;if(r.kind==="constant")return{functionType:"constant",layoutSize:r.evaluate(new Or(e+1))};if(r.kind==="source")return{functionType:"source"};for(var a=r.zoomStops,c=0;c<a.length&&a[c]<=e;)c++;for(var p=c=Math.max(0,c-1);p<a.length&&a[p]<e+1;)p++;p=Math.min(a.length-1,p);var d={min:a[c],max:a[p]};return r.kind==="composite"?{functionType:"composite",zoomRange:d,propertyValue:t.value}:{functionType:"camera",layoutSize:r.evaluate(new Or(e+1)),zoomRange:d,sizeRange:{min:r.evaluate(new Or(d.min)),max:r.evaluate(new Or(d.max))},propertyValue:t.value}}var Rd=tl.VectorTileFeature.types,Dd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dl(e,t,r,a,c,p,d,_){e.emplaceBack(t,r,Math.round(32*a),Math.round(32*c),p,d,_?_[0]:0,_?_[1]:0)}function Ou(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}var nl=function(e){this.layoutVertexArray=new Gs,this.indexArray=new S,this.programConfigurations=e,this.segments=new ke,this.dynamicLayoutVertexArray=new Xs,this.opacityVertexArray=new ps,this.placedSymbolArray=new te};nl.prototype.upload=function(e,t,r,a){r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Pd.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Dd,!0),this.opacityVertexBuffer.itemSize=1),(r||a)&&this.programConfigurations.upload(e)},nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},We("SymbolBuffers",nl);var il=function(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new ke,this.collisionVertexArray=new o};il.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,zd.members,!0)},il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},We("CollisionBuffers",il);var gr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gp(this.zoom,t["text-size"]),this.iconSizeData=gp(this.zoom,t["icon-size"]);var r=this.layers[0].layout,a=r.get("symbol-sort-key"),c=r.get("symbol-z-order");this.sortFeaturesByKey=c!=="viewport-y"&&a.constantOr(1)!==void 0;var p=c==="viewport-y"||c==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=p&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};gr.prototype.createArrays=function(){this.text=new nl(new si(Bu.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new nl(new si(Bu.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new il(i,kd.members,C),this.collisionCircle=new il(i,Md.members,S),this.glyphOffsetArray=new ce,this.lineVertexArray=new Se,this.symbolInstances=new le},gr.prototype.calculateGlyphDependencies=function(e,t,r,a){for(var c=0;c<e.length;c++)if(t[e.charCodeAt(c)]=!0,r&&a){var p=rl[e.charAt(c)];p&&(t[p.charCodeAt(0)]=!0)}},gr.prototype.populate=function(e,t){var r=this.layers[0],a=r.layout,c=a.get("text-font"),p=a.get("text-field"),d=a.get("icon-image"),_=(p.value.kind!=="constant"||p.value.value.toString().length>0)&&(c.value.kind!=="constant"||c.value.value.length>0),b=d.value.kind!=="constant"||d.value.value&&d.value.value.length>0,A=a.get("symbol-sort-key");if(this.features=[],_||b){for(var z=t.iconDependencies,R=t.glyphDependencies,N=new Or(this.zoom),U=0,j=e;U<j.length;U+=1){var ee=j[U],re=ee.feature,he=ee.index,ye=ee.sourceLayerIndex;if(r._featureFilter(N,re)){var fe=void 0;if(_){var xe=r.getValueAndResolveTokens("text-field",re);fe=Ld(xe instanceof rn?xe:rn.fromString(xe),r,re)}var ze=void 0;if(b&&(ze=r.getValueAndResolveTokens("icon-image",re)),fe||ze){var Re=this.sortFeaturesByKey?A.evaluate(re,{}):void 0,Fe={text:fe,icon:ze,index:he,sourceLayerIndex:ye,geometry:Fo(re),properties:re.properties,type:Rd[re.type],sortKey:Re};if(re.id!==void 0&&(Fe.id=re.id),this.features.push(Fe),ze&&(z[ze]=!0),fe)for(var Ne=c.evaluate(re,{}).join(","),st=a.get("text-rotation-alignment")==="map"&&a.get("symbol-placement")!=="point",lt=0,Dt=fe.sections;lt<Dt.length;lt+=1){var At=Dt[lt],or=Bo(fe.toString()),Ct=At.fontStack||Ne,bn=R[Ct]=R[Ct]||{};this.calculateGlyphDependencies(At.text,bn,st,or)}}}}a.get("symbol-placement")==="line"&&(this.features=function(wn){var Bt={},un={},_r=[],Wn=0;function Kn(Cn){_r.push(wn[Cn]),Wn++}function cn(Cn,pn,Vo){var hn=un[Cn];return delete un[Cn],un[pn]=hn,_r[hn].geometry[0].pop(),_r[hn].geometry[0]=_r[hn].geometry[0].concat(Vo[0]),hn}function Oi(Cn,pn,Vo){var hn=Bt[pn];return delete Bt[pn],Bt[Cn]=hn,_r[hn].geometry[0].shift(),_r[hn].geometry[0]=Vo[0].concat(_r[hn].geometry[0]),hn}function Ei(Cn,pn,Vo){var hn=Vo?pn[0][pn[0].length-1]:pn[0][0];return Cn+":"+hn.x+":"+hn.y}for(var hi=0;hi<wn.length;hi++){var Yn=wn[hi],Si=Yn.geometry,$i=Yn.text?Yn.text.toString():null;if($i){var In=Ei($i,Si),Fr=Ei($i,Si,!0);if(In in un&&Fr in Bt&&un[In]!==Bt[Fr]){var Ji=Oi(In,Fr,Si),Uo=cn(In,Fr,_r[Ji].geometry);delete Bt[In],delete un[Fr],un[Ei($i,_r[Uo].geometry,!0)]=Uo,_r[Ji].geometry=null}else In in un?cn(In,Fr,Si):Fr in Bt?Oi(In,Fr,Si):(Kn(hi),Bt[In]=Wn-1,un[Fr]=Wn-1)}else Kn(hi)}return _r.filter(function(Cn){return Cn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(wn,Bt){return wn.sortKey-Bt.sortKey})}},gr.prototype.update=function(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))},gr.prototype.isEmpty=function(){return this.symbolInstances.length===0},gr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gr.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},gr.prototype.addToLineVertexArray=function(e,t){var r=this.lineVertexArray.length;if(e.segment!==void 0){for(var a=e.dist(t[e.segment+1]),c=e.dist(t[e.segment]),p={},d=e.segment+1;d<t.length;d++)p[d]={x:t[d].x,y:t[d].y,tileUnitDistanceFromAnchor:a},d<t.length-1&&(a+=t[d+1].dist(t[d]));for(var _=e.segment||0;_>=0;_--)p[_]={x:t[_].x,y:t[_].y,tileUnitDistanceFromAnchor:c},_>0&&(c+=t[_-1].dist(t[_]));for(var b=0;b<t.length;b++){var A=p[b];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},gr.prototype.addSymbols=function(e,t,r,a,c,p,d,_,b,A){for(var z=e.indexArray,R=e.layoutVertexArray,N=e.dynamicLayoutVertexArray,U=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray,p.sortKey),j=this.glyphOffsetArray.length,ee=U.vertexLength,re=0,he=t;re<he.length;re+=1){var ye=he[re],fe=ye.tl,xe=ye.tr,ze=ye.bl,Re=ye.br,Fe=ye.tex,Ne=U.vertexLength,st=ye.glyphOffset[1];Dl(R,_.x,_.y,fe.x,st+fe.y,Fe.x,Fe.y,r),Dl(R,_.x,_.y,xe.x,st+xe.y,Fe.x+Fe.w,Fe.y,r),Dl(R,_.x,_.y,ze.x,st+ze.y,Fe.x,Fe.y+Fe.h,r),Dl(R,_.x,_.y,Re.x,st+Re.y,Fe.x+Fe.w,Fe.y+Fe.h,r),Ou(N,_,0),z.emplaceBack(Ne,Ne+1,Ne+2),z.emplaceBack(Ne+1,Ne+2,Ne+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ye.glyphOffset[0])}e.placedSymbolArray.emplaceBack(_.x,_.y,j,this.glyphOffsetArray.length-j,ee,b,A,_.segment,r?r[0]:0,r?r[1]:0,a[0],a[1],d,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,p,p.index,{})},gr.prototype._addCollisionDebugVertex=function(e,t,r,a,c,p){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,a,c,Math.round(p.x),Math.round(p.y))},gr.prototype.addCollisionDebugVertices=function(e,t,r,a,c,p,d,_){var b=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),A=b.vertexLength,z=c.layoutVertexArray,R=c.collisionVertexArray,N=d.anchorX,U=d.anchorY;if(this._addCollisionDebugVertex(z,R,p,N,U,new $(e,t)),this._addCollisionDebugVertex(z,R,p,N,U,new $(r,t)),this._addCollisionDebugVertex(z,R,p,N,U,new $(r,a)),this._addCollisionDebugVertex(z,R,p,N,U,new $(e,a)),b.vertexLength+=4,_){var j=c.indexArray;j.emplaceBack(A,A+1,A+2),j.emplaceBack(A,A+2,A+3),b.primitiveLength+=2}else{var ee=c.indexArray;ee.emplaceBack(A,A+1),ee.emplaceBack(A+1,A+2),ee.emplaceBack(A+2,A+3),ee.emplaceBack(A+3,A),b.primitiveLength+=4}},gr.prototype.addDebugCollisionBoxes=function(e,t,r){for(var a=e;a<t;a++){var c=this.collisionBoxArray.get(a),p=c.x1,d=c.y1,_=c.x2,b=c.y2,A=c.radius>0;this.addCollisionDebugVertices(p,d,_,b,A?this.collisionCircle:this.collisionBox,c.anchorPoint,r,A)}},gr.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},gr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,r,a,c){for(var p={},d=t;d<r;d++){var _=e.get(d);if(_.radius===0){p.textBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},p.textFeatureIndex=_.featureIndex;break}p.textCircles||(p.textCircles=[],p.textFeatureIndex=_.featureIndex),p.textCircles.push(_.anchorPointX,_.anchorPointY,_.radius,_.signedDistanceFromAnchor,1)}for(var b=a;b<c;b++){var A=e.get(b);if(A.radius===0){p.iconBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,anchorPointX:A.anchorPointX,anchorPointY:A.anchorPointY},p.iconFeatureIndex=A.featureIndex;break}}return p},gr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},gr.prototype.hasTextData=function(){return this.text.segments.get().length>0},gr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gr.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},gr.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},gr.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),r=t.vertexStartIndex+4*t.numGlyphs,a=t.vertexStartIndex;a<r;a+=4)this.text.indexArray.emplaceBack(a,a+1,a+2),this.text.indexArray.emplaceBack(a+1,a+2,a+3)},gr.prototype.sortFeatures=function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var t=[],r=0;r<this.symbolInstances.length;r++)t.push(r);for(var a=Math.sin(e),c=Math.cos(e),p=[],d=[],_=0;_<this.symbolInstances.length;_++){var b=this.symbolInstances.get(_);p.push(0|Math.round(a*b.anchorX+c*b.anchorY)),d.push(b.featureIndex)}t.sort(function(ee,re){return p[ee]-p[re]||d[re]-d[ee]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var A=0,z=t;A<z.length;A+=1){var R=z[A],N=this.symbolInstances.get(R);this.featureSortOrder.push(N.featureIndex),N.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(N.horizontalPlacedTextSymbolIndex),N.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(N.verticalPlacedTextSymbolIndex);var U=this.icon.placedSymbolArray.get(R);if(U.numGlyphs){var j=U.vertexStartIndex;this.icon.indexArray.emplaceBack(j,j+1,j+2),this.icon.indexArray.emplaceBack(j+1,j+2,j+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},We("SymbolBucket",gr,{omit:["layers","collisionBoxArray","features","compareText"]}),gr.MAX_GLYPHS=65535,gr.addDynamicAttributes=Ou;var Bd=new ii({"symbol-placement":new nt(be.layout_symbol["symbol-placement"]),"symbol-spacing":new nt(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nt(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mt(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nt(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nt(be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new nt(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new nt(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nt(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new mt(be.layout_symbol["icon-size"]),"icon-text-fit":new nt(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nt(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new mt(be.layout_symbol["icon-image"]),"icon-rotate":new mt(be.layout_symbol["icon-rotate"]),"icon-padding":new nt(be.layout_symbol["icon-padding"]),"icon-keep-upright":new nt(be.layout_symbol["icon-keep-upright"]),"icon-offset":new mt(be.layout_symbol["icon-offset"]),"icon-anchor":new mt(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nt(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nt(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nt(be.layout_symbol["text-rotation-alignment"]),"text-field":new mt(be.layout_symbol["text-field"]),"text-font":new mt(be.layout_symbol["text-font"]),"text-size":new mt(be.layout_symbol["text-size"]),"text-max-width":new mt(be.layout_symbol["text-max-width"]),"text-line-height":new nt(be.layout_symbol["text-line-height"]),"text-letter-spacing":new mt(be.layout_symbol["text-letter-spacing"]),"text-justify":new mt(be.layout_symbol["text-justify"]),"text-anchor":new mt(be.layout_symbol["text-anchor"]),"text-max-angle":new nt(be.layout_symbol["text-max-angle"]),"text-rotate":new mt(be.layout_symbol["text-rotate"]),"text-padding":new nt(be.layout_symbol["text-padding"]),"text-keep-upright":new nt(be.layout_symbol["text-keep-upright"]),"text-transform":new mt(be.layout_symbol["text-transform"]),"text-offset":new mt(be.layout_symbol["text-offset"]),"text-allow-overlap":new nt(be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new nt(be.layout_symbol["text-ignore-placement"]),"text-optional":new nt(be.layout_symbol["text-optional"])}),_p={paint:new ii({"icon-opacity":new mt(be.paint_symbol["icon-opacity"]),"icon-color":new mt(be.paint_symbol["icon-color"]),"icon-halo-color":new mt(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new mt(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mt(be.paint_symbol["icon-halo-blur"]),"icon-translate":new nt(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new nt(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new mt(be.paint_symbol["text-opacity"]),"text-color":new mt(be.paint_symbol["text-color"]),"text-halo-color":new mt(be.paint_symbol["text-halo-color"]),"text-halo-width":new mt(be.paint_symbol["text-halo-width"]),"text-halo-blur":new mt(be.paint_symbol["text-halo-blur"]),"text-translate":new nt(be.paint_symbol["text-translate"]),"text-translate-anchor":new nt(be.paint_symbol["text-translate-anchor"])}),layout:Bd},Od=function(e){function t(r){e.call(this,r,_p)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(r){e.prototype.recalculate.call(this,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(r,a){var c,p=this.layout.get(r).evaluate(a,{}),d=this._unevaluatedLayout._values[r];return d.isDataDriven()||da(d.value)?p:(c=a.properties,p.replace(/{([^{}]+)}/g,function(_,b){return b in c?String(c[b]):""}))},t.prototype.createBucket=function(r){return new gr(r)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(gi),Fd={paint:new ii({"background-color":new nt(be.paint_background["background-color"]),"background-pattern":new Ea(be.paint_background["background-pattern"]),"background-opacity":new nt(be.paint_background["background-opacity"])})},Ud=function(e){function t(r){e.call(this,r,Fd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(gi),Vd={paint:new ii({"raster-opacity":new nt(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new nt(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nt(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nt(be.paint_raster["raster-brightness-max"]),"raster-saturation":new nt(be.paint_raster["raster-saturation"]),"raster-contrast":new nt(be.paint_raster["raster-contrast"]),"raster-resampling":new nt(be.paint_raster["raster-resampling"]),"raster-fade-duration":new nt(be.paint_raster["raster-fade-duration"])})},Nd=function(e){function t(r){e.call(this,r,Vd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(gi),jd=function(e){function t(r){e.call(this,r,{}),this.implementation=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0||this.implementation.renderingMode==="3d"},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t.prototype.onAdd=function(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},t.prototype.onRemove=function(r){this.implementation.onRemove&&this.implementation.onRemove(r)},t}(gi),qd={circle:Jf,heatmap:ed,hillshade:rd,fill:yd,"fill-extrusion":xd,line:Cd,symbol:Od,background:Ud,raster:Nd};function vp(e){for(var t=0,r=0,a=0,c=e;a<c.length;a+=1){var p=c[a];t+=p.w*p.h,r=Math.max(r,p.w)}e.sort(function(ee,re){return re.h-ee.h});for(var d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}],_=0,b=0,A=0,z=e;A<z.length;A+=1)for(var R=z[A],N=d.length-1;N>=0;N--){var U=d[N];if(!(R.w>U.w||R.h>U.h)){if(R.x=U.x,R.y=U.y,b=Math.max(b,R.y+R.h),_=Math.max(_,R.x+R.w),R.w===U.w&&R.h===U.h){var j=d.pop();N<d.length&&(d[N]=j)}else R.h===U.h?(U.x+=R.w,U.w-=R.w):R.w===U.w?(U.y+=R.h,U.h-=R.h):(d.push({x:U.x+R.w,y:U.y,w:U.w-R.w,h:R.h}),U.y+=R.h,U.h-=R.h);break}}return{w:_,h:b,fill:t/(_*b)||0}}var ol=function(e,t){var r=t.pixelRatio;this.paddedRect=e,this.pixelRatio=r},al={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};al.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},al.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},al.tlbr.get=function(){return this.tl.concat(this.br)},al.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ol.prototype,al);var xp=function(e,t){var r={},a={},c=[];for(var p in e){var d=e[p],_={x:0,y:0,w:d.data.width+2,h:d.data.height+2};c.push(_),r[p]=new ol(_,d)}for(var b in t){var A=t[b],z={x:0,y:0,w:A.data.width+2,h:A.data.height+2};c.push(z),a[b]=new ol(z,A)}var R=vp(c),N=R.w,U=R.h,j=new ci({width:N||1,height:U||1});for(var ee in e){var re=e[ee],he=r[ee].paddedRect;ci.copy(re.data,j,{x:0,y:0},{x:he.x+1,y:he.y+1},re.data)}for(var ye in t){var fe=t[ye],xe=a[ye].paddedRect,ze=xe.x+1,Re=xe.y+1,Fe=fe.data.width,Ne=fe.data.height;ci.copy(fe.data,j,{x:0,y:0},{x:ze,y:Re},fe.data),ci.copy(fe.data,j,{x:0,y:Ne-1},{x:ze,y:Re-1},{width:Fe,height:1}),ci.copy(fe.data,j,{x:0,y:0},{x:ze,y:Re+Ne},{width:Fe,height:1}),ci.copy(fe.data,j,{x:Fe-1,y:0},{x:ze-1,y:Re},{width:1,height:Ne}),ci.copy(fe.data,j,{x:0,y:0},{x:ze+Fe,y:Re},{width:1,height:Ne})}this.image=j,this.iconPositions=r,this.patternPositions=a};We("ImagePosition",ol),We("ImageAtlas",xp);var bp=self.HTMLImageElement,wp=self.HTMLCanvasElement,Ep=self.HTMLVideoElement,Sp=self.ImageData,Ka=function(e,t,r,a){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,a)};Ka.prototype.update=function(e,t){var r=e.width,a=e.height,c=!this.size||this.size[0]!==r||this.size[1]!==a,p=this.context,d=p.gl;this.useMipmap=!!(t&&t.useMipmap),d.bindTexture(d.TEXTURE_2D,this.texture),p.pixelStoreUnpackFlipY.set(!1),p.pixelStoreUnpack.set(1),p.pixelStoreUnpackPremultiplyAlpha.set(this.format===d.RGBA&&(!t||t.premultiply!==!1)),c?(this.size=[r,a],e instanceof bp||e instanceof wp||e instanceof Ep||e instanceof Sp?d.texImage2D(d.TEXTURE_2D,0,this.format,this.format,d.UNSIGNED_BYTE,e):d.texImage2D(d.TEXTURE_2D,0,this.format,r,a,0,this.format,d.UNSIGNED_BYTE,e.data)):e instanceof bp||e instanceof wp||e instanceof Ep||e instanceof Sp?d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,e):d.texSubImage2D(d.TEXTURE_2D,0,0,0,r,a,d.RGBA,d.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&d.generateMipmap(d.TEXTURE_2D)},Ka.prototype.bind=function(e,t,r){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),r!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=a.LINEAR),e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,t),this.wrap=t)},Ka.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ka.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Tp=function(e,t,r,a,c){var p,d,_=8*c-a-1,b=(1<<_)-1,A=b>>1,z=-7,R=r?c-1:0,N=r?-1:1,U=e[t+R];for(R+=N,p=U&(1<<-z)-1,U>>=-z,z+=_;z>0;p=256*p+e[t+R],R+=N,z-=8);for(d=p&(1<<-z)-1,p>>=-z,z+=a;z>0;d=256*d+e[t+R],R+=N,z-=8);if(p===0)p=1-A;else{if(p===b)return d?NaN:1/0*(U?-1:1);d+=Math.pow(2,a),p-=A}return(U?-1:1)*d*Math.pow(2,p-a)},Ap=function(e,t,r,a,c,p){var d,_,b,A=8*p-c-1,z=(1<<A)-1,R=z>>1,N=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=a?0:p-1,j=a?1:-1,ee=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(_=isNaN(t)?1:0,d=z):(d=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-d))<1&&(d--,b*=2),(t+=d+R>=1?N/b:N*Math.pow(2,1-R))*b>=2&&(d++,b/=2),d+R>=z?(_=0,d=z):d+R>=1?(_=(t*b-1)*Math.pow(2,c),d+=R):(_=t*Math.pow(2,R-1)*Math.pow(2,c),d=0));c>=8;e[r+U]=255&_,U+=j,_/=256,c-=8);for(d=d<<c|_,A+=c;A>0;e[r+U]=255&d,U+=j,d/=256,A-=8);e[r+U-j]|=128*ee},Bl=Wr;function Wr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Wr.Varint=0,Wr.Fixed64=1,Wr.Bytes=2,Wr.Fixed32=5;function ra(e){return e.type===Wr.Bytes?e.readVarint()+e.pos:e.pos+1}function ys(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ip(e,t,r){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(a);for(var c=r.pos-1;c>=e;c--)r.buf[c+a]=r.buf[c]}function Zd(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function Gd(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function Xd(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function Hd(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function Wd(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function Kd(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function Yd(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function $d(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function Jd(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Ol(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function gs(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function Cp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Wr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=7&a,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Ol(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Cp(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ol(this.buf,this.pos)+4294967296*Ol(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Ol(this.buf,this.pos)+4294967296*Cp(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Tp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Tp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,a=this.buf;return t=127&(r=a[this.pos++]),r<128?t:(t|=(127&(r=a[this.pos++]))<<7,r<128?t:(t|=(127&(r=a[this.pos++]))<<14,r<128?t:(t|=(127&(r=a[this.pos++]))<<21,r<128?t:function(c,p,d){var _,b,A=d.buf;if(b=A[d.pos++],_=(112&b)>>4,b<128||(b=A[d.pos++],_|=(127&b)<<3,b<128)||(b=A[d.pos++],_|=(127&b)<<10,b<128)||(b=A[d.pos++],_|=(127&b)<<17,b<128)||(b=A[d.pos++],_|=(127&b)<<24,b<128)||(b=A[d.pos++],_|=(1&b)<<31,b<128))return ys(c,_,p);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=a[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=function(r,a,c){for(var p="",d=a;d<c;){var _,b,A,z=r[d],R=null,N=z>239?4:z>223?3:z>191?2:1;if(d+N>c)break;N===1?z<128&&(R=z):N===2?(192&(_=r[d+1]))==128&&(R=(31&z)<<6|63&_)<=127&&(R=null):N===3?(_=r[d+1],b=r[d+2],(192&_)==128&&(192&b)==128&&((R=(15&z)<<12|(63&_)<<6|63&b)<=2047||R>=55296&&R<=57343)&&(R=null)):N===4&&(_=r[d+1],b=r[d+2],A=r[d+3],(192&_)==128&&(192&b)==128&&(192&A)==128&&((R=(15&z)<<18|(63&_)<<12|(63&b)<<6|63&A)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,N=1):R>65535&&(R-=65536,p+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),p+=String.fromCharCode(R),d+=N}return p}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=ra(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=ra(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Wr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Wr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Wr.Fixed32)this.pos+=4;else{if(t!==Wr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),gs(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),gs(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),gs(this.buf,-1&e,this.pos),gs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),gs(this.buf,-1&e,this.pos),gs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,r){var a,c;if(t>=0?(a=t%4294967296|0,c=t/4294967296|0):(c=~(-t/4294967296),4294967295^(a=~(-t%4294967296))?a=a+1|0:(a=0,c=c+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(p,d,_){_.buf[_.pos++]=127&p|128,p>>>=7,_.buf[_.pos++]=127&p|128,p>>>=7,_.buf[_.pos++]=127&p|128,p>>>=7,_.buf[_.pos++]=127&p|128,p>>>=7,_.buf[_.pos]=127&p}(a,0,r),function(p,d){var _=(7&p)<<4;d.buf[d.pos++]|=_|((p>>>=3)?128:0),p&&(d.buf[d.pos++]=127&p|((p>>>=7)?128:0),p&&(d.buf[d.pos++]=127&p|((p>>>=7)?128:0),p&&(d.buf[d.pos++]=127&p|((p>>>=7)?128:0),p&&(d.buf[d.pos++]=127&p|((p>>>=7)?128:0),p&&(d.buf[d.pos++]=127&p)))))}(c,r)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(a,c,p){for(var d,_,b=0;b<c.length;b++){if((d=c.charCodeAt(b))>55295&&d<57344){if(!_){d>56319||b+1===c.length?(a[p++]=239,a[p++]=191,a[p++]=189):_=d;continue}if(d<56320){a[p++]=239,a[p++]=191,a[p++]=189,_=d;continue}d=_-55296<<10|d-56320|65536,_=null}else _&&(a[p++]=239,a[p++]=191,a[p++]=189,_=null);d<128?a[p++]=d:(d<2048?a[p++]=d>>6|192:(d<65536?a[p++]=d>>12|224:(a[p++]=d>>18|240,a[p++]=d>>12&63|128),a[p++]=d>>6&63|128),a[p++]=63&d|128)}return p}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Ip(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Ap(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ap(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var a=this.pos-r;a>=128&&Ip(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,r){this.writeTag(e,Wr.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,Zd,t)},writePackedSVarint:function(e,t){this.writeMessage(e,Gd,t)},writePackedBoolean:function(e,t){this.writeMessage(e,Wd,t)},writePackedFloat:function(e,t){this.writeMessage(e,Xd,t)},writePackedDouble:function(e,t){this.writeMessage(e,Hd,t)},writePackedFixed32:function(e,t){this.writeMessage(e,Kd,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,Yd,t)},writePackedFixed64:function(e,t){this.writeMessage(e,$d,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,Jd,t)},writeBytesField:function(e,t){this.writeTag(e,Wr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Wr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Wr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Wr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Wr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Wr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Wr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Wr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Wr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Wr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Fu=3;function Qd(e,t,r){e===1&&r.readMessage(em,t)}function em(e,t,r){if(e===3){var a=r.readMessage(tm,{}),c=a.id,p=a.bitmap,d=a.width,_=a.height,b=a.left,A=a.top,z=a.advance;t.push({id:c,bitmap:new Ha({width:d+2*Fu,height:_+2*Fu},p),metrics:{width:d,height:_,left:b,top:A,advance:z}})}}function tm(e,t,r){e===1?t.id=r.readVarint():e===2?t.bitmap=r.readBytes():e===3?t.width=r.readVarint():e===4?t.height=r.readVarint():e===5?t.left=r.readSVarint():e===6?t.top=r.readSVarint():e===7&&(t.advance=r.readVarint())}var rm=Fu,Fl=function(e,t,r){this.target=e,this.parent=t,this.mapId=r,this.callbacks={},this.callbackID=0,Mr(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function Pp(e,t,r){var a=2*Math.PI*6378137/256/Math.pow(2,r);return[e*a-2*Math.PI*6378137/2,t*a-2*Math.PI*6378137/2]}Fl.prototype.send=function(e,t,r,a){var c=this,p=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[p]=r);var d=[];if(this.target.postMessage({targetMapId:a,sourceMapId:this.mapId,type:e,id:String(p),data:jt(t,d)},d),r)return{cancel:function(){return c.target.postMessage({targetMapId:a,sourceMapId:c.mapId,type:"<cancel>",id:String(p)})}}},Fl.prototype.receive=function(e){var t,r=this,a=e.data,c=a.id;if(!a.targetMapId||this.mapId===a.targetMapId){var p=function(A,z){delete r.callbacks[c];var R=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(c),error:A?jt(A):null,data:jt(z,R)},R)};if(a.type==="<response>"||a.type==="<cancel>")t=this.callbacks[a.id],delete this.callbacks[a.id],t&&a.error?t(rr(a.error)):t&&t(null,rr(a.data));else if(a.id!==void 0&&this.parent[a.type]){this.callbacks[a.id]=null;var d=this.parent[a.type](a.sourceMapId,rr(a.data),p);d&&this.callbacks[a.id]===null&&(this.callbacks[a.id]=d)}else if(a.id!==void 0&&this.parent.getWorkerSource){var _=a.type.split("."),b=rr(a.data);this.parent.getWorkerSource(a.sourceMapId,_[0],b.source)[_[1]](b,p)}else this.parent[a.type](rr(a.data))}},Fl.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Kr=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Kr.prototype.setNorthEast=function(e){return this._ne=e instanceof Sr?new Sr(e.lng,e.lat):Sr.convert(e),this},Kr.prototype.setSouthWest=function(e){return this._sw=e instanceof Sr?new Sr(e.lng,e.lat):Sr.convert(e),this},Kr.prototype.extend=function(e){var t,r,a=this._sw,c=this._ne;if(e instanceof Sr)t=e,r=e;else{if(!(e instanceof Kr))return Array.isArray(e)?e.every(Array.isArray)?this.extend(Kr.convert(e)):this.extend(Sr.convert(e)):this;if(t=e._sw,r=e._ne,!t||!r)return this}return a||c?(a.lng=Math.min(t.lng,a.lng),a.lat=Math.min(t.lat,a.lat),c.lng=Math.max(r.lng,c.lng),c.lat=Math.max(r.lat,c.lat)):(this._sw=new Sr(t.lng,t.lat),this._ne=new Sr(r.lng,r.lat)),this},Kr.prototype.getCenter=function(){return new Sr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Kr.prototype.getSouthWest=function(){return this._sw},Kr.prototype.getNorthEast=function(){return this._ne},Kr.prototype.getNorthWest=function(){return new Sr(this.getWest(),this.getNorth())},Kr.prototype.getSouthEast=function(){return new Sr(this.getEast(),this.getSouth())},Kr.prototype.getWest=function(){return this._sw.lng},Kr.prototype.getSouth=function(){return this._sw.lat},Kr.prototype.getEast=function(){return this._ne.lng},Kr.prototype.getNorth=function(){return this._ne.lat},Kr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Kr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Kr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Kr.convert=function(e){return!e||e instanceof Kr?e:new Kr(e)};var Sr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function zp(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function kp(e){return(180+e)/360}function Mp(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Lp(e,t){return e/zp(t)}function Rp(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}Sr.prototype.wrap=function(){return new Sr(gt(this.lng,-180,180),this.lat)},Sr.prototype.toArray=function(){return[this.lng,this.lat]},Sr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Sr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new Kr(new Sr(this.lng-r,this.lat-t),new Sr(this.lng+r,this.lat+t))},Sr.convert=function(e){if(e instanceof Sr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Sr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Sr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var _s=function(e,t,r){r===void 0&&(r=0),this.x=+e,this.y=+t,this.z=+r};_s.fromLngLat=function(e,t){t===void 0&&(t=0);var r=Sr.convert(e);return new _s(kp(r.lng),Mp(r.lat),Lp(t,r.lat))},_s.prototype.toLngLat=function(){return new Sr(360*this.x-180,Rp(this.y))},_s.prototype.toAltitude=function(){return e=this.z,t=this.y,e*zp(Rp(t));var e,t};var vs=function(e,t,r){this.z=e,this.x=t,this.y=r,this.key=Uu(0,e,t,r)};vs.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},vs.prototype.url=function(e,t){var r,a,c,p,d,_=(r=this.x,a=this.y,c=this.z,p=Pp(256*r,256*(a=Math.pow(2,c)-a-1),c),d=Pp(256*(r+1),256*(a+1),c),p[0]+","+p[1]+","+d[0]+","+d[1]),b=function(A,z,R){for(var N,U="",j=A;j>0;j--)U+=(z&(N=1<<j-1)?1:0)+(R&N?2:0);return U}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",b).replace("{bbox-epsg-3857}",_)},vs.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new $((e.x*t-this.x)*ln,(e.y*t-this.y)*ln)};var Dp=function(e,t){this.wrap=e,this.canonical=t,this.key=Uu(e,t.z,t.x,t.y)},Yr=function(e,t,r,a,c){this.overscaledZ=e,this.wrap=t,this.canonical=new vs(r,+a,+c),this.key=Uu(t,e,a,c)};function Uu(e,t,r,a){(e*=2)<0&&(e=-1*e-1);var c=1<<t;return 32*(c*c*e+c*a+r)+t}Yr.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Yr.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Yr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yr(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Yr.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Yr.prototype.children=function(e){if(this.overscaledZ>=e)return[new Yr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,r=2*this.canonical.x,a=2*this.canonical.y;return[new Yr(t,this.wrap,t,r,a),new Yr(t,this.wrap,t,r+1,a),new Yr(t,this.wrap,t,r,a+1),new Yr(t,this.wrap,t,r+1,a+1)]},Yr.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Yr.prototype.wrapped=function(){return new Yr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yr.prototype.unwrapTo=function(e){return new Yr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Yr.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yr.prototype.toUnwrapped=function(){return new Dp(this.wrap,this.canonical)},Yr.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yr.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new _s(e.x-this.wrap,e.y))},We("CanonicalTileID",vs),We("OverscaledTileID",Yr,{omit:["posMatrix"]});var na=function(e,t,r){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&r!=="mapbox"&&r!=="terrarium")return Nr('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var a=this.dim=t.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var c=t.data,p=r==="terrarium"?this._unpackTerrarium:this._unpackMapbox,d=0;d<a;d++)for(var _=0;_<a;_++){var b=4*(d*a+_);this.set(_,d,p(c[b],c[b+1],c[b+2]))}for(var A=0;A<a;A++)this.set(-1,A,this.get(0,A)),this.set(a,A,this.get(a-1,A)),this.set(A,-1,this.get(A,0)),this.set(A,a,this.get(A,a-1));this.set(-1,-1,this.get(0,0)),this.set(a,-1,this.get(a-1,0)),this.set(-1,a,this.get(0,a-1)),this.set(a,a,this.get(a-1,a-1))};na.prototype.set=function(e,t,r){this.data[this._idx(e,t)]=r+65536},na.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},na.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},na.prototype._unpackMapbox=function(e,t,r){return(256*e*256+256*t+r)/10-1e4},na.prototype._unpackTerrarium=function(e,t,r){return 256*e+t+r/256-32768},na.prototype.getPixels=function(){return new ci({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},na.prototype.backfillBorder=function(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var a=t*this.dim,c=t*this.dim+this.dim,p=r*this.dim,d=r*this.dim+this.dim;switch(t){case-1:a=c-1;break;case 1:c=a+1}switch(r){case-1:p=d-1;break;case 1:d=p+1}for(var _=-t*this.dim,b=-r*this.dim,A=p;A<d;A++)for(var z=a;z<c;z++)this.set(z,A,e.get(z+_,A+b))},We("DEMData",na);var Bp=vn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ul=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}};Ul.prototype.encode=function(e){return this._stringToNumber[e]},Ul.prototype.decode=function(e){return this._numberToString[e]};var Vl=function(e,t,r,a){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=a,this.properties=e.properties,e.id!=null&&(this.id=e.id)},Vu={geometry:{configurable:!0}};Vu.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vu.geometry.set=function(e){this._geometry=e},Vl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Vl.prototype,Vu);var xs=function(){this.state={},this.stateChanges={},this.deletedStates={}};xs.prototype.updateState=function(e,t,r){var a=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][a]=this.stateChanges[e][a]||{},je(this.stateChanges[e][a],r),this.deletedStates[e]===null)for(var c in this.deletedStates[e]={},this.state[e])c!==a&&(this.deletedStates[e][c]=null);else if(this.deletedStates[e]&&this.deletedStates[e][a]===null)for(var p in this.deletedStates[e][a]={},this.state[e][a])r[p]||(this.deletedStates[e][a][p]=null);else for(var d in r)this.deletedStates[e]&&this.deletedStates[e][a]&&this.deletedStates[e][a][d]===null&&delete this.deletedStates[e][a][d]},xs.prototype.removeFeatureState=function(e,t,r){if(this.deletedStates[e]!==null){var a=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&t)this.deletedStates[e][a]!==null&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][r]=null);else if(t)if(this.stateChanges[e]&&this.stateChanges[e][a])for(r in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][r]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null}},xs.prototype.getState=function(e,t){var r=String(t),a=this.state[e]||{},c=this.stateChanges[e]||{},p=je({},a[r],c[r]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var d=this.deletedStates[e][t];if(d===null)return{};for(var _ in d)delete p[_]}return p},xs.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},xs.prototype.coalesceChanges=function(e,t){var r={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var c={};for(var p in this.stateChanges[a])this.state[a][p]||(this.state[a][p]={}),je(this.state[a][p],this.stateChanges[a][p]),c[p]=this.state[a][p];r[a]=c}for(var d in this.deletedStates){this.state[d]=this.state[d]||{};var _={};if(this.deletedStates[d]===null){for(var b in this.state[d])_[b]={};this.state[d]={}}else for(var A in this.deletedStates[d]){if(this.deletedStates[d][A]===null)this.state[d][A]={};else for(var z=0,R=Object.keys(this.deletedStates[d][A]);z<R.length;z+=1){var N=R[z];delete this.state[d][A][N]}_[A]=this.state[d][A]}r[d]=r[d]||{},je(r[d],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(r).length!==0)for(var U in e)e[U].setFeatureState(r,t)};var Ta=function(e,t,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new yi(ln,16,0),this.grid3D=new yi(ln,16,0),this.featureIndexArray=r||new et};function Op(e){for(var t=1/0,r=1/0,a=-1/0,c=-1/0,p=0,d=e;p<d.length;p+=1){var _=d[p];t=Math.min(t,_.x),r=Math.min(r,_.y),a=Math.max(a,_.x),c=Math.max(c,_.y)}return{minX:t,minY:r,maxX:a,maxY:c}}function nm(e,t){return t-e}Ta.prototype.insert=function(e,t,r,a,c,p){var d=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,a,c);for(var _=p?this.grid3D:this.grid,b=0;b<t.length;b++){for(var A=t[b],z=[1/0,1/0,-1/0,-1/0],R=0;R<A.length;R++){var N=A[R];z[0]=Math.min(z[0],N.x),z[1]=Math.min(z[1],N.y),z[2]=Math.max(z[2],N.x),z[3]=Math.max(z[3],N.y)}z[0]<ln&&z[1]<ln&&z[2]>=0&&z[3]>=0&&_.insert(d,z[0],z[1],z[2],z[3])}},Ta.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new tl.VectorTile(new Bl(this.rawTileData)).layers,this.sourceLayerCoder=new Ul(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ta.prototype.query=function(e,t,r){var a=this;this.loadVTLayers();for(var c=e.params||{},p=ln/e.tileSize/e.scale,d=Mo(c.filter),_=e.queryGeometry,b=e.queryPadding*p,A=Op(_),z=this.grid.query(A.minX-b,A.minY-b,A.maxX+b,A.maxY+b),R=Op(e.cameraQueryGeometry),N=this.grid3D.query(R.minX-b,R.minY-b,R.maxX+b,R.maxY+b,function(xe,ze,Re,Fe){return function(Ne,st,lt,Dt,At){for(var or=0,Ct=Ne;or<Ct.length;or+=1){var bn=Ct[or];if(st<=bn.x&&lt<=bn.y&&Dt>=bn.x&&At>=bn.y)return!0}var wn=[new $(st,lt),new $(st,At),new $(Dt,At),new $(Dt,lt)];if(Ne.length>2){for(var Bt=0,un=wn;Bt<un.length;Bt+=1)if(fs(Ne,un[Bt]))return!0}for(var _r=0;_r<Ne.length-1;_r++)if(Yf(Ne[_r],Ne[_r+1],wn))return!0;return!1}(e.cameraQueryGeometry,xe-b,ze-b,Re+b,Fe+b)}),U=0,j=N;U<j.length;U+=1){var ee=j[U];z.push(ee)}z.sort(nm);for(var re,he={},ye=function(xe){var ze=z[xe];if(ze!==re){re=ze;var Re=a.featureIndexArray.get(ze),Fe=null;a.loadMatchingFeature(he,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,d,c.layers,t,function(Ne,st){Fe||(Fe=Fo(Ne));var lt={};return Ne.id&&(lt=r.getState(st.sourceLayer||"_geojsonTileLayer",Ne.id)),st.queryIntersectsFeature(_,Ne,lt,Fe,a.z,e.transform,p,e.pixelPosMatrix)})}},fe=0;fe<z.length;fe++)ye(fe);return he},Ta.prototype.loadMatchingFeature=function(e,t,r,a,c,p,d,_){var b=this.bucketLayerIDs[t];if(!p||function(he,ye){for(var fe=0;fe<he.length;fe++)if(ye.indexOf(he[fe])>=0)return!0;return!1}(p,b)){var A=this.sourceLayerCoder.decode(r),z=this.vtLayers[A].feature(a);if(c(new Or(this.tileID.overscaledZ),z))for(var R=0;R<b.length;R++){var N=b[R];if(!(p&&p.indexOf(N)<0)){var U=d[N];if(U){var j=!_||_(z,U);if(j){var ee=new Vl(z,this.z,this.x,this.y);ee.layer=U.serialize();var re=e[N];re===void 0&&(re=e[N]=[]),re.push({featureIndex:a,feature:ee,intersectionZ:j})}}}}}},Ta.prototype.lookupSymbolFeatures=function(e,t,r,a,c,p){var d={};this.loadVTLayers();for(var _=Mo(a),b=0,A=e;b<A.length;b+=1){var z=A[b];this.loadMatchingFeature(d,t,r,z,_,c,p)}return d},Ta.prototype.hasLayer=function(e){for(var t=0,r=this.bucketLayerIDs;t<r.length;t+=1)for(var a=0,c=r[t];a<c.length;a+=1)if(e===c[a])return!0;return!1},We("FeatureIndex",Ta,{omit:["rawTileData","sourceLayerCoder"]});var Qr=function(e,t){this.tileID=e,this.uid=Mt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Qr.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<qr.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Qr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Qr.prototype.loadVectorData=function(e,t,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var a in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(_,b){var A={};if(!b)return A;for(var z=function(){var U=N[R],j=U.layerIds.map(function(ye){return b.getLayer(ye)}).filter(Boolean);if(j.length!==0){U.layers=j,U.stateDependentLayerIds&&(U.stateDependentLayers=U.stateDependentLayerIds.map(function(ye){return j.filter(function(fe){return fe.id===ye})[0]}));for(var ee=0,re=j;ee<re.length;ee+=1){var he=re[ee];A[he.id]=U}}},R=0,N=_;R<N.length;R+=1)z();return A}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var c=this.buckets[a];if(c instanceof gr){if(this.hasSymbolBuckets=!0,!r)break;c.justReloaded=!0}}for(var p in this.queryPadding=0,this.buckets){var d=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(p).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new K},Qr.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qr.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Qr.prototype.getBucket=function(e){return this.buckets[e.id]},Qr.prototype.upload=function(e){for(var t in this.buckets){var r=this.buckets[t];r.uploadPending()&&r.upload(e)}var a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ka(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ka(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},Qr.prototype.queryRenderedFeatures=function(e,t,r,a,c,p,d,_,b){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:a,scale:c,tileSize:this.tileSize,pixelPosMatrix:b,transform:d,params:p,queryPadding:this.queryPadding*_},e,t):{}},Qr.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),a=t?t.sourceLayer:"",c=r._geojsonTileLayer||r[a];if(c)for(var p=Mo(t&&t.filter),d=this.tileID.canonical,_=d.z,b=d.x,A=d.y,z={z:_,x:b,y:A},R=0;R<c.length;R++){var N=c.feature(R);if(p(new Or(this.tileID.overscaledZ),N)){var U=new Vl(N,_,b,A);U.tile=z,e.push(U)}}}},Qr.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Qr.prototype.setMask=function(e,t){if(!pe(this.mask,e)&&(this.mask=e,this.clearMask(),!pe(e,{0:!0}))){var r=new po,a=new S;this.segments=new ke,this.segments.prepareSegment(0,r,a);for(var c=Object.keys(e),p=0;p<c.length;p++){var d=e[c[p]],_=ln>>d.z,b=new $(d.x*_,d.y*_),A=new $(b.x+_,b.y+_),z=this.segments.prepareSegment(4,r,a);r.emplaceBack(b.x,b.y,b.x,b.y),r.emplaceBack(A.x,b.y,A.x,b.y),r.emplaceBack(b.x,A.y,b.x,A.y),r.emplaceBack(A.x,A.y,A.x,A.y);var R=z.vertexLength;a.emplaceBack(R,R+1,R+2),a.emplaceBack(R+1,R+2,R+3),z.vertexLength+=4,z.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(r,Bp.members),this.maskedIndexBuffer=t.createIndexBuffer(a)}},Qr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Qr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qr.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var r=function(d){var _={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,z,R,N){var U=R||N;return _[z]=!U||U.toLowerCase(),""}),_["max-age"]){var b=parseInt(_["max-age"],10);isNaN(b)?delete _["max-age"]:_["max-age"]=b}return _}(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var a=Date.now(),c=!1;if(this.expirationTime>a)c=!1;else if(t)if(this.expirationTime<t)c=!0;else{var p=this.expirationTime-t;p?this.expirationTime=a+Math.max(p,3e4):c=!0}else c=!0;c?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Qr.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var r=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets){var c=this.buckets[a],p=c.layers[0].sourceLayer||"_geojsonTileLayer",d=r[p],_=e[p];d&&_&&Object.keys(_).length!==0&&(c.update(_,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(a).queryRadius(c))))}}},Qr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Qr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qr.now()},Qr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qr.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=qr.now()+e};var Nu={horizontal:1,vertical:2,horizontalOnly:3},wi=function(){this.text="",this.sectionIndex=[],this.sections=[]};wi.fromFeature=function(e,t){for(var r=new wi,a=0;a<e.sections.length;a++){var c=e.sections[a];r.sections.push({scale:c.scale||1,fontStack:c.fontStack||t}),r.text+=c.text;for(var p=0;p<c.text.length;p++)r.sectionIndex.push(a)}return r},wi.prototype.length=function(){return this.text.length},wi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},wi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},wi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",r=0;r<e.length;r++){var a=e.charCodeAt(r+1)||null,c=e.charCodeAt(r-1)||null;a&&Un(a)&&!rl[e[r+1]]||c&&Un(c)&&!rl[e[r-1]]||!rl[e[r]]?t+=e[r]:t+=rl[e[r]]}return t}(this.text)},wi.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ju[this.text.charCodeAt(t)];t++)e++;for(var r=this.text.length,a=this.text.length-1;a>=0&&a>=e&&ju[this.text.charCodeAt(a)];a--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)},wi.prototype.substring=function(e,t){var r=new wi;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r},wi.prototype.toString=function(){return this.text},wi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,r){return Math.max(t,e.sections[r].scale)},0)};var ju={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pi={};function Fp(e,t,r,a){var c=Math.pow(e-t,2);return a?e<t?c/2:2*c:c+Math.abs(r)*r}function im(e,t){var r=0;return e===10&&(r-=1e4),e!==40&&e!==65288||(r+=50),t!==41&&t!==65289||(r+=50),r}function Up(e,t,r,a,c,p){for(var d=null,_=Fp(t,r,c,p),b=0,A=a;b<A.length;b+=1){var z=A[b],R=Fp(t-z.x,r,c,p)+z.badness;R<=_&&(d=z,_=R)}return{index:e,x:t,priorBreak:d,badness:_}}function qu(e,t,r,a){if(!r)return[];if(!e)return[];for(var c,p=[],d=function(U,j,ee,re){for(var he=0,ye=0;ye<U.length();ye++){var fe=U.getSection(ye),xe=re[fe.fontStack],ze=xe&&xe[U.getCharCode(ye)];ze&&(he+=ze.metrics.advance*fe.scale+j)}return he/Math.max(1,Math.ceil(he/ee))}(e,t,r,a),_=0,b=0;b<e.length();b++){var A=e.getSection(b),z=e.getCharCode(b),R=a[A.fontStack],N=R&&R[z];N&&!ju[z]&&(_+=N.metrics.advance*A.scale+t),b<e.length()-1&&(pi[z]||!((c=z)<11904)&&(De["Bopomofo Extended"](c)||De.Bopomofo(c)||De["CJK Compatibility Forms"](c)||De["CJK Compatibility Ideographs"](c)||De["CJK Compatibility"](c)||De["CJK Radicals Supplement"](c)||De["CJK Strokes"](c)||De["CJK Symbols and Punctuation"](c)||De["CJK Unified Ideographs Extension A"](c)||De["CJK Unified Ideographs"](c)||De["Enclosed CJK Letters and Months"](c)||De["Halfwidth and Fullwidth Forms"](c)||De.Hiragana(c)||De["Ideographic Description Characters"](c)||De["Kangxi Radicals"](c)||De["Katakana Phonetic Extensions"](c)||De.Katakana(c)||De["Vertical Forms"](c)||De["Yi Radicals"](c)||De["Yi Syllables"](c)))&&p.push(Up(b+1,_,d,p,im(z,e.getCharCode(b+1)),!1))}return function U(j){return j?U(j.priorBreak).concat(j.index):[]}(Up(e.length(),_,d,p,0,!0))}function Vp(e){var t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function om(e,t,r,a,c){if(c){var p=e[a],d=t[p.fontStack],_=d&&d[p.glyph];if(_)for(var b=_.metrics.advance*p.scale,A=(e[a].x+b)*c,z=r;z<=a;z++)e[z].x-=A}}pi[10]=!0,pi[32]=!0,pi[38]=!0,pi[40]=!0,pi[41]=!0,pi[43]=!0,pi[45]=!0,pi[47]=!0,pi[173]=!0,pi[183]=!0,pi[8203]=!0,pi[8208]=!0,pi[8211]=!0,pi[8231]=!0,s.createCommonjsModule=G,s.window=self,s.Point=$,s.browser=qr,s.getJSON=function(e,t){return sr(je(e,{type:"json"}),t)},s.normalizeSpriteURL=function(e,t,r,a){var c=we(e);return ve(e)?(c.path="/styles/v1"+c.path+"/sprite"+t+r,Ze(c,a)):(c.path+=""+t+r,Ie(c))},s.ResourceType=_t,s.getImage=zi,s.RGBAImage=ci,s.ImagePosition=ol,s.Texture=Ka,s.potpack=vp,s.normalizeGlyphsURL=function(e,t){if(!ve(e))return e;var r=we(e);return r.path="/fonts/v1"+r.path,Ze(r,t)},s.getArrayBuffer=dn,s.parseGlyphPBF=function(e){return new Bl(e).readFields(Qd,[])},s.asyncAll=function(e,t,r){if(!e.length)return r(null,[]);var a=e.length,c=new Array(e.length),p=null;e.forEach(function(d,_){t(d,function(b,A){b&&(p=b),c[_]=A,--a==0&&r(p,c)})})},s.isChar=De,s.AlphaImage=Ha,s.Properties=ii,s.DataConstantProperty=nt,s.styleSpec=be,s.validateLight=va,s.endsWith=Pr,s.emitValidationErrors=ea,s.validateStyle=Qo,s.extend=je,s.Evented=Zn,s.sphericalToCartesian=function(e){var t=e[0],r=e[1],a=e[2];return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:t*Math.cos(r)*Math.sin(a),y:t*Math.sin(r)*Math.sin(a),z:t*Math.cos(a)}},s.number=F,s.Transitionable=lo,s.warnOnce=Nr,s.uniqueId=Mt,s.Actor=Fl,s.normalizeSourceURL=function(e,t){if(!ve(e))return e;var r=we(e);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),Ze(r,t)},s.pick=function(e,t){for(var r={},a=0;a<t.length;a++){var c=t[a];c in e&&(r[c]=e[c])}return r},s.canonicalizeTileset=function(e,t){if(!ve(t))return e.tiles||[];for(var r=[],a=0,c=e.tiles;a<c.length;a+=1){var p=c[a],d=se(p);r.push(d)}return r},s.LngLatBounds=Kr,s.mercatorXfromLng=kp,s.mercatorYfromLat=Mp,s.Event=eo,s.ErrorEvent=La,s.postTurnstileEvent=ct,s.postMapLoadEvent=pt,s.normalizeTileURL=function(e,t,r){if(!t||!ve(t))return e;var a=we(e),c=qr.devicePixelRatio>=2||r===512?"@2x":"",p=fn.supported?".webp":"$1";return a.path=a.path.replace(W,""+c+p),a.path="/v4"+a.path,Ze(a)},s.OverscaledTileID=Yr,s.EXTENT=ln,s.MercatorCoordinate=_s,s.CanonicalTileID=vs,s.StructArrayLayout4i8=po,s.rasterBoundsAttributes=Bp,s.SegmentVector=ke,s.getVideo=function(e,t){var r,a,c=self.document.createElement("video");c.muted=!0,c.onloadstart=function(){t(null,c)};for(var p=0;p<e.length;p++){var d=self.document.createElement("source");r=e[p],a=void 0,(a=self.document.createElement("a")).href=r,(a.protocol!==self.document.location.protocol||a.host!==self.document.location.host)&&(c.crossOrigin="Anonymous"),d.src=e[p],c.appendChild(d)}return{cancel:function(){}}},s.ValidationError=Oe,s.bindAll=Mr,s.multiply=function(e,t,r){var a=t[0],c=t[1],p=t[2],d=t[3],_=t[4],b=t[5],A=t[6],z=t[7],R=t[8],N=t[9],U=t[10],j=t[11],ee=t[12],re=t[13],he=t[14],ye=t[15],fe=r[0],xe=r[1],ze=r[2],Re=r[3];return e[0]=fe*a+xe*_+ze*R+Re*ee,e[1]=fe*c+xe*b+ze*N+Re*re,e[2]=fe*p+xe*A+ze*U+Re*he,e[3]=fe*d+xe*z+ze*j+Re*ye,fe=r[4],xe=r[5],ze=r[6],Re=r[7],e[4]=fe*a+xe*_+ze*R+Re*ee,e[5]=fe*c+xe*b+ze*N+Re*re,e[6]=fe*p+xe*A+ze*U+Re*he,e[7]=fe*d+xe*z+ze*j+Re*ye,fe=r[8],xe=r[9],ze=r[10],Re=r[11],e[8]=fe*a+xe*_+ze*R+Re*ee,e[9]=fe*c+xe*b+ze*N+Re*re,e[10]=fe*p+xe*A+ze*U+Re*he,e[11]=fe*d+xe*z+ze*j+Re*ye,fe=r[12],xe=r[13],ze=r[14],Re=r[15],e[12]=fe*a+xe*_+ze*R+Re*ee,e[13]=fe*c+xe*b+ze*N+Re*re,e[14]=fe*p+xe*A+ze*U+Re*he,e[15]=fe*d+xe*z+ze*j+Re*ye,e},s.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.translate=function(e,t,r){var a,c,p,d,_,b,A,z,R,N,U,j,ee=r[0],re=r[1],he=r[2];return t===e?(e[12]=t[0]*ee+t[4]*re+t[8]*he+t[12],e[13]=t[1]*ee+t[5]*re+t[9]*he+t[13],e[14]=t[2]*ee+t[6]*re+t[10]*he+t[14],e[15]=t[3]*ee+t[7]*re+t[11]*he+t[15]):(a=t[0],c=t[1],p=t[2],d=t[3],_=t[4],b=t[5],A=t[6],z=t[7],R=t[8],N=t[9],U=t[10],j=t[11],e[0]=a,e[1]=c,e[2]=p,e[3]=d,e[4]=_,e[5]=b,e[6]=A,e[7]=z,e[8]=R,e[9]=N,e[10]=U,e[11]=j,e[12]=a*ee+_*re+R*he+t[12],e[13]=c*ee+b*re+N*he+t[13],e[14]=p*ee+A*re+U*he+t[14],e[15]=d*ee+z*re+j*he+t[15]),e},s.scale=function(e,t,r){var a=r[0],c=r[1],p=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*c,e[5]=t[5]*c,e[6]=t[6]*c,e[7]=t[7]*c,e[8]=t[8]*p,e[9]=t[9]*p,e[10]=t[10]*p,e[11]=t[11]*p,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},s.Color=Gt,s.isEqual=pe,s.keysDifference=function(e,t){var r=[];for(var a in e)a in t||r.push(a);return r},s.Tile=Qr,s.SourceFeatureState=xs,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.rotateZ=function(e,t,r){var a=Math.sin(r),c=Math.cos(r),p=t[0],d=t[1],_=t[2],b=t[3],A=t[4],z=t[5],R=t[6],N=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=p*c+A*a,e[1]=d*c+z*a,e[2]=_*c+R*a,e[3]=b*c+N*a,e[4]=A*c-p*a,e[5]=z*c-d*a,e[6]=R*c-_*a,e[7]=N*c-b*a,e},s.evaluateSizeForZoom=function(e,t,r){if(e.functionType==="constant")return{uSizeT:0,uSize:e.layoutSize};if(e.functionType==="source")return{uSizeT:0,uSize:0};if(e.functionType==="camera"){var a=e.propertyValue,c=e.zoomRange,p=e.sizeRange,d=$e(Zi(a,r.specification).interpolationFactor(t,c.min,c.max),0,1);return{uSizeT:0,uSize:p.min+d*(p.max-p.min)}}var _=e.propertyValue,b=e.zoomRange;return{uSizeT:$e(Zi(_,r.specification).interpolationFactor(t,b.min,b.max),0,1),uSize:0}},s.WritingMode=Nu,s.transformMat4=Ml,s.evaluateSizeForFeature=function(e,t,r){var a=t;return e.functionType==="source"?r.lowerSize/Rl:e.functionType==="composite"?F(r.lowerSize/Rl,r.upperSize/Rl,a.uSizeT):a.uSize},s.addDynamicAttributes=Ou,s.properties=_p,s.polygonIntersectsPolygon=Nc,s.isMapboxURL=ve,s.normalizeStyleURL=function(e,t){if(!ve(e))return e;var r=we(e);return r.path="/styles/v1"+r.path,Ze(r,t)},s.createStyleLayer=function(e){return e.type==="custom"?new jd(e):new qd[e.type](e)},s.clone=Lr,s.validateCustomStyleLayer=function(e){var t=[],r=e.id;return r===void 0&&t.push({message:"layers."+r+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+r+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),t},s.filterObject=Ci,s.mapObject=en,s.evented=qs,s.makeRequest=sr,s.registerForPluginAvailability=function(e){return Br?e({pluginURL:Br,completionCallback:kr}):qs.once("pluginAvailable",e),e},s.ZoomHistory=ri,s.getReferrer=Yt,s.createLayout=vn,s.UniformMatrix4f=ho,s.Uniform3f=Er,s.Uniform1f=Ht,s.Uniform1i=cr,s.Uniform2f=Tt,s.Uniform4f=Wi,s.create=Gc,s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=-r,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.transformMat3=function(e,t,r){var a=t[0],c=t[1],p=t[2];return e[0]=a*r[0]+c*r[3]+p*r[6],e[1]=a*r[1]+c*r[4]+p*r[7],e[2]=a*r[2]+c*r[5]+p*r[8],e},s.create$1=function(){var e=new ui(16);return ui!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},s.ortho=function(e,t,r,a,c,p,d){var _=1/(t-r),b=1/(a-c),A=1/(p-d);return e[0]=-2*_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*b,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(t+r)*_,e[13]=(c+a)*b,e[14]=(d+p)*A,e[15]=1,e},s.UniformColor=Ki,s.clamp=$e,s.StructArrayLayout2i4=Za,s.StructArrayLayout2ui4=C,s.ProgramConfiguration=xn,s.StructArrayLayout1ui2=L,s.StructArrayLayout3ui6=S,s.wrap=gt,s.create$2=function(){var e=new ui(4);return ui!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},s.rotate=function(e,t,r){var a=t[0],c=t[1],p=t[2],d=t[3],_=Math.sin(r),b=Math.cos(r);return e[0]=a*b+p*_,e[1]=c*b+d*_,e[2]=a*-_+p*b,e[3]=c*-_+d*b,e},s.LngLat=Sr,s.UnwrappedTileID=Dp,s.perspective=function(e,t,r,a,c){var p,d=1/Math.tan(t/2);return e[0]=d/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,c!=null&&c!==1/0?(p=1/(a-c),e[10]=(c+a)*p,e[14]=2*c*a*p):(e[10]=-1,e[14]=-2*a),e},s.rotateX=function(e,t,r){var a=Math.sin(r),c=Math.cos(r),p=t[4],d=t[5],_=t[6],b=t[7],A=t[8],z=t[9],R=t[10],N=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=p*c+A*a,e[5]=d*c+z*a,e[6]=_*c+R*a,e[7]=b*c+N*a,e[8]=A*c-p*a,e[9]=z*c-d*a,e[10]=R*c-_*a,e[11]=N*c-b*a,e},s.mercatorZfromAltitude=Lp,s.invert=function(e,t){var r=t[0],a=t[1],c=t[2],p=t[3],d=t[4],_=t[5],b=t[6],A=t[7],z=t[8],R=t[9],N=t[10],U=t[11],j=t[12],ee=t[13],re=t[14],he=t[15],ye=r*_-a*d,fe=r*b-c*d,xe=r*A-p*d,ze=a*b-c*_,Re=a*A-p*_,Fe=c*A-p*b,Ne=z*ee-R*j,st=z*re-N*j,lt=z*he-U*j,Dt=R*re-N*ee,At=R*he-U*ee,or=N*he-U*re,Ct=ye*or-fe*At+xe*Dt+ze*lt-Re*st+Fe*Ne;return Ct?(Ct=1/Ct,e[0]=(_*or-b*At+A*Dt)*Ct,e[1]=(c*At-a*or-p*Dt)*Ct,e[2]=(ee*Fe-re*Re+he*ze)*Ct,e[3]=(N*Re-R*Fe-U*ze)*Ct,e[4]=(b*lt-d*or-A*st)*Ct,e[5]=(r*or-c*lt+p*st)*Ct,e[6]=(re*xe-j*Fe-he*fe)*Ct,e[7]=(z*Fe-N*xe+U*fe)*Ct,e[8]=(d*At-_*lt+A*Ne)*Ct,e[9]=(a*lt-r*At-p*Ne)*Ct,e[10]=(j*Re-ee*xe+he*ye)*Ct,e[11]=(R*xe-z*Re-U*ye)*Ct,e[12]=(_*st-d*Dt-b*Ne)*Ct,e[13]=(r*Dt-a*st+c*Ne)*Ct,e[14]=(ee*fe-j*ze-re*ye)*Ct,e[15]=(z*ze-R*fe+N*ye)*Ct,e):null},s.ease=rt,s.bezier=Me,s.config=Wt,s.webpSupported=fn,s.EvaluationParameters=Or,s.version="0.53.1",s.setRTLTextPlugin=function(e,t){if(js)throw new Error("setRTLTextPlugin cannot be called multiple times.");js=!0,Br=qr.resolveURL(e),kr=function(r){r?(js=!1,Br=null,t&&t(r)):xa=!0},qs.fire(new eo("pluginAvailable",{pluginURL:Br,completionCallback:kr}))},s.featureFilter=Mo,s.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},s.Anchor=yp,s.GLYPH_PBF_BORDER=rm,s.distToSegmentSquared=qc,s.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1)if(!ls(r[t].charCodeAt(0)))return!1;return!0},s.shapeText=function(e,t,r,a,c,p,d,_,b,A,z){var R=wi.fromFeature(e,r);z===Nu.vertical&&R.verticalizePunctuation();var N,U=[],j={positionedGlyphs:U,text:R,top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:z},ee=Vn.processBidirectionalText,re=Vn.processStyledBidirectionalText;if(ee&&R.sections.length===1){N=[];for(var he=0,ye=ee(R.toString(),qu(R,_,a,t));he<ye.length;he+=1){var fe=ye[he],xe=new wi;xe.text=fe,xe.sections=R.sections;for(var ze=0;ze<fe.length;ze++)xe.sectionIndex.push(0);N.push(xe)}}else if(re){N=[];for(var Re=0,Fe=re(R.text,R.sectionIndex,qu(R,_,a,t));Re<Fe.length;Re+=1){var Ne=Fe[Re],st=new wi;st.text=Ne[0],st.sectionIndex=Ne[1],st.sections=R.sections,N.push(st)}}else N=function(lt,Dt){for(var At=[],or=lt.text,Ct=0,bn=0,wn=Dt;bn<wn.length;bn+=1){var Bt=wn[bn];At.push(lt.substring(Ct,Bt)),Ct=Bt}return Ct<or.length&&At.push(lt.substring(Ct,or.length)),At}(R,qu(R,_,a,t));return function(lt,Dt,At,or,Ct,bn,wn,Bt,un){for(var _r=0,Wn=-17,Kn=0,cn=lt.positionedGlyphs,Oi=bn==="right"?1:bn==="left"?0:.5,Ei=0,hi=At;Ei<hi.length;Ei+=1){var Yn=hi[Ei];Yn.trim();var Si=Yn.getMaxScale();if(Yn.length()){for(var $i=cn.length,In=0;In<Yn.length();In++){var Fr=Yn.getSection(In),Ji=Yn.getCharCode(In),Uo=24*(Si-Fr.scale),Cn=Dt[Fr.fontStack],pn=Cn&&Cn[Ji];pn&&(gn(Ji)&&wn!==Nu.horizontal?(cn.push({glyph:Ji,x:_r,y:Uo,vertical:!0,scale:Fr.scale,fontStack:Fr.fontStack}),_r+=un*Fr.scale+Bt):(cn.push({glyph:Ji,x:_r,y:Wn+Uo,vertical:!1,scale:Fr.scale,fontStack:Fr.fontStack}),_r+=pn.metrics.advance*Fr.scale+Bt))}if(cn.length!==$i){var Vo=_r-Bt;Kn=Math.max(Vo,Kn),om(cn,Dt,$i,cn.length-1,Oi)}_r=0,Wn+=or*Si}else Wn+=or}var hn=Vp(Ct),Np=hn.horizontalAlign,jp=hn.verticalAlign;(function(Zu,am,sm,lm,um,cm,pm){for(var hm=(am-sm)*um,fm=(-lm*pm+.5)*cm,Nl=0;Nl<Zu.length;Nl++)Zu[Nl].x+=hm,Zu[Nl].y+=fm})(cn,Oi,Np,jp,Kn,or,At.length);var qp=Wn- -17;lt.top+=-jp*qp,lt.bottom=lt.top+qp,lt.left+=-Np*Kn,lt.right=lt.left+Kn}(j,t,N,c,p,d,z,_,A),!!U.length&&(j.text=j.text.toString(),j)},s.allowsVerticalWritingMode=Bo,s.shapeIcon=function(e,t,r){var a=Vp(r),c=a.horizontalAlign,p=a.verticalAlign,d=t[0],_=t[1],b=d-e.displaySize[0]*c,A=b+e.displaySize[0],z=_-e.displaySize[1]*p;return{image:e,top:z,bottom:z+e.displaySize[1],left:b,right:A}},s.classifyRings=Cu,s.SIZE_PACK_FACTOR=Rl,s.SymbolBucket=gr,s.register=We,s.CollisionBoxArray=K,s.DictionaryCoder=Ul,s.FeatureIndex=Ta,s.ImageAtlas=xp,s.LineBucket=bi,s.FillBucket=fo,s.FillExtrusionBucket=mo,s.mvt=tl,s.Protobuf=Bl,s.DEMData=na,s.vectorTile=tl,s.Point$1=$,s.pbf=Bl,s.createExpression=Xo,s.plugin=Vn}),P(["./shared.js"],function(s){function G(x){var E=typeof x;if(E==="number"||E==="boolean"||E==="string"||x==null)return JSON.stringify(x);if(Array.isArray(x)){for(var I="[",M=0,B=x;M<B.length;M+=1)I+=G(B[M])+",";return I+"]"}for(var D=Object.keys(x).sort(),Z="{",F=0;F<D.length;F++)Z+=JSON.stringify(D[F])+":"+G(x[D[F]])+",";return Z+"}"}function k(x){for(var E="",I=0,M=s.refProperties;I<M.length;I+=1)E+="/"+G(x[M[I]]);return E}var J=function(x){x&&this.replace(x)};function $(x,E,I,M,B){if(E.segment===void 0)return!0;for(var D=E,Z=E.segment+1,F=0;F>-I/2;){if(--Z<0)return!1;F-=x[Z].dist(D),D=x[Z]}F+=x[Z].dist(x[Z+1]),Z++;for(var H=[],q=0;F<I/2;){var ue=x[Z-1],de=x[Z],ne=x[Z+1];if(!ne)return!1;var me=ue.angleTo(de)-de.angleTo(ne);for(me=Math.abs((me+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:F,angleDelta:me}),q+=me;F-H[0].distance>M;)q-=H.shift().angleDelta;if(q>B)return!1;Z++,F+=de.dist(ne)}return!0}function oe(x){for(var E=0,I=0;I<x.length-1;I++)E+=x[I].dist(x[I+1]);return E}function pe(x,E,I){return x?.6*E*I:0}function Me(x,E){return Math.max(x?x.right-x.left:0,E?E.right-E.left:0)}function rt(x,E,I,M,B,D){for(var Z=pe(I,B,D),F=Me(I,M)*D,H=0,q=oe(x)/2,ue=0;ue<x.length-1;ue++){var de=x[ue],ne=x[ue+1],me=de.dist(ne);if(H+me>q){var Te=(q-H)/me,Ue=s.number(de.x,ne.x,Te),Pe=s.number(de.y,ne.y,Te),Ve=new s.Anchor(Ue,Pe,ne.angleTo(de),ue);return Ve._round(),!Z||$(x,Ve,F,Z,E)?Ve:void 0}H+=me}}function $e(x,E,I,M,B,D,Z,F,H){var q=pe(M,D,Z),ue=Me(M,B),de=ue*Z,ne=x[0].x===0||x[0].x===H||x[0].y===0||x[0].y===H;return E-de<E/4&&(E=de+E/4),function me(Te,Ue,Pe,Ve,Ke,Xe,Ye,He,ht){for(var dt=Xe/2,St=oe(Te),Lt=0,xt=Ue-Pe,Kt=[],Qe=0;Qe<Te.length-1;Qe++){for(var Rt=Te[Qe],Xt=Te[Qe+1],Ut=Rt.dist(Xt),zr=Xt.angleTo(Rt);xt+Pe<Lt+Ut;){var Rr=((xt+=Pe)-Lt)/Ut,Ir=s.number(Rt.x,Xt.x,Rr),Bn=s.number(Rt.y,Xt.y,Rr);if(Ir>=0&&Ir<ht&&Bn>=0&&Bn<ht&&xt-dt>=0&&xt+dt<=St){var ei=new s.Anchor(Ir,Bn,zr,Qe);ei._round(),Ve&&!$(Te,ei,Xe,Ve,Ke)||Kt.push(ei)}}Lt+=Ut}return He||Kt.length||Ye||(Kt=me(Te,Lt/2,Pe,Ve,Ke,Xe,Ye,!0,ht)),Kt}(x,ne?E/2*F%E:(ue/2+2*D)*Z*F%E,E,q,I,de,ne,!1,H)}J.prototype.replace=function(x){this._layerConfigs={},this._layers={},this.update(x,[])},J.prototype.update=function(x,E){for(var I=this,M=0,B=x;M<B.length;M+=1){var D=B[M];this._layerConfigs[D.id]=D;var Z=this._layers[D.id]=s.createStyleLayer(D);Z._featureFilter=s.featureFilter(Z.filter)}for(var F=0,H=E;F<H.length;F+=1){var q=H[F];delete this._layerConfigs[q],delete this._layers[q]}this.familiesBySource={};for(var ue=0,de=function(Ke){for(var Xe={},Ye=0;Ye<Ke.length;Ye++){var He=k(Ke[Ye]),ht=Xe[He];ht||(ht=Xe[He]=[]),ht.push(Ke[Ye])}var dt=[];for(var St in Xe)dt.push(Xe[St]);return dt}(s.values(this._layerConfigs));ue<de.length;ue+=1){var ne=de[ue].map(function(Ke){return I._layers[Ke.id]}),me=ne[0];if(me.visibility!=="none"){var Te=me.source||"",Ue=this.familiesBySource[Te];Ue||(Ue=this.familiesBySource[Te]={});var Pe=me.sourceLayer||"_geojsonTileLayer",Ve=Ue[Pe];Ve||(Ve=Ue[Pe]=[]),Ve.push(ne)}}};var gt=function(x,E,I,M,B,D,Z,F,H,q,ue,de){var ne=Z.top*F-H,me=Z.bottom*F+H,Te=Z.left*F-H,Ue=Z.right*F+H;if(this.boxStartIndex=x.length,q){var Pe=me-ne,Ve=Ue-Te;Pe>0&&(Pe=Math.max(10*F,Pe),this._addLineCollisionCircles(x,E,I,I.segment,Ve,Pe,M,B,D,ue))}else{if(de){var Ke=new s.Point(Te,ne),Xe=new s.Point(Ue,ne),Ye=new s.Point(Te,me),He=new s.Point(Ue,me),ht=de*Math.PI/180;Ke._rotate(ht),Xe._rotate(ht),Ye._rotate(ht),He._rotate(ht),Te=Math.min(Ke.x,Xe.x,Ye.x,He.x),Ue=Math.max(Ke.x,Xe.x,Ye.x,He.x),ne=Math.min(Ke.y,Xe.y,Ye.y,He.y),me=Math.max(Ke.y,Xe.y,Ye.y,He.y)}x.emplaceBack(I.x,I.y,Te,ne,Ue,me,M,B,D,0,0)}this.boxEndIndex=x.length};gt.prototype._addLineCollisionCircles=function(x,E,I,M,B,D,Z,F,H,q){var ue=D/2,de=Math.floor(B/ue)||1,ne=1+.4*Math.log(q)/Math.LN2,me=Math.floor(de*ne/2),Te=-D/2,Ue=I,Pe=M+1,Ve=Te,Ke=-B/2,Xe=Ke-B/4;do{if(--Pe<0){if(Ve>Ke)return;Pe=0;break}Ve-=E[Pe].dist(Ue),Ue=E[Pe]}while(Ve>Xe);for(var Ye=E[Pe].dist(E[Pe+1]),He=-me;He<de+me;He++){var ht=He*ue,dt=Ke+ht;if(ht<0&&(dt+=ht),ht>B&&(dt+=ht-B),!(dt<Ve)){for(;Ve+Ye<dt;){if(Ve+=Ye,++Pe+1>=E.length)return;Ye=E[Pe].dist(E[Pe+1])}var St=dt-Ve,Lt=E[Pe],xt=E[Pe+1].sub(Lt)._unit()._mult(St)._add(Lt)._round(),Kt=Math.abs(dt-Te)<ue?0:.8*(dt-Te);x.emplaceBack(xt.x,xt.y,-D/2,-D/2,D/2,D/2,Z,F,H,D/2,Kt)}}};var je=function(x,E){if(x===void 0&&(x=[]),E===void 0&&(E=yt),this.data=x,this.length=this.data.length,this.compare=E,this.length>0)for(var I=(this.length>>1)-1;I>=0;I--)this._down(I)};function yt(x,E){return x<E?-1:x>E?1:0}function Mt(x,E,I){E===void 0&&(E=1),I===void 0&&(I=!1);for(var M=1/0,B=1/0,D=-1/0,Z=-1/0,F=x[0],H=0;H<F.length;H++){var q=F[H];(!H||q.x<M)&&(M=q.x),(!H||q.y<B)&&(B=q.y),(!H||q.x>D)&&(D=q.x),(!H||q.y>Z)&&(Z=q.y)}var ue=D-M,de=Z-B,ne=Math.min(ue,de),me=ne/2,Te=new je([],ft);if(ne===0)return new s.Point(M,B);for(var Ue=M;Ue<D;Ue+=ne)for(var Pe=B;Pe<Z;Pe+=ne)Te.push(new fr(Ue+me,Pe+me,me,x));for(var Ve=function(Ye){for(var He=0,ht=0,dt=0,St=Ye[0],Lt=0,xt=St.length,Kt=xt-1;Lt<xt;Kt=Lt++){var Qe=St[Lt],Rt=St[Kt],Xt=Qe.x*Rt.y-Rt.x*Qe.y;ht+=(Qe.x+Rt.x)*Xt,dt+=(Qe.y+Rt.y)*Xt,He+=3*Xt}return new fr(ht/He,dt/He,0,Ye)}(x),Ke=Te.length;Te.length;){var Xe=Te.pop();(Xe.d>Ve.d||!Ve.d)&&(Ve=Xe,I&&console.log("found best %d after %d probes",Math.round(1e4*Xe.d)/1e4,Ke)),Xe.max-Ve.d<=E||(me=Xe.h/2,Te.push(new fr(Xe.p.x-me,Xe.p.y-me,me,x)),Te.push(new fr(Xe.p.x+me,Xe.p.y-me,me,x)),Te.push(new fr(Xe.p.x-me,Xe.p.y+me,me,x)),Te.push(new fr(Xe.p.x+me,Xe.p.y+me,me,x)),Ke+=4)}return I&&(console.log("num probes: "+Ke),console.log("best distance: "+Ve.d)),Ve.p}function ft(x,E){return E.max-x.max}function fr(x,E,I,M){this.p=new s.Point(x,E),this.h=I,this.d=function(B,D){for(var Z=!1,F=1/0,H=0;H<D.length;H++)for(var q=D[H],ue=0,de=q.length,ne=de-1;ue<de;ne=ue++){var me=q[ue],Te=q[ne];me.y>B.y!=Te.y>B.y&&B.x<(Te.x-me.x)*(B.y-me.y)/(Te.y-me.y)+me.x&&(Z=!Z),F=Math.min(F,s.distToSegmentSquared(B,me,Te))}return(Z?1:-1)*Math.sqrt(F)}(this.p,M),this.max=this.d+this.h*Math.SQRT2}je.prototype.push=function(x){this.data.push(x),this.length++,this._up(this.length-1)},je.prototype.pop=function(){if(this.length!==0){var x=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),x}},je.prototype.peek=function(){return this.data[0]},je.prototype._up=function(x){for(var E=this.data,I=this.compare,M=E[x];x>0;){var B=x-1>>1,D=E[B];if(I(M,D)>=0)break;E[x]=D,x=B}E[x]=M},je.prototype._down=function(x){for(var E=this.data,I=this.compare,M=this.length>>1,B=E[x];x<M;){var D=1+(x<<1),Z=E[D],F=D+1;if(F<this.length&&I(E[F],Z)<0&&(D=F,Z=E[F]),I(Z,B)>=0)break;E[x]=Z,x=D}E[x]=B};var Mr=s.createCommonjsModule(function(x){x.exports=function(E,I){var M,B,D,Z,F,H,q,ue;for(M=3&E.length,B=E.length-M,D=I,F=3432918353,H=461845907,ue=0;ue<B;)q=255&E.charCodeAt(ue)|(255&E.charCodeAt(++ue))<<8|(255&E.charCodeAt(++ue))<<16|(255&E.charCodeAt(++ue))<<24,++ue,D=27492+(65535&(Z=5*(65535&(D=(D^=q=(65535&(q=(q=(65535&q)*F+(((q>>>16)*F&65535)<<16)&4294967295)<<15|q>>>17))*H+(((q>>>16)*H&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(Z>>>16)&65535)<<16);switch(q=0,M){case 3:q^=(255&E.charCodeAt(ue+2))<<16;case 2:q^=(255&E.charCodeAt(ue+1))<<8;case 1:D^=q=(65535&(q=(q=(65535&(q^=255&E.charCodeAt(ue)))*F+(((q>>>16)*F&65535)<<16)&4294967295)<<15|q>>>17))*H+(((q>>>16)*H&65535)<<16)&4294967295}return D^=E.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}}),Pr=s.createCommonjsModule(function(x){x.exports=function(E,I){for(var M,B=E.length,D=I^B,Z=0;B>=4;)M=1540483477*(65535&(M=255&E.charCodeAt(Z)|(255&E.charCodeAt(++Z))<<8|(255&E.charCodeAt(++Z))<<16|(255&E.charCodeAt(++Z))<<24))+((1540483477*(M>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),B-=4,++Z;switch(B){case 3:D^=(255&E.charCodeAt(Z+2))<<16;case 2:D^=(255&E.charCodeAt(Z+1))<<8;case 1:D=1540483477*(65535&(D^=255&E.charCodeAt(Z)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}}),en=Mr,Ci=Mr,Lr=Pr;function En(x,E,I,M,B,D){x.createArrays();var Z=512*x.overscaling;x.tilePixelRatio=s.EXTENT/Z,x.compareText={},x.iconsNeedLinear=!1;var F=x.layers[0].layout,H=x.layers[0]._unevaluatedLayout._values,q={};if(x.textSizeData.functionType==="composite"){var ue=x.textSizeData.zoomRange,de=ue.min,ne=ue.max;q.compositeTextSizes=[H["text-size"].possiblyEvaluate(new s.EvaluationParameters(de)),H["text-size"].possiblyEvaluate(new s.EvaluationParameters(ne))]}if(x.iconSizeData.functionType==="composite"){var me=x.iconSizeData.zoomRange,Te=me.min,Ue=me.max;q.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new s.EvaluationParameters(Te)),H["icon-size"].possiblyEvaluate(new s.EvaluationParameters(Ue))]}q.layoutTextSize=H["text-size"].possiblyEvaluate(new s.EvaluationParameters(x.zoom+1)),q.layoutIconSize=H["icon-size"].possiblyEvaluate(new s.EvaluationParameters(x.zoom+1)),q.textMaxSize=H["text-size"].possiblyEvaluate(new s.EvaluationParameters(18));for(var Pe=24*F.get("text-line-height"),Ve=F.get("text-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",Ke=F.get("text-keep-upright"),Xe=0,Ye=x.features;Xe<Ye.length;Xe+=1){var He=Ye[Xe],ht=F.get("text-font").evaluate(He,{}).join(","),dt=I,St={},Lt=He.text;if(Lt){var xt=Lt.toString(),Kt=F.get("text-offset").evaluate(He,{}).map(function(Bn){return 24*Bn}),Qe=24*F.get("text-letter-spacing").evaluate(He,{}),Rt=s.allowsLetterSpacing(xt)?Qe:0,Xt=F.get("text-anchor").evaluate(He,{}),Ut=F.get("text-justify").evaluate(He,{}),zr=F.get("symbol-placement")==="point"?24*F.get("text-max-width").evaluate(He,{}):0;St.horizontal=s.shapeText(Lt,E,ht,zr,Pe,Xt,Ut,Rt,Kt,24,s.WritingMode.horizontal),s.allowsVerticalWritingMode(xt)&&Ve&&Ke&&(St.vertical=s.shapeText(Lt,E,ht,zr,Pe,Xt,Ut,Rt,Kt,24,s.WritingMode.vertical))}var Rr=void 0;if(He.icon){var Ir=M[He.icon];Ir&&(Rr=s.shapeIcon(B[He.icon],F.get("icon-offset").evaluate(He,{}),F.get("icon-anchor").evaluate(He,{})),x.sdfIcons===void 0?x.sdfIcons=Ir.sdf:x.sdfIcons!==Ir.sdf&&s.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ir.pixelRatio!==x.pixelRatio||F.get("icon-rotate").constantOr(1)!==0)&&(x.iconsNeedLinear=!0))}(St.horizontal||Rr)&&Nr(x,He,St,Rr,dt,q)}D&&x.generateCollisionDebugBuffers()}function Nr(x,E,I,M,B,D){var Z=D.layoutTextSize.evaluate(E,{}),F=D.layoutIconSize.evaluate(E,{}),H=D.textMaxSize.evaluate(E,{});H===void 0&&(H=Z);var q=x.layers[0].layout,ue=q.get("text-offset").evaluate(E,{}),de=q.get("icon-offset").evaluate(E,{}),ne=Z/24,me=x.tilePixelRatio*ne,Te=x.tilePixelRatio*H/24,Ue=x.tilePixelRatio*F,Pe=x.tilePixelRatio*q.get("symbol-spacing"),Ve=q.get("text-padding")*x.tilePixelRatio,Ke=q.get("icon-padding")*x.tilePixelRatio,Xe=q.get("text-max-angle")/180*Math.PI,Ye=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",He=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",ht=q.get("symbol-placement"),dt=Pe/2,St=function(oo,an){an.x<0||an.x>=s.EXTENT||an.y<0||an.y>=s.EXTENT||function(Jt,Hr,$r,Jr,qi,Hn,Nt,ti,vt,it,Us,ha,Go,Oa,Fa,fa,da,Xo,Fn,ko,Ho){var Mi,Zi,Tn=Jt.addToLineVertexArray(Hr,$r),Wo=0,ma=0,Ua=0,Ko=en(Jr.horizontal?Jr.horizontal.text:""),Li=[];if(Jr.horizontal){var Va=Hn.layout.get("text-rotate").evaluate(Fn,{});Mi=new gt(Nt,$r,Hr,ti,vt,it,Jr.horizontal,Us,ha,Go,Jt.overscaling,Va),ma+=Qn(Jt,Hr,Jr.horizontal,Hn,Go,Fn,Oa,Tn,Jr.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Li,ko,Ho),Jr.vertical&&(Ua+=Qn(Jt,Hr,Jr.vertical,Hn,Go,Fn,Oa,Tn,s.WritingMode.vertical,Li,ko,Ho))}var Vs=Mi?Mi.boxStartIndex:Jt.collisionBoxArray.length,Mo=Mi?Mi.boxEndIndex:Jt.collisionBoxArray.length;if(qi){var is=function(os,ao,ja,Ns,Ro,qa){var Yo,so,Do,An,$o=ao.image,Cr=ja.layout,Jo=ao.top-1/$o.pixelRatio,Ri=ao.left-1/$o.pixelRatio,Qo=ao.bottom+1/$o.pixelRatio,va=ao.right+1/$o.pixelRatio;if(Cr.get("icon-text-fit")!=="none"&&Ro){var as=va-Ri,ss=Qo-Jo,ea=Cr.get("text-size").evaluate(qa,{})/24,yi=Ro.left*ea,Gi=Ro.right*ea,yn=Ro.top*ea,Dr=Gi-yi,Xi=Ro.bottom*ea-yn,We=Cr.get("icon-text-fit-padding")[0],ta=Cr.get("icon-text-fit-padding")[1],jt=Cr.get("icon-text-fit-padding")[2],rr=Cr.get("icon-text-fit-padding")[3],ri=Cr.get("icon-text-fit")==="width"?.5*(Xi-ss):0,De=Cr.get("icon-text-fit")==="height"?.5*(Dr-as):0,Bo=Cr.get("icon-text-fit")==="width"||Cr.get("icon-text-fit")==="both"?Dr:as,ls=Cr.get("icon-text-fit")==="height"||Cr.get("icon-text-fit")==="both"?Xi:ss;Yo=new s.Point(yi+De-rr,yn+ri-We),so=new s.Point(yi+De+ta+Bo,yn+ri-We),Do=new s.Point(yi+De+ta+Bo,yn+ri+jt+ls),An=new s.Point(yi+De-rr,yn+ri+jt+ls)}else Yo=new s.Point(Ri,Jo),so=new s.Point(va,Jo),Do=new s.Point(va,Qo),An=new s.Point(Ri,Qo);var gn=ja.layout.get("icon-rotate").evaluate(qa,{})*Math.PI/180;if(gn){var Un=Math.sin(gn),us=Math.cos(gn),kr=[us,-Un,Un,us];Yo._matMult(kr),so._matMult(kr),An._matMult(kr),Do._matMult(kr)}return[{tl:Yo,tr:so,bl:An,br:Do,tex:$o.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,qi,Hn,0,Jr.horizontal,Fn),ya=Hn.layout.get("icon-rotate").evaluate(Fn,{});Zi=new gt(Nt,$r,Hr,ti,vt,it,qi,Fa,fa,!1,Jt.overscaling,ya),Wo=4*is.length;var ga=Jt.iconSizeData,Lo=null;ga.functionType==="source"?(Lo=[s.SIZE_PACK_FACTOR*Hn.layout.get("icon-size").evaluate(Fn,{})])[0]>dr&&s.warnOnce(Jt.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):ga.functionType==="composite"&&((Lo=[s.SIZE_PACK_FACTOR*Ho.compositeIconSizes[0].evaluate(Fn,{}),s.SIZE_PACK_FACTOR*Ho.compositeIconSizes[1].evaluate(Fn,{})])[0]>dr||Lo[1]>dr)&&s.warnOnce(Jt.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),Jt.addSymbols(Jt.icon,is,Lo,Xo,da,Fn,!1,Hr,Tn.lineStartIndex,Tn.lineLength)}var Na=Zi?Zi.boxStartIndex:Jt.collisionBoxArray.length,_a=Zi?Zi.boxEndIndex:Jt.collisionBoxArray.length;Jt.glyphOffsetArray.length>=s.SymbolBucket.MAX_GLYPHS&&s.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jt.symbolInstances.emplaceBack(Hr.x,Hr.y,Li.length>0?Li[0]:-1,Li.length>1?Li[1]:-1,Ko,Vs,Mo,Na,_a,ti,ma,Ua,Wo,0)}(x,an,oo,I,M,x.layers[0],x.collisionBoxArray,E.index,E.sourceLayerIndex,x.index,me,Ve,Ye,ue,Ue,Ke,He,de,E,B,D)};if(ht==="line")for(var Lt=0,xt=function(oo,an,Jt,Hr,$r){for(var Jr=[],qi=0;qi<oo.length;qi++)for(var Hn=oo[qi],Nt=void 0,ti=0;ti<Hn.length-1;ti++){var vt=Hn[ti],it=Hn[ti+1];vt.x<an&&it.x<an||(vt.x<an?vt=new s.Point(an,vt.y+(it.y-vt.y)*((an-vt.x)/(it.x-vt.x)))._round():it.x<an&&(it=new s.Point(an,vt.y+(it.y-vt.y)*((an-vt.x)/(it.x-vt.x)))._round()),vt.y<Jt&&it.y<Jt||(vt.y<Jt?vt=new s.Point(vt.x+(it.x-vt.x)*((Jt-vt.y)/(it.y-vt.y)),Jt)._round():it.y<Jt&&(it=new s.Point(vt.x+(it.x-vt.x)*((Jt-vt.y)/(it.y-vt.y)),Jt)._round()),vt.x>=Hr&&it.x>=Hr||(vt.x>=Hr?vt=new s.Point(Hr,vt.y+(it.y-vt.y)*((Hr-vt.x)/(it.x-vt.x)))._round():it.x>=Hr&&(it=new s.Point(Hr,vt.y+(it.y-vt.y)*((Hr-vt.x)/(it.x-vt.x)))._round()),vt.y>=$r&&it.y>=$r||(vt.y>=$r?vt=new s.Point(vt.x+(it.x-vt.x)*(($r-vt.y)/(it.y-vt.y)),$r)._round():it.y>=$r&&(it=new s.Point(vt.x+(it.x-vt.x)*(($r-vt.y)/(it.y-vt.y)),$r)._round()),Nt&&vt.equals(Nt[Nt.length-1])||(Nt=[vt],Jr.push(Nt)),Nt.push(it)))))}return Jr}(E.geometry,0,0,s.EXTENT,s.EXTENT);Lt<xt.length;Lt+=1)for(var Kt=xt[Lt],Qe=0,Rt=$e(Kt,Pe,Xe,I.vertical||I.horizontal,M,24,Te,x.overscaling,s.EXTENT);Qe<Rt.length;Qe+=1){var Xt=Rt[Qe],Ut=I.horizontal;Ut&&Pi(x,Ut.text,dt,Xt)||St(Kt,Xt)}else if(ht==="line-center")for(var zr=0,Rr=E.geometry;zr<Rr.length;zr+=1){var Ir=Rr[zr];if(Ir.length>1){var Bn=rt(Ir,Xe,I.vertical||I.horizontal,M,24,Te);Bn&&St(Ir,Bn)}}else if(E.type==="Polygon")for(var ei=0,di=s.classifyRings(E.geometry,0);ei<di.length;ei+=1){var Co=di[ei],Po=Mt(Co,16);St(Co[0],new s.Anchor(Po.x,Po.y,0))}else if(E.type==="LineString")for(var io=0,zo=E.geometry;io<zo.length;io+=1){var Ni=zo[io];St(Ni,new s.Anchor(Ni[0].x,Ni[0].y,0))}else if(E.type==="Point")for(var ji=0,On=E.geometry;ji<On.length;ji+=1)for(var Xn=0,mi=On[ji];Xn<mi.length;Xn+=1){var ki=mi[Xn];St([ki],new s.Anchor(ki.x,ki.y,0))}}en.murmur3=Ci,en.murmur2=Lr;var dr=65535;function Qn(x,E,I,M,B,D,Z,F,H,q,ue,de){var ne=function(Ue,Pe,Ve,Ke,Xe,Ye){for(var He=Ve.layout.get("text-rotate").evaluate(Xe,{})*Math.PI/180,ht=Ve.layout.get("text-offset").evaluate(Xe,{}).map(function(oo){return 24*oo}),dt=Pe.positionedGlyphs,St=[],Lt=0;Lt<dt.length;Lt++){var xt=dt[Lt],Kt=Ye[xt.fontStack],Qe=Kt&&Kt[xt.glyph];if(Qe){var Rt=Qe.rect;if(Rt){var Xt=s.GLYPH_PBF_BORDER+1,Ut=Qe.metrics.advance*xt.scale/2,zr=Ke?[xt.x+Ut,xt.y]:[0,0],Rr=Ke?[0,0]:[xt.x+Ut+ht[0],xt.y+ht[1]],Ir=(Qe.metrics.left-Xt)*xt.scale-Ut+Rr[0],Bn=(-Qe.metrics.top-Xt)*xt.scale+Rr[1],ei=Ir+Rt.w*xt.scale,di=Bn+Rt.h*xt.scale,Co=new s.Point(Ir,Bn),Po=new s.Point(ei,Bn),io=new s.Point(Ir,di),zo=new s.Point(ei,di);if(Ke&&xt.vertical){var Ni=new s.Point(-Ut,Ut),ji=-Math.PI/2,On=new s.Point(5,0);Co._rotateAround(ji,Ni)._add(On),Po._rotateAround(ji,Ni)._add(On),io._rotateAround(ji,Ni)._add(On),zo._rotateAround(ji,Ni)._add(On)}if(He){var Xn=Math.sin(He),mi=Math.cos(He),ki=[mi,-Xn,Xn,mi];Co._matMult(ki),Po._matMult(ki),io._matMult(ki),zo._matMult(ki)}St.push({tl:Co,tr:Po,bl:io,br:zo,tex:Rt,writingMode:Pe.writingMode,glyphOffset:zr})}}}return St}(0,I,M,B,D,ue),me=x.textSizeData,Te=null;return me.functionType==="source"?(Te=[s.SIZE_PACK_FACTOR*M.layout.get("text-size").evaluate(D,{})])[0]>dr&&s.warnOnce(x.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):me.functionType==="composite"&&((Te=[s.SIZE_PACK_FACTOR*de.compositeTextSizes[0].evaluate(D,{}),s.SIZE_PACK_FACTOR*de.compositeTextSizes[1].evaluate(D,{})])[0]>dr||Te[1]>dr)&&s.warnOnce(x.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),x.addSymbols(x.text,ne,Te,Z,B,D,H,E,F.lineStartIndex,F.lineLength),q.push(x.text.placedSymbolArray.length-1),4*ne.length}function Pi(x,E,I,M){var B=x.compareText;if(E in B){for(var D=B[E],Z=D.length-1;Z>=0;Z--)if(M.dist(D[Z])<I)return!0}else B[E]=[];return B[E].push(M),!1}var hr=function(x){var E={},I=[];for(var M in x){var B=x[M],D=E[M]={};for(var Z in B){var F=B[+Z];if(F&&F.bitmap.width!==0&&F.bitmap.height!==0){var H={x:0,y:0,w:F.bitmap.width+2,h:F.bitmap.height+2};I.push(H),D[Z]={rect:H,metrics:F.metrics}}}}var q=s.potpack(I),ue=q.w,de=q.h,ne=new s.AlphaImage({width:ue||1,height:de||1});for(var me in x){var Te=x[me];for(var Ue in Te){var Pe=Te[+Ue];if(Pe&&Pe.bitmap.width!==0&&Pe.bitmap.height!==0){var Ve=E[me][Ue].rect;s.AlphaImage.copy(Pe.bitmap,ne,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Pe.bitmap)}}}this.image=ne,this.positions=E};s.register("GlyphAtlas",hr);var qt=function(x){this.tileID=new s.OverscaledTileID(x.tileID.overscaledZ,x.tileID.wrap,x.tileID.canonical.z,x.tileID.canonical.x,x.tileID.canonical.y),this.uid=x.uid,this.zoom=x.zoom,this.pixelRatio=x.pixelRatio,this.tileSize=x.tileSize,this.source=x.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=x.showCollisionBoxes,this.collectResourceTiming=!!x.collectResourceTiming,this.returnDependencies=!!x.returnDependencies};function Zt(x,E){for(var I=new s.EvaluationParameters(E),M=0,B=x;M<B.length;M+=1)B[M].recalculate(I)}qt.prototype.parse=function(x,E,I,M){var B=this;this.status="parsing",this.data=x,this.collisionBoxArray=new s.CollisionBoxArray;var D=new s.DictionaryCoder(Object.keys(x.layers).sort()),Z=new s.FeatureIndex(this.tileID);Z.bucketLayerIDs=[];var F,H,q,ue,de={},ne={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},me=E.familiesBySource[this.source];for(var Te in me){var Ue=x.layers[Te];if(Ue){Ue.version===1&&s.warnOnce('Vector tile source "'+this.source+'" layer "'+Te+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pe=D.encode(Te),Ve=[],Ke=0;Ke<Ue.length;Ke++){var Xe=Ue.feature(Ke);Ve.push({feature:Xe,index:Ke,sourceLayerIndex:Pe})}for(var Ye=0,He=me[Te];Ye<He.length;Ye+=1){var ht=He[Ye],dt=ht[0];dt.minzoom&&this.zoom<Math.floor(dt.minzoom)||dt.maxzoom&&this.zoom>=dt.maxzoom||dt.visibility!=="none"&&(Zt(ht,this.zoom),(de[dt.id]=dt.createBucket({index:Z.bucketLayerIDs.length,layers:ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pe,sourceID:this.source})).populate(Ve,ne),Z.bucketLayerIDs.push(ht.map(function(Qe){return Qe.id})))}}}var St=s.mapObject(ne.glyphDependencies,function(Qe){return Object.keys(Qe).map(Number)});Object.keys(St).length?I.send("getGlyphs",{uid:this.uid,stacks:St},function(Qe,Rt){F||(F=Qe,H=Rt,Kt.call(B))}):H={};var Lt=Object.keys(ne.iconDependencies);Lt.length?I.send("getImages",{icons:Lt},function(Qe,Rt){F||(F=Qe,q=Rt,Kt.call(B))}):q={};var xt=Object.keys(ne.patternDependencies);function Kt(){if(F)return M(F);if(H&&q&&ue){var Qe=new hr(H),Rt=new s.ImageAtlas(q,ue);for(var Xt in de){var Ut=de[Xt];Ut instanceof s.SymbolBucket?(Zt(Ut.layers,this.zoom),En(Ut,H,Qe.positions,q,Rt.iconPositions,this.showCollisionBoxes)):Ut.hasPattern&&(Ut instanceof s.LineBucket||Ut instanceof s.FillBucket||Ut instanceof s.FillExtrusionBucket)&&(Zt(Ut.layers,this.zoom),Ut.addFeatures(ne,Rt.patternPositions))}this.status="done",M(null,{buckets:s.values(de).filter(function(zr){return!zr.isEmpty()}),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qe.image,imageAtlas:Rt,glyphMap:this.returnDependencies?H:null,iconMap:this.returnDependencies?q:null,glyphPositions:this.returnDependencies?Qe.positions:null})}}xt.length?I.send("getImages",{icons:xt},function(Qe,Rt){F||(F=Qe,ue=Rt,Kt.call(B))}):ue={},Kt.call(this)};var jr=typeof performance<"u",Tr={getEntriesByName:function(x){return!!(jr&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(x)},mark:function(x){return!!(jr&&performance&&performance.mark)&&performance.mark(x)},measure:function(x,E,I){return!!(jr&&performance&&performance.measure)&&performance.measure(x,E,I)},clearMarks:function(x){return!!(jr&&performance&&performance.clearMarks)&&performance.clearMarks(x)},clearMeasures:function(x){return!!(jr&&performance&&performance.clearMeasures)&&performance.clearMeasures(x)}},qr=function(x){this._marks={start:[x.url,"start"].join("#"),end:[x.url,"end"].join("#"),measure:x.url.toString()},Tr.mark(this._marks.start)};function Wt(x,E){var I=s.getArrayBuffer(x.request,function(M,B,D,Z){M?E(M):B&&E(null,{vectorTile:new s.mvt.VectorTile(new s.Protobuf(B)),rawData:B,cacheControl:D,expires:Z})});return function(){I.cancel(),E()}}qr.prototype.finish=function(){Tr.mark(this._marks.end);var x=Tr.getEntriesByName(this._marks.measure);return x.length===0&&(Tr.measure(this._marks.measure,this._marks.start,this._marks.end),x=Tr.getEntriesByName(this._marks.measure),Tr.clearMarks(this._marks.start),Tr.clearMarks(this._marks.end),Tr.clearMeasures(this._marks.measure)),x},Tr.Performance=qr;var fn=function(x,E,I){this.actor=x,this.layerIndex=E,this.loadVectorData=I||Wt,this.loading={},this.loaded={}};fn.prototype.loadTile=function(x,E){var I=this,M=x.uid;this.loading||(this.loading={});var B=!!(x&&x.request&&x.request.collectResourceTiming)&&new Tr.Performance(x.request),D=this.loading[M]=new qt(x);D.abort=this.loadVectorData(x,function(Z,F){if(delete I.loading[M],Z||!F)return D.status="done",I.loaded[M]=D,E(Z);var H=F.rawData,q={};F.expires&&(q.expires=F.expires),F.cacheControl&&(q.cacheControl=F.cacheControl);var ue={};if(B){var de=B.finish();de&&(ue.resourceTiming=JSON.parse(JSON.stringify(de)))}D.vectorTile=F.vectorTile,D.parse(F.vectorTile,I.layerIndex,I.actor,function(ne,me){if(ne||!me)return E(ne);E(null,s.extend({rawTileData:H.slice(0)},me,q,ue))}),I.loaded=I.loaded||{},I.loaded[M]=D})},fn.prototype.reloadTile=function(x,E){var I=this.loaded,M=x.uid,B=this;if(I&&I[M]){var D=I[M];D.showCollisionBoxes=x.showCollisionBoxes;var Z=function(F,H){var q=D.reloadCallback;q&&(delete D.reloadCallback,D.parse(D.vectorTile,B.layerIndex,B.actor,q)),E(F,H)};D.status==="parsing"?D.reloadCallback=Z:D.status==="done"&&(D.vectorTile?D.parse(D.vectorTile,this.layerIndex,this.actor,Z):Z())}},fn.prototype.abortTile=function(x,E){var I=this.loading,M=x.uid;I&&I[M]&&I[M].abort&&(I[M].abort(),delete I[M]),E()},fn.prototype.removeTile=function(x,E){var I=this.loaded,M=x.uid;I&&I[M]&&delete I[M],E()};var kn=function(){this.loaded={}};kn.prototype.loadTile=function(x,E){var I=x.uid,M=x.encoding,B=x.rawImageData,D=new s.DEMData(I,B,M);this.loaded=this.loaded||{},this.loaded[I]=D,E(null,D)},kn.prototype.removeTile=function(x){var E=this.loaded,I=x.uid;E&&E[I]&&delete E[I]};var tn={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4};function vr(x){var E=0;if(x&&x.length>0){E+=Math.abs(Ee(x[0]));for(var I=1;I<x.length;I++)E-=Math.abs(Ee(x[I]))}return E}function Ee(x){var E,I,M,B,D,Z,F=0,H=x.length;if(H>2){for(Z=0;Z<H;Z++)Z===H-2?(M=H-2,B=H-1,D=0):Z===H-1?(M=H-1,B=0,D=1):(M=Z,B=Z+1,D=Z+2),E=x[M],I=x[B],F+=(Ze(x[D][0])-Ze(E[0]))*Math.sin(Ze(I[1]));F=F*tn.RADIUS*tn.RADIUS/2}return F}function Ze(x){return x*Math.PI/180}var ve={geometry:function x(E){var I,M=0;switch(E.type){case"Polygon":return vr(E.coordinates);case"MultiPolygon":for(I=0;I<E.coordinates.length;I++)M+=vr(E.coordinates[I]);return M;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(I=0;I<E.geometries.length;I++)M+=x(E.geometries[I]);return M}},ring:Ee},ut=function x(E,I){switch(E&&E.type||null){case"FeatureCollection":return E.features=E.features.map(Ot(x,I)),E;case"GeometryCollection":return E.geometries=E.geometries.map(Ot(x,I)),E;case"Feature":return E.geometry=x(E.geometry,I),E;case"Polygon":case"MultiPolygon":return function(M,B){return M.type==="Polygon"?M.coordinates=W(M.coordinates,B):M.type==="MultiPolygon"&&(M.coordinates=M.coordinates.map(Ot(W,B))),M}(E,I);default:return E}};function Ot(x,E){return function(I){return x(I,E)}}function W(x,E){E=!!E,x[0]=Q(x[0],E);for(var I=1;I<x.length;I++)x[I]=Q(x[I],!E);return x}function Q(x,E){return function(I){return ve.ring(I)>=0}(x)===E?x:x.reverse()}var se=s.mvt.VectorTileFeature.prototype.toGeoJSON,_e=function(x){this._feature=x,this.extent=s.EXTENT,this.type=x.type,this.properties=x.tags,"id"in x&&!isNaN(x.id)&&(this.id=parseInt(x.id,10))};_e.prototype.loadGeometry=function(){if(this._feature.type===1){for(var x=[],E=0,I=this._feature.geometry;E<I.length;E+=1){var M=I[E];x.push([new s.Point(M[0],M[1])])}return x}for(var B=[],D=0,Z=this._feature.geometry;D<Z.length;D+=1){for(var F=[],H=0,q=Z[D];H<q.length;H+=1){var ue=q[H];F.push(new s.Point(ue[0],ue[1]))}B.push(F)}return B},_e.prototype.toGeoJSON=function(x,E,I){return se.call(this,x,E,I)};var we=function(x){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=x.length,this._features=x};we.prototype.feature=function(x){return new _e(this._features[x])};var Ie=s.vectorTile.VectorTileFeature,Ge=Le;function Le(x,E){this.options=E||{},this.features=x,this.length=x.length}function qe(x,E){this.id=typeof x.id=="number"?x.id:void 0,this.type=x.type,this.rawGeometry=x.type===1?[x.geometry]:x.geometry,this.properties=x.tags,this.extent=E||4096}Le.prototype.feature=function(x){return new qe(this.features[x],this.options.extent)},qe.prototype.loadGeometry=function(){var x=this.rawGeometry;this.geometry=[];for(var E=0;E<x.length;E++){for(var I=x[E],M=[],B=0;B<I.length;B++)M.push(new s.Point$1(I[B][0],I[B][1]));this.geometry.push(M)}return this.geometry},qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var x=this.geometry,E=1/0,I=-1/0,M=1/0,B=-1/0,D=0;D<x.length;D++)for(var Z=x[D],F=0;F<Z.length;F++){var H=Z[F];E=Math.min(E,H.x),I=Math.max(I,H.x),M=Math.min(M,H.y),B=Math.max(B,H.y)}return[E,M,I,B]},qe.prototype.toGeoJSON=Ie.prototype.toGeoJSON;var Ce=_t,ct=_t,Je=function(x,E){E=E||{};var I={};for(var M in x)I[M]=new Ge(x[M].features,E),I[M].name=M,I[M].version=E.version,I[M].extent=E.extent;return _t({layers:I})},pt=Ge;function _t(x){var E=new s.pbf;return function(I,M){for(var B in I.layers)M.writeMessage(3,zt,I.layers[B])}(x,E),E.finish()}function zt(x,E){var I;E.writeVarintField(15,x.version||1),E.writeStringField(1,x.name||""),E.writeVarintField(5,x.extent||4096);var M={keys:[],values:[],keycache:{},valuecache:{}};for(I=0;I<x.length;I++)M.feature=x.feature(I),E.writeMessage(2,nr,M);var B=M.keys;for(I=0;I<B.length;I++)E.writeStringField(3,B[I]);var D=M.values;for(I=0;I<D.length;I++)E.writeMessage(4,Qi,D[I])}function nr(x,E){var I=x.feature;I.id!==void 0&&E.writeVarintField(1,I.id),E.writeMessage(2,Yt,x),E.writeVarintField(3,I.type),E.writeMessage(4,Fi,I)}function Yt(x,E){var I=x.feature,M=x.keys,B=x.values,D=x.keycache,Z=x.valuecache;for(var F in I.properties){var H=D[F];H===void 0&&(M.push(F),H=M.length-1,D[F]=H),E.writeVarint(H);var q=I.properties[F],ue=typeof q;ue!=="string"&&ue!=="boolean"&&ue!=="number"&&(q=JSON.stringify(q));var de=ue+":"+q,ne=Z[de];ne===void 0&&(B.push(q),ne=B.length-1,Z[de]=ne),E.writeVarint(ne)}}function sr(x,E){return(E<<3)+(7&x)}function dn(x){return x<<1^x>>31}function Fi(x,E){for(var I=x.loadGeometry(),M=x.type,B=0,D=0,Z=I.length,F=0;F<Z;F++){var H=I[F],q=1;M===1&&(q=H.length),E.writeVarint(sr(1,q));for(var ue=M===3?H.length-1:H.length,de=0;de<ue;de++){de===1&&M!==1&&E.writeVarint(sr(2,ue-1));var ne=H[de].x-B,me=H[de].y-D;E.writeVarint(dn(ne)),E.writeVarint(dn(me)),B+=ne,D+=me}M===3&&E.writeVarint(sr(7,1))}}function Qi(x,E){var I=typeof x;I==="string"?E.writeStringField(1,x):I==="boolean"?E.writeBooleanField(7,x):I==="number"&&(x%1!=0?E.writeDoubleField(3,x):x<0?E.writeSVarintField(6,x):E.writeVarintField(5,x))}function Mn(x,E,I,M,B,D){if(!(B-M<=I)){var Z=M+B>>1;(function F(H,q,ue,de,ne,me){for(;ne>de;){if(ne-de>600){var Te=ne-de+1,Ue=ue-de+1,Pe=Math.log(Te),Ve=.5*Math.exp(2*Pe/3),Ke=.5*Math.sqrt(Pe*Ve*(Te-Ve)/Te)*(Ue-Te/2<0?-1:1),Xe=Math.max(de,Math.floor(ue-Ue*Ve/Te+Ke)),Ye=Math.min(ne,Math.floor(ue+(Te-Ue)*Ve/Te+Ke));F(H,q,ue,Xe,Ye,me)}var He=q[2*ue+me],ht=de,dt=ne;for(zi(H,q,de,ue),q[2*ne+me]>He&&zi(H,q,de,ne);ht<dt;){for(zi(H,q,ht,dt),ht++,dt--;q[2*ht+me]<He;)ht++;for(;q[2*dt+me]>He;)dt--}q[2*de+me]===He?zi(H,q,de,dt):zi(H,q,++dt,ne),dt<=ue&&(de=dt+1),ue<=dt&&(ne=dt-1)}})(x,E,Z,M,B,D%2),Mn(x,E,I,M,Z-1,D+1),Mn(x,E,I,Z+1,B,D+1)}}function zi(x,E,I,M){Zr(x,I,M),Zr(E,2*I,2*M),Zr(E,2*I+1,2*M+1)}function Zr(x,E,I){var M=x[E];x[E]=x[I],x[I]=M}function mn(x,E,I,M){var B=x-I,D=E-M;return B*B+D*D}Ce.fromVectorTileJs=ct,Ce.fromGeojsonVt=Je,Ce.GeoJSONWrapper=pt;var eo=function(x){return x[0]},La=function(x){return x[1]},Zn=function(x,E,I,M,B){E===void 0&&(E=eo),I===void 0&&(I=La),M===void 0&&(M=64),B===void 0&&(B=Float64Array),this.nodeSize=M,this.points=x;for(var D=x.length<65536?Uint16Array:Uint32Array,Z=this.ids=new D(x.length),F=this.coords=new B(2*x.length),H=0;H<x.length;H++)Z[H]=H,F[2*H]=E(x[H]),F[2*H+1]=I(x[H]);Mn(Z,F,M,0,Z.length-1,0)};Zn.prototype.range=function(x,E,I,M){return function(B,D,Z,F,H,q,ue){for(var de,ne,me=[0,B.length-1,0],Te=[];me.length;){var Ue=me.pop(),Pe=me.pop(),Ve=me.pop();if(Pe-Ve<=ue)for(var Ke=Ve;Ke<=Pe;Ke++)de=D[2*Ke],ne=D[2*Ke+1],de>=Z&&de<=H&&ne>=F&&ne<=q&&Te.push(B[Ke]);else{var Xe=Math.floor((Ve+Pe)/2);de=D[2*Xe],ne=D[2*Xe+1],de>=Z&&de<=H&&ne>=F&&ne<=q&&Te.push(B[Xe]);var Ye=(Ue+1)%2;(Ue===0?Z<=de:F<=ne)&&(me.push(Ve),me.push(Xe-1),me.push(Ye)),(Ue===0?H>=de:q>=ne)&&(me.push(Xe+1),me.push(Pe),me.push(Ye))}}return Te}(this.ids,this.coords,x,E,I,M,this.nodeSize)},Zn.prototype.within=function(x,E,I){return function(M,B,D,Z,F,H){for(var q=[0,M.length-1,0],ue=[],de=F*F;q.length;){var ne=q.pop(),me=q.pop(),Te=q.pop();if(me-Te<=H)for(var Ue=Te;Ue<=me;Ue++)mn(B[2*Ue],B[2*Ue+1],D,Z)<=de&&ue.push(M[Ue]);else{var Pe=Math.floor((Te+me)/2),Ve=B[2*Pe],Ke=B[2*Pe+1];mn(Ve,Ke,D,Z)<=de&&ue.push(M[Pe]);var Xe=(ne+1)%2;(ne===0?D-F<=Ve:Z-F<=Ke)&&(q.push(Te),q.push(Pe-1),q.push(Xe)),(ne===0?D+F>=Ve:Z+F>=Ke)&&(q.push(Pe+1),q.push(me),q.push(Xe))}}return ue}(this.ids,this.coords,x,E,I,this.nodeSize)};var be={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(x){return x}},Oe=function(x){this.options=tr(Object.create(be),x),this.trees=new Array(this.options.maxZoom+1)};function ns(x,E,I,M,B){return{x,y:E,zoom:1/0,id:I,parentId:-1,numPoints:M,properties:B}}function To(x,E){var I=x.geometry.coordinates,M=I[0],B=I[1];return{x:ir(M),y:br(B),zoom:1/0,index:E,parentId:-1}}function xr(x){return{type:"Feature",id:x.id,properties:Ft(x),geometry:{type:"Point",coordinates:[(M=x.x,360*(M-.5)),(E=x.y,I=(180-360*E)*Math.PI/180,360*Math.atan(Math.exp(I))/Math.PI-90)]}};var E,I,M}function Ft(x){var E=x.numPoints,I=E>=1e4?Math.round(E/1e3)+"k":E>=1e3?Math.round(E/100)/10+"k":E;return tr(tr({},x.properties),{cluster:!0,cluster_id:x.id,point_count:E,point_count_abbreviated:I})}function ir(x){return x/360+.5}function br(x){var E=Math.sin(x*Math.PI/180),I=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return I<0?0:I>1?1:I}function tr(x,E){for(var I in E)x[I]=E[I];return x}function Be(x){return x.x}function It(x){return x.y}function kt(x,E,I,M,B,D){var Z=B-I,F=D-M;if(Z!==0||F!==0){var H=((x-I)*Z+(E-M)*F)/(Z*Z+F*F);H>1?(I=B,M=D):H>0&&(I+=Z*H,M+=F*H)}return(Z=x-I)*Z+(F=E-M)*F}function Ln(x,E,I,M){var B={id:x===void 0?null:x,type:E,geometry:I,tags:M,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(D){var Z=D.geometry,F=D.type;if(F==="Point"||F==="MultiPoint"||F==="LineString")Ui(D,Z);else if(F==="Polygon"||F==="MultiLineString")for(var H=0;H<Z.length;H++)Ui(D,Z[H]);else if(F==="MultiPolygon")for(H=0;H<Z.length;H++)for(var q=0;q<Z[H].length;q++)Ui(D,Z[H][q])}(B),B}function Ui(x,E){for(var I=0;I<E.length;I+=3)x.minX=Math.min(x.minX,E[I]),x.minY=Math.min(x.minY,E[I+1]),x.maxX=Math.max(x.maxX,E[I]),x.maxY=Math.max(x.maxY,E[I+1])}function Et(x,E,I,M){if(E.geometry){var B=E.geometry.coordinates,D=E.geometry.type,Z=Math.pow(I.tolerance/((1<<I.maxZoom)*I.extent),2),F=[],H=E.id;if(I.promoteId?H=E.properties[I.promoteId]:I.generateId&&(H=M||0),D==="Point")to(B,F);else if(D==="MultiPoint")for(var q=0;q<B.length;q++)to(B[q],F);else if(D==="LineString")Ao(B,F,Z,!1);else if(D==="MultiLineString"){if(I.lineMetrics){for(q=0;q<B.length;q++)F=[],Ao(B[q],F,Z,!1),x.push(Ln(H,"LineString",F,E.properties));return}Rn(B,F,Z,!1)}else if(D==="Polygon")Rn(B,F,Z,!0);else{if(D!=="MultiPolygon"){if(D==="GeometryCollection"){for(q=0;q<E.geometry.geometries.length;q++)Et(x,{id:H,geometry:E.geometry.geometries[q],properties:E.properties},I,M);return}throw new Error("Input data is not a valid GeoJSON object.")}for(q=0;q<B.length;q++){var ue=[];Rn(B[q],ue,Z,!0),F.push(ue)}}x.push(Ln(H,D,F,E.properties))}}function to(x,E){E.push(Gr(x[0])),E.push($t(x[1])),E.push(0)}function Ao(x,E,I,M){for(var B,D,Z=0,F=0;F<x.length;F++){var H=Gr(x[F][0]),q=$t(x[F][1]);E.push(H),E.push(q),E.push(0),F>0&&(Z+=M?(B*q-H*D)/2:Math.sqrt(Math.pow(H-B,2)+Math.pow(q-D,2))),B=H,D=q}var ue=E.length-3;E[2]=1,function de(ne,me,Te,Ue){for(var Pe,Ve=Ue,Ke=Te-me>>1,Xe=Te-me,Ye=ne[me],He=ne[me+1],ht=ne[Te],dt=ne[Te+1],St=me+3;St<Te;St+=3){var Lt=kt(ne[St],ne[St+1],Ye,He,ht,dt);if(Lt>Ve)Pe=St,Ve=Lt;else if(Lt===Ve){var xt=Math.abs(St-Ke);xt<Xe&&(Pe=St,Xe=xt)}}Ve>Ue&&(Pe-me>3&&de(ne,me,Pe,Ue),ne[Pe+2]=Ve,Te-Pe>3&&de(ne,Pe,Te,Ue))}(E,0,ue,I),E[ue+2]=1,E.size=Math.abs(Z),E.start=0,E.end=E.size}function Rn(x,E,I,M){for(var B=0;B<x.length;B++){var D=[];Ao(x[B],D,I,M),E.push(D)}}function Gr(x){return x/360+.5}function $t(x){var E=Math.sin(x*Math.PI/180),I=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return I<0?0:I>1?1:I}function Sn(x,E,I,M,B,D,Z,F){if(M/=E,D>=(I/=E)&&Z<M)return x;if(Z<I||D>=M)return null;for(var H=[],q=0;q<x.length;q++){var ue=x[q],de=ue.geometry,ne=ue.type,me=B===0?ue.minX:ue.minY,Te=B===0?ue.maxX:ue.maxY;if(me>=I&&Te<M)H.push(ue);else if(!(Te<I||me>=M)){var Ue=[];if(ne==="Point"||ne==="MultiPoint")Ra(de,Ue,I,M,B);else if(ne==="LineString")Gt(de,Ue,I,M,B,!1,F.lineMetrics);else if(ne==="MultiLineString")ro(de,Ue,I,M,B,!1);else if(ne==="Polygon")ro(de,Ue,I,M,B,!0);else if(ne==="MultiPolygon")for(var Pe=0;Pe<de.length;Pe++){var Ve=[];ro(de[Pe],Ve,I,M,B,!0),Ve.length&&Ue.push(Ve)}if(Ue.length){if(F.lineMetrics&&ne==="LineString"){for(Pe=0;Pe<Ue.length;Pe++)H.push(Ln(ue.id,ne,Ue[Pe],ue.tags));continue}ne!=="LineString"&&ne!=="MultiLineString"||(Ue.length===1?(ne="LineString",Ue=Ue[0]):ne="MultiLineString"),ne!=="Point"&&ne!=="MultiPoint"||(ne=Ue.length===3?"Point":"MultiPoint"),H.push(Ln(ue.id,ne,Ue,ue.tags))}}}return H.length?H:null}function Ra(x,E,I,M,B){for(var D=0;D<x.length;D+=3){var Z=x[D+B];Z>=I&&Z<=M&&(E.push(x[D]),E.push(x[D+1]),E.push(x[D+2]))}}function Gt(x,E,I,M,B,D,Z){for(var F,H,q=Io(x),ue=B===0?Da:Dn,de=x.start,ne=0;ne<x.length-3;ne+=3){var me=x[ne],Te=x[ne+1],Ue=x[ne+2],Pe=x[ne+3],Ve=x[ne+4],Ke=B===0?me:Te,Xe=B===0?Pe:Ve,Ye=!1;Z&&(F=Math.sqrt(Math.pow(me-Pe,2)+Math.pow(Te-Ve,2))),Ke<I?Xe>I&&(H=ue(q,me,Te,Pe,Ve,I),Z&&(q.start=de+F*H)):Ke>M?Xe<M&&(H=ue(q,me,Te,Pe,Ve,M),Z&&(q.start=de+F*H)):rn(q,me,Te,Ue),Xe<I&&Ke>=I&&(H=ue(q,me,Te,Pe,Ve,I),Ye=!0),Xe>M&&Ke<=M&&(H=ue(q,me,Te,Pe,Ve,M),Ye=!0),!D&&Ye&&(Z&&(q.end=de+F*H),E.push(q),q=Io(x)),Z&&(de+=F)}var He=x.length-3;me=x[He],Te=x[He+1],Ue=x[He+2],(Ke=B===0?me:Te)>=I&&Ke<=M&&rn(q,me,Te,Ue),He=q.length-3,D&&He>=3&&(q[He]!==q[0]||q[He+1]!==q[1])&&rn(q,q[0],q[1],q[2]),q.length&&E.push(q)}function Io(x){var E=[];return E.size=x.size,E.start=x.start,E.end=x.end,E}function ro(x,E,I,M,B,D){for(var Z=0;Z<x.length;Z++)Gt(x[Z],E,I,M,B,D,!1)}function rn(x,E,I,M){x.push(E),x.push(I),x.push(M)}function Da(x,E,I,M,B,D){var Z=(D-E)/(M-E);return x.push(D),x.push(I+(B-I)*Z),x.push(1),Z}function Dn(x,E,I,M,B,D){var Z=(D-I)/(B-I);return x.push(E+(M-E)*Z),x.push(D),x.push(1),Z}function wr(x,E){for(var I=[],M=0;M<x.length;M++){var B,D=x[M],Z=D.type;if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")B=Gn(D.geometry,E);else if(Z==="MultiLineString"||Z==="Polygon"){B=[];for(var F=0;F<D.geometry.length;F++)B.push(Gn(D.geometry[F],E))}else if(Z==="MultiPolygon")for(B=[],F=0;F<D.geometry.length;F++){for(var H=[],q=0;q<D.geometry[F].length;q++)H.push(Gn(D.geometry[F][q],E));B.push(H)}I.push(Ln(D.id,Z,B,D.tags))}return I}function Gn(x,E){var I=[];I.size=x.size,x.start!==void 0&&(I.start=x.start,I.end=x.end);for(var M=0;M<x.length;M+=3)I.push(x[M]+E,x[M+1],x[M+2]);return I}function nn(x,E){if(x.transformed)return x;var I,M,B,D=1<<x.z,Z=x.x,F=x.y;for(I=0;I<x.features.length;I++){var H=x.features[I],q=H.geometry,ue=H.type;if(H.geometry=[],ue===1)for(M=0;M<q.length;M+=2)H.geometry.push(ca(q[M],q[M+1],E,D,Z,F));else for(M=0;M<q.length;M++){var de=[];for(B=0;B<q[M].length;B+=2)de.push(ca(q[M][B],q[M][B+1],E,D,Z,F));H.geometry.push(de)}}return x.transformed=!0,x}function ca(x,E,I,M,B,D){return[Math.round(I*(x*M-B)),Math.round(I*(E*M-D))]}function Ar(x,E,I,M,B){for(var D=E===B.maxZoom?0:B.tolerance/((1<<E)*B.extent),Z={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:I,y:M,z:E,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},F=0;F<x.length;F++){Z.numFeatures++,Vi(Z,x[F],D,B);var H=x[F].minX,q=x[F].minY,ue=x[F].maxX,de=x[F].maxY;H<Z.minX&&(Z.minX=H),q<Z.minY&&(Z.minY=q),ue>Z.maxX&&(Z.maxX=ue),de>Z.maxY&&(Z.maxY=de)}return Z}function Vi(x,E,I,M){var B=E.geometry,D=E.type,Z=[];if(D==="Point"||D==="MultiPoint")for(var F=0;F<B.length;F+=3)Z.push(B[F]),Z.push(B[F+1]),x.numPoints++,x.numSimplified++;else if(D==="LineString")Ba(Z,B,x,I,!1,!1);else if(D==="MultiLineString"||D==="Polygon")for(F=0;F<B.length;F++)Ba(Z,B[F],x,I,D==="Polygon",F===0);else if(D==="MultiPolygon")for(var H=0;H<B.length;H++){var q=B[H];for(F=0;F<q.length;F++)Ba(Z,q[F],x,I,!0,F===0)}if(Z.length){var ue=E.tags||null;if(D==="LineString"&&M.lineMetrics){for(var de in ue={},E.tags)ue[de]=E.tags[de];ue.mapbox_clip_start=B.start/B.size,ue.mapbox_clip_end=B.end/B.size}var ne={geometry:Z,type:D==="Polygon"||D==="MultiPolygon"?3:D==="LineString"||D==="MultiLineString"?2:1,tags:ue};E.id!==null&&(ne.id=E.id),x.features.push(ne)}}function Ba(x,E,I,M,B,D){var Z=M*M;if(M>0&&E.size<(B?Z:M))I.numPoints+=E.length/3;else{for(var F=[],H=0;H<E.length;H+=3)(M===0||E[H+2]>Z)&&(I.numSimplified++,F.push(E[H]),F.push(E[H+1])),I.numPoints++;B&&function(q,ue){for(var de=0,ne=0,me=q.length,Te=me-2;ne<me;Te=ne,ne+=2)de+=(q[ne]-q[Te])*(q[ne+1]+q[Te+1]);if(de>0===ue)for(ne=0,me=q.length;ne<me/2;ne+=2){var Ue=q[ne],Pe=q[ne+1];q[ne]=q[me-2-ne],q[ne+1]=q[me-1-ne],q[me-2-ne]=Ue,q[me-1-ne]=Pe}}(F,D),x.push(F)}}function on(x,E){var I=(E=this.options=function(B,D){for(var Z in D)B[Z]=D[Z];return B}(Object.create(this.options),E)).debug;if(I&&console.time("preprocess data"),E.maxZoom<0||E.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(E.promoteId&&E.generateId)throw new Error("promoteId and generateId cannot be used together.");var M=function(B,D){var Z=[];if(B.type==="FeatureCollection")for(var F=0;F<B.features.length;F++)Et(Z,B.features[F],D,F);else B.type==="Feature"?Et(Z,B,D):Et(Z,{geometry:B},D);return Z}(x,E);this.tiles={},this.tileCoords=[],I&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",E.indexMaxZoom,E.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(M=function(B,D){var Z=D.buffer/D.extent,F=B,H=Sn(B,1,-1-Z,Z,0,-1,2,D),q=Sn(B,1,1-Z,2+Z,0,-1,2,D);return(H||q)&&(F=Sn(B,1,-Z,1+Z,0,-1,2,D)||[],H&&(F=wr(H,1).concat(F)),q&&(F=F.concat(wr(q,-1)))),F}(M,E)).length&&this.splitTile(M,0,0,0),I&&(M.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pa(x,E,I){return 32*((1<<x)*I+E)+x}function no(x,E){var I=x.tileID.canonical;if(!this._geoJSONIndex)return E(null,null);var M=this._geoJSONIndex.getTile(I.z,I.x,I.y);if(!M)return E(null,null);var B=new we(M.features),D=Ce(B);D.byteOffset===0&&D.byteLength===D.buffer.byteLength||(D=new Uint8Array(D)),E(null,{vectorTile:B,rawData:D.buffer})}Oe.prototype.load=function(x){var E=this.options,I=E.log,M=E.minZoom,B=E.maxZoom,D=E.nodeSize;I&&console.time("total time");var Z="prepare "+x.length+" points";I&&console.time(Z),this.points=x;for(var F=[],H=0;H<x.length;H++)x[H].geometry&&F.push(To(x[H],H));this.trees[B+1]=new Zn(F,Be,It,D,Float32Array),I&&console.timeEnd(Z);for(var q=B;q>=M;q--){var ue=+Date.now();F=this._cluster(F,q),this.trees[q]=new Zn(F,Be,It,D,Float32Array),I&&console.log("z%d: %d clusters in %dms",q,F.length,+Date.now()-ue)}return I&&console.timeEnd("total time"),this},Oe.prototype.getClusters=function(x,E){var I=((x[0]+180)%360+360)%360-180,M=Math.max(-90,Math.min(90,x[1])),B=x[2]===180?180:((x[2]+180)%360+360)%360-180,D=Math.max(-90,Math.min(90,x[3]));if(x[2]-x[0]>=360)I=-180,B=180;else if(I>B){var Z=this.getClusters([I,M,180,D],E),F=this.getClusters([-180,M,B,D],E);return Z.concat(F)}for(var H=this.trees[this._limitZoom(E)],q=[],ue=0,de=H.range(ir(I),br(D),ir(B),br(M));ue<de.length;ue+=1){var ne=de[ue],me=H.points[ne];q.push(me.numPoints?xr(me):this.points[me.index])}return q},Oe.prototype.getChildren=function(x){var E=x>>5,I=x%32,M="No cluster with the specified id.",B=this.trees[I];if(!B)throw new Error(M);var D=B.points[E];if(!D)throw new Error(M);for(var Z=this.options.radius/(this.options.extent*Math.pow(2,I-1)),F=[],H=0,q=B.within(D.x,D.y,Z);H<q.length;H+=1){var ue=q[H],de=B.points[ue];de.parentId===x&&F.push(de.numPoints?xr(de):this.points[de.index])}if(F.length===0)throw new Error(M);return F},Oe.prototype.getLeaves=function(x,E,I){E=E||10,I=I||0;var M=[];return this._appendLeaves(M,x,E,I,0),M},Oe.prototype.getTile=function(x,E,I){var M=this.trees[this._limitZoom(x)],B=Math.pow(2,x),D=this.options,Z=D.extent,F=D.radius/Z,H=(I-F)/B,q=(I+1+F)/B,ue={features:[]};return this._addTileFeatures(M.range((E-F)/B,H,(E+1+F)/B,q),M.points,E,I,B,ue),E===0&&this._addTileFeatures(M.range(1-F/B,H,1,q),M.points,B,I,B,ue),E===B-1&&this._addTileFeatures(M.range(0,H,F/B,q),M.points,-1,I,B,ue),ue.features.length?ue:null},Oe.prototype.getClusterExpansionZoom=function(x){for(var E=x%32-1;E<=this.options.maxZoom;){var I=this.getChildren(x);if(E++,I.length!==1)break;x=I[0].properties.cluster_id}return E},Oe.prototype._appendLeaves=function(x,E,I,M,B){for(var D=0,Z=this.getChildren(E);D<Z.length;D+=1){var F=Z[D],H=F.properties;if(H&&H.cluster?B+H.point_count<=M?B+=H.point_count:B=this._appendLeaves(x,H.cluster_id,I,M,B):B<M?B++:x.push(F),x.length===I)break}return B},Oe.prototype._addTileFeatures=function(x,E,I,M,B,D){for(var Z=0,F=x;Z<F.length;Z+=1){var H=E[F[Z]],q={type:1,geometry:[[Math.round(this.options.extent*(H.x*B-I)),Math.round(this.options.extent*(H.y*B-M))]],tags:H.numPoints?Ft(H):this.points[H.index].properties},ue=H.numPoints?H.id:this.points[H.index].id;ue!==void 0&&(q.id=ue),D.features.push(q)}},Oe.prototype._limitZoom=function(x){return Math.max(this.options.minZoom,Math.min(x,this.options.maxZoom+1))},Oe.prototype._cluster=function(x,E){for(var I=[],M=this.options,B=M.radius,D=M.extent,Z=M.reduce,F=B/(D*Math.pow(2,E)),H=0;H<x.length;H++){var q=x[H];if(!(q.zoom<=E)){q.zoom=E;for(var ue=this.trees[E+1],de=ue.within(q.x,q.y,F),ne=q.numPoints||1,me=q.x*ne,Te=q.y*ne,Ue=Z?this._map(q,!0):null,Pe=(H<<5)+(E+1),Ve=0,Ke=de;Ve<Ke.length;Ve+=1){var Xe=Ke[Ve],Ye=ue.points[Xe];if(!(Ye.zoom<=E)){Ye.zoom=E;var He=Ye.numPoints||1;me+=Ye.x*He,Te+=Ye.y*He,ne+=He,Ye.parentId=Pe,Z&&Z(Ue,this._map(Ye))}}ne===1?I.push(q):(q.parentId=Pe,I.push(ns(me/ne,Te/ne,Pe,ne,Ue)))}}return I},Oe.prototype._map=function(x,E){if(x.numPoints)return E?tr({},x.properties):x.properties;var I=this.points[x.index].properties,M=this.options.map(I);return E&&M===I?tr({},M):M},on.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},on.prototype.splitTile=function(x,E,I,M,B,D,Z){for(var F=[x,E,I,M],H=this.options,q=H.debug;F.length;){M=F.pop(),I=F.pop(),E=F.pop(),x=F.pop();var ue=1<<E,de=pa(E,I,M),ne=this.tiles[de];if(!ne&&(q>1&&console.time("creation"),ne=this.tiles[de]=Ar(x,E,I,M,H),this.tileCoords.push({z:E,x:I,y:M}),q)){q>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",E,I,M,ne.numFeatures,ne.numPoints,ne.numSimplified),console.timeEnd("creation"));var me="z"+E;this.stats[me]=(this.stats[me]||0)+1,this.total++}if(ne.source=x,B){if(E===H.maxZoom||E===B)continue;var Te=1<<B-E;if(I!==Math.floor(D/Te)||M!==Math.floor(Z/Te))continue}else if(E===H.indexMaxZoom||ne.numPoints<=H.indexMaxPoints)continue;if(ne.source=null,x.length!==0){q>1&&console.time("clipping");var Ue,Pe,Ve,Ke,Xe,Ye,He=.5*H.buffer/H.extent,ht=.5-He,dt=.5+He,St=1+He;Ue=Pe=Ve=Ke=null,Xe=Sn(x,ue,I-He,I+dt,0,ne.minX,ne.maxX,H),Ye=Sn(x,ue,I+ht,I+St,0,ne.minX,ne.maxX,H),x=null,Xe&&(Ue=Sn(Xe,ue,M-He,M+dt,1,ne.minY,ne.maxY,H),Pe=Sn(Xe,ue,M+ht,M+St,1,ne.minY,ne.maxY,H),Xe=null),Ye&&(Ve=Sn(Ye,ue,M-He,M+dt,1,ne.minY,ne.maxY,H),Ke=Sn(Ye,ue,M+ht,M+St,1,ne.minY,ne.maxY,H),Ye=null),q>1&&console.timeEnd("clipping"),F.push(Ue||[],E+1,2*I,2*M),F.push(Pe||[],E+1,2*I,2*M+1),F.push(Ve||[],E+1,2*I+1,2*M),F.push(Ke||[],E+1,2*I+1,2*M+1)}}},on.prototype.getTile=function(x,E,I){var M=this.options,B=M.extent,D=M.debug;if(x<0||x>24)return null;var Z=1<<x,F=pa(x,E=(E%Z+Z)%Z,I);if(this.tiles[F])return nn(this.tiles[F],B);D>1&&console.log("drilling down to z%d-%d-%d",x,E,I);for(var H,q=x,ue=E,de=I;!H&&q>0;)q--,ue=Math.floor(ue/2),de=Math.floor(de/2),H=this.tiles[pa(q,ue,de)];return H&&H.source?(D>1&&console.log("found parent tile z%d-%d-%d",q,ue,de),D>1&&console.time("drilling down"),this.splitTile(H.source,q,ue,de,x,E,I),D>1&&console.timeEnd("drilling down"),this.tiles[F]?nn(this.tiles[F],B):null):null};var Xr=function(x){function E(I,M,B){x.call(this,I,M,no),B&&(this.loadGeoJSON=B)}return x&&(E.__proto__=x),E.prototype=Object.create(x&&x.prototype),E.prototype.constructor=E,E.prototype.loadData=function(I,M){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=M,this._pendingLoadDataParams=I,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},E.prototype._loadData=function(){var I=this;if(this._pendingCallback&&this._pendingLoadDataParams){var M=this._pendingCallback,B=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var D=!!(B&&B.request&&B.request.collectResourceTiming)&&new Tr.Performance(B.request);this.loadGeoJSON(B,function(Z,F){if(Z||!F)return M(Z);if(typeof F!="object")return M(new Error("Input data is not a valid GeoJSON object."));ut(F,!0);try{I._geoJSONIndex=B.cluster?new Oe(function(ue){var de=ue.superclusterOptions,ne=ue.clusterProperties;if(!ne||!de)return de;for(var me={},Te={},Ue={accumulated:null,zoom:0},Pe={properties:null},Ve=Object.keys(ne),Ke=0,Xe=Ve;Ke<Xe.length;Ke+=1){var Ye=Xe[Ke],He=ne[Ye],ht=He[0],dt=He[1],St=s.createExpression(dt),Lt=s.createExpression(typeof ht=="string"?[ht,["accumulated"],["get",Ye]]:ht);me[Ye]=St.value,Te[Ye]=Lt.value}return de.map=function(xt){Pe.properties=xt;for(var Kt={},Qe=0,Rt=Ve;Qe<Rt.length;Qe+=1){var Xt=Rt[Qe];Kt[Xt]=me[Xt].evaluate(Ue,Pe)}return Kt},de.reduce=function(xt,Kt){Pe.properties=Kt;for(var Qe=0,Rt=Ve;Qe<Rt.length;Qe+=1){var Xt=Rt[Qe];Ue.accumulated=xt[Xt],xt[Xt]=Te[Xt].evaluate(Ue,Pe)}},de}(B)).load(F.features):function(ue,de){return new on(ue,de)}(F,B.geojsonVtOptions)}catch(ue){return M(ue)}I.loaded={};var H={};if(D){var q=D.finish();q&&(H.resourceTiming={},H.resourceTiming[B.source]=JSON.parse(JSON.stringify(q)))}M(null,H)})}},E.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},E.prototype.reloadTile=function(I,M){var B=this.loaded,D=I.uid;return B&&B[D]?x.prototype.reloadTile.call(this,I,M):this.loadTile(I,M)},E.prototype.loadGeoJSON=function(I,M){if(I.request)s.getJSON(I.request,M);else{if(typeof I.data!="string")return M(new Error("Input data is not a valid GeoJSON object."));try{return M(null,JSON.parse(I.data))}catch{return M(new Error("Input data is not a valid GeoJSON object."))}}},E.prototype.removeSource=function(I,M){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),M()},E.prototype.getClusterExpansionZoom=function(I,M){M(null,this._geoJSONIndex.getClusterExpansionZoom(I.clusterId))},E.prototype.getClusterChildren=function(I,M){M(null,this._geoJSONIndex.getChildren(I.clusterId))},E.prototype.getClusterLeaves=function(I,M){M(null,this._geoJSONIndex.getLeaves(I.clusterId,I.limit,I.offset))},E}(fn),lr=function(x){var E=this;this.self=x,this.actor=new s.Actor(x,this),this.layerIndexes={},this.workerSourceTypes={vector:fn,geojson:Xr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(I,M){if(E.workerSourceTypes[I])throw new Error('Worker source with name "'+I+'" already registered.');E.workerSourceTypes[I]=M},this.self.registerRTLTextPlugin=function(I){if(s.plugin.isLoaded())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=I.applyArabicShaping,s.plugin.processBidirectionalText=I.processBidirectionalText,s.plugin.processStyledBidirectionalText=I.processStyledBidirectionalText}};return lr.prototype.setReferrer=function(x,E){this.referrer=E},lr.prototype.setLayers=function(x,E,I){this.getLayerIndex(x).replace(E),I()},lr.prototype.updateLayers=function(x,E,I){this.getLayerIndex(x).update(E.layers,E.removedIds),I()},lr.prototype.loadTile=function(x,E,I){this.getWorkerSource(x,E.type,E.source).loadTile(E,I)},lr.prototype.loadDEMTile=function(x,E,I){this.getDEMWorkerSource(x,E.source).loadTile(E,I)},lr.prototype.reloadTile=function(x,E,I){this.getWorkerSource(x,E.type,E.source).reloadTile(E,I)},lr.prototype.abortTile=function(x,E,I){this.getWorkerSource(x,E.type,E.source).abortTile(E,I)},lr.prototype.removeTile=function(x,E,I){this.getWorkerSource(x,E.type,E.source).removeTile(E,I)},lr.prototype.removeDEMTile=function(x,E){this.getDEMWorkerSource(x,E.source).removeTile(E)},lr.prototype.removeSource=function(x,E,I){if(this.workerSources[x]&&this.workerSources[x][E.type]&&this.workerSources[x][E.type][E.source]){var M=this.workerSources[x][E.type][E.source];delete this.workerSources[x][E.type][E.source],M.removeSource!==void 0?M.removeSource(E,I):I()}},lr.prototype.loadWorkerSource=function(x,E,I){try{this.self.importScripts(E.url),I()}catch(M){I(M.toString())}},lr.prototype.loadRTLTextPlugin=function(x,E,I){try{s.plugin.isLoaded()||(this.self.importScripts(E),I(s.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+E)))}catch(M){I(M.toString())}},lr.prototype.getLayerIndex=function(x){var E=this.layerIndexes[x];return E||(E=this.layerIndexes[x]=new J),E},lr.prototype.getWorkerSource=function(x,E,I){var M=this;if(this.workerSources[x]||(this.workerSources[x]={}),this.workerSources[x][E]||(this.workerSources[x][E]={}),!this.workerSources[x][E][I]){var B={send:function(D,Z,F){M.actor.send(D,Z,F,x)}};this.workerSources[x][E][I]=new this.workerSourceTypes[E](B,this.getLayerIndex(x))}return this.workerSources[x][E][I]},lr.prototype.getDEMWorkerSource=function(x,E){return this.demWorkerSources[x]||(this.demWorkerSources[x]={}),this.demWorkerSources[x][E]||(this.demWorkerSources[x][E]=new kn),this.demWorkerSources[x][E]},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new lr(self)),lr}),P(["./shared.js"],function(s){var G=s.createCommonjsModule(function(n){function i(l){return!!(typeof window<"u"&&typeof document<"u"&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,m,y=new Blob([""],{type:"text/javascript"}),v=URL.createObjectURL(y);try{m=new Worker(v),h=!0}catch{h=!1}return m&&m.terminate(),URL.revokeObjectURL(v),h}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(h){return o[h]===void 0&&(o[h]=function(m){var y=document.createElement("canvas"),v=Object.create(i.webGLContextAttributes);return v.failIfMajorPerformanceCaveat=m,y.probablySupportsContext?y.probablySupportsContext("webgl",v)||y.probablySupportsContext("experimental-webgl",v):y.supportsContext?y.supportsContext("webgl",v)||y.supportsContext("experimental-webgl",v):y.getContext("webgl",v)||y.getContext("experimental-webgl",v)}(h)),o[h]}(l&&l.failIfMajorPerformanceCaveat))}n.exports?n.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var o={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(n,i,o){var l=s.window.document.createElement(n);return i&&(l.className=i),o&&o.appendChild(l),l},createNS:function(n,i){return s.window.document.createElementNS(n,i)}},J=s.window.document?s.window.document.documentElement.style:null;function $(n){if(!J)return null;for(var i=0;i<n.length;i++)if(n[i]in J)return n[i];return n[0]}var oe,pe=$(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){J&&pe&&(oe=J[pe],J[pe]="none")},k.enableDrag=function(){J&&pe&&(J[pe]=oe)};var Me=$(["transform","WebkitTransform"]);k.setTransform=function(n,i){n.style[Me]=i};var rt=!1;try{var $e=Object.defineProperty({},"passive",{get:function(){rt=!0}});s.window.addEventListener("test",$e,$e),s.window.removeEventListener("test",$e,$e)}catch{rt=!1}k.addEventListener=function(n,i,o,l){l===void 0&&(l={}),"passive"in l&&rt?n.addEventListener(i,o,l):n.addEventListener(i,o,l.capture)},k.removeEventListener=function(n,i,o,l){l===void 0&&(l={}),"passive"in l&&rt?n.removeEventListener(i,o,l):n.removeEventListener(i,o,l.capture)};var gt=function(n){n.preventDefault(),n.stopPropagation(),s.window.removeEventListener("click",gt,!0)};k.suppressClick=function(){s.window.addEventListener("click",gt,!0),s.window.setTimeout(function(){s.window.removeEventListener("click",gt,!0)},0)},k.mousePos=function(n,i){var o=n.getBoundingClientRect();return i=i.touches?i.touches[0]:i,new s.Point(i.clientX-o.left-n.clientLeft,i.clientY-o.top-n.clientTop)},k.touchPos=function(n,i){for(var o=n.getBoundingClientRect(),l=[],h=i.type==="touchend"?i.changedTouches:i.touches,m=0;m<h.length;m++)l.push(new s.Point(h[m].clientX-o.left-n.clientLeft,h[m].clientY-o.top-n.clientTop));return l},k.mouseButton=function(n){return s.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},k.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var je=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0};je.prototype.isLoaded=function(){return this.loaded},je.prototype.setLoaded=function(n){if(this.loaded!==n&&(this.loaded=n,n)){for(var i=0,o=this.requestors;i<o.length;i+=1){var l=o[i],h=l.ids,m=l.callback;this._notify(h,m)}this.requestors=[]}},je.prototype.getImage=function(n){return this.images[n]},je.prototype.addImage=function(n,i){this.images[n]=i},je.prototype.removeImage=function(n){delete this.images[n],delete this.patterns[n]},je.prototype.listImages=function(){return Object.keys(this.images)},je.prototype.getImages=function(n,i){var o=!0;if(!this.isLoaded())for(var l=0,h=n;l<h.length;l+=1){var m=h[l];this.images[m]||(o=!1)}this.isLoaded()||o?this._notify(n,i):this.requestors.push({ids:n,callback:i})},je.prototype._notify=function(n,i){for(var o={},l=0,h=n;l<h.length;l+=1){var m=h[l],y=this.images[m];y&&(o[m]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf})}i(null,o)},je.prototype.getPixelSize=function(){var n=this.atlasImage;return{width:n.width,height:n.height}},je.prototype.getPattern=function(n){var i=this.patterns[n];if(i)return i.position;var o=this.getImage(n);if(!o)return null;var l={w:o.data.width+2,h:o.data.height+2,x:0,y:0},h=new s.ImagePosition(l,o);return this.patterns[n]={bin:l,position:h},this._updatePatternAtlas(),h},je.prototype.bind=function(n){var i=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(n,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},je.prototype._updatePatternAtlas=function(){var n=[];for(var i in this.patterns)n.push(this.patterns[i].bin);var o=s.potpack(n),l=o.w,h=o.h,m=this.atlasImage;for(var y in m.resize({width:l||1,height:h||1}),this.patterns){var v=this.patterns[y].bin,S=v.x+1,C=v.y+1,L=this.images[y].data,O=L.width,V=L.height;s.RGBAImage.copy(L,m,{x:0,y:0},{x:S,y:C},{width:O,height:V}),s.RGBAImage.copy(L,m,{x:0,y:V-1},{x:S,y:C-1},{width:O,height:1}),s.RGBAImage.copy(L,m,{x:0,y:0},{x:S,y:C+V},{width:O,height:1}),s.RGBAImage.copy(L,m,{x:O-1,y:0},{x:S-1,y:C},{width:1,height:V}),s.RGBAImage.copy(L,m,{x:0,y:0},{x:S+O,y:C},{width:1,height:V})}this.dirty=!0};var yt=ft,Mt=1e20;function ft(n,i,o,l,h,m){this.fontSize=n||24,this.buffer=i===void 0?3:i,this.cutoff=l||.25,this.fontFamily=h||"sans-serif",this.fontWeight=m||"normal",this.radius=o||8;var y=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.d=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Int16Array(y),this.middle=Math.round(y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function fr(n,i,o,l,h,m,y){for(var v=0;v<i;v++){for(var S=0;S<o;S++)l[S]=n[S*i+v];for(Mr(l,h,m,y,o),S=0;S<o;S++)n[S*i+v]=h[S]}for(S=0;S<o;S++){for(v=0;v<i;v++)l[v]=n[S*i+v];for(Mr(l,h,m,y,i),v=0;v<i;v++)n[S*i+v]=Math.sqrt(h[v])}}function Mr(n,i,o,l,h){o[0]=0,l[0]=-Mt,l[1]=+Mt;for(var m=1,y=0;m<h;m++){for(var v=(n[m]+m*m-(n[o[y]]+o[y]*o[y]))/(2*m-2*o[y]);v<=l[y];)y--,v=(n[m]+m*m-(n[o[y]]+o[y]*o[y]))/(2*m-2*o[y]);o[++y]=m,l[y]=v,l[y+1]=+Mt}for(m=0,y=0;m<h;m++){for(;l[y+1]<m;)y++;i[m]=(m-o[y])*(m-o[y])+n[o[y]]}}ft.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var i=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),l=0;l<this.size*this.size;l++){var h=i.data[4*l+3]/255;this.gridOuter[l]=h===1?0:h===0?Mt:Math.pow(Math.max(0,.5-h),2),this.gridInner[l]=h===1?Mt:h===0?0:Math.pow(Math.max(0,h-.5),2)}for(fr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),fr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),l=0;l<this.size*this.size;l++){var m=this.gridOuter[l]-this.gridInner[l];o[l]=Math.max(0,Math.min(255,Math.round(255-255*(m/this.radius+this.cutoff))))}return o};var Pr=function(n,i){this.requestTransform=n,this.localIdeographFontFamily=i,this.entries={}};Pr.prototype.setURL=function(n){this.url=n},Pr.prototype.getGlyphs=function(n,i){var o=this,l=[];for(var h in n)for(var m=0,y=n[h];m<y.length;m+=1){var v=y[m];l.push({stack:h,id:v})}s.asyncAll(l,function(S,C){var L=S.stack,O=S.id,V=o.entries[L];V||(V=o.entries[L]={glyphs:{},requests:{}});var Y=V.glyphs[O];if(Y===void 0)if(Y=o._tinySDF(V,L,O))C(null,{stack:L,id:O,glyph:Y});else{var K=Math.floor(O/256);if(256*K>65535)C(new Error("glyphs > 65535 not supported"));else{var X=V.requests[K];X||(X=V.requests[K]=[],Pr.loadGlyphRange(L,K,o.url,o.requestTransform,function(te,ae){if(ae)for(var le in ae)V.glyphs[+le]=ae[+le];for(var ie=0,ce=X;ie<ce.length;ie+=1)(0,ce[ie])(te,ae);delete V.requests[K]})),X.push(function(te,ae){te?C(te):ae&&C(null,{stack:L,id:O,glyph:ae[O]||null})})}}else C(null,{stack:L,id:O,glyph:Y})},function(S,C){if(S)i(S);else if(C){for(var L={},O=0,V=C;O<V.length;O+=1){var Y=V[O],K=Y.stack,X=Y.id,te=Y.glyph;(L[K]||(L[K]={}))[X]=te&&{id:te.id,bitmap:te.bitmap.clone(),metrics:te.metrics}}i(null,L)}})},Pr.prototype._tinySDF=function(n,i,o){var l=this.localIdeographFontFamily;if(l&&(s.isChar["CJK Unified Ideographs"](o)||s.isChar["Hangul Syllables"](o))){var h=n.tinySDF;if(!h){var m="400";/bold/i.test(i)?m="900":/medium/i.test(i)?m="500":/light/i.test(i)&&(m="200"),h=n.tinySDF=new Pr.TinySDF(24,3,8,.25,l,m)}return{id:o,bitmap:new s.AlphaImage({width:30,height:30},h.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Pr.loadGlyphRange=function(n,i,o,l,h){var m=256*i,y=m+255,v=l(s.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",m+"-"+y),s.ResourceType.Glyphs);s.getArrayBuffer(v,function(S,C){if(S)h(S);else if(C){for(var L={},O=0,V=s.parseGlyphPBF(C);O<V.length;O+=1){var Y=V[O];L[Y.id]=Y}h(null,L)}})},Pr.TinySDF=yt;var en=function(){this.specification=s.styleSpec.light.position};en.prototype.possiblyEvaluate=function(n,i){return s.sphericalToCartesian(n.expression.evaluate(i))},en.prototype.interpolate=function(n,i,o){return{x:s.number(n.x,i.x,o),y:s.number(n.y,i.y,o),z:s.number(n.z,i.z,o)}};var Ci=new s.Properties({anchor:new s.DataConstantProperty(s.styleSpec.light.anchor),position:new en,color:new s.DataConstantProperty(s.styleSpec.light.color),intensity:new s.DataConstantProperty(s.styleSpec.light.intensity)}),Lr=function(n){function i(o){n.call(this),this._transitionable=new s.Transitionable(Ci),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(o,l){if(l===void 0&&(l={}),!this._validate(s.validateLight,o,l))for(var h in o){var m=o[h];s.endsWith(h,"-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}},i.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},i.prototype._validate=function(o,l,h){return(!h||h.validate!==!1)&&s.emitValidationErrors(this,o.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.styleSpec})))},i}(s.Evented),En=function(n,i){this.width=n,this.height=i,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};En.prototype.getDash=function(n,i){var o=n.join(",")+String(i);return this.positions[o]||(this.positions[o]=this.addDash(n,i)),this.positions[o]},En.prototype.addDash=function(n,i){var o=i?7:0,l=2*o+1;if(this.nextRow+l>this.height)return s.warnOnce("LineAtlas out of space"),null;for(var h=0,m=0;m<n.length;m++)h+=n[m];for(var y=this.width/h,v=y/2,S=n.length%2==1,C=-o;C<=o;C++)for(var L=this.nextRow+o+C,O=this.width*L,V=S?-n[n.length-1]:0,Y=n[0],K=1,X=0;X<this.width;X++){for(;Y<X/y;)V=Y,Y+=n[K],S&&K===n.length-1&&(Y+=n[0]),K++;var te=Math.abs(X-V*y),ae=Math.abs(X-Y*y),le=Math.min(te,ae),ie=K%2==1,ce=void 0;if(i){var ge=o?C/o*(v+1):0;if(ie){var Se=v-Math.abs(ge);ce=Math.sqrt(le*le+Se*Se)}else ce=v-Math.sqrt(le*le+ge*ge)}else ce=(ie?1:-1)*le;this.data[3+4*(O+X)]=Math.max(0,Math.min(255,ce+128))}var Ae={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:h};return this.nextRow+=l,this.dirty=!0,Ae},En.prototype.bind=function(n){var i=n.gl;this.texture?(i.bindTexture(i.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,i.texSubImage2D(i.TEXTURE_2D,0,0,0,this.width,this.height,i.RGBA,i.UNSIGNED_BYTE,this.data))):(this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,this.data))};var Nr=function n(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();for(var l=this.workerPool.acquire(this.id),h=0;h<l.length;h++){var m=l[h],y=new n.Actor(m,o,this.id);y.name="Worker "+h,this.actors.push(y)}};function dr(n,i,o){var l=function(h,m){if(h)return o(h);if(m){var y=s.pick(m,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);m.vector_layers&&(y.vectorLayers=m.vector_layers,y.vectorLayerIds=y.vectorLayers.map(function(v){return v.id})),n.url&&(y.tiles=s.canonicalizeTileset(y,n.url)),o(null,y)}};return n.url?s.getJSON(i(s.normalizeSourceURL(n.url),s.ResourceType.Source),l):s.browser.frame(function(){return l(null,n)})}Nr.prototype.broadcast=function(n,i,o){o=o||function(){},s.asyncAll(this.actors,function(l,h){l.send(n,i,h)},o)},Nr.prototype.send=function(n,i,o,l){return(typeof l!="number"||isNaN(l))&&(l=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[l].send(n,i,o),l},Nr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Nr.Actor=s.Actor;var Qn=function(n,i,o){this.bounds=s.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=i||0,this.maxzoom=o||24};Qn.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Qn.prototype.contains=function(n){var i=Math.pow(2,n.z),o=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*i),l=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*i),h=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*i),m=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*i);return n.x>=o&&n.x<h&&n.y>=l&&n.y<m};var Pi=function(n){function i(o,l,h,m){if(n.call(this),this.id=o,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,s.extend(this,s.pick(l,["url","scheme","tileSize"])),this._options=s.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var o=this;this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dr(this._options,this.map._transformRequest,function(l,h){o._tileJSONRequest=null,l?o.fire(new s.ErrorEvent(l)):h&&(s.extend(o,h),h.bounds&&(o.tileBounds=new Qn(h.bounds,o.minzoom,o.maxzoom)),s.postTurnstileEvent(h.tiles),s.postMapLoadEvent(h.tiles,o.map._getMapId()),o.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},i.prototype.onAdd=function(o){this.map=o,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return s.extend({},this._options)},i.prototype.loadTile=function(o,l){var h=s.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.url),m={request:this.map._transformRequest(h,s.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function y(v,S){return o.aborted?l(null):v&&v.status!==404?l(v):(S&&S.resourceTiming&&(o.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&o.setExpiryData(S),o.loadVectorData(S,this.map.painter),l(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,o.workerID===void 0||o.state==="expired"?o.workerID=this.dispatcher.send("loadTile",m,y.bind(this)):o.state==="loading"?o.reloadCallback=l:this.dispatcher.send("reloadTile",m,y.bind(this),o.workerID)},i.prototype.abortTile=function(o){this.dispatcher.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0,o.workerID)},i.prototype.unloadTile=function(o){o.unloadVectorData(),this.dispatcher.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0,o.workerID)},i.prototype.hasTransition=function(){return!1},i}(s.Evented),hr=function(n){function i(o,l,h,m){n.call(this),this.id=o,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({},l),s.extend(this,s.pick(l,["url","scheme","tileSize"]))}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var o=this;this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dr(this._options,this.map._transformRequest,function(l,h){o._tileJSONRequest=null,l?o.fire(new s.ErrorEvent(l)):h&&(s.extend(o,h),h.bounds&&(o.tileBounds=new Qn(h.bounds,o.minzoom,o.maxzoom)),s.postTurnstileEvent(h.tiles),s.postMapLoadEvent(h.tiles,o.map._getMapId()),o.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.onAdd=function(o){this.map=o,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return s.extend({},this._options)},i.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},i.prototype.loadTile=function(o,l){var h=this,m=s.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);o.request=s.getImage(this.map._transformRequest(m,s.ResourceType.Tile),function(y,v){if(delete o.request,o.aborted)o.state="unloaded",l(null);else if(y)o.state="errored",l(y);else if(v){h.map._refreshExpiredTiles&&o.setExpiryData(v),delete v.cacheControl,delete v.expires;var S=h.map.painter.context,C=S.gl;o.texture=h.map.painter.getTileTexture(v.width),o.texture?o.texture.update(v,{useMipmap:!0}):(o.texture=new s.Texture(S,v,C.RGBA,{useMipmap:!0}),o.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),o.state="loaded",l(null)}})},i.prototype.abortTile=function(o,l){o.request&&(o.request.cancel(),delete o.request),l()},i.prototype.unloadTile=function(o,l){o.texture&&this.map.painter.saveTileTexture(o.texture),l()},i.prototype.hasTransition=function(){return!1},i}(s.Evented),qt=function(n){function i(o,l,h,m){n.call(this,o,l,h,m),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({},l),this.encoding=l.encoding||"mapbox"}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(o,l){var h=s.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);o.request=s.getImage(this.map._transformRequest(h,s.ResourceType.Tile),(function(m,y){if(delete o.request,o.aborted)o.state="unloaded",l(null);else if(m)o.state="errored",l(m);else if(y){this.map._refreshExpiredTiles&&o.setExpiryData(y),delete y.cacheControl,delete y.expires;var v=s.browser.getImageData(y),S={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:v,encoding:this.encoding};o.workerID&&o.state!=="expired"||(o.workerID=this.dispatcher.send("loadDEMTile",S,(function(C,L){C&&(o.state="errored",l(C)),L&&(o.dem=L,o.needsHillshadePrepare=!0,o.state="loaded",l(null))}).bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},i.prototype._getNeighboringTiles=function(o){var l=o.canonical,h=Math.pow(2,l.z),m=(l.x-1+h)%h,y=l.x===0?o.wrap-1:o.wrap,v=(l.x+1+h)%h,S=l.x+1===h?o.wrap+1:o.wrap,C={};return C[new s.OverscaledTileID(o.overscaledZ,y,l.z,m,l.y).key]={backfilled:!1},C[new s.OverscaledTileID(o.overscaledZ,S,l.z,v,l.y).key]={backfilled:!1},l.y>0&&(C[new s.OverscaledTileID(o.overscaledZ,y,l.z,m,l.y-1).key]={backfilled:!1},C[new s.OverscaledTileID(o.overscaledZ,o.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},C[new s.OverscaledTileID(o.overscaledZ,S,l.z,v,l.y-1).key]={backfilled:!1}),l.y+1<h&&(C[new s.OverscaledTileID(o.overscaledZ,y,l.z,m,l.y+1).key]={backfilled:!1},C[new s.OverscaledTileID(o.overscaledZ,o.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},C[new s.OverscaledTileID(o.overscaledZ,S,l.z,v,l.y+1).key]={backfilled:!1}),C},i.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:o.uid,source:this.id},void 0,o.workerID)},i}(hr),Zt=function(n){function i(o,l,h,m){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=h,this.setEventedParent(m),this._data=l.data,this._options=s.extend({},l),this._collectResourceTiming=l.collectResourceTiming,this._resourceTiming=[],l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution);var y=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*y,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*y,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?Math.min(l.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s.EXTENT,radius:(l.clusterRadius||50)*y,log:!1},clusterProperties:l.clusterProperties},l.workerOptions)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var o=this;this.fire(new s.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(l){if(l)o.fire(new s.ErrorEvent(l));else{var h={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(h.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new s.Event("data",h))}})},i.prototype.onAdd=function(o){this.map=o,this.load()},i.prototype.setData=function(o){var l=this;return this._data=o,this.fire(new s.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(h){if(h)l.fire(new s.ErrorEvent(h));else{var m={dataType:"source",sourceDataType:"content"};l._collectResourceTiming&&l._resourceTiming&&l._resourceTiming.length>0&&(m.resourceTiming=l._resourceTiming,l._resourceTiming=[]),l.fire(new s.Event("data",m))}}),this},i.prototype.getClusterExpansionZoom=function(o,l){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},l,this.workerID),this},i.prototype.getClusterChildren=function(o,l){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:o,source:this.id},l,this.workerID),this},i.prototype.getClusterLeaves=function(o,l,h,m){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:l,offset:h},m,this.workerID),this},i.prototype._updateWorkerData=function(o){var l=this,h=s.extend({},this.workerOptions),m=this._data;typeof m=="string"?(h.request=this.map._transformRequest(s.browser.resolveURL(m),s.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(m),this.workerID=this.dispatcher.send(this.type+".loadData",h,function(y,v){l._removed||v&&v.abandoned||(l._loaded=!0,v&&v.resourceTiming&&v.resourceTiming[l.id]&&(l._resourceTiming=v.resourceTiming[l.id].slice(0)),l.dispatcher.send(l.type+".coalesce",{source:h.source},null,l.workerID),o(y))},this.workerID)},i.prototype.loadTile=function(o,l){var h=this,m=o.workerID===void 0?"loadTile":"reloadTile",y={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};o.workerID=this.dispatcher.send(m,y,function(v,S){return o.unloadVectorData(),o.aborted?l(null):v?l(v):(o.loadVectorData(S,h.map.painter,m==="reloadTile"),l(null))},this.workerID)},i.prototype.abortTile=function(o){o.aborted=!0},i.prototype.unloadTile=function(o){o.unloadVectorData(),this.dispatcher.send("removeTile",{uid:o.uid,type:this.type,source:this.id},null,o.workerID)},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},i.prototype.serialize=function(){return s.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(s.Evented),jr=function(n){function i(o,l,h,m){n.call(this),this.id=o,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(m),this.options=l}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(o,l){var h=this;this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._transformRequest(this.url,s.ResourceType.Image),function(m,y){m?h.fire(new s.ErrorEvent(m)):y&&(h.image=y,o&&(h.coordinates=o),l&&l(),h._finishLoading())})},i.prototype.updateImage=function(o){var l=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){l.texture=null}),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(o){this.map=o,this.load()},i.prototype.setCoordinates=function(o){var l=this;this.coordinates=o;var h=o.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(y){for(var v=1/0,S=1/0,C=-1/0,L=-1/0,O=0,V=y;O<V.length;O+=1){var Y=V[O];v=Math.min(v,Y.x),S=Math.min(S,Y.y),C=Math.max(C,Y.x),L=Math.max(L,Y.y)}var K=C-v,X=L-S,te=Math.max(K,X),ae=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),le=Math.pow(2,ae);return new s.CanonicalTileID(ae,Math.floor((v+C)/2*le),Math.floor((S+L)/2*le))}(h),this.minzoom=this.maxzoom=this.tileID.z;var m=h.map(function(y){return l.tileID.getTilePoint(y)._round()});return this._boundsArray=new s.StructArrayLayout4i8,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,l=o.gl;for(var h in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,s.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new s.Texture(o,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}},i.prototype.loadTile=function(o,l){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},l(null)):(o.state="errored",l(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(s.Evented),Tr={vector:Pi,raster:hr,"raster-dem":qt,geojson:Zt,video:function(n){function i(o,l,h,m){n.call(this,o,l,h,m),this.roundZoom=!0,this.type="video",this.options=l}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var o=this,l=this.options;this.urls=[];for(var h=0,m=l.urls;h<m.length;h+=1){var y=m[h];this.urls.push(this.map._transformRequest(y,s.ResourceType.Source).url)}s.getVideo(this.urls,function(v,S){v?o.fire(new s.ErrorEvent(v)):S&&(o.video=S,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,l=o.gl;for(var h in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,s.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(o,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this.tiles){var m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(jr),image:jr,canvas:function(n){function i(o,l,h,m){n.call(this,o,l,h,m),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(function(y){return!Array.isArray(y)||y.length!==2||y.some(function(v){return typeof v!="number"})})||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+o,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var l=this.map.painter.context,h=l.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,s.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(l,this.canvas,h.RGBA,{premultiply:!0}),this.tiles){var y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var o=0,l=[this.canvas.width,this.canvas.height];o<l.length;o+=1){var h=l[o];if(isNaN(h)||h<=0)return!0}return!1},i}(jr)},qr=function(n,i,o,l){var h=new Tr[i.type](n,i,o,l);if(h.id!==n)throw new Error("Expected Source id to be "+n+" instead of "+h.id);return s.bindAll(["load","abort","unload","serialize","prepare"],h),h};function Wt(n,i){var o=s.identity([]);return s.translate(o,o,[1,1,0]),s.scale(o,o,[.5*n.width,.5*n.height,1]),s.multiply(o,o,n.calculatePosMatrix(i.toUnwrapped()))}function fn(n,i,o,l,h){var m=function(K,X,te){if(K)for(var ae=0,le=K;ae<le.length;ae+=1){var ie=X[le[ae]];if(ie&&ie.source===te&&ie.type==="fill-extrusion")return!0}else for(var ce in X){var ge=X[ce];if(ge.source===te&&ge.type==="fill-extrusion")return!0}return!1}(l&&l.layers,i,n.id),y=h.maxPitchScaleFactor(),v=n.tilesIn(o,y,m);v.sort(kn);for(var S=[],C=0,L=v;C<L.length;C+=1){var O=L[C];S.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(i,n._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,l,h,y,Wt(n.transform,O.tileID))})}var V=function(K){for(var X={},te={},ae=0,le=K;ae<le.length;ae+=1){var ie=le[ae],ce=ie.queryResults,ge=ie.wrappedTileID,Se=te[ge]=te[ge]||{};for(var Ae in ce)for(var et=ce[Ae],at=Se[Ae]=Se[Ae]||{},ot=X[Ae]=X[Ae]||[],ke=0,bt=et;ke<bt.length;ke+=1){var tt=bt[ke];at[tt.featureIndex]||(at[tt.featureIndex]=!0,ot.push(tt))}}return X}(S);for(var Y in V)V[Y].forEach(function(K){var X=K.feature,te=n.getFeatureState(X.layer["source-layer"],X.id);X.source=X.layer.source,X.layer["source-layer"]&&(X.sourceLayer=X.layer["source-layer"]),X.state=te});return V}function kn(n,i){var o=n.tileID,l=i.tileID;return o.overscaledZ-l.overscaledZ||o.canonical.y-l.canonical.y||o.wrap-l.wrap||o.canonical.x-l.canonical.x}var tn=function(n,i){this.max=n,this.onRemove=i,this.reset()};tn.prototype.reset=function(){for(var n in this.data)for(var i=0,o=this.data[n];i<o.length;i+=1){var l=o[i];l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value)}return this.data={},this.order=[],this},tn.prototype.add=function(n,i,o){var l=this,h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);var m={value:i,timeout:void 0};if(o!==void 0&&(m.timeout=setTimeout(function(){l.remove(n,m)},o)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},tn.prototype.has=function(n){return n.wrapped().key in this.data},tn.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},tn.prototype._getAndRemoveByKey=function(n){var i=this.data[n].shift();return i.timeout&&clearTimeout(i.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),i.value},tn.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},tn.prototype.remove=function(n,i){if(!this.has(n))return this;var o=n.wrapped().key,l=i===void 0?0:this.data[o].indexOf(i),h=this.data[o][l];return this.data[o].splice(l,1),h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(h.value),this.order.splice(this.order.indexOf(o),1),this},tn.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this};var vr=function(n,i,o){this.context=n;var l=n.gl;this.buffer=l.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),l.bufferData(l.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?l.DYNAMIC_DRAW:l.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer};vr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},vr.prototype.updateData=function(n){var i=this.context.gl;this.context.unbindVAO(),this.bind(),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},vr.prototype.destroy=function(){var n=this.context.gl;this.buffer&&(n.deleteBuffer(this.buffer),delete this.buffer)};var Ee={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ze=function(n,i,o,l){this.length=i.length,this.attributes=o,this.itemSize=i.bytesPerElement,this.dynamicDraw=l,this.context=n;var h=n.gl;this.buffer=h.createBuffer(),n.bindVertexBuffer.set(this.buffer),h.bufferData(h.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer};Ze.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ze.prototype.updateData=function(n){var i=this.context.gl;this.bind(),i.bufferSubData(i.ARRAY_BUFFER,0,n.arrayBuffer)},Ze.prototype.enableAttributes=function(n,i){for(var o=0;o<this.attributes.length;o++){var l=this.attributes[o],h=i.attributes[l.name];h!==void 0&&n.enableVertexAttribArray(h)}},Ze.prototype.setVertexAttribPointers=function(n,i,o){for(var l=0;l<this.attributes.length;l++){var h=this.attributes[l],m=i.attributes[h.name];m!==void 0&&n.vertexAttribPointer(m,h.components,n[Ee[h.type]],!1,this.itemSize,h.offset+this.itemSize*(o||0))}},Ze.prototype.destroy=function(){var n=this.context.gl;this.buffer&&(n.deleteBuffer(this.buffer),delete this.buffer)};var ve=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ve.prototype.get=function(){return this.current},ve.prototype.set=function(n){},ve.prototype.getDefault=function(){return this.default},ve.prototype.setDefault=function(){this.set(this.default)};var ut=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return s.Color.transparent},i.prototype.set=function(o){var l=this.current;(o.r!==l.r||o.g!==l.g||o.b!==l.b||o.a!==l.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},i}(ve),Ot=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return 1},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},i}(ve),W=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return 0},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},i}(ve),Q=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return[!0,!0,!0,!0]},i.prototype.set=function(o){var l=this.current;(o[0]!==l[0]||o[1]!==l[1]||o[2]!==l[2]||o[3]!==l[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},i}(ve),se=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!0},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},i}(ve),_e=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return 255},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},i}(ve),we=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},i.prototype.set=function(o){var l=this.current;(o.func!==l.func||o.ref!==l.ref||o.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},i}(ve),Ie=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},i.prototype.set=function(o){var l=this.current;(o[0]!==l[0]||o[1]!==l[1]||o[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},i}(ve),Ge=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;o?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=o,this.dirty=!1}},i}(ve),Le=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return[0,1]},i.prototype.set=function(o){var l=this.current;(o[0]!==l[0]||o[1]!==l[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},i}(ve),qe=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;o?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=o,this.dirty=!1}},i}(ve),Ce=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return this.gl.LESS},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},i}(ve),ct=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;o?l.enable(l.BLEND):l.disable(l.BLEND),this.current=o,this.dirty=!1}},i}(ve),Je=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},i.prototype.set=function(o){var l=this.current;(o[0]!==l[0]||o[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},i}(ve),pt=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return s.Color.transparent},i.prototype.set=function(o){var l=this.current;(o.r!==l.r||o.g!==l.g||o.b!==l.b||o.a!==l.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},i}(ve),_t=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return this.gl.FUNC_ADD},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},i}(ve),zt=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;o?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=o,this.dirty=!1}},i}(ve),nr=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return this.gl.BACK},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},i}(ve),Yt=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return this.gl.CCW},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},i}(ve),sr=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},i}(ve),dn=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return this.gl.TEXTURE0},i.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},i}(ve),Fi=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},i.prototype.set=function(o){var l=this.current;(o[0]!==l[0]||o[1]!==l[1]||o[2]!==l[2]||o[3]!==l[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},i}(ve),Qi=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},i}(ve),Mn=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,o),this.current=o,this.dirty=!1}},i}(ve),zi=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.bindTexture(l.TEXTURE_2D,o),this.current=o,this.dirty=!1}},i}(ve),Zr=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},i}(ve),mn=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){var l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},i}(ve),eo=function(n){function i(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},i}(ve),La=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return 4},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},i}(ve),Zn=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},i}(ve),be=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return!1},i.prototype.set=function(o){if(o!==this.current||this.dirty){var l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},i}(ve),Oe=function(n){function i(o,l){n.call(this,o),this.context=o,this.parent=l}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return null},i}(ve),ns=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.setDirty=function(){this.dirty=!0},i.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},i}(Oe),To=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,o),this.current=o,this.dirty=!1}},i}(Oe),xr=function(n,i,o){this.context=n,this.width=i,this.height=o;var l=n.gl,h=this.framebuffer=l.createFramebuffer();this.colorAttachment=new ns(n,h),this.depthAttachment=new To(n,h)};xr.prototype.destroy=function(){var n=this.context.gl,i=this.colorAttachment.get();i&&n.deleteTexture(i);var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o),n.deleteFramebuffer(this.framebuffer)};var Ft=function(n,i,o){this.func=n,this.mask=i,this.range=o};Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);var ir=function(n,i,o,l,h,m){this.test=n,this.ref=i,this.mask=o,this.fail=l,this.depthFail=h,this.pass=m};ir.disabled=new ir({func:519,mask:0},0,0,7680,7680,7680);var br=function(n,i,o){this.blendFunction=n,this.blendColor=i,this.mask=o};br.Replace=[1,0],br.disabled=new br(br.Replace,s.Color.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,s.Color.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,771],s.Color.transparent,[!0,!0,!0,!0]);var tr=function(n,i,o){this.enable=n,this.mode=i,this.frontFace=o};tr.disabled=new tr(!1,1029,2305),tr.backCCW=new tr(!0,1029,2305);var Be=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ut(this),this.clearDepth=new Ot(this),this.clearStencil=new W(this),this.colorMask=new Q(this),this.depthMask=new se(this),this.stencilMask=new _e(this),this.stencilFunc=new we(this),this.stencilOp=new Ie(this),this.stencilTest=new Ge(this),this.depthRange=new Le(this),this.depthTest=new qe(this),this.depthFunc=new Ce(this),this.blend=new ct(this),this.blendFunc=new Je(this),this.blendColor=new pt(this),this.blendEquation=new _t(this),this.cullFace=new zt(this),this.cullFaceSide=new nr(this),this.frontFace=new Yt(this),this.program=new sr(this),this.activeTexture=new dn(this),this.viewport=new Fi(this),this.bindFramebuffer=new Qi(this),this.bindRenderbuffer=new Mn(this),this.bindTexture=new zi(this),this.bindVertexBuffer=new Zr(this),this.bindElementBuffer=new mn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new eo(this),this.pixelStoreUnpack=new La(this),this.pixelStoreUnpackPremultiplyAlpha=new Zn(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&n.getExtension("OES_texture_half_float_linear")};Be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Be.prototype.createIndexBuffer=function(n,i){return new vr(this,n,i)},Be.prototype.createVertexBuffer=function(n,i,o){return new Ze(this,n,i,o)},Be.prototype.createRenderbuffer=function(n,i,o){var l=this.gl,h=l.createRenderbuffer();return this.bindRenderbuffer.set(h),l.renderbufferStorage(l.RENDERBUFFER,n,i,o),this.bindRenderbuffer.set(null),h},Be.prototype.createFramebuffer=function(n,i){return new xr(this,n,i)},Be.prototype.clear=function(n){var i=n.color,o=n.depth,l=this.gl,h=0;i&&(h|=l.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(h|=l.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),l.clear(h)},Be.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},Be.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},Be.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},Be.prototype.setColorMode=function(n){s.isEqual(n.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},Be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var It=function(n){function i(o,l,h){var m=this;n.call(this),this.id=o,this.dispatcher=h,this.on("data",function(y){y.dataType==="source"&&y.sourceDataType==="metadata"&&(m._sourceLoaded=!0),m._sourceLoaded&&!m._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(m.reload(),m.transform&&m.update(m.transform))}),this.on("error",function(){m._sourceErrored=!0}),this._source=qr(o,l,h,this),this._tiles={},this._cache=new tn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new s.SourceFeatureState}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},i.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var o in this._tiles){var l=this._tiles[o];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(o,l){return this._source.loadTile(o,l)},i.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},i.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(o){for(var l in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[l].upload(o)},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(kt)},i.prototype.getRenderableIds=function(o){var l=this,h=[];for(var m in this._tiles)this._isIdRenderable(+m,o)&&h.push(+m);return o?h.sort(function(y,v){var S=l._tiles[y].tileID,C=l._tiles[v].tileID,L=new s.Point(S.canonical.x,S.canonical.y)._rotate(l.transform.angle),O=new s.Point(C.canonical.x,C.canonical.y)._rotate(l.transform.angle);return S.overscaledZ-C.overscaledZ||O.y-L.y||O.x-L.x}):h.sort(kt)},i.prototype.hasRenderableParent=function(o){var l=this.findLoadedParent(o,0);return!!l&&this._isIdRenderable(l.tileID.key)},i.prototype._isIdRenderable=function(o,l){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(l||!this._tiles[o].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},i.prototype._reloadTile=function(o,l){var h=this._tiles[o];h&&(h.state!=="loading"&&(h.state=l),this._loadTile(h,this._tileLoaded.bind(this,h,o,l)))},i.prototype._tileLoaded=function(o,l,h,m){if(m)return o.state="errored",void(m.status!==404?this._source.fire(new s.ErrorEvent(m,{tile:o})):this.update(this.transform));o.timeAdded=s.browser.now(),h==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(l,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new s.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},i.prototype._backfillDEM=function(o){for(var l=this.getRenderableIds(),h=0;h<l.length;h++){var m=l[h];if(o.neighboringTiles&&o.neighboringTiles[m]){var y=this.getTileByID(m);v(o,y),v(y,o)}}function v(S,C){S.needsHillshadePrepare=!0;var L=C.tileID.canonical.x-S.tileID.canonical.x,O=C.tileID.canonical.y-S.tileID.canonical.y,V=Math.pow(2,S.tileID.canonical.z),Y=C.tileID.key;L===0&&O===0||Math.abs(O)>1||(Math.abs(L)>1&&(Math.abs(L+V)===1?L+=V:Math.abs(L-V)===1&&(L-=V)),C.dem&&S.dem&&(S.dem.backfillBorder(C.dem,L,O),S.neighboringTiles&&S.neighboringTiles[Y]&&(S.neighboringTiles[Y].backfilled=!0)))}},i.prototype.getTile=function(o){return this.getTileByID(o.key)},i.prototype.getTileByID=function(o){return this._tiles[o]},i.prototype.getZoom=function(o){return o.zoom+o.scaleZoom(o.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(o,l,h,m){for(var y in this._tiles){var v=this._tiles[y];if(!(m[y]||!v.hasData()||v.tileID.overscaledZ<=l||v.tileID.overscaledZ>h)){for(var S=v.tileID;v&&v.tileID.overscaledZ>l+1;){var C=v.tileID.scaledTo(v.tileID.overscaledZ-1);(v=this._tiles[C.key])&&v.hasData()&&(S=C)}for(var L=S;L.overscaledZ>l;)if(o[(L=L.scaledTo(L.overscaledZ-1)).key]){m[S.key]=S;break}}}},i.prototype.findLoadedParent=function(o,l){for(var h=o.overscaledZ-1;h>=l;h--){var m=o.scaledTo(h);if(!m)return;var y=String(m.key),v=this._tiles[y];if(v&&v.hasData())return v;if(this._cache.has(m))return this._cache.get(m)}},i.prototype.updateCacheSize=function(o){var l=(Math.ceil(o.width/this._source.tileSize)+1)*(Math.ceil(o.height/this._source.tileSize)+1),h=Math.floor(5*l),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(m)},i.prototype.handleWrapJump=function(o){var l=(o-(this._prevLng===void 0?o:this._prevLng))/360,h=Math.round(l);if(this._prevLng=o,h){var m={};for(var y in this._tiles){var v=this._tiles[y];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+h),m[v.tileID.key]=v}for(var S in this._tiles=m,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var C in this._tiles){var L=this._tiles[C];this._setTileReloadTimer(C,L)}}},i.prototype.update=function(o){var l=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var h;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?h=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ae){return new s.OverscaledTileID(Ae.canonical.z,Ae.wrap,Ae.canonical.z,Ae.canonical.x,Ae.canonical.y)}):(h=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(h=h.filter(function(Ae){return l._source.hasTile(Ae)}))):h=[];var m=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(o)),y=Math.max(m-i.maxOverzooming,this._source.minzoom),v=Math.max(m+i.maxUnderzooming,this._source.minzoom),S=this._updateRetainedTiles(h,m);if(Ln(this._source.type)){for(var C={},L={},O=0,V=Object.keys(S);O<V.length;O+=1){var Y=V[O],K=S[Y],X=this._tiles[Y];if(X&&!(X.fadeEndTime&&X.fadeEndTime<=s.browser.now())){var te=this.findLoadedParent(K,y);te&&(this._addTile(te.tileID),C[te.tileID.key]=te.tileID),L[Y]=K}}for(var ae in this._retainLoadedChildren(L,m,v,S),C)S[ae]||(this._coveredTiles[ae]=!0,S[ae]=C[ae])}for(var le in S)this._tiles[le].clearFadeHold();for(var ie=0,ce=s.keysDifference(this._tiles,S);ie<ce.length;ie+=1){var ge=ce[ie],Se=this._tiles[ge];Se.hasSymbolBuckets&&!Se.holdingForFade()?Se.setHoldDuration(this.map._fadeDuration):Se.hasSymbolBuckets&&!Se.symbolFadeFinished()||this._removeTile(ge)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},i.prototype._updateRetainedTiles=function(o,l){for(var h={},m={},y=Math.max(l-i.maxOverzooming,this._source.minzoom),v=Math.max(l+i.maxUnderzooming,this._source.minzoom),S={},C=0,L=o;C<L.length;C+=1){var O=L[C],V=this._addTile(O);h[O.key]=O,V.hasData()||l<this._source.maxzoom&&(S[O.key]=O)}this._retainLoadedChildren(S,l,v,h);for(var Y=0,K=o;Y<K.length;Y+=1){var X=K[Y],te=this._tiles[X.key];if(!te.hasData()){if(l+1>this._source.maxzoom){var ae=X.children(this._source.maxzoom)[0],le=this.getTile(ae);if(le&&le.hasData()){h[ae.key]=ae;continue}}else{var ie=X.children(this._source.maxzoom);if(h[ie[0].key]&&h[ie[1].key]&&h[ie[2].key]&&h[ie[3].key])continue}for(var ce=te.wasRequested(),ge=X.overscaledZ-1;ge>=y;--ge){var Se=X.scaledTo(ge);if(m[Se.key]||(m[Se.key]=!0,!(te=this.getTile(Se))&&ce&&(te=this._addTile(Se)),te&&(h[Se.key]=Se,ce=te.wasRequested(),te.hasData())))break}}}return h},i.prototype._addTile=function(o){var l=this._tiles[o.key];if(l)return l;(l=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,l),l.tileID=o,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,l)));var h=!!l;return h||(l=new s.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,o.key,l.state))),l?(l.uses++,this._tiles[o.key]=l,h||this._source.fire(new s.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null},i.prototype._setTileReloadTimer=function(o,l){var h=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var m=l.getExpiryTimeout();m&&(this._timers[o]=setTimeout(function(){h._reloadTile(o,"expired"),delete h._timers[o]},m))},i.prototype._removeTile=function(o){var l=this._tiles[o];l&&(l.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),l.uses>0||(l.hasData()?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))},i.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},i.prototype.tilesIn=function(o,l,h){var m=this,y=[],v=this.transform;if(!v)return y;for(var S=h?v.getCameraQueryGeometry(o):o,C=o.map(function(ge){return v.pointCoordinate(ge)}),L=S.map(function(ge){return v.pointCoordinate(ge)}),O=this.getIds(),V=1/0,Y=1/0,K=-1/0,X=-1/0,te=0,ae=L;te<ae.length;te+=1){var le=ae[te];V=Math.min(V,le.x),Y=Math.min(Y,le.y),K=Math.max(K,le.x),X=Math.max(X,le.y)}for(var ie=function(ge){var Se=m._tiles[O[ge]];if(!Se.holdingForFade()){var Ae=Se.tileID,et=Math.pow(2,v.zoom-Se.tileID.overscaledZ),at=l*Se.queryPadding*s.EXTENT/Se.tileSize/et,ot=[Ae.getTilePoint(new s.MercatorCoordinate(V,Y)),Ae.getTilePoint(new s.MercatorCoordinate(K,X))];if(ot[0].x-at<s.EXTENT&&ot[0].y-at<s.EXTENT&&ot[1].x+at>=0&&ot[1].y+at>=0){var ke=C.map(function(tt){return Ae.getTilePoint(tt)}),bt=L.map(function(tt){return Ae.getTilePoint(tt)});y.push({tile:Se,tileID:Ae,queryGeometry:ke,cameraQueryGeometry:bt,scale:et})}}},ce=0;ce<O.length;ce++)ie(ce);return y},i.prototype.getVisibleCoordinates=function(o){for(var l=this,h=this.getRenderableIds(o).map(function(S){return l._tiles[S].tileID}),m=0,y=h;m<y.length;m+=1){var v=y[m];v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped())}return h},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ln(this._source.type))for(var o in this._tiles){var l=this._tiles[o];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=s.browser.now())return!0}return!1},i.prototype.setFeatureState=function(o,l,h){o=o||"_geojsonTileLayer",this._state.updateState(o,l,h)},i.prototype.removeFeatureState=function(o,l,h){o=o||"_geojsonTileLayer",this._state.removeFeatureState(o,l,h)},i.prototype.getFeatureState=function(o,l){return o=o||"_geojsonTileLayer",this._state.getState(o,l)},i}(s.Evented);function kt(n,i){return n%32-i%32||i-n}function Ln(n){return n==="raster"||n==="image"||n==="video"}function Ui(){return new s.window.Worker(ps.workerUrl)}It.maxOverzooming=10,It.maxUnderzooming=3;var Et=function(){this.active={}};Et.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Et.workerCount;)this.workers.push(new Ui);return this.active[n]=!0,this.workers.slice()},Et.prototype.release=function(n){delete this.active[n],Object.keys(this.active).length===0&&(this.workers.forEach(function(i){i.terminate()}),this.workers=null)};var to,Ao=Math.floor(s.browser.hardwareConcurrency/2);function Rn(n,i){var o={};for(var l in n)l!=="ref"&&(o[l]=n[l]);return s.refProperties.forEach(function(h){h in i&&(o[h]=i[h])}),o}function Gr(n){n=n.slice();for(var i=Object.create(null),o=0;o<n.length;o++)i[n[o].id]=n[o];for(var l=0;l<n.length;l++)"ref"in n[l]&&(n[l]=Rn(n[l],i[n[l].ref]));return n}Et.workerCount=Math.max(Math.min(Ao,6),1);var $t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Sn(n,i,o){o.push({command:$t.addSource,args:[n,i[n]]})}function Ra(n,i,o){i.push({command:$t.removeSource,args:[n]}),o[n]=!0}function Gt(n,i,o,l){Ra(n,o,l),Sn(n,i,o)}function Io(n,i,o){var l;for(l in n[o])if(n[o].hasOwnProperty(l)&&l!=="data"&&!s.isEqual(n[o][l],i[o][l]))return!1;for(l in i[o])if(i[o].hasOwnProperty(l)&&l!=="data"&&!s.isEqual(n[o][l],i[o][l]))return!1;return!0}function ro(n,i,o,l,h,m){var y;for(y in i=i||{},n=n||{})n.hasOwnProperty(y)&&(s.isEqual(n[y],i[y])||o.push({command:m,args:[l,y,i[y],h]}));for(y in i)i.hasOwnProperty(y)&&!n.hasOwnProperty(y)&&(s.isEqual(n[y],i[y])||o.push({command:m,args:[l,y,i[y],h]}))}function rn(n){return n.id}function Da(n,i){return n[i.id]=i,n}function Dn(n,i){if(!n)return[{command:$t.setStyle,args:[i]}];var o=[];try{if(!s.isEqual(n.version,i.version))return[{command:$t.setStyle,args:[i]}];s.isEqual(n.center,i.center)||o.push({command:$t.setCenter,args:[i.center]}),s.isEqual(n.zoom,i.zoom)||o.push({command:$t.setZoom,args:[i.zoom]}),s.isEqual(n.bearing,i.bearing)||o.push({command:$t.setBearing,args:[i.bearing]}),s.isEqual(n.pitch,i.pitch)||o.push({command:$t.setPitch,args:[i.pitch]}),s.isEqual(n.sprite,i.sprite)||o.push({command:$t.setSprite,args:[i.sprite]}),s.isEqual(n.glyphs,i.glyphs)||o.push({command:$t.setGlyphs,args:[i.glyphs]}),s.isEqual(n.transition,i.transition)||o.push({command:$t.setTransition,args:[i.transition]}),s.isEqual(n.light,i.light)||o.push({command:$t.setLight,args:[i.light]});var l={},h=[];(function(y,v,S,C){var L;for(L in v=v||{},y=y||{})y.hasOwnProperty(L)&&(v.hasOwnProperty(L)||Ra(L,S,C));for(L in v)v.hasOwnProperty(L)&&(y.hasOwnProperty(L)?s.isEqual(y[L],v[L])||(y[L].type==="geojson"&&v[L].type==="geojson"&&Io(y,v,L)?S.push({command:$t.setGeoJSONSourceData,args:[L,v[L].data]}):Gt(L,v,S,C)):Sn(L,v,S))})(n.sources,i.sources,h,l);var m=[];n.layers&&n.layers.forEach(function(y){l[y.source]?o.push({command:$t.removeLayer,args:[y.id]}):m.push(y)}),o=o.concat(h),function(y,v,S){v=v||[];var C,L,O,V,Y,K,X,te=(y=y||[]).map(rn),ae=v.map(rn),le=y.reduce(Da,{}),ie=v.reduce(Da,{}),ce=te.slice(),ge=Object.create(null);for(C=0,L=0;C<te.length;C++)O=te[C],ie.hasOwnProperty(O)?L++:(S.push({command:$t.removeLayer,args:[O]}),ce.splice(ce.indexOf(O,L),1));for(C=0,L=0;C<ae.length;C++)O=ae[ae.length-1-C],ce[ce.length-1-C]!==O&&(le.hasOwnProperty(O)?(S.push({command:$t.removeLayer,args:[O]}),ce.splice(ce.lastIndexOf(O,ce.length-L),1)):L++,K=ce[ce.length-C],S.push({command:$t.addLayer,args:[ie[O],K]}),ce.splice(ce.length-C,0,O),ge[O]=!0);for(C=0;C<ae.length;C++)if(V=le[O=ae[C]],Y=ie[O],!ge[O]&&!s.isEqual(V,Y))if(s.isEqual(V.source,Y.source)&&s.isEqual(V["source-layer"],Y["source-layer"])&&s.isEqual(V.type,Y.type)){for(X in ro(V.layout,Y.layout,S,O,null,$t.setLayoutProperty),ro(V.paint,Y.paint,S,O,null,$t.setPaintProperty),s.isEqual(V.filter,Y.filter)||S.push({command:$t.setFilter,args:[O,Y.filter]}),s.isEqual(V.minzoom,Y.minzoom)&&s.isEqual(V.maxzoom,Y.maxzoom)||S.push({command:$t.setLayerZoomRange,args:[O,Y.minzoom,Y.maxzoom]}),V)V.hasOwnProperty(X)&&X!=="layout"&&X!=="paint"&&X!=="filter"&&X!=="metadata"&&X!=="minzoom"&&X!=="maxzoom"&&(X.indexOf("paint.")===0?ro(V[X],Y[X],S,O,X.slice(6),$t.setPaintProperty):s.isEqual(V[X],Y[X])||S.push({command:$t.setLayerProperty,args:[O,X,Y[X]]}));for(X in Y)Y.hasOwnProperty(X)&&!V.hasOwnProperty(X)&&X!=="layout"&&X!=="paint"&&X!=="filter"&&X!=="metadata"&&X!=="minzoom"&&X!=="maxzoom"&&(X.indexOf("paint.")===0?ro(V[X],Y[X],S,O,X.slice(6),$t.setPaintProperty):s.isEqual(V[X],Y[X])||S.push({command:$t.setLayerProperty,args:[O,X,Y[X]]}))}else S.push({command:$t.removeLayer,args:[O]}),K=ce[ce.lastIndexOf(O)+1],S.push({command:$t.addLayer,args:[Y,K]})}(m,i.layers,o)}catch(y){console.warn("Unable to compute style diff:",y),o=[{command:$t.setStyle,args:[i]}]}return o}var wr=function(n,i,o){var l=this.boxCells=[],h=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(i/o);for(var m=0;m<this.xCellCount*this.yCellCount;m++)l.push([]),h.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=i,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0};wr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wr.prototype.insert=function(n,i,o,l,h){this._forEachCell(i,o,l,h,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(h)},wr.prototype.insertCircle=function(n,i,o,l){this._forEachCell(i-l,o-l,i+l,o+l,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(i),this.circles.push(o),this.circles.push(l)},wr.prototype._insertBoxCell=function(n,i,o,l,h,m){this.boxCells[h].push(m)},wr.prototype._insertCircleCell=function(n,i,o,l,h,m){this.circleCells[h].push(m)},wr.prototype._query=function(n,i,o,l,h,m){if(o<0||n>this.width||l<0||i>this.height)return!h&&[];var y=[];if(n<=0&&i<=0&&this.width<=o&&this.height<=l){if(h)return!0;for(var v=0;v<this.boxKeys.length;v++)y.push({key:this.boxKeys[v],x1:this.bboxes[4*v],y1:this.bboxes[4*v+1],x2:this.bboxes[4*v+2],y2:this.bboxes[4*v+3]});for(var S=0;S<this.circleKeys.length;S++){var C=this.circles[3*S],L=this.circles[3*S+1],O=this.circles[3*S+2];y.push({key:this.circleKeys[S],x1:C-O,y1:L-O,x2:C+O,y2:L+O})}return m?y.filter(m):y}var V={hitTest:h,seenUids:{box:{},circle:{}}};return this._forEachCell(n,i,o,l,this._queryCell,y,V,m),h?y.length>0:y},wr.prototype._queryCircle=function(n,i,o,l,h){var m=n-o,y=n+o,v=i-o,S=i+o;if(y<0||m>this.width||S<0||v>this.height)return!l&&[];var C=[],L={hitTest:l,circle:{x:n,y:i,radius:o},seenUids:{box:{},circle:{}}};return this._forEachCell(m,v,y,S,this._queryCellCircle,C,L,h),l?C.length>0:C},wr.prototype.query=function(n,i,o,l,h){return this._query(n,i,o,l,!1,h)},wr.prototype.hitTest=function(n,i,o,l,h){return this._query(n,i,o,l,!0,h)},wr.prototype.hitTestCircle=function(n,i,o,l){return this._queryCircle(n,i,o,!0,l)},wr.prototype._queryCell=function(n,i,o,l,h,m,y,v){var S=y.seenUids,C=this.boxCells[h];if(C!==null)for(var L=this.bboxes,O=0,V=C;O<V.length;O+=1){var Y=V[O];if(!S.box[Y]){S.box[Y]=!0;var K=4*Y;if(n<=L[K+2]&&i<=L[K+3]&&o>=L[K+0]&&l>=L[K+1]&&(!v||v(this.boxKeys[Y]))){if(y.hitTest)return m.push(!0),!0;m.push({key:this.boxKeys[Y],x1:L[K],y1:L[K+1],x2:L[K+2],y2:L[K+3]})}}}var X=this.circleCells[h];if(X!==null)for(var te=this.circles,ae=0,le=X;ae<le.length;ae+=1){var ie=le[ae];if(!S.circle[ie]){S.circle[ie]=!0;var ce=3*ie;if(this._circleAndRectCollide(te[ce],te[ce+1],te[ce+2],n,i,o,l)&&(!v||v(this.circleKeys[ie]))){if(y.hitTest)return m.push(!0),!0;var ge=te[ce],Se=te[ce+1],Ae=te[ce+2];m.push({key:this.circleKeys[ie],x1:ge-Ae,y1:Se-Ae,x2:ge+Ae,y2:Se+Ae})}}}},wr.prototype._queryCellCircle=function(n,i,o,l,h,m,y,v){var S=y.circle,C=y.seenUids,L=this.boxCells[h];if(L!==null)for(var O=this.bboxes,V=0,Y=L;V<Y.length;V+=1){var K=Y[V];if(!C.box[K]){C.box[K]=!0;var X=4*K;if(this._circleAndRectCollide(S.x,S.y,S.radius,O[X+0],O[X+1],O[X+2],O[X+3])&&(!v||v(this.boxKeys[K])))return m.push(!0),!0}}var te=this.circleCells[h];if(te!==null)for(var ae=this.circles,le=0,ie=te;le<ie.length;le+=1){var ce=ie[le];if(!C.circle[ce]){C.circle[ce]=!0;var ge=3*ce;if(this._circlesCollide(ae[ge],ae[ge+1],ae[ge+2],S.x,S.y,S.radius)&&(!v||v(this.circleKeys[ce])))return m.push(!0),!0}}},wr.prototype._forEachCell=function(n,i,o,l,h,m,y,v){for(var S=this._convertToXCellCoord(n),C=this._convertToYCellCoord(i),L=this._convertToXCellCoord(o),O=this._convertToYCellCoord(l),V=S;V<=L;V++)for(var Y=C;Y<=O;Y++){var K=this.xCellCount*Y+V;if(h.call(this,n,i,o,l,K,m,y,v))return}},wr.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},wr.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},wr.prototype._circlesCollide=function(n,i,o,l,h,m){var y=l-n,v=h-i,S=o+m;return S*S>y*y+v*v},wr.prototype._circleAndRectCollide=function(n,i,o,l,h,m,y){var v=(m-l)/2,S=Math.abs(n-(l+v));if(S>v+o)return!1;var C=(y-h)/2,L=Math.abs(i-(h+C));if(L>C+o)return!1;if(S<=v||L<=C)return!0;var O=S-v,V=L-C;return O*O+V*V<=o*o};var Gn=s.properties.layout;function nn(n,i,o,l,h){var m=s.identity(new Float32Array(16));return i?(s.identity(m),s.scale(m,m,[1/h,1/h,1]),o||s.rotateZ(m,m,l.angle)):(s.scale(m,m,[l.width/2,-l.height/2,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,n)),m}function ca(n,i,o,l,h){var m=s.identity(new Float32Array(16));return i?(s.multiply(m,m,n),s.scale(m,m,[h,h,1]),o||s.rotateZ(m,m,-l.angle)):(s.scale(m,m,[1,-1,1]),s.translate(m,m,[-1,-1,0]),s.scale(m,m,[2/l.width,2/l.height,1])),m}function Ar(n,i){var o=[n.x,n.y,0,1];I(o,o,i);var l=o[3];return{point:new s.Point(o[0]/l,o[1]/l),signedDistanceFromCamera:l}}function Vi(n,i){var o=n[0]/n[3],l=n[1]/n[3];return o>=-i[0]&&o<=i[0]&&l>=-i[1]&&l<=i[1]}function Ba(n,i,o,l,h,m,y,v){var S=l?n.textSizeData:n.iconSizeData,C=s.evaluateSizeForZoom(S,o.transform.zoom,Gn.properties[l?"text-size":"icon-size"]),L=[256/o.width*2+1,256/o.height*2+1],O=l?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;O.clear();for(var V=n.lineVertexArray,Y=l?n.text.placedSymbolArray:n.icon.placedSymbolArray,K=o.transform.width/o.transform.height,X=!1,te=0;te<Y.length;te++){var ae=Y.get(te);if(ae.hidden||ae.writingMode===s.WritingMode.vertical&&!X)E(ae.numGlyphs,O);else{X=!1;var le=[ae.anchorX,ae.anchorY,0,1];if(s.transformMat4(le,le,i),Vi(le,L)){var ie=.5+le[3]/o.transform.cameraToCenterDistance*.5,ce=s.evaluateSizeForFeature(S,C,ae),ge=y?ce*ie:ce/ie,Se=new s.Point(ae.anchorX,ae.anchorY),Ae=Ar(Se,h).point,et={},at=no(ae,ge,!1,v,i,h,m,n.glyphOffsetArray,V,O,Ae,Se,et,K);X=at.useVertical,(at.notEnoughRoom||X||at.needsFlipping&&no(ae,ge,!0,v,i,h,m,n.glyphOffsetArray,V,O,Ae,Se,et,K).notEnoughRoom)&&E(ae.numGlyphs,O)}else E(ae.numGlyphs,O)}}l?n.text.dynamicLayoutVertexBuffer.updateData(O):n.icon.dynamicLayoutVertexBuffer.updateData(O)}function on(n,i,o,l,h,m,y,v,S,C,L,O){var V=v.glyphStartIndex+v.numGlyphs,Y=v.lineStartIndex,K=v.lineStartIndex+v.lineLength,X=i.getoffsetX(v.glyphStartIndex),te=i.getoffsetX(V-1),ae=lr(n*X,o,l,h,m,y,v.segment,Y,K,S,C,L,O);if(!ae)return null;var le=lr(n*te,o,l,h,m,y,v.segment,Y,K,S,C,L,O);return le?{first:ae,last:le}:null}function pa(n,i,o,l){return n===s.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*l?{useVertical:!0}:(n===s.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function no(n,i,o,l,h,m,y,v,S,C,L,O,V,Y){var K,X=i/24,te=n.lineOffsetX*i,ae=n.lineOffsetY*i;if(n.numGlyphs>1){var le=n.glyphStartIndex+n.numGlyphs,ie=n.lineStartIndex,ce=n.lineStartIndex+n.lineLength,ge=on(X,v,te,ae,o,L,O,n,S,m,V,!1);if(!ge)return{notEnoughRoom:!0};var Se=Ar(ge.first.point,y).point,Ae=Ar(ge.last.point,y).point;if(l&&!o){var et=pa(n.writingMode,Se,Ae,Y);if(et)return et}K=[ge.first];for(var at=n.glyphStartIndex+1;at<le-1;at++)K.push(lr(X*v.getoffsetX(at),te,ae,o,L,O,n.segment,ie,ce,S,m,V,!1));K.push(ge.last)}else{if(l&&!o){var ot=Ar(O,h).point,ke=n.lineStartIndex+n.segment+1,bt=new s.Point(S.getx(ke),S.gety(ke)),tt=Ar(bt,h),Qt=tt.signedDistanceFromCamera>0?tt.point:Xr(O,bt,ot,1,h),wt=pa(n.writingMode,ot,Qt,Y);if(wt)return wt}var cr=lr(X*v.getoffsetX(n.glyphStartIndex),te,ae,o,L,O,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,S,m,V,!1);if(!cr)return{notEnoughRoom:!0};K=[cr]}for(var Ht=0,Tt=K;Ht<Tt.length;Ht+=1){var Er=Tt[Ht];s.addDynamicAttributes(C,Er.point,Er.angle)}return{}}function Xr(n,i,o,l,h){var m=Ar(n.add(n.sub(i)._unit()),h).point,y=o.sub(m);return o.add(y._mult(l/y.mag()))}function lr(n,i,o,l,h,m,y,v,S,C,L,O,V){var Y=l?n-i:n+i,K=Y>0?1:-1,X=0;l&&(K*=-1,X=Math.PI),K<0&&(X+=Math.PI);for(var te=K>0?v+y:v+y+1,ae=te,le=h,ie=h,ce=0,ge=0,Se=Math.abs(Y);ce+ge<=Se;){if((te+=K)<v||te>=S)return null;if(ie=le,(le=O[te])===void 0){var Ae=new s.Point(C.getx(te),C.gety(te)),et=Ar(Ae,L);if(et.signedDistanceFromCamera>0)le=O[te]=et.point;else{var at=te-K;le=Xr(ce===0?m:new s.Point(C.getx(at),C.gety(at)),Ae,ie,Se-ce+1,L)}}ce+=ge,ge=ie.dist(le)}var ot=(Se-ce)/ge,ke=le.sub(ie),bt=ke.mult(ot)._add(ie);return bt._add(ke._unit()._perp()._mult(o*K)),{point:bt,angle:X+Math.atan2(le.y-ie.y,le.x-ie.x),tileDistance:V?{prevTileDistance:te-K===ae?0:C.gettileUnitDistanceFromAnchor(te-K),lastSegmentViewportDistance:Se-ce}:null}}var x=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function E(n,i){for(var o=0;o<n;o++){var l=i.length;i.resize(l+4),i.float32.set(x,3*l)}}function I(n,i,o){var l=i[0],h=i[1];return n[0]=o[0]*l+o[4]*h+o[12],n[1]=o[1]*l+o[5]*h+o[13],n[3]=o[3]*l+o[7]*h+o[15],n}var M=function(n,i,o){i===void 0&&(i=new wr(n.width+200,n.height+200,25)),o===void 0&&(o=new wr(n.width+200,n.height+200,25)),this.transform=n,this.grid=i,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function B(n,i,o){n[i+4]=o?1:0}function D(n,i,o){return i*(s.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}M.prototype.placeCollisionBox=function(n,i,o,l,h){var m=this.projectAndGetPerspectiveRatio(l,n.anchorPointX,n.anchorPointY),y=o*m.perspectiveRatio,v=n.x1*y+m.point.x,S=n.y1*y+m.point.y,C=n.x2*y+m.point.x,L=n.y2*y+m.point.y;return!this.isInsideGrid(v,S,C,L)||!i&&this.grid.hitTest(v,S,C,L,h)?{box:[],offscreen:!1}:{box:[v,S,C,L],offscreen:this.isOffscreen(v,S,C,L)}},M.prototype.approximateTileDistance=function(n,i,o,l,h){var m=h?1:l/this.pitchfactor,y=n.lastSegmentViewportDistance*o;return n.prevTileDistance+y+(m-1)*y*Math.abs(Math.sin(i))},M.prototype.placeCollisionCircles=function(n,i,o,l,h,m,y,v,S,C,L,O,V){var Y=[],K=this.projectAnchor(S,h.anchorX,h.anchorY),X=v/24,te=h.lineOffsetX*v,ae=h.lineOffsetY*v,le=new s.Point(h.anchorX,h.anchorY),ie=on(X,y,te,ae,!1,Ar(le,C).point,le,h,m,C,{},!0),ce=!1,ge=!1,Se=!0,Ae=K.perspectiveRatio*l,et=1/(l*o),at=0,ot=0;ie&&(at=this.approximateTileDistance(ie.first.tileDistance,ie.first.angle,et,K.cameraDistance,O),ot=this.approximateTileDistance(ie.last.tileDistance,ie.last.angle,et,K.cameraDistance,O));for(var ke=0;ke<n.length;ke+=5){var bt=n[ke],tt=n[ke+1],Qt=n[ke+2],wt=n[ke+3];if(!ie||wt<-at||wt>ot)B(n,ke,!1);else{var cr=this.projectPoint(S,bt,tt),Ht=Qt*Ae;if(Y.length>0){var Tt=cr.x-Y[Y.length-4],Er=cr.y-Y[Y.length-3];if(Ht*Ht*2>Tt*Tt+Er*Er&&ke+8<n.length){var Wi=n[ke+8];if(Wi>-at&&Wi<ot){B(n,ke,!1);continue}}}var Ki=ke/5;Y.push(cr.x,cr.y,Ht,Ki),B(n,ke,!0);var Oo=cr.x-Ht,ho=cr.y-Ht,_i=cr.x+Ht,sn=cr.y+Ht;if(Se=Se&&this.isOffscreen(Oo,ho,_i,sn),ge=ge||this.isInsideGrid(Oo,ho,_i,sn),!i&&this.grid.hitTestCircle(cr.x,cr.y,Ht,V)){if(!L)return{circles:[],offscreen:!1};ce=!0}}}return{circles:ce||!ge?[]:Y,offscreen:Se}},M.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var i=[],o=1/0,l=1/0,h=-1/0,m=-1/0,y=0,v=n;y<v.length;y+=1){var S=v[y],C=new s.Point(S.x+100,S.y+100);o=Math.min(o,C.x),l=Math.min(l,C.y),h=Math.max(h,C.x),m=Math.max(m,C.y),i.push(C)}for(var L={},O={},V=0,Y=this.grid.query(o,l,h,m).concat(this.ignoredGrid.query(o,l,h,m));V<Y.length;V+=1){var K=Y[V],X=K.key;if(L[X.bucketInstanceId]===void 0&&(L[X.bucketInstanceId]={}),!L[X.bucketInstanceId][X.featureIndex]){var te=[new s.Point(K.x1,K.y1),new s.Point(K.x2,K.y1),new s.Point(K.x2,K.y2),new s.Point(K.x1,K.y2)];s.polygonIntersectsPolygon(i,te)&&(L[X.bucketInstanceId][X.featureIndex]=!0,O[X.bucketInstanceId]===void 0&&(O[X.bucketInstanceId]=[]),O[X.bucketInstanceId].push(X.featureIndex))}}return O},M.prototype.insertCollisionBox=function(n,i,o,l,h){var m={bucketInstanceId:o,featureIndex:l,collisionGroupID:h};(i?this.ignoredGrid:this.grid).insert(m,n[0],n[1],n[2],n[3])},M.prototype.insertCollisionCircles=function(n,i,o,l,h){for(var m=i?this.ignoredGrid:this.grid,y={bucketInstanceId:o,featureIndex:l,collisionGroupID:h},v=0;v<n.length;v+=4)m.insertCircle(y,n[v],n[v+1],n[v+2])},M.prototype.projectAnchor=function(n,i,o){var l=[i,o,0,1];return I(l,l,n),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/l[3]*.5,cameraDistance:l[3]}},M.prototype.projectPoint=function(n,i,o){var l=[i,o,0,1];return I(l,l,n),new s.Point((l[0]/l[3]+1)/2*this.transform.width+100,(-l[1]/l[3]+1)/2*this.transform.height+100)},M.prototype.projectAndGetPerspectiveRatio=function(n,i,o){var l=[i,o,0,1];return I(l,l,n),{point:new s.Point((l[0]/l[3]+1)/2*this.transform.width+100,(-l[1]/l[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/l[3]*.5}},M.prototype.isOffscreen=function(n,i,o,l){return o<100||n>=this.screenRightBoundary||l<100||i>this.screenBottomBoundary},M.prototype.isInsideGrid=function(n,i,o,l){return o>=0&&n<this.gridRightBoundary&&l>=0&&i<this.gridBottomBoundary};var Z=function(n,i,o,l){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?i:-i))):l&&o?1:0,this.placed=o};Z.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var F=function(n,i,o,l,h){this.text=new Z(n?n.text:null,i,o,h),this.icon=new Z(n?n.icon:null,i,l,h)};F.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var H=function(n,i,o){this.text=n,this.icon=i,this.skipFade=o},q=function(n,i,o,l,h){this.bucketInstanceId=n,this.featureIndex=i,this.sourceLayerIndex=o,this.bucketIndex=l,this.tileID=h},ue=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};ue.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var i=++this.maxGroupID;this.collisionGroups[n]={ID:i,predicate:function(o){return o.collisionGroupID===i}}}return this.collisionGroups[n]};var de=function(n,i,o){this.transform=n.clone(),this.collisionIndex=new M(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new ue(o)};function ne(n,i,o){n.emplaceBack(i?1:0,o?1:0),n.emplaceBack(i?1:0,o?1:0),n.emplaceBack(i?1:0,o?1:0),n.emplaceBack(i?1:0,o?1:0)}de.prototype.placeLayerTile=function(n,i,o,l){var h=i.getBucket(n),m=i.latestFeatureIndex;if(h&&m&&n.id===h.layerIds[0]){var y=i.collisionBoxArray,v=h.layers[0].layout,S=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),C=i.tileSize/s.EXTENT,L=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),O=nn(L,v.get("text-pitch-alignment")==="map",v.get("text-rotation-alignment")==="map",this.transform,D(i,1,this.transform.zoom)),V=nn(L,v.get("icon-pitch-alignment")==="map",v.get("icon-rotation-alignment")==="map",this.transform,D(i,1,this.transform.zoom));this.retainedQueryData[h.bucketInstanceId]=new q(h.bucketInstanceId,m,h.sourceLayerIndex,h.index,i.tileID),this.placeLayerBucket(h,L,O,V,S,C,o,i.holdingForFade(),l,y)}},de.prototype.placeLayerBucket=function(n,i,o,l,h,m,y,v,S,C){var L=n.layers[0].layout,O=s.evaluateSizeForZoom(n.textSizeData,this.transform.zoom,s.properties.layout.properties["text-size"]),V=L.get("text-optional"),Y=L.get("icon-optional"),K=L.get("text-allow-overlap"),X=L.get("icon-allow-overlap"),te=K&&(X||!n.hasIconData()||Y),ae=X&&(K||!n.hasTextData()||V),le=this.collisionGroups.get(n.sourceID);!n.collisionArrays&&C&&n.deserializeCollisionBoxes(C);for(var ie=0;ie<n.symbolInstances.length;ie++){var ce=n.symbolInstances.get(ie);if(!S[ce.crossTileID]){if(v){this.placements[ce.crossTileID]=new H(!1,!1,!1);continue}var ge=!1,Se=!1,Ae=!0,et=null,at=null,ot=null,ke=0,bt=0,tt=n.collisionArrays[ie];tt.textFeatureIndex&&(ke=tt.textFeatureIndex),tt.textBox&&(ge=(et=this.collisionIndex.placeCollisionBox(tt.textBox,L.get("text-allow-overlap"),m,i,le.predicate)).box.length>0,Ae=Ae&&et.offscreen);var Qt=tt.textCircles;if(Qt){var wt=n.text.placedSymbolArray.get(ce.horizontalPlacedTextSymbolIndex),cr=s.evaluateSizeForFeature(n.textSizeData,O,wt);at=this.collisionIndex.placeCollisionCircles(Qt,L.get("text-allow-overlap"),h,m,wt,n.lineVertexArray,n.glyphOffsetArray,cr,i,o,y,L.get("text-pitch-alignment")==="map",le.predicate),ge=L.get("text-allow-overlap")||at.circles.length>0,Ae=Ae&&at.offscreen}tt.iconFeatureIndex&&(bt=tt.iconFeatureIndex),tt.iconBox&&(Se=(ot=this.collisionIndex.placeCollisionBox(tt.iconBox,L.get("icon-allow-overlap"),m,i,le.predicate)).box.length>0,Ae=Ae&&ot.offscreen);var Ht=V||ce.numGlyphVertices===0&&ce.numVerticalGlyphVertices===0,Tt=Y||ce.numIconVertices===0;Ht||Tt?Tt?Ht||(Se=Se&&ge):ge=Se&&ge:Se=ge=Se&&ge,ge&&et&&this.collisionIndex.insertCollisionBox(et.box,L.get("text-ignore-placement"),n.bucketInstanceId,ke,le.ID),Se&&ot&&this.collisionIndex.insertCollisionBox(ot.box,L.get("icon-ignore-placement"),n.bucketInstanceId,bt,le.ID),ge&&at&&this.collisionIndex.insertCollisionCircles(at.circles,L.get("text-ignore-placement"),n.bucketInstanceId,ke,le.ID),this.placements[ce.crossTileID]=new H(ge||te,Se||ae,Ae||n.justReloaded),S[ce.crossTileID]=!0}}n.justReloaded=!1},de.prototype.commit=function(n,i){this.commitTime=i;var o=!1,l=n&&this.fadeDuration!==0?(this.commitTime-n.commitTime)/this.fadeDuration:1,h=n?n.opacities:{};for(var m in this.placements){var y=this.placements[m],v=h[m];v?(this.opacities[m]=new F(v,l,y.text,y.icon),o=o||y.text!==v.text.placed||y.icon!==v.icon.placed):(this.opacities[m]=new F(null,l,y.text,y.icon,y.skipFade),o=o||y.text||y.icon)}for(var S in h){var C=h[S];if(!this.opacities[S]){var L=new F(C,l,!1,!1);L.isHidden()||(this.opacities[S]=L,o=o||C.text.placed||C.icon.placed)}}o?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:i)},de.prototype.updateLayerOpacities=function(n,i){for(var o={},l=0,h=i;l<h.length;l+=1){var m=h[l],y=m.getBucket(n);y&&m.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,o,m.collisionBoxArray)}},de.prototype.updateBucketOpacities=function(n,i,o){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasCollisionBoxData()&&n.collisionBox.collisionVertexArray.clear(),n.hasCollisionCircleData()&&n.collisionCircle.collisionVertexArray.clear();var l=n.layers[0].layout,h=new F(null,0,!1,!1,!0),m=l.get("text-allow-overlap"),y=l.get("icon-allow-overlap"),v=new F(null,0,m&&(y||!n.hasIconData()||l.get("icon-optional")),y&&(m||!n.hasTextData()||l.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasCollisionBoxData()||n.hasCollisionCircleData())&&n.deserializeCollisionBoxes(o);for(var S=0;S<n.symbolInstances.length;S++){var C=n.symbolInstances.get(S),L=i[C.crossTileID],O=this.opacities[C.crossTileID];L?O=h:O||(O=v,this.opacities[C.crossTileID]=O),i[C.crossTileID]=!0;var V=C.numGlyphVertices>0||C.numVerticalGlyphVertices>0,Y=C.numIconVertices>0;if(V){for(var K=Ye(O.text),X=(C.numGlyphVertices+C.numVerticalGlyphVertices)/4,te=0;te<X;te++)n.text.opacityVertexArray.emplaceBack(K);n.text.placedSymbolArray.get(C.horizontalPlacedTextSymbolIndex).hidden=O.text.isHidden(),C.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).hidden=O.text.isHidden())}if(Y){for(var ae=Ye(O.icon),le=0;le<C.numIconVertices/4;le++)n.icon.opacityVertexArray.emplaceBack(ae);n.icon.placedSymbolArray.get(S).hidden=O.icon.isHidden()}if(n.hasCollisionBoxData()||n.hasCollisionCircleData()){var ie=n.collisionArrays[S];if(ie){ie.textBox&&ne(n.collisionBox.collisionVertexArray,O.text.placed,!1),ie.iconBox&&ne(n.collisionBox.collisionVertexArray,O.icon.placed,!1);var ce=ie.textCircles;if(ce&&n.hasCollisionCircleData())for(var ge=0;ge<ce.length;ge+=5){var Se=L||ce[ge+4]===0;ne(n.collisionCircle.collisionVertexArray,O.text.placed,Se)}}}}n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasCollisionBoxData()&&n.collisionBox.collisionVertexBuffer&&n.collisionBox.collisionVertexBuffer.updateData(n.collisionBox.collisionVertexArray),n.hasCollisionCircleData()&&n.collisionCircle.collisionVertexBuffer&&n.collisionCircle.collisionVertexBuffer.updateData(n.collisionCircle.collisionVertexArray)},de.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration},de.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},de.prototype.stillRecent=function(n){return this.commitTime+this.fadeDuration>n},de.prototype.setStale=function(){this.stale=!0};var me=Math.pow(2,25),Te=Math.pow(2,24),Ue=Math.pow(2,17),Pe=Math.pow(2,16),Ve=Math.pow(2,9),Ke=Math.pow(2,8),Xe=Math.pow(2,1);function Ye(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var i=n.placed?1:0,o=Math.floor(127*n.opacity);return o*me+i*Te+o*Ue+i*Pe+o*Ve+i*Ke+o*Xe+i}var He=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};He.prototype.continuePlacement=function(n,i,o,l,h){for(;this._currentTileIndex<n.length;){var m=n[this._currentTileIndex];if(i.placeLayerTile(l,m,o,this._seenCrossTileIDs),this._currentTileIndex++,h())return!0}};var ht=function(n,i,o,l,h,m){this.placement=new de(n,h,m),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=l,this._done=!1};ht.prototype.isDone=function(){return this._done},ht.prototype.continuePlacement=function(n,i,o){for(var l=this,h=s.browser.now(),m=function(){var S=s.browser.now()-h;return!l._forceFullPlacement&&S>2};this._currentPlacementIndex>=0;){var y=i[n[this._currentPlacementIndex]],v=this.placement.collisionIndex.transform.zoom;if(y.type==="symbol"&&(!y.minzoom||y.minzoom<=v)&&(!y.maxzoom||y.maxzoom>v)){if(this._inProgressLayer||(this._inProgressLayer=new He),this._inProgressLayer.continuePlacement(o[y.source],this.placement,this._showCollisionBoxes,y,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ht.prototype.commit=function(n,i){return this.placement.commit(n,i),this.placement};var dt=512/s.EXTENT/2,St=function(n,i,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var l=0;l<i.length;l++){var h=i.get(l),m=h.key;this.indexedSymbolInstances[m]||(this.indexedSymbolInstances[m]=[]),this.indexedSymbolInstances[m].push({crossTileID:h.crossTileID,coord:this.getScaledCoordinates(h,n)})}};St.prototype.getScaledCoordinates=function(n,i){var o=i.canonical.z-this.tileID.canonical.z,l=dt/Math.pow(2,o);return{x:Math.floor((i.canonical.x*s.EXTENT+n.anchorX)*l),y:Math.floor((i.canonical.y*s.EXTENT+n.anchorY)*l)}},St.prototype.findMatches=function(n,i,o){for(var l=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z),h=0;h<n.length;h++){var m=n.get(h);if(!m.crossTileID){var y=this.indexedSymbolInstances[m.key];if(y)for(var v=this.getScaledCoordinates(m,i),S=0,C=y;S<C.length;S+=1){var L=C[S];if(Math.abs(L.coord.x-v.x)<=l&&Math.abs(L.coord.y-v.y)<=l&&!o[L.crossTileID]){o[L.crossTileID]=!0,m.crossTileID=L.crossTileID;break}}}}};var Lt=function(){this.maxCrossTileID=0};Lt.prototype.generate=function(){return++this.maxCrossTileID};var xt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};xt.prototype.handleWrapJump=function(n){var i=Math.round((n-this.lng)/360);if(i!==0)for(var o in this.indexes){var l=this.indexes[o],h={};for(var m in l){var y=l[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+i),h[y.tileID.key]=y}this.indexes[o]=h}this.lng=n},xt.prototype.addBucket=function(n,i,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===i.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var l=0;l<i.symbolInstances.length;l++)i.symbolInstances.get(l).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var h=this.usedCrossTileIDs[n.overscaledZ];for(var m in this.indexes){var y=this.indexes[m];if(Number(m)>n.overscaledZ)for(var v in y){var S=y[v];S.tileID.isChildOf(n)&&S.findMatches(i.symbolInstances,n,h)}else{var C=y[n.scaledTo(Number(m)).key];C&&C.findMatches(i.symbolInstances,n,h)}}for(var L=0;L<i.symbolInstances.length;L++){var O=i.symbolInstances.get(L);O.crossTileID||(O.crossTileID=o.generate(),h[O.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new St(n,i.symbolInstances,i.bucketInstanceId),!0},xt.prototype.removeBucketCrossTileIDs=function(n,i){for(var o in i.indexedSymbolInstances)for(var l=0,h=i.indexedSymbolInstances[o];l<h.length;l+=1){var m=h[l];delete this.usedCrossTileIDs[n][m.crossTileID]}},xt.prototype.removeStaleBuckets=function(n){var i=!1;for(var o in this.indexes){var l=this.indexes[o];for(var h in l)n[l[h].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,l[h]),delete l[h],i=!0)}return i};var Kt=function(){this.layerIndexes={},this.crossTileIDs=new Lt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Kt.prototype.addLayer=function(n,i,o){var l=this.layerIndexes[n.id];l===void 0&&(l=this.layerIndexes[n.id]=new xt);var h=!1,m={};l.handleWrapJump(o);for(var y=0,v=i;y<v.length;y+=1){var S=v[y],C=S.getBucket(n);C&&n.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),l.addBucket(S.tileID,C,this.crossTileIDs)&&(h=!0),m[C.bucketInstanceId]=!0)}return l.removeStaleBuckets(m)&&(h=!0),h},Kt.prototype.pruneUnusedLayers=function(n){var i={};for(var o in n.forEach(function(l){i[l]=!0}),this.layerIndexes)i[o]||delete this.layerIndexes[o]};var Qe=function(n,i){return s.emitValidationErrors(n,i&&i.filter(function(o){return o.identifier!=="source.canvas"}))},Rt=s.pick($t,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Xt=s.pick($t,["setCenter","setZoom","setBearing","setPitch"]),Ut=function(n){function i(o,l){var h=this;l===void 0&&(l={}),n.call(this),this.map=o,this.dispatcher=new Nr((to||(to=new Et),to),this),this.imageManager=new je,this.glyphManager=new Pr(o._transformRequest,l.localIdeographFontFamily),this.lineAtlas=new En(256,512),this.crossTileSymbolIndex=new Kt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());var m=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(y){for(var v in m.dispatcher.broadcast("loadRTLTextPlugin",y.pluginURL,y.completionCallback),m.sourceCaches)m.sourceCaches[v].reload()}),this.on("data",function(y){if(y.dataType==="source"&&y.sourceDataType==="metadata"){var v=h.sourceCaches[y.sourceId];if(v){var S=v.getSource();if(S&&S.vectorLayerIds)for(var C in h._layers){var L=h._layers[C];L.source===S.id&&h._validateLayer(L)}}}})}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(o,l){var h=this;l===void 0&&(l={}),this.fire(new s.Event("dataloading",{dataType:"style"}));var m=typeof l.validate=="boolean"?l.validate:!s.isMapboxURL(o);o=s.normalizeStyleURL(o,l.accessToken);var y=this.map._transformRequest(o,s.ResourceType.Style);this._request=s.getJSON(y,function(v,S){h._request=null,v?h.fire(new s.ErrorEvent(v)):S&&h._load(S,m)})},i.prototype.loadJSON=function(o,l){var h=this;l===void 0&&(l={}),this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.browser.frame(function(){h._request=null,h._load(o,l.validate!==!1)})},i.prototype._load=function(o,l){var h=this;if(!l||!Qe(this,s.validateStyle(o))){for(var m in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(m,o.sources[m],{validate:!1});o.sprite?this._spriteRequest=function(L,O,V){var Y,K,X,te=s.browser.devicePixelRatio>1?"@2x":"",ae=s.getJSON(O(s.normalizeSpriteURL(L,te,".json"),s.ResourceType.SpriteJSON),function(ce,ge){ae=null,X||(X=ce,Y=ge,ie())}),le=s.getImage(O(s.normalizeSpriteURL(L,te,".png"),s.ResourceType.SpriteImage),function(ce,ge){le=null,X||(X=ce,K=ge,ie())});function ie(){if(X)V(X);else if(Y&&K){var ce=s.browser.getImageData(K),ge={};for(var Se in Y){var Ae=Y[Se],et=Ae.width,at=Ae.height,ot=Ae.x,ke=Ae.y,bt=Ae.sdf,tt=Ae.pixelRatio,Qt=new s.RGBAImage({width:et,height:at});s.RGBAImage.copy(ce,Qt,{x:ot,y:ke},{x:0,y:0},{width:et,height:at}),ge[Se]={data:Qt,pixelRatio:tt,sdf:bt}}V(null,ge)}}return{cancel:function(){ae&&(ae.cancel(),ae=null),le&&(le.cancel(),le=null)}}}(o.sprite,this.map._transformRequest,function(L,O){if(h._spriteRequest=null,L)h.fire(new s.ErrorEvent(L));else if(O)for(var V in O)h.imageManager.addImage(V,O[V]);h.imageManager.setLoaded(!0),h.fire(new s.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var y=Gr(this.stylesheet.layers);this._order=y.map(function(L){return L.id}),this._layers={};for(var v=0,S=y;v<S.length;v+=1){var C=S[v];(C=s.createStyleLayer(C)).setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Lr(this.stylesheet.light),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}},i.prototype._validateLayer=function(o){var l=this.sourceCaches[o.source];if(l){var h=o.sourceLayer;if(h){var m=l.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new s.ErrorEvent(new Error('Source layer "'+h+'" does not exist on source "'+m.id+'" as specified by style layer "'+o.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(o){for(var l=[],h=0,m=o;h<m.length;h+=1){var y=m[h],v=this._layers[y];v.type!=="custom"&&l.push(v.serialize())}return l},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var l in this._layers)if(this._layers[l].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(o){if(this._loaded){var l=this._changed;if(this._changed){var h=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);for(var y in(h.length||m.length)&&this._updateWorkerLayers(h,m),this._updatedSources){var v=this._updatedSources[y];v==="reload"?this._reloadSource(y):v==="clear"&&this._clearSource(y)}for(var S in this._updatedPaintProps)this._layers[S].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}for(var C in this.sourceCaches)this.sourceCaches[C].used=!1;for(var L=0,O=this._order;L<O.length;L+=1){var V=O[L],Y=this._layers[V];Y.recalculate(o),!Y.isHidden(o.zoom)&&Y.source&&(this.sourceCaches[Y.source].used=!0)}this.light.recalculate(o),this.z=o.zoom,l&&this.fire(new s.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(o,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:l})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(o){var l=this;if(this._checkLoaded(),Qe(this,s.validateStyle(o)))return!1;(o=s.clone(o)).layers=Gr(o.layers);var h=Dn(this.serialize(),o).filter(function(y){return!(y.command in Xt)});if(h.length===0)return!1;var m=h.filter(function(y){return!(y.command in Rt)});if(m.length>0)throw new Error("Unimplemented: "+m.map(function(y){return y.command}).join(", ")+".");return h.forEach(function(y){y.command!=="setTransition"&&l[y.command].apply(l,y.args)}),this.stylesheet=o,!0},i.prototype.addImage=function(o,l){if(this.getImage(o))return this.fire(new s.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,l),this.fire(new s.Event("data",{dataType:"style"}))},i.prototype.getImage=function(o){return this.imageManager.getImage(o)},i.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new s.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this.fire(new s.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(o,l,h){var m=this;if(h===void 0&&(h={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(l).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(l.type)>=0)||!this._validate(s.validateStyle.source,"sources."+o,l,null,h)){this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);var y=this.sourceCaches[o]=new It(o,l,this.dispatcher);y.style=this,y.setEventedParent(this,function(){return{isSourceLoaded:m.loaded(),source:y.serialize(),sourceId:o}}),y.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var l in this._layers)if(this._layers[l].source===o)return this.fire(new s.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+l+'" is using it.')));var h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.clearTiles(),h.onRemove&&h.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(o,l){this._checkLoaded(),this.sourceCaches[o].getSource().setData(l),this._changed=!0},i.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},i.prototype.addLayer=function(o,l,h){h===void 0&&(h={}),this._checkLoaded();var m=o.id;if(this.getLayer(m))this.fire(new s.ErrorEvent(new Error('Layer with id "'+m+'" already exists on this map')));else{var y;if(o.type==="custom"){if(Qe(this,s.validateCustomStyleLayer(o)))return;y=s.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(m,o.source),o=s.clone(o),o=s.extend(o,{source:m})),this._validate(s.validateStyle.layer,"layers."+m,o,{arrayIndex:-1},h))return;y=s.createStyleLayer(o),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}var v=l?this._order.indexOf(l):this._order.length;if(l&&v===-1)this.fire(new s.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.')));else{if(this._order.splice(v,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){var S=this._removedLayers[m];delete this._removedLayers[m],S.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}},i.prototype.moveLayer=function(o,l){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==l){var h=this._order.indexOf(o);this._order.splice(h,1);var m=l?this._order.indexOf(l):this._order.length;l&&m===-1?this.fire(new s.ErrorEvent(new Error('Layer with id "'+l+'" does not exist on this map.'))):(this._order.splice(m,0,o),this._layerOrderChanged=!0)}}else this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(o){this._checkLoaded();var l=this._layers[o];if(l){l.setEventedParent(null);var h=this._order.indexOf(o);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=l,delete this._layers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],l.onRemove&&l.onRemove(this.map)}else this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(o){return this._layers[o]},i.prototype.setLayerZoomRange=function(o,l,h){this._checkLoaded();var m=this.getLayer(o);m?m.minzoom===l&&m.maxzoom===h||(l!=null&&(m.minzoom=l),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(o,l,h){h===void 0&&(h={}),this._checkLoaded();var m=this.getLayer(o);if(m){if(!s.isEqual(m.filter,l))return l==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(s.validateStyle.filter,"layers."+m.id+".filter",l,null,h)||(m.filter=s.clone(l),this._updateLayer(m)))}else this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(o){return s.clone(this.getLayer(o).filter)},i.prototype.setLayoutProperty=function(o,l,h,m){m===void 0&&(m={}),this._checkLoaded();var y=this.getLayer(o);y?s.isEqual(y.getLayoutProperty(l),h)||(y.setLayoutProperty(l,h,m),this._updateLayer(y)):this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(o,l){var h=this.getLayer(o);if(h)return h.getLayoutProperty(l);this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(o,l,h,m){m===void 0&&(m={}),this._checkLoaded();var y=this.getLayer(o);y?s.isEqual(y.getPaintProperty(l),h)||(y.setPaintProperty(l,h,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new s.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(o,l){return this.getLayer(o).getPaintProperty(l)},i.prototype.setFeatureState=function(o,l){this._checkLoaded();var h=o.source,m=o.sourceLayer,y=this.sourceCaches[h],v=parseInt(o.id,10);if(y!==void 0){var S=y.getSource().type;S==="geojson"&&m?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?isNaN(v)||v<0?this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):y.setFeatureState(m,v,l):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error("The source '"+h+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(o,l){this._checkLoaded();var h=o.source,m=this.sourceCaches[h];if(m!==void 0){var y=m.getSource().type,v=y==="vector"?o.sourceLayer:void 0,S=parseInt(o.id,10);y!=="vector"||v?o.id&&isNaN(S)||S<0?this.fire(new s.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!l||o.id?m.removeFeatureState(v,S,l):this.fire(new s.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error("The source '"+h+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(o){this._checkLoaded();var l=o.source,h=o.sourceLayer,m=this.sourceCaches[l],y=parseInt(o.id,10);if(m!==void 0)if(m.getSource().type!=="vector"||h){if(!(isNaN(y)||y<0))return m.getFeatureState(h,y);this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new s.ErrorEvent(new Error("The source '"+l+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},i.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(o){for(var l=this,h=function(ot){return l._layers[ot].type==="fill-extrusion"},m={},y=[],v=this._order.length-1;v>=0;v--){var S=this._order[v];if(h(S)){m[S]=v;for(var C=0,L=o;C<L.length;C+=1){var O=L[C][S];if(O)for(var V=0,Y=O;V<Y.length;V+=1){var K=Y[V];y.push(K)}}}}y.sort(function(ot,ke){return ke.intersectionZ-ot.intersectionZ});for(var X=[],te=this._order.length-1;te>=0;te--){var ae=this._order[te];if(h(ae))for(var le=y.length-1;le>=0;le--){var ie=y[le].feature;if(m[ie.layer.id]<te)break;X.push(ie),y.pop()}else for(var ce=0,ge=o;ce<ge.length;ce+=1){var Se=ge[ce][ae];if(Se)for(var Ae=0,et=Se;Ae<et.length;Ae+=1){var at=et[Ae];X.push(at.feature)}}}return X},i.prototype.queryRenderedFeatures=function(o,l,h){l&&l.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",l.filter);var m={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var y=0,v=l.layers;y<v.length;y+=1){var S=v[y],C=this._layers[S];if(!C)return this.fire(new s.ErrorEvent(new Error("The layer '"+S+"' does not exist in the map's style and cannot be queried for features."))),[];m[C.source]=!0}}var L=[];for(var O in this.sourceCaches)l.layers&&!m[O]||L.push(fn(this.sourceCaches[O],this._layers,o,l,h));return this.placement&&L.push(function(V,Y,K,X,te,ae){for(var le={},ie=te.queryRenderedSymbols(K),ce=[],ge=0,Se=Object.keys(ie).map(Number);ge<Se.length;ge+=1){var Ae=Se[ge];ce.push(ae[Ae])}ce.sort(kn);for(var et=function(){var tt=ot[at],Qt=tt.featureIndex.lookupSymbolFeatures(ie[tt.bucketInstanceId],tt.bucketIndex,tt.sourceLayerIndex,X.filter,X.layers,V);for(var wt in Qt){var cr=le[wt]=le[wt]||[],Ht=Qt[wt];Ht.sort(function(Ki,Oo){var ho=tt.featureSortOrder;if(ho){var _i=ho.indexOf(Ki.featureIndex);return ho.indexOf(Oo.featureIndex)-_i}return Oo.featureIndex-Ki.featureIndex});for(var Tt=0,Er=Ht;Tt<Er.length;Tt+=1){var Wi=Er[Tt];cr.push(Wi)}}},at=0,ot=ce;at<ot.length;at+=1)et();var ke=function(tt){le[tt].forEach(function(Qt){var wt=Qt.feature,cr=V[tt],Ht=Y[cr.source].getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=Ht})};for(var bt in le)ke(bt);return le}(this._layers,this.sourceCaches,o,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)},i.prototype.querySourceFeatures=function(o,l){l&&l.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",l.filter);var h=this.sourceCaches[o];return h?function(m,y){for(var v=m.getRenderableIds().map(function(Y){return m.getTileByID(Y)}),S=[],C={},L=0;L<v.length;L++){var O=v[L],V=O.tileID.canonical.key;C[V]||(C[V]=!0,O.querySourceFeatures(S,y))}return S}(h,l):[]},i.prototype.addSourceType=function(o,l,h){return i.getSourceType(o)?h(new Error('A source type called "'+o+'" already exists.')):(i.setSourceType(o,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:l.workerSourceURL},h):h(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(o,l){l===void 0&&(l={}),this._checkLoaded();var h=this.light.getLight(),m=!1;for(var y in o)if(!s.isEqual(o[y],h[y])){m=!0;break}if(m){var v={now:s.browser.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,l),this.light.updateTransitions(v)}},i.prototype._validate=function(o,l,h,m,y){return y===void 0&&(y={}),(!y||y.validate!==!1)&&Qe(this,o.call(s.validateStyle,s.extend({key:l,style:this.serialize(),value:h,styleSpec:s.styleSpec},m)))},i.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[o].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},i.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},i.prototype._updateSources=function(o){for(var l in this.sourceCaches)this.sourceCaches[l].update(o)},i.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},i.prototype._updatePlacement=function(o,l,h,m){for(var y=!1,v=!1,S={},C=0,L=this._order;C<L.length;C+=1){var O=L[C],V=this._layers[O];if(V.type==="symbol"){if(!S[V.source]){var Y=this.sourceCaches[V.source];S[V.source]=Y.getRenderableIds(!0).map(function(ce){return Y.getTileByID(ce)}).sort(function(ce,ge){return ge.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ge.tileID)?-1:1)})}var K=this.crossTileSymbolIndex.addLayer(V,S[V.source],o.center.lng);y=y||K}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var X=this._layerOrderChanged||h===0;if((X||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.browser.now()))&&(this.pauseablePlacement=new ht(o,this._order,X,l,h,m),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,S),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,s.browser.now()),v=!0),y&&this.pauseablePlacement.placement.setStale()),v||y)for(var te=0,ae=this._order;te<ae.length;te+=1){var le=ae[te],ie=this._layers[le];ie.type==="symbol"&&this.placement.updateLayerOpacities(ie,S[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},i.prototype.getImages=function(o,l,h){this.imageManager.getImages(l.icons,h)},i.prototype.getGlyphs=function(o,l,h){this.glyphManager.getGlyphs(l.stacks,h)},i.prototype.getResource=function(o,l,h){return s.makeRequest(l,h)},i}(s.Evented);Ut.getSourceType=function(n){return Tr[n]},Ut.setSourceType=function(n,i){Tr[n]=i},Ut.registerForPluginAvailability=s.registerForPluginAvailability;var zr=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),Rr=it(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ir=it(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Bn=it(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ei=it(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
varying vec3 v_data;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
varying vec3 v_data;void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),di=it("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Co=it(`#pragma mapbox: define highp float weight
uniform highp float u_intensity;varying vec2 v_extrude;
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Po=it(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),io=it("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),zo=it("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ni=it("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ji=it(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),On=it(`#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
varying vec2 v_pos;void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Xn=it(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),mi=it(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ki=it(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}`),oo=it(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}`),an=it(`uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Jt=it(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Hr=it(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$r=it(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0
#define scale 0.015873016
attribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Jr=it(`#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0
#define scale 0.015873016
attribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qi=it(`uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0
attribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}`),Hn=it(`uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0
attribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Nt=it(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ti=it(`uniform sampler2D u_texture;
#pragma mapbox: define lowp float opacity
varying vec2 v_tex;varying float v_fade_opacity;void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;
#pragma mapbox: define lowp float opacity
uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),vt=it(`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO
uniform bool u_is_halo;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`);function it(n,i){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,l={};return{fragmentSource:n=n.replace(o,function(h,m,y,v,S){return l[S]=!0,m==="define"?`
#ifndef HAS_UNIFORM_u_`+S+`
varying `+y+" "+v+" "+S+`;
#else
uniform `+y+" "+v+" u_"+S+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+S+`
    `+y+" "+v+" "+S+" = u_"+S+`;
#endif
`}),vertexSource:i=i.replace(o,function(h,m,y,v,S){var C=v==="float"?"vec2":"vec4",L=S.match(/color/)?"color":C;return l[S]?m==="define"?`
#ifndef HAS_UNIFORM_u_`+S+`
uniform lowp float a_`+S+`_t;
attribute `+y+" "+C+" a_"+S+`;
varying `+y+" "+v+" "+S+`;
#else
uniform `+y+" "+v+" u_"+S+`;
#endif
`:L==="vec4"?`
#ifndef HAS_UNIFORM_u_`+S+`
    `+S+" = a_"+S+`;
#else
    `+y+" "+v+" "+S+" = u_"+S+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+S+`
    `+S+" = unpack_mix_"+L+"(a_"+S+", a_"+S+`_t);
#else
    `+y+" "+v+" "+S+" = u_"+S+`;
#endif
`:m==="define"?`
#ifndef HAS_UNIFORM_u_`+S+`
uniform lowp float a_`+S+`_t;
attribute `+y+" "+C+" a_"+S+`;
#else
uniform `+y+" "+v+" u_"+S+`;
#endif
`:L==="vec4"?`
#ifndef HAS_UNIFORM_u_`+S+`
    `+y+" "+v+" "+S+" = a_"+S+`;
#else
    `+y+" "+v+" "+S+" = u_"+S+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+S+`
    `+y+" "+v+" "+S+" = unpack_mix_"+L+"(a_"+S+", a_"+S+`_t);
#else
    `+y+" "+v+" "+S+" = u_"+S+`;
#endif
`})}}var Us=Object.freeze({prelude:Rr,background:Ir,backgroundPattern:Bn,circle:ei,clippingMask:di,heatmap:Co,heatmapTexture:Po,collisionBox:io,collisionCircle:zo,debug:Ni,fill:ji,fillOutline:On,fillOutlinePattern:Xn,fillPattern:mi,fillExtrusion:ki,fillExtrusionPattern:oo,extrusionTexture:an,hillshadePrepare:Jt,hillshade:Hr,line:$r,lineGradient:Jr,linePattern:qi,lineSDF:Hn,raster:Nt,symbolIcon:ti,symbolSDF:vt}),ha=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ha.prototype.bind=function(n,i,o,l,h,m,y,v){this.context=n;for(var S=this.boundPaintVertexBuffers.length!==l.length,C=0;!S&&C<l.length;C++)this.boundPaintVertexBuffers[C]!==l[C]&&(S=!0);var L=!this.vao||this.boundProgram!==i||this.boundLayoutVertexBuffer!==o||S||this.boundIndexBuffer!==h||this.boundVertexOffset!==m||this.boundDynamicVertexBuffer!==y||this.boundDynamicVertexBuffer2!==v;!n.extVertexArrayObject||L?this.freshBind(i,o,l,h,m,y,v):(n.bindVertexArrayOES.set(this.vao),y&&y.bind(),h&&h.dynamicDraw&&h.bind(),v&&v.bind())},ha.prototype.freshBind=function(n,i,o,l,h,m,y){var v,S=n.numAttributes,C=this.context,L=C.gl;if(C.extVertexArrayObject)this.vao&&this.destroy(),this.vao=C.extVertexArrayObject.createVertexArrayOES(),C.bindVertexArrayOES.set(this.vao),v=0,this.boundProgram=n,this.boundLayoutVertexBuffer=i,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=l,this.boundVertexOffset=h,this.boundDynamicVertexBuffer=m,this.boundDynamicVertexBuffer2=y;else{v=C.currentNumAttributes||0;for(var O=S;O<v;O++)L.disableVertexAttribArray(O)}i.enableAttributes(L,n);for(var V=0,Y=o;V<Y.length;V+=1)Y[V].enableAttributes(L,n);m&&m.enableAttributes(L,n),y&&y.enableAttributes(L,n),i.bind(),i.setVertexAttribPointers(L,n,h);for(var K=0,X=o;K<X.length;K+=1){var te=X[K];te.bind(),te.setVertexAttribPointers(L,n,h)}m&&(m.bind(),m.setVertexAttribPointers(L,n,h)),l&&l.bind(),y&&(y.bind(),y.setVertexAttribPointers(L,n,h)),C.currentNumAttributes=S},ha.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Go=function(n,i,o,l,h){var m=n.gl;this.program=m.createProgram();var y=o.defines().concat("#define DEVICE_PIXEL_RATIO "+s.browser.devicePixelRatio.toFixed(1));h&&y.push("#define OVERDRAW_INSPECTOR;");var v=y.concat(Rr.fragmentSource,i.fragmentSource).join(`
`),S=y.concat(Rr.vertexSource,i.vertexSource).join(`
`),C=m.createShader(m.FRAGMENT_SHADER);m.shaderSource(C,v),m.compileShader(C),m.attachShader(this.program,C);var L=m.createShader(m.VERTEX_SHADER);m.shaderSource(L,S),m.compileShader(L),m.attachShader(this.program,L);for(var O=o.layoutAttributes||[],V=0;V<O.length;V++)m.bindAttribLocation(this.program,V,O[V].name);m.linkProgram(this.program),this.numAttributes=m.getProgramParameter(this.program,m.ACTIVE_ATTRIBUTES),this.attributes={};for(var Y={},K=0;K<this.numAttributes;K++){var X=m.getActiveAttrib(this.program,K);X&&(this.attributes[X.name]=m.getAttribLocation(this.program,X.name))}for(var te=m.getProgramParameter(this.program,m.ACTIVE_UNIFORMS),ae=0;ae<te;ae++){var le=m.getActiveUniform(this.program,ae);le&&(Y[le.name]=m.getUniformLocation(this.program,le.name))}this.fixedUniforms=l(n,Y),this.binderUniforms=o.getUniforms(n,Y)};function Oa(n,i,o){var l=1/D(o,1,i.transform.tileZoom),h=Math.pow(2,o.tileID.overscaledZ),m=o.tileSize*Math.pow(2,i.transform.tileZoom)/h,y=m*(o.tileID.canonical.x+o.tileID.wrap*h),v=m*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[s.browser.devicePixelRatio,l,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[y>>16,v>>16],u_pixel_coord_lower:[65535&y,65535&v]}}Go.prototype.draw=function(n,i,o,l,h,m,y,v,S,C,L,O,V,Y,K,X){var te,ae=n.gl;for(var le in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(l),n.setColorMode(h),n.setCullFace(m),this.fixedUniforms)this.fixedUniforms[le].set(y[le]);Y&&Y.setUniforms(n,this.binderUniforms,O,{zoom:V});for(var ie=(te={},te[ae.LINES]=2,te[ae.TRIANGLES]=3,te[ae.LINE_STRIP]=1,te)[i],ce=0,ge=L.get();ce<ge.length;ce+=1){var Se=ge[ce],Ae=Se.vaos||(Se.vaos={});(Ae[v]||(Ae[v]=new ha)).bind(n,this,S,Y?Y.getPaintVertexBuffers():[],C,Se.vertexOffset,K,X),ae.drawElements(i,Se.primitiveLength*ie,ae.UNSIGNED_SHORT,Se.primitiveOffset*ie*2)}};var Fa=function(n,i,o){var l=i.style.light,h=l.properties.get("position"),m=[h.x,h.y,h.z],y=s.create();l.properties.get("anchor")==="viewport"&&s.fromRotation(y,-i.transform.angle),s.transformMat3(m,m,y);var v=l.properties.get("color");return{u_matrix:n,u_lightpos:m,u_lightintensity:l.properties.get("intensity"),u_lightcolor:[v.r,v.g,v.b],u_vertical_gradient:+o}},fa=function(n,i,o,l,h,m){return s.extend(Fa(n,i,o),Oa(h,i,m),{u_height_factor:-Math.pow(2,l.overscaledZ)/m.tileSize/8})},da=function(n,i,o){var l=s.create$1();s.ortho(l,0,n.width,n.height,0,0,1);var h=n.context.gl;return{u_matrix:l,u_world:[h.drawingBufferWidth,h.drawingBufferHeight],u_image:o,u_opacity:i}},Xo=function(n){return{u_matrix:n}},Fn=function(n,i,o,l){return s.extend(Xo(n),Oa(o,i,l))},ko=function(n,i){return{u_matrix:n,u_world:i}},Ho=function(n,i,o,l,h){return s.extend(Fn(n,i,o,l),{u_world:h})},Mi=function(n,i,o,l){var h,m,y=n.transform;if(l.paint.get("circle-pitch-alignment")==="map"){var v=D(o,1,y.zoom);h=!0,m=[v,v]}else h=!1,m=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(i.posMatrix,o,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_pitch_with_map:+h,u_extrude_scale:m}},Zi=function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(n,i.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(n,i.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(n,i.u_extrude_scale),u_overscale_factor:new s.Uniform1f(n,i.u_overscale_factor)}},Tn=function(n,i,o){var l=D(o,1,i.zoom),h=Math.pow(2,i.zoom-o.tileID.overscaledZ),m=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:l,u_extrude_scale:[i.pixelsToGLUnits[0]/(l*h),i.pixelsToGLUnits[1]/(l*h)],u_overscale_factor:m}},Wo=function(n,i){return{u_matrix:n,u_color:i}},ma=function(n){return{u_matrix:n}},Ua=function(n,i,o,l){return{u_matrix:n,u_extrude_scale:D(i,1,o),u_intensity:l}},Ko=function(n,i,o,l){var h=s.create$1();s.ortho(h,0,n.width,n.height,0,0,1);var m=n.context.gl;return{u_matrix:h,u_world:[m.drawingBufferWidth,m.drawingBufferHeight],u_image:o,u_color_ramp:l,u_opacity:i.paint.get("heatmap-opacity")}},Li=function(n,i,o){var l=o.paint.get("hillshade-shadow-color"),h=o.paint.get("hillshade-highlight-color"),m=o.paint.get("hillshade-accent-color"),y=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);o.paint.get("hillshade-illumination-anchor")==="viewport"&&(y-=n.transform.angle);var v=!n.options.moving;return{u_matrix:n.transform.calculatePosMatrix(i.tileID.toUnwrapped(),v),u_image:0,u_latrange:Vs(n,i.tileID),u_light:[o.paint.get("hillshade-exaggeration"),y],u_shadow:l,u_highlight:h,u_accent:m}},Va=function(n,i){var o=n.dem.stride,l=s.create$1();return s.ortho(l,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(l,l,[0,-s.EXTENT,0]),{u_matrix:l,u_image:1,u_dimension:[o,o],u_zoom:n.tileID.overscaledZ,u_maxzoom:i}};function Vs(n,i){var o=Math.pow(2,i.canonical.z),l=i.canonical.y;return[new s.MercatorCoordinate(0,l/o).toLngLat().lat,new s.MercatorCoordinate(0,(l+1)/o).toLngLat().lat]}var Mo=function(n,i,o){var l=n.transform;return{u_matrix:Na(n,i,o),u_ratio:1/D(i,1,l.zoom),u_gl_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]]}},is=function(n,i,o){return s.extend(Mo(n,i,o),{u_image:0})},ya=function(n,i,o,l){var h=n.transform,m=Lo(i,h);return{u_matrix:Na(n,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/D(i,1,h.zoom),u_image:0,u_scale:[s.browser.devicePixelRatio,m,l.fromScale,l.toScale],u_fade:l.t,u_gl_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},ga=function(n,i,o,l,h){var m=n.transform,y=n.lineAtlas,v=Lo(i,m),S=o.layout.get("line-cap")==="round",C=y.getDash(l.from,S),L=y.getDash(l.to,S),O=C.width*h.fromScale,V=L.width*h.toScale;return s.extend(Mo(n,i,o),{u_patternscale_a:[v/O,-C.height/2],u_patternscale_b:[v/V,-L.height/2],u_sdfgamma:y.width/(256*Math.min(O,V)*s.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:L.y,u_mix:h.t})};function Lo(n,i){return 1/D(n,1,i.tileZoom)}function Na(n,i,o){return n.translatePosMatrix(i.tileID.posMatrix,i,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var _a=function(n,i,o,l,h){return{u_matrix:n,u_tl_parent:i,u_scale_parent:o,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(y=h.paint.get("raster-saturation"),y>0?1-1/(1.001-y):-y),u_contrast_factor:(m=h.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:os(h.paint.get("raster-hue-rotate"))};var m,y};function os(n){n*=Math.PI/180;var i=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*i-o+1)/3,(Math.sqrt(3)*i-o+1)/3]}var ao=function(n,i,o,l,h,m,y,v,S,C){var L=h.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:L.width/L.height,u_fade_change:h.options.fadeDuration?h.symbolFadeChange:1,u_matrix:m,u_label_plane_matrix:y,u_gl_coord_matrix:v,u_is_text:+S,u_pitch_with_map:+l,u_texsize:C,u_texture:0}},ja=function(n,i,o,l,h,m,y,v,S,C,L){var O=h.transform;return s.extend(ao(n,i,o,l,h,m,y,v,S,C),{u_gamma_scale:l?Math.cos(O._pitch)*O.cameraToCenterDistance:1,u_is_halo:+L})},Ns=function(n,i,o){return{u_matrix:n,u_opacity:i,u_color:o}},Ro=function(n,i,o,l,h,m){return s.extend(function(y,v,S,C){var L=S.imageManager.getPattern(y.from),O=S.imageManager.getPattern(y.to),V=S.imageManager.getPixelSize(),Y=V.width,K=V.height,X=Math.pow(2,C.tileID.overscaledZ),te=C.tileSize*Math.pow(2,S.transform.tileZoom)/X,ae=te*(C.tileID.canonical.x+C.tileID.wrap*X),le=te*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[Y,K],u_mix:v.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:v.fromScale,u_scale_b:v.toScale,u_tile_units_to_pixels:1/D(C,1,S.transform.tileZoom),u_pixel_coord_upper:[ae>>16,le>>16],u_pixel_coord_lower:[65535&ae,65535&le]}}(l,m,o,h),{u_matrix:n,u_opacity:i})},qa={fillExtrusion:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_lightpos:new s.Uniform3f(n,i.u_lightpos),u_lightintensity:new s.Uniform1f(n,i.u_lightintensity),u_lightcolor:new s.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(n,i.u_vertical_gradient)}},fillExtrusionPattern:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_lightpos:new s.Uniform3f(n,i.u_lightpos),u_lightintensity:new s.Uniform1f(n,i.u_lightintensity),u_lightcolor:new s.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(n,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(n,i.u_height_factor),u_image:new s.Uniform1i(n,i.u_image),u_texsize:new s.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new s.Uniform4f(n,i.u_scale),u_fade:new s.Uniform1f(n,i.u_fade)}},extrusionTexture:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_world:new s.Uniform2f(n,i.u_world),u_image:new s.Uniform1i(n,i.u_image),u_opacity:new s.Uniform1f(n,i.u_opacity)}},fill:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix)}},fillPattern:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_image:new s.Uniform1i(n,i.u_image),u_texsize:new s.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new s.Uniform4f(n,i.u_scale),u_fade:new s.Uniform1f(n,i.u_fade)}},fillOutline:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_world:new s.Uniform2f(n,i.u_world)}},fillOutlinePattern:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_world:new s.Uniform2f(n,i.u_world),u_image:new s.Uniform1i(n,i.u_image),u_texsize:new s.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new s.Uniform4f(n,i.u_scale),u_fade:new s.Uniform1f(n,i.u_fade)}},circle:function(n,i){return{u_camera_to_center_distance:new s.Uniform1f(n,i.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(n,i.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(n,i.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(n,i.u_extrude_scale),u_matrix:new s.UniformMatrix4f(n,i.u_matrix)}},collisionBox:Zi,collisionCircle:Zi,debug:function(n,i){return{u_color:new s.UniformColor(n,i.u_color),u_matrix:new s.UniformMatrix4f(n,i.u_matrix)}},clippingMask:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix)}},heatmap:function(n,i){return{u_extrude_scale:new s.Uniform1f(n,i.u_extrude_scale),u_intensity:new s.Uniform1f(n,i.u_intensity),u_matrix:new s.UniformMatrix4f(n,i.u_matrix)}},heatmapTexture:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_world:new s.Uniform2f(n,i.u_world),u_image:new s.Uniform1i(n,i.u_image),u_color_ramp:new s.Uniform1i(n,i.u_color_ramp),u_opacity:new s.Uniform1f(n,i.u_opacity)}},hillshade:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_image:new s.Uniform1i(n,i.u_image),u_latrange:new s.Uniform2f(n,i.u_latrange),u_light:new s.Uniform2f(n,i.u_light),u_shadow:new s.UniformColor(n,i.u_shadow),u_highlight:new s.UniformColor(n,i.u_highlight),u_accent:new s.UniformColor(n,i.u_accent)}},hillshadePrepare:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_image:new s.Uniform1i(n,i.u_image),u_dimension:new s.Uniform2f(n,i.u_dimension),u_zoom:new s.Uniform1f(n,i.u_zoom),u_maxzoom:new s.Uniform1f(n,i.u_maxzoom)}},line:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_ratio:new s.Uniform1f(n,i.u_ratio),u_gl_units_to_pixels:new s.Uniform2f(n,i.u_gl_units_to_pixels)}},lineGradient:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_ratio:new s.Uniform1f(n,i.u_ratio),u_gl_units_to_pixels:new s.Uniform2f(n,i.u_gl_units_to_pixels),u_image:new s.Uniform1i(n,i.u_image)}},linePattern:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_texsize:new s.Uniform2f(n,i.u_texsize),u_ratio:new s.Uniform1f(n,i.u_ratio),u_image:new s.Uniform1i(n,i.u_image),u_gl_units_to_pixels:new s.Uniform2f(n,i.u_gl_units_to_pixels),u_scale:new s.Uniform4f(n,i.u_scale),u_fade:new s.Uniform1f(n,i.u_fade)}},lineSDF:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_ratio:new s.Uniform1f(n,i.u_ratio),u_gl_units_to_pixels:new s.Uniform2f(n,i.u_gl_units_to_pixels),u_patternscale_a:new s.Uniform2f(n,i.u_patternscale_a),u_patternscale_b:new s.Uniform2f(n,i.u_patternscale_b),u_sdfgamma:new s.Uniform1f(n,i.u_sdfgamma),u_image:new s.Uniform1i(n,i.u_image),u_tex_y_a:new s.Uniform1f(n,i.u_tex_y_a),u_tex_y_b:new s.Uniform1f(n,i.u_tex_y_b),u_mix:new s.Uniform1f(n,i.u_mix)}},raster:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_tl_parent:new s.Uniform2f(n,i.u_tl_parent),u_scale_parent:new s.Uniform1f(n,i.u_scale_parent),u_buffer_scale:new s.Uniform1f(n,i.u_buffer_scale),u_fade_t:new s.Uniform1f(n,i.u_fade_t),u_opacity:new s.Uniform1f(n,i.u_opacity),u_image0:new s.Uniform1i(n,i.u_image0),u_image1:new s.Uniform1i(n,i.u_image1),u_brightness_low:new s.Uniform1f(n,i.u_brightness_low),u_brightness_high:new s.Uniform1f(n,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(n,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(n,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(n,i.u_spin_weights)}},symbolIcon:function(n,i){return{u_is_size_zoom_constant:new s.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(n,i.u_size_t),u_size:new s.Uniform1f(n,i.u_size),u_camera_to_center_distance:new s.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(n,i.u_pitch),u_rotate_symbol:new s.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(n,i.u_fade_change),u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(n,i.u_label_plane_matrix),u_gl_coord_matrix:new s.UniformMatrix4f(n,i.u_gl_coord_matrix),u_is_text:new s.Uniform1f(n,i.u_is_text),u_pitch_with_map:new s.Uniform1i(n,i.u_pitch_with_map),u_texsize:new s.Uniform2f(n,i.u_texsize),u_texture:new s.Uniform1i(n,i.u_texture)}},symbolSDF:function(n,i){return{u_is_size_zoom_constant:new s.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(n,i.u_size_t),u_size:new s.Uniform1f(n,i.u_size),u_camera_to_center_distance:new s.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(n,i.u_pitch),u_rotate_symbol:new s.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(n,i.u_fade_change),u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(n,i.u_label_plane_matrix),u_gl_coord_matrix:new s.UniformMatrix4f(n,i.u_gl_coord_matrix),u_is_text:new s.Uniform1f(n,i.u_is_text),u_pitch_with_map:new s.Uniform1i(n,i.u_pitch_with_map),u_texsize:new s.Uniform2f(n,i.u_texsize),u_texture:new s.Uniform1i(n,i.u_texture),u_gamma_scale:new s.Uniform1f(n,i.u_gamma_scale),u_is_halo:new s.Uniform1f(n,i.u_is_halo)}},background:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_opacity:new s.Uniform1f(n,i.u_opacity),u_color:new s.UniformColor(n,i.u_color)}},backgroundPattern:function(n,i){return{u_matrix:new s.UniformMatrix4f(n,i.u_matrix),u_opacity:new s.Uniform1f(n,i.u_opacity),u_image:new s.Uniform1i(n,i.u_image),u_pattern_tl_a:new s.Uniform2f(n,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(n,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(n,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(n,i.u_pattern_br_b),u_texsize:new s.Uniform2f(n,i.u_texsize),u_mix:new s.Uniform1f(n,i.u_mix),u_pattern_size_a:new s.Uniform2f(n,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(n,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(n,i.u_scale_a),u_scale_b:new s.Uniform1f(n,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(n,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(n,i.u_tile_units_to_pixels)}}};function Yo(n,i){for(var o=n.sort(function(v,S){return v.tileID.isLessThan(S.tileID)?-1:S.tileID.isLessThan(v.tileID)?1:0}),l=0;l<o.length;l++){var h={},m=o[l],y=o.slice(l+1);so(m.tileID.wrapped(),m.tileID,y,new s.OverscaledTileID(0,m.tileID.wrap+1,0,0,0),h),m.setMask(h,i)}}function so(n,i,o,l,h){for(var m=0;m<o.length;m++){var y=o[m];if(l.isLessThan(y.tileID))break;if(i.key===y.tileID.key)return;if(y.tileID.isChildOf(i)){for(var v=i.children(1/0),S=0;S<v.length;S++)so(n,v[S],o.slice(m),l,h);return}}var C=i.overscaledZ-n.overscaledZ,L=new s.CanonicalTileID(C,i.canonical.x-(n.canonical.x<<C),i.canonical.y-(n.canonical.y<<C));h[L.key]=h[L.key]||L}function Do(n,i,o,l,h){for(var m=n.context,y=m.gl,v=h?n.useProgram("collisionCircle"):n.useProgram("collisionBox"),S=0;S<l.length;S++){var C=l[S],L=i.getTile(C),O=L.getBucket(o);if(O){var V=h?O.collisionCircle:O.collisionBox;V&&v.draw(m,h?y.TRIANGLES:y.LINES,Ft.disabled,ir.disabled,n.colorModeForRenderPass(),tr.disabled,Tn(C.posMatrix,n.transform,L),o.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,null,n.transform.zoom,null,null,V.collisionVertexBuffer)}}}var An=s.identity(new Float32Array(16)),$o=s.properties.layout;function Cr(n,i,o,l,h,m,y,v,S,C,L,O){for(var V,Y,K=n.context,X=K.gl,te=n.transform,ae=v==="map",le=S==="map",ie=ae&&o.layout.get("symbol-placement")!=="point",ce=ae&&!le&&!ie,ge=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Se=n.depthModeForSublayer(0,Ft.ReadOnly),Ae=[],et=0,at=l;et<at.length;et+=1){var ot=at[et],ke=i.getTile(ot),bt=ke.getBucket(o);if(bt){var tt=h?bt.text:bt.icon;if(tt&&tt.segments.get().length){var Qt=tt.programConfigurations.get(o.id),wt=h||bt.sdfIcons,cr=h?bt.textSizeData:bt.iconSizeData;V||(V=n.useProgram(wt?"symbolSDF":"symbolIcon",Qt),Y=s.evaluateSizeForZoom(cr,te.zoom,$o.properties[h?"text-size":"icon-size"])),K.activeTexture.set(X.TEXTURE0);var Ht=void 0,Tt=void 0,Er=void 0;if(h)Tt=ke.glyphAtlasTexture,Er=X.LINEAR,Ht=ke.glyphAtlasTexture.size;else{var Wi=o.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear,Ki=le||te.pitch!==0;Tt=ke.imageAtlasTexture,Er=wt||n.options.rotating||n.options.zooming||Wi||Ki?X.LINEAR:X.NEAREST,Ht=ke.imageAtlasTexture.size}var Oo=D(ke,1,n.transform.zoom),ho=nn(ot.posMatrix,le,ae,n.transform,Oo),_i=ca(ot.posMatrix,le,ae,n.transform,Oo);ie&&Ba(bt,ot.posMatrix,n,h,ho,_i,le,C);var sn=n.translatePosMatrix(ot.posMatrix,ke,m,y),vi=ie?An:ho,oi=n.translatePosMatrix(_i,ke,m,y,!0),ai=wt&&o.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xi={program:V,buffers:tt,uniformValues:wt?ja(cr.functionType,Y,ce,le,n,sn,vi,oi,h,Ht,!0):ao(cr.functionType,Y,ce,le,n,sn,vi,oi,h,Ht),atlasTexture:Tt,atlasInterpolation:Er,isSDF:wt,hasHalo:ai};if(ge)for(var xn=0,si=tt.segments.get();xn<si.length;xn+=1){var Pl=si[xn];Ae.push({segments:new s.SegmentVector([Pl]),sortKey:Pl.sortKey,state:xi})}else Ae.push({segments:tt.segments,sortKey:0,state:xi})}}}ge&&Ae.sort(function(hs,Yi){return hs.sortKey-Yi.sortKey});for(var Ga=0,ln=Ae;Ga<ln.length;Ga+=1){var Xa=ln[Ga],li=Xa.state;if(li.atlasTexture.bind(li.atlasInterpolation,X.CLAMP_TO_EDGE),li.isSDF){var Fo=li.uniformValues;li.hasHalo&&(Fo.u_is_halo=1,Jo(li.buffers,Xa.segments,o,n,li.program,Se,L,O,Fo)),Fo.u_is_halo=0}Jo(li.buffers,Xa.segments,o,n,li.program,Se,L,O,li.uniformValues)}}function Jo(n,i,o,l,h,m,y,v,S){var C=l.context,L=C.gl;h.draw(C,L.TRIANGLES,m,y,v,tr.disabled,S,o.id,n.layoutVertexBuffer,n.indexBuffer,i,o.paint,l.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Ri(n,i,o,l,h,m,y){var v,S,C,L,O,V=n.context.gl,Y=o.paint.get("fill-pattern"),K=Y&&Y.constantOr(1),X=o.getCrossfadeParameters();y?(S=K&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",v=V.LINES):(S=K?"fillPattern":"fill",v=V.TRIANGLES);for(var te=0,ae=l;te<ae.length;te+=1){var le=ae[te],ie=i.getTile(le);if(!K||ie.patternsLoaded()){var ce=ie.getBucket(o);if(ce){var ge=ce.programConfigurations.get(o.id),Se=n.useProgram(S,ge);K&&(n.context.activeTexture.set(V.TEXTURE0),ie.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ge.updatePatternPaintBuffers(X));var Ae=Y.constantOr(null);if(Ae&&ie.imageAtlas){var et=ie.imageAtlas.patternPositions[Ae.to],at=ie.imageAtlas.patternPositions[Ae.from];et&&at&&ge.setConstantPatternPositions(et,at)}var ot=n.translatePosMatrix(le.posMatrix,ie,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(y){L=ce.indexBuffer2,O=ce.segments2;var ke=[V.drawingBufferWidth,V.drawingBufferHeight];C=S==="fillOutlinePattern"&&K?Ho(ot,n,X,ie,ke):ko(ot,ke)}else L=ce.indexBuffer,O=ce.segments,C=K?Fn(ot,n,X,ie):Xo(ot);Se.draw(n.context,v,h,n.stencilModeForClipping(le),m,tr.disabled,C,o.id,ce.layoutVertexBuffer,L,O,o.paint,n.transform.zoom,ge)}}}}function Qo(n,i){var o=n.context,l=o.gl,h=i.viewportFrame;if(n.depthRboNeedsClear&&n.setupOffscreenDepthRenderbuffer(),!h){var m=new s.Texture(o,{width:n.width,height:n.height,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=i.viewportFrame=o.createFramebuffer(n.width,n.height)).colorAttachment.set(m.texture)}o.bindFramebuffer.set(h.framebuffer),h.depthAttachment.set(n.depthRbo),n.depthRboNeedsClear&&(o.clear({depth:1}),n.depthRboNeedsClear=!1),o.clear({color:s.Color.transparent}),o.setStencilMode(ir.disabled),o.setDepthMode(new Ft(l.LEQUAL,Ft.ReadWrite,[0,1])),o.setColorMode(n.colorModeForRenderPass())}function va(n,i,o){var l=i.viewportFrame;if(l){var h=n.context,m=h.gl;h.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,l.colorAttachment.get()),n.useProgram("extrusionTexture").draw(h,m.TRIANGLES,Ft.disabled,ir.disabled,n.colorModeForRenderPass(),tr.disabled,da(n,o,0),i.id,n.viewportBuffer,n.quadTriangleIndexBuffer,n.viewportSegments,i.paint,n.transform.zoom)}}function as(n,i,o,l,h,m){var y=n.context,v=y.gl,S=i.fbo;if(S){var C=n.useProgram("hillshade");y.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,S.colorAttachment.get());var L=Li(n,i,o);i.maskedBoundsBuffer&&i.maskedIndexBuffer&&i.segments?C.draw(y,v.TRIANGLES,l,h,m,tr.disabled,L,o.id,i.maskedBoundsBuffer,i.maskedIndexBuffer,i.segments):C.draw(y,v.TRIANGLES,l,h,m,tr.disabled,L,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function ss(n,i,o,l,h,m,y){var v=n.context,S=v.gl;if(i.dem&&i.dem.data){var C=i.dem.dim,L=i.dem.stride,O=i.dem.getPixels();if(v.activeTexture.set(S.TEXTURE1),v.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||n.getTileTexture(L),i.demTexture){var V=i.demTexture;V.update(O,{premultiply:!1}),V.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else i.demTexture=new s.Texture(v,O,S.RGBA,{premultiply:!1}),i.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);v.activeTexture.set(S.TEXTURE0);var Y=i.fbo;if(!Y){var K=new s.Texture(v,{width:C,height:C,data:null},S.RGBA);K.bind(S.LINEAR,S.CLAMP_TO_EDGE),(Y=i.fbo=v.createFramebuffer(C,C)).colorAttachment.set(K.texture)}v.bindFramebuffer.set(Y.framebuffer),v.viewport.set([0,0,C,C]),n.useProgram("hillshadePrepare").draw(v,S.TRIANGLES,h,m,y,tr.disabled,Va(i,l),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ea(n,i,o,l,h){var m=l.paint.get("raster-fade-duration");if(m>0){var y=s.browser.now(),v=(y-n.timeAdded)/m,S=i?(y-i.timeAdded)/m:-1,C=o.getSource(),L=h.coveringZoomLevel({tileSize:C.tileSize,roundZoom:C.roundZoom}),O=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(n.tileID.overscaledZ-L),V=O&&n.refreshedUponExpiration?1:s.clamp(O?v:1-S,0,1);return n.refreshedUponExpiration&&v>=1&&(n.refreshedUponExpiration=!1),i?{opacity:1,mix:1-V}:{opacity:V,mix:0}}return{opacity:1,mix:0}}function yi(n,i,o){var l=n.context,h=l.gl,m=o.posMatrix,y=n.useProgram("debug"),v=Ft.disabled,S=ir.disabled,C=n.colorModeForRenderPass(),L="$debug";y.draw(l,h.LINE_STRIP,v,S,C,tr.disabled,Wo(m,s.Color.red),L,n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);for(var O=function(Ae,et,at,ot){ot=ot||1;var ke,bt,tt,Qt,wt,cr,Ht,Tt,Er=[];for(ke=0,bt=Ae.length;ke<bt;ke++)if(wt=Gi[Ae[ke]]){for(Tt=null,tt=0,Qt=wt[1].length;tt<Qt;tt+=2)wt[1][tt]===-1&&wt[1][tt+1]===-1?Tt=null:(cr=et+wt[1][tt]*ot,Ht=at-wt[1][tt+1]*ot,Tt&&Er.push(Tt.x,Tt.y,cr,Ht),Tt={x:cr,y:Ht});et+=wt[0]*ot}return Er}(o.toString(),50,200,5),V=new s.StructArrayLayout2i4,Y=new s.StructArrayLayout2ui4,K=0;K<O.length;K+=2)V.emplaceBack(O[K],O[K+1]),Y.emplaceBack(K,K+1);for(var X=l.createVertexBuffer(V,zr.members),te=l.createIndexBuffer(Y),ae=s.SegmentVector.simpleSegment(0,0,V.length/2,V.length/2),le=i.getTile(o).tileSize,ie=s.EXTENT/(Math.pow(2,n.transform.zoom-o.overscaledZ)*le),ce=[[-1,-1],[-1,1],[1,-1],[1,1]],ge=0;ge<ce.length;ge++){var Se=ce[ge];y.draw(l,h.LINES,v,S,C,tr.disabled,Wo(s.translate([],m,[ie*Se[0],ie*Se[1],0]),s.Color.white),L,X,te,ae)}y.draw(l,h.LINES,v,S,C,tr.disabled,Wo(m,s.Color.black),L,X,te,ae)}var Gi={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},yn={symbol:function(n,i,o,l){if(n.renderPass==="translucent"){var h=ir.disabled,m=n.colorModeForRenderPass();o.paint.get("icon-opacity").constantOr(1)!==0&&Cr(n,i,o,l,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),h,m),o.paint.get("text-opacity").constantOr(1)!==0&&Cr(n,i,o,l,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),h,m),i.map.showCollisionBoxes&&function(y,v,S,C){Do(y,v,S,C,!1),Do(y,v,S,C,!0)}(n,i,o,l)}},circle:function(n,i,o,l){if(n.renderPass==="translucent"){var h=o.paint.get("circle-opacity"),m=o.paint.get("circle-stroke-width"),y=o.paint.get("circle-stroke-opacity");if(h.constantOr(1)!==0||m.constantOr(1)!==0&&y.constantOr(1)!==0)for(var v=n.context,S=v.gl,C=n.depthModeForSublayer(0,Ft.ReadOnly),L=ir.disabled,O=n.colorModeForRenderPass(),V=0;V<l.length;V++){var Y=l[V],K=i.getTile(Y),X=K.getBucket(o);if(X){var te=X.programConfigurations.get(o.id);n.useProgram("circle",te).draw(v,S.TRIANGLES,C,L,O,tr.disabled,Mi(n,Y,K,o),o.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,o.paint,n.transform.zoom,te)}}}},heatmap:function(n,i,o,l){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var h=n.context,m=h.gl,y=n.depthModeForSublayer(0,Ft.ReadOnly),v=ir.disabled,S=new br([m.ONE,m.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(te,ae,le){var ie=te.gl;te.activeTexture.set(ie.TEXTURE1),te.viewport.set([0,0,ae.width/4,ae.height/4]);var ce=le.heatmapFbo;if(ce)ie.bindTexture(ie.TEXTURE_2D,ce.colorAttachment.get()),te.bindFramebuffer.set(ce.framebuffer);else{var ge=ie.createTexture();ie.bindTexture(ie.TEXTURE_2D,ge),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ie.LINEAR),ce=le.heatmapFbo=te.createFramebuffer(ae.width/4,ae.height/4),function Se(Ae,et,at,ot){var ke=Ae.gl;ke.texImage2D(ke.TEXTURE_2D,0,ke.RGBA,et.width/4,et.height/4,0,ke.RGBA,Ae.extTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:ke.UNSIGNED_BYTE,null),ot.colorAttachment.set(at),Ae.extTextureHalfFloat&&ke.checkFramebufferStatus(ke.FRAMEBUFFER)!==ke.FRAMEBUFFER_COMPLETE&&(Ae.extTextureHalfFloat=null,ot.colorAttachment.setDirty(),Se(Ae,et,at,ot))}(te,ae,ge,ce)}})(h,n,o),h.clear({color:s.Color.transparent});for(var C=0;C<l.length;C++){var L=l[C];if(!i.hasRenderableParent(L)){var O=i.getTile(L),V=O.getBucket(o);if(V){var Y=V.programConfigurations.get(o.id),K=n.useProgram("heatmap",Y),X=n.transform.zoom;K.draw(h,m.TRIANGLES,y,v,S,tr.disabled,Ua(L.posMatrix,O,X,o.paint.get("heatmap-intensity")),o.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,o.paint,n.transform.zoom,Y)}}}h.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(te,ae){var le=te.context,ie=le.gl,ce=ae.heatmapFbo;if(ce){le.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,ce.colorAttachment.get()),le.activeTexture.set(ie.TEXTURE1);var ge=ae.colorRampTexture;ge||(ge=ae.colorRampTexture=new s.Texture(le,ae.colorRamp,ie.RGBA)),ge.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(le,ie.TRIANGLES,Ft.disabled,ir.disabled,te.colorModeForRenderPass(),tr.disabled,Ko(te,ae,0,1),ae.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,ae.paint,te.transform.zoom)}}(n,o))},line:function(n,i,o,l){if(n.renderPass==="translucent"){var h=o.paint.get("line-opacity"),m=o.paint.get("line-width");if(h.constantOr(1)!==0&&m.constantOr(1)!==0){var y=n.depthModeForSublayer(0,Ft.ReadOnly),v=n.colorModeForRenderPass(),S=o.paint.get("line-dasharray"),C=o.paint.get("line-pattern"),L=C.constantOr(1),O=o.paint.get("line-gradient"),V=o.getCrossfadeParameters(),Y=S?"lineSDF":L?"linePattern":O?"lineGradient":"line",K=n.context,X=K.gl,te=!0;if(O){K.activeTexture.set(X.TEXTURE0);var ae=o.gradientTexture;if(!o.gradient)return;ae||(ae=o.gradientTexture=new s.Texture(K,o.gradient,X.RGBA)),ae.bind(X.LINEAR,X.CLAMP_TO_EDGE)}for(var le=0,ie=l;le<ie.length;le+=1){var ce=ie[le],ge=i.getTile(ce);if(!L||ge.patternsLoaded()){var Se=ge.getBucket(o);if(Se){var Ae=Se.programConfigurations.get(o.id),et=n.context.program.get(),at=n.useProgram(Y,Ae),ot=te||at.program!==et,ke=C.constantOr(null);if(ke&&ge.imageAtlas){var bt=ge.imageAtlas.patternPositions[ke.to],tt=ge.imageAtlas.patternPositions[ke.from];bt&&tt&&Ae.setConstantPatternPositions(bt,tt)}var Qt=S?ga(n,ge,o,S,V):L?ya(n,ge,o,V):O?is(n,ge,o):Mo(n,ge,o);S&&(ot||n.lineAtlas.dirty)?(K.activeTexture.set(X.TEXTURE0),n.lineAtlas.bind(K)):L&&(K.activeTexture.set(X.TEXTURE0),ge.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ae.updatePatternPaintBuffers(V)),at.draw(K,X.TRIANGLES,y,n.stencilModeForClipping(ce),v,tr.disabled,Qt,o.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,o.paint,n.transform.zoom,Ae),te=!1}}}}}},fill:function(n,i,o,l){var h=o.paint.get("fill-color"),m=o.paint.get("fill-opacity");if(m.constantOr(1)!==0){var y=n.colorModeForRenderPass(),v=o.paint.get("fill-pattern").constantOr(1)||h.constantOr(s.Color.transparent).a!==1||m.constantOr(0)!==1?"translucent":"opaque";if(n.renderPass===v){var S=n.depthModeForSublayer(1,n.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);Ri(n,i,o,l,S,y,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var C=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);Ri(n,i,o,l,C,y,!0)}}},"fill-extrusion":function(n,i,o,l){if(o.paint.get("fill-extrusion-opacity")!==0)if(n.renderPass==="offscreen"){Qo(n,o);var h=new Ft(n.context.gl.LEQUAL,Ft.ReadWrite,[0,1]),m=ir.disabled,y=n.colorModeForRenderPass();(function(v,S,C,L,O,V,Y){for(var K=v.context,X=K.gl,te=C.paint.get("fill-extrusion-pattern"),ae=te.constantOr(1),le=C.getCrossfadeParameters(),ie=0,ce=L;ie<ce.length;ie+=1){var ge=ce[ie],Se=S.getTile(ge),Ae=Se.getBucket(C);if(Ae){var et=Ae.programConfigurations.get(C.id),at=v.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",et);ae&&(v.context.activeTexture.set(X.TEXTURE0),Se.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),et.updatePatternPaintBuffers(le));var ot=te.constantOr(null);if(ot&&Se.imageAtlas){var ke=Se.imageAtlas.patternPositions[ot.to],bt=Se.imageAtlas.patternPositions[ot.from];ke&&bt&&et.setConstantPatternPositions(ke,bt)}var tt=v.translatePosMatrix(ge.posMatrix,Se,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),Qt=C.paint.get("fill-extrusion-vertical-gradient"),wt=ae?fa(tt,v,Qt,ge,le,Se):Fa(tt,v,Qt);at.draw(K,K.gl.TRIANGLES,O,V,Y,tr.backCCW,wt,C.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,C.paint,v.transform.zoom,et)}}})(n,i,o,l,h,m,y)}else n.renderPass==="translucent"&&va(n,o,o.paint.get("fill-extrusion-opacity"))},hillshade:function(n,i,o,l){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var h=n.context,m=i.getSource().maxzoom,y=n.depthModeForSublayer(0,Ft.ReadOnly),v=ir.disabled,S=n.colorModeForRenderPass(),C=0,L=l;C<L.length;C+=1){var O=L[C],V=i.getTile(O);V.needsHillshadePrepare&&n.renderPass==="offscreen"?ss(n,V,o,m,y,v,S):n.renderPass==="translucent"&&as(n,V,o,y,v,S)}h.viewport.set([0,0,n.width,n.height])}},raster:function(n,i,o,l){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0)for(var h=n.context,m=h.gl,y=i.getSource(),v=n.useProgram("raster"),S=ir.disabled,C=n.colorModeForRenderPass(),L=l.length&&l[0].overscaledZ,O=!n.options.moving,V=0,Y=l;V<Y.length;V+=1){var K=Y[V],X=n.depthModeForSublayer(K.overscaledZ-L,o.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,m.LESS),te=i.getTile(K),ae=n.transform.calculatePosMatrix(K.toUnwrapped(),O);te.registerFadeDuration(o.paint.get("raster-fade-duration"));var le=i.findLoadedParent(K,0),ie=ea(te,le,i,o,n.transform),ce=void 0,ge=void 0,Se=o.paint.get("raster-resampling")==="nearest"?m.NEAREST:m.LINEAR;h.activeTexture.set(m.TEXTURE0),te.texture.bind(Se,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(m.TEXTURE1),le?(le.texture.bind(Se,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST),ce=Math.pow(2,le.tileID.overscaledZ-te.tileID.overscaledZ),ge=[te.tileID.canonical.x*ce%1,te.tileID.canonical.y*ce%1]):te.texture.bind(Se,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST);var Ae=_a(ae,ge||[0,0],ce||1,ie,o);y instanceof jr?v.draw(h,m.TRIANGLES,X,S,C,tr.disabled,Ae,o.id,y.boundsBuffer,n.quadTriangleIndexBuffer,y.boundsSegments):te.maskedBoundsBuffer&&te.maskedIndexBuffer&&te.segments?v.draw(h,m.TRIANGLES,X,S,C,tr.disabled,Ae,o.id,te.maskedBoundsBuffer,te.maskedIndexBuffer,te.segments,o.paint,n.transform.zoom):v.draw(h,m.TRIANGLES,X,S,C,tr.disabled,Ae,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,i,o){var l=o.paint.get("background-color"),h=o.paint.get("background-opacity");if(h!==0){var m=n.context,y=m.gl,v=n.transform,S=v.tileSize,C=o.paint.get("background-pattern");if(!n.isPatternMissing(C)){var L=C||l.a!==1||h!==1?"translucent":"opaque";if(n.renderPass===L){var O=ir.disabled,V=n.depthModeForSublayer(0,L==="opaque"?Ft.ReadWrite:Ft.ReadOnly),Y=n.colorModeForRenderPass(),K=n.useProgram(C?"backgroundPattern":"background"),X=v.coveringTiles({tileSize:S});C&&(m.activeTexture.set(y.TEXTURE0),n.imageManager.bind(n.context));for(var te=o.getCrossfadeParameters(),ae=0,le=X;ae<le.length;ae+=1){var ie=le[ae],ce=n.transform.calculatePosMatrix(ie.toUnwrapped()),ge=C?Ro(ce,h,n,C,{tileID:ie,tileSize:S},te):Ns(ce,h,l);K.draw(m,y.TRIANGLES,V,O,Y,tr.disabled,ge,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,i,o){for(var l=0;l<o.length;l++)yi(n,i,o[l])},custom:function(n,i,o){var l=n.context,h=o.implementation;if(n.renderPass==="offscreen"){var m=h.prerender;m&&(n.setCustomLayerDefaults(),m.call(h,l.gl,n.transform.customLayerMatrix()),l.setDirty(),n.setBaseState()),h.renderingMode==="3d"&&(n.setCustomLayerDefaults(),Qo(n,o),h.render(l.gl,n.transform.customLayerMatrix()),l.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent")if(h.renderingMode==="3d")va(n,o,1);else{n.setCustomLayerDefaults(),l.setColorMode(n.colorModeForRenderPass()),l.setStencilMode(ir.disabled);var y=n.depthModeForSublayer(0,Ft.ReadOnly);l.setDepthMode(y),h.render(l.gl,n.transform.customLayerMatrix()),l.setDirty(),n.setBaseState(),l.bindFramebuffer.set(null)}}},Dr=function(n,i){this.context=new Be(n),this.transform=i,this._tileTextures={},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new s.ProgramConfiguration,this.crossTileSymbolIndex=new Kt};function Xi(n,i){if(n.y>i.y){var o=n;n=i,i=o}return{x0:n.x,y0:n.y,x1:i.x,y1:i.y,dx:i.x-n.x,dy:i.y-n.y}}function We(n,i,o,l,h){var m=Math.max(o,Math.floor(i.y0)),y=Math.min(l,Math.ceil(i.y1));if(n.x0===i.x0&&n.y0===i.y0?n.x0+i.dy/n.dy*n.dx<i.x1:n.x1-i.dy/n.dy*n.dx<i.x0){var v=n;n=i,i=v}for(var S=n.dx/n.dy,C=i.dx/i.dy,L=n.dx>0,O=i.dx<0,V=m;V<y;V++){var Y=S*Math.max(0,Math.min(n.dy,V+L-n.y0))+n.x0,K=C*Math.max(0,Math.min(i.dy,V+O-i.y0))+i.x0;h(Math.floor(K),Math.ceil(Y),V)}}function ta(n,i,o,l,h,m){var y,v=Xi(n,i),S=Xi(i,o),C=Xi(o,n);v.dy>S.dy&&(y=v,v=S,S=y),v.dy>C.dy&&(y=v,v=C,C=y),S.dy>C.dy&&(y=S,S=C,C=y),v.dy&&We(C,v,l,h,m),S.dy&&We(C,S,l,h,m)}Dr.prototype.resize=function(n,i){var o=this.context.gl;if(this.width=n*s.browser.devicePixelRatio,this.height=i*s.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var l=0,h=this.style._order;l<h.length;l+=1){var m=h[l];this.style._layers[m].resize()}this.depthRbo&&(o.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Dr.prototype.setup=function(){var n=this.context,i=new s.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(s.EXTENT,0),i.emplaceBack(0,s.EXTENT),i.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(i,zr.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);var o=new s.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(s.EXTENT,0),o.emplaceBack(0,s.EXTENT),o.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=n.createVertexBuffer(o,zr.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);var l=new s.StructArrayLayout4i8;l.emplaceBack(0,0,0,0),l.emplaceBack(s.EXTENT,0,s.EXTENT,0),l.emplaceBack(0,s.EXTENT,0,s.EXTENT),l.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(l,s.rasterBoundsAttributes.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);var h=new s.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(1,0),h.emplaceBack(0,1),h.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(h,zr.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);var m=new s.StructArrayLayout1ui2;m.emplaceBack(0),m.emplaceBack(1),m.emplaceBack(3),m.emplaceBack(2),m.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(m);var y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(y);var v=this.context.gl;this.stencilClearMode=new ir({func:v.ALWAYS,mask:0},0,255,v.ZERO,v.ZERO,v.ZERO)},Dr.prototype.clearStencil=function(){var n=this.context,i=n.gl,o=s.create$1();s.ortho(o,0,this.width,this.height,0,0,1),s.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,i.TRIANGLES,Ft.disabled,this.stencilClearMode,br.disabled,tr.disabled,ma(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Dr.prototype._renderTileClippingMasks=function(n){var i=this.context,o=i.gl;i.setColorMode(br.disabled),i.setDepthMode(Ft.disabled);var l=this.useProgram("clippingMask"),h=1;this._tileClippingMaskIDs={};for(var m=0,y=n;m<y.length;m+=1){var v=y[m],S=this._tileClippingMaskIDs[v.key]=h++;l.draw(i,o.TRIANGLES,Ft.disabled,new ir({func:o.ALWAYS,mask:0},S,255,o.KEEP,o.KEEP,o.REPLACE),br.disabled,tr.disabled,ma(v.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Dr.prototype.stencilModeForClipping=function(n){var i=this.context.gl;return new ir({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,i.KEEP,i.KEEP,i.REPLACE)},Dr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new br([n.CONSTANT_COLOR,n.ONE],new s.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended},Dr.prototype.depthModeForSublayer=function(n,i,o){var l=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Ft(o||this.context.gl.LEQUAL,i,[l,l])},Dr.prototype.render=function(n,i){this.style=n,this.options=i,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(s.browser.now());var o=this.style._order,l=this.style.sourceCaches;for(var h in l){var m=l[h];m.used&&m.prepare(this.context)}var y,v={},S={},C={};for(var L in l){var O=l[L];v[L]=O.getVisibleCoordinates(),S[L]=v[L].slice().reverse(),C[L]=O.getVisibleCoordinates(!0).reverse()}for(var V in l){var Y=l[V],K=Y.getSource();if(K.type==="raster"||K.type==="raster-dem"){for(var X=[],te=0,ae=v[V];te<ae.length;te+=1){var le=ae[te];X.push(Y.getTile(le))}Yo(X,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var ie=0,ce=o;ie<ce.length;ie+=1){var ge=ce[ie],Se=this.style._layers[ge];if(Se.hasOffscreenPass()&&!Se.isHidden(this.transform.zoom)){var Ae=S[Se.source];(Se.type==="custom"||Ae.length)&&this.renderLayer(this,l[Se.source],Se,Ae)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRange=(n._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){var et=this.style._layers[o[this.currentLayer]],at=l[et.source],ot=v[et.source];et.source!==y&&at&&(this.clearStencil(),at.getSource().isTileClipped&&this._renderTileClippingMasks(ot)),this.renderLayer(this,at,et,ot),y=et.source}for(this.renderPass="translucent",this.currentLayer=0,y=null;this.currentLayer<o.length;this.currentLayer++){var ke=this.style._layers[o[this.currentLayer]],bt=l[ke.source],tt=(ke.type==="symbol"?C:S)[ke.source];ke.source!==y&&bt&&(this.clearStencil(),bt.getSource().isTileClipped&&this._renderTileClippingMasks(v[ke.source])),this.renderLayer(this,bt,ke,tt),y=ke.source}if(this.options.showTileBoundaries)for(var Qt in l){yn.debug(this,l[Qt],v[Qt]);break}this.setCustomLayerDefaults()},Dr.prototype.setupOffscreenDepthRenderbuffer=function(){var n=this.context;this.depthRbo||(this.depthRbo=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,this.width,this.height))},Dr.prototype.renderLayer=function(n,i,o,l){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||l.length)&&(this.id=o.id,yn[o.type](n,i,o,l))},Dr.prototype.translatePosMatrix=function(n,i,o,l,h){if(!o[0]&&!o[1])return n;var m=h?l==="map"?this.transform.angle:0:l==="viewport"?-this.transform.angle:0;if(m){var y=Math.sin(m),v=Math.cos(m);o=[o[0]*v-o[1]*y,o[0]*y+o[1]*v]}var S=[h?o[0]:D(i,o[0],this.transform.zoom),h?o[1]:D(i,o[1],this.transform.zoom),0],C=new Float32Array(16);return s.translate(C,n,S),C},Dr.prototype.saveTileTexture=function(n){var i=this._tileTextures[n.size[0]];i?i.push(n):this._tileTextures[n.size[0]]=[n]},Dr.prototype.getTileTexture=function(n){var i=this._tileTextures[n];return i&&i.length>0?i.pop():null},Dr.prototype.isPatternMissing=function(n){if(!n)return!1;var i=this.imageManager.getPattern(n.from),o=this.imageManager.getPattern(n.to);return!i||!o},Dr.prototype.useProgram=function(n,i){i===void 0&&(i=this.emptyProgramConfiguration),this.cache=this.cache||{};var o=""+n+(i.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new Go(this.context,Us[n],i,qa[n],this._showOverdrawInspector)),this.cache[o]},Dr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Dr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)};var jt=function(n,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=o===void 0||o,this._minZoom=n||0,this._maxZoom=i||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},rr={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};jt.prototype.clone=function(){var n=new jt(this._minZoom,this._maxZoom,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._calcMatrices(),n},rr.minZoom.get=function(){return this._minZoom},rr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},rr.maxZoom.get=function(){return this._maxZoom},rr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},rr.renderWorldCopies.get=function(){return this._renderWorldCopies},rr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},rr.worldSize.get=function(){return this.tileSize*this.scale},rr.centerPoint.get=function(){return this.size._div(2)},rr.size.get=function(){return new s.Point(this.width,this.height)},rr.bearing.get=function(){return-this.angle/Math.PI*180},rr.bearing.set=function(n){var i=-s.wrap(n,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=s.create$2(),s.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},rr.pitch.get=function(){return this._pitch/Math.PI*180},rr.pitch.set=function(n){var i=s.clamp(n,0,60)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},rr.fov.get=function(){return this._fov/Math.PI*180},rr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},rr.zoom.get=function(){return this._zoom},rr.zoom.set=function(n){var i=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==i&&(this._unmodified=!1,this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom,this._constrain(),this._calcMatrices())},rr.center.get=function(){return this._center},rr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},jt.prototype.coveringZoomLevel=function(n){return(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize))},jt.prototype.getVisibleUnwrappedCoordinates=function(n){var i=[new s.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new s.Point(0,0)),l=this.pointCoordinate(new s.Point(this.width,0)),h=this.pointCoordinate(new s.Point(this.width,this.height)),m=this.pointCoordinate(new s.Point(0,this.height)),y=Math.floor(Math.min(o.x,l.x,h.x,m.x)),v=Math.floor(Math.max(o.x,l.x,h.x,m.x)),S=y-1;S<=v+1;S++)S!==0&&i.push(new s.UnwrappedTileID(S,n));return i},jt.prototype.coveringTiles=function(n){var i=this.coveringZoomLevel(n),o=i;if(n.minzoom!==void 0&&i<n.minzoom)return[];n.maxzoom!==void 0&&i>n.maxzoom&&(i=n.maxzoom);var l=s.MercatorCoordinate.fromLngLat(this.center),h=Math.pow(2,i),m=new s.Point(h*l.x-.5,h*l.y-.5);return function(y,v,S,C){C===void 0&&(C=!0);var L=1<<y,O={};function V(K,X,te){var ae,le,ie,ce;if(te>=0&&te<=L)for(ae=K;ae<X;ae++)le=Math.floor(ae/L),ie=(ae%L+L)%L,le!==0&&C!==!0||(ce=new s.OverscaledTileID(S,le,y,ie,te),O[ce.key]=ce)}var Y=v.map(function(K){return new s.Point(K.x,K.y)._mult(L)});return ta(Y[0],Y[1],Y[2],0,L,V),ta(Y[2],Y[3],Y[0],0,L,V),Object.keys(O).map(function(K){return O[K]})}(i,[this.pointCoordinate(new s.Point(0,0)),this.pointCoordinate(new s.Point(this.width,0)),this.pointCoordinate(new s.Point(this.width,this.height)),this.pointCoordinate(new s.Point(0,this.height))],n.reparseOverscaled?o:i,this._renderWorldCopies).sort(function(y,v){return m.dist(y.canonical)-m.dist(v.canonical)})},jt.prototype.resize=function(n,i){this.width=n,this.height=i,this.pixelsToGLUnits=[2/n,-2/i],this._constrain(),this._calcMatrices()},rr.unmodified.get=function(){return this._unmodified},jt.prototype.zoomScale=function(n){return Math.pow(2,n)},jt.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},jt.prototype.project=function(n){var i=s.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.Point(s.mercatorXfromLng(n.lng)*this.worldSize,s.mercatorYfromLat(i)*this.worldSize)},jt.prototype.unproject=function(n){return new s.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},rr.point.get=function(){return this.project(this.center)},jt.prototype.setLocationAtPoint=function(n,i){var o=this.pointCoordinate(i),l=this.pointCoordinate(this.centerPoint),h=this.locationCoordinate(n),m=new s.MercatorCoordinate(h.x-(o.x-l.x),h.y-(o.y-l.y));this.center=this.coordinateLocation(m),this._renderWorldCopies&&(this.center=this.center.wrap())},jt.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},jt.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},jt.prototype.locationCoordinate=function(n){return s.MercatorCoordinate.fromLngLat(n)},jt.prototype.coordinateLocation=function(n){return n.toLngLat()},jt.prototype.pointCoordinate=function(n){var i=[n.x,n.y,0,1],o=[n.x,n.y,1,1];s.transformMat4(i,i,this.pixelMatrixInverse),s.transformMat4(o,o,this.pixelMatrixInverse);var l=i[3],h=o[3],m=i[0]/l,y=o[0]/h,v=i[1]/l,S=o[1]/h,C=i[2]/l,L=o[2]/h,O=C===L?0:(0-C)/(L-C);return new s.MercatorCoordinate(s.number(m,y,O)/this.worldSize,s.number(v,S,O)/this.worldSize)},jt.prototype.coordinatePoint=function(n){var i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return s.transformMat4(i,i,this.pixelMatrix),new s.Point(i[0]/i[3],i[1]/i[3])},jt.prototype.getBounds=function(){return new s.LngLatBounds().extend(this.pointLocation(new s.Point(0,0))).extend(this.pointLocation(new s.Point(this.width,0))).extend(this.pointLocation(new s.Point(this.width,this.height))).extend(this.pointLocation(new s.Point(0,this.height)))},jt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},jt.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},jt.prototype.calculatePosMatrix=function(n,i){i===void 0&&(i=!1);var o=n.key,l=i?this._alignedPosMatrixCache:this._posMatrixCache;if(l[o])return l[o];var h=n.canonical,m=this.worldSize/this.zoomScale(h.z),y=h.x+Math.pow(2,h.z)*n.wrap,v=s.identity(new Float64Array(16));return s.translate(v,v,[y*m,h.y*m,0]),s.scale(v,v,[m/s.EXTENT,m/s.EXTENT,1]),s.multiply(v,i?this.alignedProjMatrix:this.projMatrix,v),l[o]=new Float32Array(v),l[o]},jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,i,o,l,h=-90,m=90,y=-180,v=180,S=this.size,C=this._unmodified;if(this.latRange){var L=this.latRange;h=s.mercatorYfromLat(L[1])*this.worldSize,n=(m=s.mercatorYfromLat(L[0])*this.worldSize)-h<S.y?S.y/(m-h):0}if(this.lngRange){var O=this.lngRange;y=s.mercatorXfromLng(O[0])*this.worldSize,i=(v=s.mercatorXfromLng(O[1])*this.worldSize)-y<S.x?S.x/(v-y):0}var V=this.point,Y=Math.max(i||0,n||0);if(Y)return this.center=this.unproject(new s.Point(i?(v+y)/2:V.x,n?(m+h)/2:V.y)),this.zoom+=this.scaleZoom(Y),this._unmodified=C,void(this._constraining=!1);if(this.latRange){var K=V.y,X=S.y/2;K-X<h&&(l=h+X),K+X>m&&(l=m-X)}if(this.lngRange){var te=V.x,ae=S.x/2;te-ae<y&&(o=y+ae),te+ae>v&&(o=v-ae)}o===void 0&&l===void 0||(this.center=this.unproject(new s.Point(o!==void 0?o:V.x,l!==void 0?l:V.y))),this._unmodified=C,this._constraining=!1}},jt.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=this._fov/2,i=Math.PI/2+this._pitch,o=Math.sin(n)*this.cameraToCenterDistance/Math.sin(Math.PI-i-n),l=this.point,h=l.x,m=l.y,y=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),v=new Float64Array(16);s.perspective(v,this._fov,this.width/this.height,1,y),s.scale(v,v,[1,-1,1]),s.translate(v,v,[0,0,-this.cameraToCenterDistance]),s.rotateX(v,v,this._pitch),s.rotateZ(v,v,this.angle),s.translate(v,v,[-h,-m,0]),this.mercatorMatrix=s.scale([],v,[this.worldSize,this.worldSize,this.worldSize]),s.scale(v,v,[1,1,s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=v;var S=this.width%2/2,C=this.height%2/2,L=Math.cos(this.angle),O=Math.sin(this.angle),V=h-Math.round(h)+L*S+O*C,Y=m-Math.round(m)+L*C+O*S,K=new Float64Array(v);if(s.translate(K,K,[V>.5?V-1:V,Y>.5?Y-1:Y,0]),this.alignedProjMatrix=K,v=s.create$1(),s.scale(v,v,[this.width/2,-this.height/2,1]),s.translate(v,v,[1,-1,0]),this.pixelMatrix=s.multiply(new Float64Array(16),v,this.projMatrix),!(v=s.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}},jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new s.Point(0,0)),i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return s.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},jt.prototype.getCameraPoint=function(){var n=this._pitch,i=Math.tan(n)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,i))},jt.prototype.getCameraQueryGeometry=function(n){var i=this.getCameraPoint();if(n.length===1)return[n[0],i];for(var o=i.x,l=i.y,h=i.x,m=i.y,y=0,v=n;y<v.length;y+=1){var S=v[y];o=Math.min(o,S.x),l=Math.min(l,S.y),h=Math.max(h,S.x),m=Math.max(m,S.y)}return[new s.Point(o,l),new s.Point(h,l),new s.Point(h,m),new s.Point(o,m),new s.Point(o,l)]},Object.defineProperties(jt.prototype,rr);var ri=function(){var n,i,o,l,h;s.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),i=300,o=!1,l=0,h=function(){l=0,o&&(n(),l=setTimeout(h,i),o=!1)},function(){return o=!0,l||h(),l})};ri.prototype.addTo=function(n){return this._map=n,s.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ri.prototype.remove=function(){return s.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ri.prototype.getHashString=function(n){var i=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,l=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),h=Math.pow(10,l),m=Math.round(i.lng*h)/h,y=Math.round(i.lat*h)/h,v=this._map.getBearing(),S=this._map.getPitch(),C="";return C+=n?"#/"+m+"/"+y+"/"+o:"#"+o+"/"+y+"/"+m,(v||S)&&(C+="/"+Math.round(10*v)/10),S&&(C+="/"+Math.round(S)),C},ri.prototype._onHashChange=function(){var n=s.window.location.hash.replace("#","").split("/");return n.length>=3&&(this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:+(n[3]||0),pitch:+(n[4]||0)}),!0)},ri.prototype._updateHashUnthrottled=function(){var n=this.getHashString();try{s.window.history.replaceState(s.window.history.state,"",n)}catch{}};var De=function(n){function i(l,h,m,y){y===void 0&&(y={});var v=k.mousePos(h.getCanvasContainer(),m),S=h.unproject(v);n.call(this,l,s.extend({point:v,lngLat:S,originalEvent:m},y)),this._defaultPrevented=!1,this.target=h}n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i;var o={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,o),i}(s.Event),Bo=function(n){function i(l,h,m){var y=k.touchPos(h.getCanvasContainer(),m),v=y.map(function(L){return h.unproject(L)}),S=y.reduce(function(L,O,V,Y){return L.add(O.div(Y.length))},new s.Point(0,0)),C=h.unproject(S);n.call(this,l,{points:y,point:S,lngLats:v,lngLat:C,originalEvent:m}),this._defaultPrevented=!1}n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i;var o={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,o),i}(s.Event),ls=function(n){function i(l,h,m){n.call(this,l,{originalEvent:m}),this._defaultPrevented=!1}n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i;var o={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,o),i}(s.Event),gn=function(n){this._map=n,this._el=n.getCanvasContainer(),this._delta=0,s.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};gn.prototype.isEnabled=function(){return!!this._enabled},gn.prototype.isActive=function(){return!!this._active},gn.prototype.isZooming=function(){return!!this._zooming},gn.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},gn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gn.prototype.onWheel=function(n){if(this.isEnabled()){var i=n.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=s.browser.now(),l=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,i!==0&&i%4.000244140625==0?this._type="wheel":i!==0&&Math.abs(i)<4?this._type="trackpad":l>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(l*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),n.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=n,this._delta-=i,this.isActive()||this._start(n)),n.preventDefault()}},gn.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(n)},gn.prototype._start=function(n){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new s.Event("movestart",{originalEvent:n})),this._map.fire(new s.Event("zoomstart",{originalEvent:n})),this._finishTimeout&&clearTimeout(this._finishTimeout);var i=k.mousePos(this._el,n);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},gn.prototype._onScrollFrame=function(){var n=this;if(this._frameId=null,this.isActive()){var i=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?.0022222222222222222:.01,l=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&l!==0&&(l=1/l);var h=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(h*l))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var m=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,y=this._startZoom,v=this._easing,S=!1;if(this._type==="wheel"&&y&&v){var C=Math.min((s.browser.now()-this._lastWheelEventTime)/200,1),L=v(C);i.zoom=s.number(y,m,L),C<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):S=!0}else i.zoom=m,S=!0;i.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new s.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new s.Event("zoom",{originalEvent:this._lastWheelEvent})),S&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._map.fire(new s.Event("zoomend",{originalEvent:n._lastWheelEvent})),n._map.fire(new s.Event("moveend",{originalEvent:n._lastWheelEvent})),delete n._targetZoom},200))}},gn.prototype._smoothOutEasing=function(n){var i=s.ease;if(this._prevEase){var o=this._prevEase,l=(s.browser.now()-o.start)/o.duration,h=o.easing(l+.01)-o.easing(l),m=.27/Math.sqrt(h*h+1e-4)*.01,y=Math.sqrt(.0729-m*m);i=s.bezier(m,y,.25,1)}return this._prevEase={start:s.browser.now(),duration:n,easing:i},i};var Un=function(n,i){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=i.clickTolerance||1,s.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Un.prototype.isEnabled=function(){return!!this._enabled},Un.prototype.isActive=function(){return!!this._active},Un.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Un.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Un.prototype.onMouseDown=function(n){this.isEnabled()&&n.shiftKey&&n.button===0&&(s.window.document.addEventListener("mousemove",this._onMouseMove,!1),s.window.document.addEventListener("keydown",this._onKeyDown,!1),s.window.document.addEventListener("mouseup",this._onMouseUp,!1),k.disableDrag(),this._startPos=this._lastPos=k.mousePos(this._el,n),this._active=!0)},Un.prototype._onMouseMove=function(n){var i=k.mousePos(this._el,n);if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=i,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var l=Math.min(o.x,i.x),h=Math.max(o.x,i.x),m=Math.min(o.y,i.y),y=Math.max(o.y,i.y);k.setTransform(this._box,"translate("+l+"px,"+m+"px)"),this._box.style.width=h-l+"px",this._box.style.height=y-m+"px"}},Un.prototype._onMouseUp=function(n){if(n.button===0){var i=this._startPos,o=k.mousePos(this._el,n);this._finish(),k.suppressClick(),i.x===o.x&&i.y===o.y?this._fireEvent("boxzoomcancel",n):this._map.fitScreenCoordinates(i,o,this._map.getBearing(),{linear:!0}).fire(new s.Event("boxzoomend",{originalEvent:n}))}},Un.prototype._onKeyDown=function(n){n.keyCode===27&&(this._finish(),this._fireEvent("boxzoomcancel",n))},Un.prototype._finish=function(){this._active=!1,s.window.document.removeEventListener("mousemove",this._onMouseMove,!1),s.window.document.removeEventListener("keydown",this._onKeyDown,!1),s.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},Un.prototype._fireEvent=function(n,i){return this._map.fire(new s.Event(n,{originalEvent:i}))};var us=s.bezier(0,0,.25,1),kr=function(n,i){this._map=n,this._el=i.element||n.getCanvasContainer(),this._state="disabled",this._button=i.button||"right",this._bearingSnap=i.bearingSnap||0,this._pitchWithRotate=i.pitchWithRotate!==!1,s.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};kr.prototype.isEnabled=function(){return this._state!=="disabled"},kr.prototype.isActive=function(){return this._state==="active"},kr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},kr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},kr.prototype.onMouseDown=function(n){if(this._state==="enabled"){if(this._button==="right"){if(this._eventButton=k.mouseButton(n),this._eventButton!==(n.ctrlKey?0:2))return}else{if(n.ctrlKey||k.mouseButton(n)!==0)return;this._eventButton=0}k.disableDrag(),s.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),s.window.document.addEventListener("mouseup",this._onMouseUp),s.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[s.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=k.mousePos(this._el,n),this._center=this._map.transform.centerPoint,n.preventDefault()}},kr.prototype._onMouseMove=function(n){var i=k.mousePos(this._el,n);this._lastPos.equals(i)||(this._lastMoveEvent=n,this._lastPos=i,this._state==="pending"&&(this._state="active",this._fireEvent("rotatestart",n),this._fireEvent("movestart",n),this._pitchWithRotate&&this._fireEvent("pitchstart",n)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},kr.prototype._onDragFrame=function(){this._frameId=null;var n=this._lastMoveEvent;if(n){var i=this._map.transform,o=this._startPos,l=this._lastPos,h=.8*(o.x-l.x),m=-.5*(o.y-l.y),y=i.bearing-h,v=i.pitch-m,S=this._inertia,C=S[S.length-1];this._drainInertiaBuffer(),S.push([s.browser.now(),this._map._normalizeBearing(y,C[1])]),i.bearing=y,this._pitchWithRotate&&(this._fireEvent("pitch",n),i.pitch=v),this._fireEvent("rotate",n),this._fireEvent("move",n),delete this._lastMoveEvent,this._startPos=this._lastPos}},kr.prototype._onMouseUp=function(n){if(k.mouseButton(n)===this._eventButton)switch(this._state){case"active":this._state="enabled",k.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(n);break;case"pending":this._state="enabled",this._unbind()}},kr.prototype._onBlur=function(n){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",n),this._pitchWithRotate&&this._fireEvent("pitchend",n),this._fireEvent("moveend",n);break;case"pending":this._state="enabled",this._unbind()}},kr.prototype._unbind=function(){s.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),s.window.document.removeEventListener("mouseup",this._onMouseUp),s.window.removeEventListener("blur",this._onBlur),k.enableDrag()},kr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},kr.prototype._inertialRotate=function(n){var i=this;this._fireEvent("rotateend",n),this._drainInertiaBuffer();var o=this._map,l=o.getBearing(),h=this._inertia,m=function(){Math.abs(l)<i._bearingSnap?o.resetNorth({noMoveStart:!0},{originalEvent:n}):i._fireEvent("moveend",n),i._pitchWithRotate&&i._fireEvent("pitchend",n)};if(h.length<2)m();else{var y=h[0],v=h[h.length-1],S=h[h.length-2],C=o._normalizeBearing(l,S[1]),L=v[1]-y[1],O=L<0?-1:1,V=(v[0]-y[0])/1e3;if(L!==0&&V!==0){var Y=Math.abs(L*(.25/V));Y>180&&(Y=180);var K=Y/180;C+=O*Y*(K/2),Math.abs(o._normalizeBearing(C,0))<this._bearingSnap&&(C=o._normalizeBearing(0,C)),o.rotateTo(C,{duration:1e3*K,easing:us,noMoveStart:!0},{originalEvent:n})}else m()}},kr.prototype._fireEvent=function(n,i){return this._map.fire(new s.Event(n,i?{originalEvent:i}:{}))},kr.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,i=s.browser.now();n.length>0&&i-n[0][0]>160;)n.shift()};var js=s.bezier(0,0,.3,1),Br=function(n,i){this._map=n,this._el=n.getCanvasContainer(),this._state="disabled",this._clickTolerance=i.clickTolerance||1,s.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Br.prototype.isEnabled=function(){return this._state!=="disabled"},Br.prototype.isActive=function(){return this._state==="active"},Br.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Br.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Br.prototype.onMouseDown=function(n){this._state==="enabled"&&(n.ctrlKey||k.mouseButton(n)!==0||(k.addEventListener(s.window.document,"mousemove",this._onMove,{capture:!0}),k.addEventListener(s.window.document,"mouseup",this._onMouseUp),this._start(n)))},Br.prototype.onTouchStart=function(n){this._state==="enabled"&&(n.touches.length>1||(k.addEventListener(s.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),k.addEventListener(s.window.document,"touchend",this._onTouchEnd),this._start(n)))},Br.prototype._start=function(n){s.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=k.mousePos(this._el,n),this._inertia=[[s.browser.now(),this._startPos]]},Br.prototype._onMove=function(n){n.preventDefault();var i=k.mousePos(this._el,n);this._lastPos.equals(i)||this._state==="pending"&&i.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=n,this._lastPos=i,this._drainInertiaBuffer(),this._inertia.push([s.browser.now(),this._lastPos]),this._state==="pending"&&(this._state="active",this._fireEvent("dragstart",n),this._fireEvent("movestart",n)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Br.prototype._onDragFrame=function(){this._frameId=null;var n=this._lastMoveEvent;if(n){var i=this._map.transform;i.setLocationAtPoint(i.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",n),this._fireEvent("move",n),this._startPos=this._lastPos,delete this._lastMoveEvent}},Br.prototype._onMouseUp=function(n){if(k.mouseButton(n)===0)switch(this._state){case"active":this._state="enabled",k.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(n);break;case"pending":this._state="enabled",this._unbind()}},Br.prototype._onTouchEnd=function(n){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(n);break;case"pending":this._state="enabled",this._unbind()}},Br.prototype._onBlur=function(n){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",n),this._fireEvent("moveend",n);break;case"pending":this._state="enabled",this._unbind()}},Br.prototype._unbind=function(){k.removeEventListener(s.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),k.removeEventListener(s.window.document,"touchend",this._onTouchEnd),k.removeEventListener(s.window.document,"mousemove",this._onMove,{capture:!0}),k.removeEventListener(s.window.document,"mouseup",this._onMouseUp),k.removeEventListener(s.window,"blur",this._onBlur)},Br.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Br.prototype._inertialPan=function(n){this._fireEvent("dragend",n),this._drainInertiaBuffer();var i=this._inertia;if(i.length<2)this._fireEvent("moveend",n);else{var o=i[i.length-1],l=i[0],h=o[1].sub(l[1]),m=(o[0]-l[0])/1e3;if(m===0||o[1].equals(l[1]))this._fireEvent("moveend",n);else{var y=h.mult(.3/m),v=y.mag();v>1400&&(v=1400,y._unit()._mult(v));var S=v/750,C=y.mult(-S/2);this._map.panBy(C,{duration:1e3*S,easing:js,noMoveStart:!0},{originalEvent:n})}}},Br.prototype._fireEvent=function(n,i){return this._map.fire(new s.Event(n,i?{originalEvent:i}:{}))},Br.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,i=s.browser.now();n.length>0&&i-n[0][0]>160;)n.shift()};var xa=function(n){this._map=n,this._el=n.getCanvasContainer(),s.bindAll(["_onKeyDown"],this)};function qs(n){return n*(2-n)}xa.prototype.isEnabled=function(){return!!this._enabled},xa.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},xa.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},xa.prototype._onKeyDown=function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var i=0,o=0,l=0,h=0,m=0;switch(n.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:n.shiftKey?o=-1:(n.preventDefault(),h=-1);break;case 39:n.shiftKey?o=1:(n.preventDefault(),h=1);break;case 38:n.shiftKey?l=1:(n.preventDefault(),m=-1);break;case 40:n.shiftKey?l=-1:(m=1,n.preventDefault());break;default:return}var y=this._map,v=y.getZoom(),S={duration:300,delayEndEvents:500,easing:qs,zoom:i?Math.round(v)+i*(n.shiftKey?2:1):v,bearing:y.getBearing()+15*o,pitch:y.getPitch()+10*l,offset:[100*-h,100*-m],center:y.getCenter()};y.easeTo(S,{originalEvent:n})}};var Vn=function(n){this._map=n,s.bindAll(["_onDblClick","_onZoomEnd"],this)};Vn.prototype.isEnabled=function(){return!!this._enabled},Vn.prototype.isActive=function(){return!!this._active},Vn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vn.prototype.onTouchStart=function(n){var i=this;this.isEnabled()&&(n.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(n)):this._tapped=setTimeout(function(){i._tapped=null},300)))},Vn.prototype.onDblClick=function(n){this.isEnabled()&&(n.originalEvent.preventDefault(),this._zoom(n))},Vn.prototype._zoom=function(n){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(n.originalEvent.shiftKey?-1:1),{around:n.lngLat},n)},Vn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Or=s.bezier(0,0,.15,1),_n=function(n){this._map=n,this._el=n.getCanvasContainer(),s.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};_n.prototype.isEnabled=function(){return!!this._enabled},_n.prototype.enable=function(n){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")},_n.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},_n.prototype.disableRotation=function(){this._rotationDisabled=!0},_n.prototype.enableRotation=function(){this._rotationDisabled=!1},_n.prototype.onStart=function(n){if(this.isEnabled()&&n.touches.length===2){var i=k.mousePos(this._el,n.touches[0]),o=k.mousePos(this._el,n.touches[1]),l=i.add(o).div(2);this._startVec=i.sub(o),this._startAround=this._map.transform.pointLocation(l),this._gestureIntent=void 0,this._inertia=[],k.addEventListener(s.window.document,"touchmove",this._onMove,{passive:!1}),k.addEventListener(s.window.document,"touchend",this._onEnd)}},_n.prototype._getTouchEventData=function(n){var i=k.mousePos(this._el,n.touches[0]),o=k.mousePos(this._el,n.touches[1]),l=i.sub(o);return{vec:l,center:i.add(o).div(2),scale:l.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*l.angleWith(this._startVec)/Math.PI}},_n.prototype._onMove=function(n){if(n.touches.length===2){var i=this._getTouchEventData(n),o=i.vec,l=i.scale,h=i.bearing;if(!this._gestureIntent){var m=this._rotationDisabled&&l!==1||Math.abs(1-l)>.15;Math.abs(h)>10?this._gestureIntent="rotate":m&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new s.Event(this._gestureIntent+"start",{originalEvent:n})),this._map.fire(new s.Event("movestart",{originalEvent:n})),this._startVec=o)}this._lastTouchEvent=n,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),n.preventDefault()}},_n.prototype._onTouchFrame=function(){this._frameId=null;var n=this._gestureIntent;if(n){var i=this._map.transform;this._startScale||(this._startScale=i.scale,this._startBearing=i.bearing);var o=this._getTouchEventData(this._lastTouchEvent),l=o.center,h=o.bearing,m=o.scale,y=i.pointLocation(l),v=i.locationPoint(y);n==="rotate"&&(i.bearing=this._startBearing+h),i.zoom=i.scaleZoom(this._startScale*m),i.setLocationAtPoint(this._startAround,v),this._map.fire(new s.Event(n,{originalEvent:this._lastTouchEvent})),this._map.fire(new s.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([s.browser.now(),m,l])}},_n.prototype._onEnd=function(n){k.removeEventListener(s.window.document,"touchmove",this._onMove,{passive:!1}),k.removeEventListener(s.window.document,"touchend",this._onEnd);var i=this._gestureIntent,o=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,i){this._map.fire(new s.Event(i+"end",{originalEvent:n})),this._drainInertiaBuffer();var l=this._inertia,h=this._map;if(l.length<2)h.snapToNorth({},{originalEvent:n});else{var m=l[l.length-1],y=l[0],v=h.transform.scaleZoom(o*m[1]),S=h.transform.scaleZoom(o*y[1]),C=v-S,L=(m[0]-y[0])/1e3,O=m[2];if(L!==0&&v!==S){var V=.15*C/L;Math.abs(V)>2.5&&(V=V>0?2.5:-2.5);var Y=1e3*Math.abs(V/(12*.15)),K=v+V*Y/2e3;K<0&&(K=0),h.easeTo({zoom:K,duration:Y,easing:Or,around:this._aroundCenter?h.getCenter():h.unproject(O),noMoveStart:!0},{originalEvent:n})}else h.snapToNorth({},{originalEvent:n})}}},_n.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,i=s.browser.now();n.length>2&&i-n[0][0]>160;)n.shift()};var ba={scrollZoom:gn,boxZoom:Un,dragRotate:kr,dragPan:Br,keyboard:xa,doubleClickZoom:Vn,touchZoomRotate:_n},lo=function(n){function i(o,l){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=l.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(o,l){return this.jumpTo({center:o},l)},i.prototype.panBy=function(o,l,h){return o=s.Point.convert(o).mult(-1),this.panTo(this.transform.center,s.extend({offset:o},l),h)},i.prototype.panTo=function(o,l,h){return this.easeTo(s.extend({center:o},l),h)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(o,l){return this.jumpTo({zoom:o},l),this},i.prototype.zoomTo=function(o,l,h){return this.easeTo(s.extend({zoom:o},l),h)},i.prototype.zoomIn=function(o,l){return this.zoomTo(this.getZoom()+1,o,l),this},i.prototype.zoomOut=function(o,l){return this.zoomTo(this.getZoom()-1,o,l),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(o,l){return this.jumpTo({bearing:o},l),this},i.prototype.rotateTo=function(o,l,h){return this.easeTo(s.extend({bearing:o},l),h)},i.prototype.resetNorth=function(o,l){return this.rotateTo(0,s.extend({duration:1e3},o),l),this},i.prototype.snapToNorth=function(o,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,l):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(o,l){return this.jumpTo({pitch:o},l),this},i.prototype.cameraForBounds=function(o,l){return o=s.LngLatBounds.convert(o),this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),0,l)},i.prototype._cameraForBoxAndBearing=function(o,l,h,m){if(typeof(m=s.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){var y=m.padding;m.padding={top:y,bottom:y,right:y,left:y}}if(s.isEqual(Object.keys(m.padding).sort(function(Se,Ae){return Se<Ae?-1:Se>Ae?1:0}),["bottom","left","right","top"])){var v=this.transform,S=v.project(s.LngLat.convert(o)),C=v.project(s.LngLat.convert(l)),L=S.rotate(-h*Math.PI/180),O=C.rotate(-h*Math.PI/180),V=new s.Point(Math.max(L.x,O.x),Math.max(L.y,O.y)),Y=new s.Point(Math.min(L.x,O.x),Math.min(L.y,O.y)),K=V.sub(Y),X=(v.width-m.padding.left-m.padding.right)/K.x,te=(v.height-m.padding.top-m.padding.bottom)/K.y;if(!(te<0||X<0)){var ae=Math.min(v.scaleZoom(v.scale*Math.min(X,te)),m.maxZoom),le=s.Point.convert(m.offset),ie=(m.padding.left-m.padding.right)/2,ce=(m.padding.top-m.padding.bottom)/2,ge=new s.Point(le.x+ie,le.y+ce).mult(v.scale/v.zoomScale(ae));return{center:v.unproject(S.add(C).div(2).sub(ge)),zoom:ae,bearing:h}}s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else s.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(o,l,h){return this._fitInternal(this.cameraForBounds(o,l),l,h)},i.prototype.fitScreenCoordinates=function(o,l,h,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.Point.convert(o)),this.transform.pointLocation(s.Point.convert(l)),h,m),m,y)},i.prototype._fitInternal=function(o,l,h){return o?(l=s.extend(o,l)).linear?this.easeTo(l,h):this.flyTo(l,h):this},i.prototype.jumpTo=function(o,l){this.stop();var h=this.transform,m=!1,y=!1,v=!1;return"zoom"in o&&h.zoom!==+o.zoom&&(m=!0,h.zoom=+o.zoom),o.center!==void 0&&(h.center=s.LngLat.convert(o.center)),"bearing"in o&&h.bearing!==+o.bearing&&(y=!0,h.bearing=+o.bearing),"pitch"in o&&h.pitch!==+o.pitch&&(v=!0,h.pitch=+o.pitch),this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),m&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),y&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),v&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))},i.prototype.easeTo=function(o,l){var h=this;this.stop(),(o=s.extend({offset:[0,0],duration:500,easing:s.ease},o)).animate===!1&&(o.duration=0);var m=this.transform,y=this.getZoom(),v=this.getBearing(),S=this.getPitch(),C="zoom"in o?+o.zoom:y,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,O="pitch"in o?+o.pitch:S,V=m.centerPoint.add(s.Point.convert(o.offset)),Y=m.pointLocation(V),K=s.LngLat.convert(o.center||Y);this._normalizeCenter(K);var X,te,ae=m.project(Y),le=m.project(K).sub(ae),ie=m.zoomScale(C-y);return o.around&&(X=s.LngLat.convert(o.around),te=m.locationPoint(X)),this._zooming=C!==y,this._rotating=v!==L,this._pitching=O!==S,this._prepareEase(l,o.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(ce){if(h._zooming&&(m.zoom=s.number(y,C,ce)),h._rotating&&(m.bearing=s.number(v,L,ce)),h._pitching&&(m.pitch=s.number(S,O,ce)),X)m.setLocationAtPoint(X,te);else{var ge=m.zoomScale(m.zoom-y),Se=C>y?Math.min(2,ie):Math.max(.5,ie),Ae=Math.pow(Se,1-ce),et=m.unproject(ae.add(le.mult(ce*Ae)).mult(ge));m.setLocationAtPoint(m.renderWorldCopies?et.wrap():et,V)}h._fireMoveEvents(l)},function(){o.delayEndEvents?h._easeEndTimeoutID=setTimeout(function(){return h._afterEase(l)},o.delayEndEvents):h._afterEase(l)},o),this},i.prototype._prepareEase=function(o,l){this._moving=!0,l||this.fire(new s.Event("movestart",o)),this._zooming&&this.fire(new s.Event("zoomstart",o)),this._rotating&&this.fire(new s.Event("rotatestart",o)),this._pitching&&this.fire(new s.Event("pitchstart",o))},i.prototype._fireMoveEvents=function(o){this.fire(new s.Event("move",o)),this._zooming&&this.fire(new s.Event("zoom",o)),this._rotating&&this.fire(new s.Event("rotate",o)),this._pitching&&this.fire(new s.Event("pitch",o))},i.prototype._afterEase=function(o){var l=this._zooming,h=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,l&&this.fire(new s.Event("zoomend",o)),h&&this.fire(new s.Event("rotateend",o)),m&&this.fire(new s.Event("pitchend",o)),this.fire(new s.Event("moveend",o))},i.prototype.flyTo=function(o,l){var h=this;this.stop(),o=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},o);var m=this.transform,y=this.getZoom(),v=this.getBearing(),S=this.getPitch(),C="zoom"in o?s.clamp(+o.zoom,m.minZoom,m.maxZoom):y,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,O="pitch"in o?+o.pitch:S,V=m.zoomScale(C-y),Y=m.centerPoint.add(s.Point.convert(o.offset)),K=m.pointLocation(Y),X=s.LngLat.convert(o.center||K);this._normalizeCenter(X);var te=m.project(K),ae=m.project(X).sub(te),le=o.curve,ie=Math.max(m.width,m.height),ce=ie/V,ge=ae.mag();if("minZoom"in o){var Se=s.clamp(Math.min(o.minZoom,y,C),m.minZoom,m.maxZoom),Ae=ie/m.zoomScale(Se-y);le=Math.sqrt(Ae/ge*2)}var et=le*le;function at(Tt){var Er=(ce*ce-ie*ie+(Tt?-1:1)*et*et*ge*ge)/(2*(Tt?ce:ie)*et*ge);return Math.log(Math.sqrt(Er*Er+1)-Er)}function ot(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function ke(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}var bt=at(0),tt=function(Tt){return ke(bt)/ke(bt+le*Tt)},Qt=function(Tt){return ie*((ke(bt)*(ot(Er=bt+le*Tt)/ke(Er))-ot(bt))/et)/ge;var Er},wt=(at(1)-bt)/le;if(Math.abs(ge)<1e-6||!isFinite(wt)){if(Math.abs(ie-ce)<1e-6)return this.easeTo(o,l);var cr=ce<ie?-1:1;wt=Math.abs(Math.log(ce/ie))/le,Qt=function(){return 0},tt=function(Tt){return Math.exp(cr*le*Tt)}}if("duration"in o)o.duration=+o.duration;else{var Ht="screenSpeed"in o?+o.screenSpeed/le:+o.speed;o.duration=1e3*wt/Ht}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=v!==L,this._pitching=O!==S,this._prepareEase(l,!1),this._ease(function(Tt){var Er=Tt*wt,Wi=1/tt(Er);m.zoom=Tt===1?C:y+m.scaleZoom(Wi),h._rotating&&(m.bearing=s.number(v,L,Tt)),h._pitching&&(m.pitch=s.number(S,O,Tt));var Ki=Tt===1?X:m.unproject(te.add(ae.mult(Qt(Er))).mult(Wi));m.setLocationAtPoint(m.renderWorldCopies?Ki.wrap():Ki,Y),h._fireMoveEvents(l)},function(){return h._afterEase(l)},o),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var o=this._onEaseEnd;delete this._onEaseEnd,o.call(this)}return this},i.prototype._ease=function(o,l,h){h.animate===!1||h.duration===0?(o(1),l()):(this._easeStart=s.browser.now(),this._easeOptions=h,this._onEaseFrame=o,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var o=Math.min((s.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(o,l){o=s.wrap(o,-180,180);var h=Math.abs(o-l);return Math.abs(o-360-l)<h&&(o-=360),Math.abs(o+360-l)<h&&(o+=360),o},i.prototype._normalizeCenter=function(o){var l=this.transform;if(l.renderWorldCopies&&!l.lngRange){var h=o.lng-l.center.lng;o.lng+=h>180?-360:h<-180?360:0}},i}(s.Evented),Di=function(n){n===void 0&&(n={}),this.options=n,s.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Di.prototype.getDefaultPosition=function(){return"bottom-right"},Di.prototype.onAdd=function(n){var i=this.options&&this.options.compact;return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),i&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),i===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Di.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Di.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:s.config.ACCESS_TOKEN}];if(n){var o=i.reduce(function(l,h,m){return h.value&&(l+=h.key+"="+h.value+(m<i.length-1?"&":"")),l},"?");n.href=s.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):"")}},Di.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Di.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(y){return typeof y!="string"?"":y})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var i=this._map.style.stylesheet;this.styleOwner=i.owner,this.styleId=i.id}var o=this._map.style.sourceCaches;for(var l in o){var h=o[l];if(h.used){var m=h.getSource();m.attribution&&n.indexOf(m.attribution)<0&&n.push(m.attribution)}}n.sort(function(y,v){return y.length-v.length}),(n=n.filter(function(y,v){for(var S=v+1;S<n.length;S++)if(n[S].indexOf(y)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=n.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Di.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Hi=function(){s.bindAll(["_updateLogo"],this),s.bindAll(["_updateCompact"],this)};Hi.prototype.onAdd=function(n){this._map=n,this._container=k.create("div","mapboxgl-ctrl");var i=k.create("a","mapboxgl-ctrl-logo");return i.target="_blank",i.href="https://www.mapbox.com/",i.setAttribute("aria-label","Mapbox logo"),i.setAttribute("rel","noopener"),this._container.appendChild(i),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Hi.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Hi.prototype.getDefaultPosition=function(){return"bottom-left"},Hi.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Hi.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var i in n)if(n[i].getSource().mapbox_logo)return!0;return!1}},Hi.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var i=n[0];this._map.getCanvasContainer().offsetWidth<250?i.classList.add("mapboxgl-compact"):i.classList.remove("mapboxgl-compact")}};var uo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};uo.prototype.add=function(n){var i=++this._id;return this._queue.push({callback:n,id:i,cancelled:!1}),i},uo.prototype.remove=function(n){for(var i=this._currentlyRunning,o=0,l=i?this._queue.concat(i):this._queue;o<l.length;o+=1){var h=l[o];if(h.id===n)return void(h.cancelled=!0)}},uo.prototype.run=function(){var n=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,o=n;i<o.length;i+=1){var l=o[i];if(!l.cancelled&&(l.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},uo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ni=s.window.HTMLImageElement,Zs=s.window.HTMLElement,nt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},mt=function(n){function i(l){var h=this;if((l=s.extend({},nt,l)).minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than minZoom");var m=new jt(l.minZoom,l.maxZoom,l.renderWorldCopies);n.call(this,m,l),this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._failIfMajorPerformanceCaveat=l.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=l.preserveDrawingBuffer,this._trackResize=l.trackResize,this._bearingSnap=l.bearingSnap,this._refreshExpiredTiles=l.refreshExpiredTiles,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=l.collectResourceTiming,this._renderTaskQueue=new uo,this._controls=[],this._mapId=s.uniqueId();var y=l.transformRequest;if(this._transformRequest=y?function(v,S){return y(v,S)||{url:v}}:function(v){return{url:v}},typeof l.container=="string"){if(this._container=s.window.document.getElementById(l.container),!this._container)throw new Error("Container '"+l.container+"' not found.")}else{if(!(l.container instanceof Zs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return h._update(!1)}),this.on("moveend",function(){return h._update(!1)}),this.on("zoom",function(){return h._update(!0)}),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1)),function(v,S){var C=v.getCanvasContainer(),L=null,O=!1,V=null;for(var Y in ba)v[Y]=new ba[Y](v,S),S.interactive&&S[Y]&&v[Y].enable(S[Y]);k.addEventListener(C,"mouseout",function(K){v.fire(new De("mouseout",v,K))}),k.addEventListener(C,"mousedown",function(K){O=!0,V=k.mousePos(C,K);var X=new De("mousedown",v,K);v.fire(X),X.defaultPrevented||(S.interactive&&!v.doubleClickZoom.isActive()&&v.stop(),v.boxZoom.onMouseDown(K),v.boxZoom.isActive()||v.dragPan.isActive()||v.dragRotate.onMouseDown(K),v.boxZoom.isActive()||v.dragRotate.isActive()||v.dragPan.onMouseDown(K))}),k.addEventListener(C,"mouseup",function(K){var X=v.dragRotate.isActive();L&&!X&&v.fire(new De("contextmenu",v,L)),L=null,O=!1,v.fire(new De("mouseup",v,K))}),k.addEventListener(C,"mousemove",function(K){if(!v.dragPan.isActive()&&!v.dragRotate.isActive()){for(var X=K.target;X&&X!==C;)X=X.parentNode;X===C&&v.fire(new De("mousemove",v,K))}}),k.addEventListener(C,"mouseover",function(K){for(var X=K.target;X&&X!==C;)X=X.parentNode;X===C&&v.fire(new De("mouseover",v,K))}),k.addEventListener(C,"touchstart",function(K){var X=new Bo("touchstart",v,K);v.fire(X),X.defaultPrevented||(S.interactive&&v.stop(),v.boxZoom.isActive()||v.dragRotate.isActive()||v.dragPan.onTouchStart(K),v.touchZoomRotate.onStart(K),v.doubleClickZoom.onTouchStart(X))},{passive:!1}),k.addEventListener(C,"touchmove",function(K){v.fire(new Bo("touchmove",v,K))},{passive:!1}),k.addEventListener(C,"touchend",function(K){v.fire(new Bo("touchend",v,K))}),k.addEventListener(C,"touchcancel",function(K){v.fire(new Bo("touchcancel",v,K))}),k.addEventListener(C,"click",function(K){var X=k.mousePos(C,K);(X.equals(V)||X.dist(V)<S.clickTolerance)&&v.fire(new De("click",v,K))}),k.addEventListener(C,"dblclick",function(K){var X=new De("dblclick",v,K);v.fire(X),X.defaultPrevented||v.doubleClickZoom.onDblClick(X)}),k.addEventListener(C,"contextmenu",function(K){var X=v.dragRotate.isActive();O||X?O&&(L=K):v.fire(new De("contextmenu",v,K)),(v.dragRotate.isEnabled()||v.listens("contextmenu"))&&K.preventDefault()}),k.addEventListener(C,"wheel",function(K){S.interactive&&v.stop();var X=new ls("wheel",v,K);v.fire(X),X.defaultPrevented||v.scrollZoom.onWheel(K)},{passive:!1})}(this,l),this._hash=l.hash&&new ri().addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,s.extend({},l.fitBoundsOptions,{duration:0})))),this.resize(),l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new Di({customAttribution:l.customAttribution})),this.addControl(new Hi,l.logoPosition),this.on("style.load",function(){h.transform.unmodified&&h.jumpTo(h.style.stylesheet)}),this.on("data",function(v){h._update(v.dataType==="style"),h.fire(new s.Event(v.dataType+"data",v))}),this.on("dataloading",function(v){h.fire(new s.Event(v.dataType+"dataloading",v))})}n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(l,h){if(h===void 0&&l.getDefaultPosition&&(h=l.getDefaultPosition()),h===void 0&&(h="top-right"),!l||!l.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var m=l.onAdd(this);this._controls.push(l);var y=this._controlPositions[h];return h.indexOf("bottom")!==-1?y.insertBefore(m,y.firstChild):y.appendChild(m),this},i.prototype.removeControl=function(l){if(!l||!l.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var h=this._controls.indexOf(l);return h>-1&&this._controls.splice(h,1),l.onRemove(this),this},i.prototype.resize=function(l){var h=this._containerDimensions(),m=h[0],y=h[1];return this._resizeCanvas(m,y),this.transform.resize(m,y),this.painter.resize(m,y),this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)).fire(new s.Event("resize",l)).fire(new s.Event("moveend",l)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(l){return this.transform.setMaxBounds(s.LngLatBounds.convert(l)),this._update()},i.prototype.setMinZoom=function(l){if((l=l??0)>=0&&l<=this.transform.maxZoom)return this.transform.minZoom=l,this._update(),this.getZoom()<l&&this.setZoom(l),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(l){if((l=l??22)>=this.transform.minZoom)return this.transform.maxZoom=l,this._update(),this.getZoom()>l&&this.setZoom(l),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(l){return this.transform.renderWorldCopies=l,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(l){return this.transform.locationPoint(s.LngLat.convert(l))},i.prototype.unproject=function(l){return this.transform.pointLocation(s.Point.convert(l))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(l,h,m){var y=this;if(m===void 0)return n.prototype.on.call(this,l,h);var v=function(){var C;if(l==="mouseenter"||l==="mouseover"){var L=!1;return{layer:h,listener:m,delegates:{mousemove:function(V){var Y=y.getLayer(h)?y.queryRenderedFeatures(V.point,{layers:[h]}):[];Y.length?L||(L=!0,m.call(y,new De(l,y,V.originalEvent,{features:Y}))):L=!1},mouseout:function(){L=!1}}}}if(l==="mouseleave"||l==="mouseout"){var O=!1;return{layer:h,listener:m,delegates:{mousemove:function(V){(y.getLayer(h)?y.queryRenderedFeatures(V.point,{layers:[h]}):[]).length?O=!0:O&&(O=!1,m.call(y,new De(l,y,V.originalEvent)))},mouseout:function(V){O&&(O=!1,m.call(y,new De(l,y,V.originalEvent)))}}}}return{layer:h,listener:m,delegates:(C={},C[l]=function(V){var Y=y.getLayer(h)?y.queryRenderedFeatures(V.point,{layers:[h]}):[];Y.length&&(V.features=Y,m.call(y,V),delete V.features)},C)}}();for(var S in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[l]=this._delegatedListeners[l]||[],this._delegatedListeners[l].push(v),v.delegates)this.on(S,v.delegates[S]);return this},i.prototype.off=function(l,h,m){if(m===void 0)return n.prototype.off.call(this,l,h);if(this._delegatedListeners&&this._delegatedListeners[l])for(var y=this._delegatedListeners[l],v=0;v<y.length;v++){var S=y[v];if(S.layer===h&&S.listener===m){for(var C in S.delegates)this.off(C,S.delegates[C]);return y.splice(v,1),this}}return this},i.prototype.queryRenderedFeatures=function(l,h){if(!this.style)return[];var m;if(h!==void 0||l===void 0||l instanceof s.Point||Array.isArray(l)||(h=l,l=void 0),h=h||{},(l=l||[[0,0],[this.transform.width,this.transform.height]])instanceof s.Point||typeof l[0]=="number")m=[s.Point.convert(l)];else{var y=s.Point.convert(l[0]),v=s.Point.convert(l[1]);m=[y,new s.Point(v.x,y.y),v,new s.Point(y.x,v.y),y]}return this.style.queryRenderedFeatures(m,h,this.transform)},i.prototype.querySourceFeatures=function(l,h){return this.style.querySourceFeatures(l,h)},i.prototype.setStyle=function(l,h){return(!h||h.diff!==!1&&!h.localIdeographFontFamily)&&this.style&&l?(this._diffStyle(l,h),this):this._updateStyle(l,h)},i.prototype._updateStyle=function(l,h){return this.style&&(this.style.setEventedParent(null),this.style._remove()),l?(this.style=new Ut(this,h||{}),this.style.setEventedParent(this,{style:this.style}),typeof l=="string"?this.style.loadURL(l):this.style.loadJSON(l),this):(delete this.style,this)},i.prototype._diffStyle=function(l,h){var m=this;if(typeof l=="string"){var y=s.normalizeStyleURL(l),v=this._transformRequest(y,s.ResourceType.Style);s.getJSON(v,function(S,C){S?m.fire(new s.ErrorEvent(S)):C&&m._updateDiff(C,h)})}else typeof l=="object"&&this._updateDiff(l,h)},i.prototype._updateDiff=function(l,h){try{this.style.setState(l)&&this._update(!0)}catch(m){s.warnOnce("Unable to perform style diff: "+(m.message||m.error||m)+".  Rebuilding the style from scratch."),this._updateStyle(l,h)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(l,h){return this.style.addSource(l,h),this._update(!0)},i.prototype.isSourceLoaded=function(l){var h=this.style&&this.style.sourceCaches[l];if(h!==void 0)return h.loaded();this.fire(new s.ErrorEvent(new Error("There is no source with ID '"+l+"'")))},i.prototype.areTilesLoaded=function(){var l=this.style&&this.style.sourceCaches;for(var h in l){var m=l[h]._tiles;for(var y in m){var v=m[y];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0},i.prototype.addSourceType=function(l,h,m){return this.style.addSourceType(l,h,m)},i.prototype.removeSource=function(l){return this.style.removeSource(l),this._update(!0)},i.prototype.getSource=function(l){return this.style.getSource(l)},i.prototype.addImage=function(l,h,m){m===void 0&&(m={});var y=m.pixelRatio;y===void 0&&(y=1);var v=m.sdf;if(v===void 0&&(v=!1),h instanceof ni){var S=s.browser.getImageData(h),C=S.width,L=S.height,O=S.data;this.style.addImage(l,{data:new s.RGBAImage({width:C,height:L},O),pixelRatio:y,sdf:v})}else{if(h.width===void 0||h.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var V=h.width,Y=h.height,K=h.data;this.style.addImage(l,{data:new s.RGBAImage({width:V,height:Y},new Uint8Array(K)),pixelRatio:y,sdf:v})}},i.prototype.hasImage=function(l){return l?!!this.style.getImage(l):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(l){this.style.removeImage(l)},i.prototype.loadImage=function(l,h){s.getImage(this._transformRequest(l,s.ResourceType.Image),h)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(l,h){return this.style.addLayer(l,h),this._update(!0)},i.prototype.moveLayer=function(l,h){return this.style.moveLayer(l,h),this._update(!0)},i.prototype.removeLayer=function(l){return this.style.removeLayer(l),this._update(!0)},i.prototype.getLayer=function(l){return this.style.getLayer(l)},i.prototype.setFilter=function(l,h,m){return m===void 0&&(m={}),this.style.setFilter(l,h,m),this._update(!0)},i.prototype.setLayerZoomRange=function(l,h,m){return this.style.setLayerZoomRange(l,h,m),this._update(!0)},i.prototype.getFilter=function(l){return this.style.getFilter(l)},i.prototype.setPaintProperty=function(l,h,m,y){return y===void 0&&(y={}),this.style.setPaintProperty(l,h,m,y),this._update(!0)},i.prototype.getPaintProperty=function(l,h){return this.style.getPaintProperty(l,h)},i.prototype.setLayoutProperty=function(l,h,m,y){return y===void 0&&(y={}),this.style.setLayoutProperty(l,h,m,y),this._update(!0)},i.prototype.getLayoutProperty=function(l,h){return this.style.getLayoutProperty(l,h)},i.prototype.setLight=function(l,h){return h===void 0&&(h={}),this.style.setLight(l,h),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(l,h){return this.style.setFeatureState(l,h),this._update()},i.prototype.removeFeatureState=function(l,h){return this.style.removeFeatureState(l,h),this._update()},i.prototype.getFeatureState=function(l){return this.style.getFeatureState(l)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var l=0,h=0;return this._container&&(l=this._container.clientWidth||400,h=this._container.clientHeight||300),[l,h]},i.prototype._detectMissingCSS=function(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var l=this._container;l.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",l)).style.visibility="hidden",this._detectMissingCSS();var h=this._canvasContainer=k.create("div","mapboxgl-canvas-container",l);this._interactive&&h.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",h),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var m=this._containerDimensions();this._resizeCanvas(m[0],m[1]);var y=this._controlContainer=k.create("div","mapboxgl-control-container",l),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(S){v[S]=k.create("div","mapboxgl-ctrl-"+S,y)})},i.prototype._resizeCanvas=function(l,h){var m=s.window.devicePixelRatio||1;this._canvas.width=m*l,this._canvas.height=m*h,this._canvas.style.width=l+"px",this._canvas.style.height=h+"px"},i.prototype._setupPainter=function(){var l=s.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},G.webGLContextAttributes),h=this._canvas.getContext("webgl",l)||this._canvas.getContext("experimental-webgl",l);h?(this.painter=new Dr(h,this.transform),s.webpSupported.testSupport(h)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(l){l.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:l}))},i.prototype._contextRestored=function(l){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:l}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(l){return this.style?(this._styleDirty=this._styleDirty||l,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(l){return this._update(),this._renderTaskQueue.add(l)},i.prototype._cancelRenderFrame=function(l){this._renderTaskQueue.remove(l)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var h=this.transform.zoom,m=s.browser.now();this.style.zoomHistory.update(h,m);var y=new s.EvaluationParameters(h,{now:m,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),v=y.crossFadingFactor();v===1&&v===this._crossFadingFactor||(l=!0,this._crossFadingFactor=v),this.style.update(y)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var l=0,h=this._controls;l<h.length;l+=1)h[l].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));var m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),wa(this._canvasContainer),wa(this._controlContainer),wa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new s.Event("remove"))},i.prototype.triggerRepaint=function(){var l=this;this.style&&!this._frame&&(this._frame=s.browser.frame(function(){l._frame=null,l._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(l){this._showTileBoundaries!==l&&(this._showTileBoundaries=l,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(l){this._showCollisionBoxes!==l&&(this._showCollisionBoxes=l,l?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(l){this._showOverdrawInspector!==l&&(this._showOverdrawInspector=l,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(l){this._repaint!==l&&(this._repaint=l,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(l){this._vertices=l,this._update()},Object.defineProperties(i.prototype,o),i}(lo);function wa(n){n.parentNode&&n.parentNode.removeChild(n)}var Ea={showCompass:!0,showZoom:!0},co=function(n){var i=this;this.options=s.extend({},Ea,n),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return i._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return i._map.zoomOut()})),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return i._map.resetNorth()}),this._compassArrow=k.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function ii(n,i,o){if(n=new s.LngLat(n.lng,n.lat),i){var l=new s.LngLat(n.lng-360,n.lat),h=new s.LngLat(n.lng+360,n.lat),m=o.locationPoint(n).distSqr(i);o.locationPoint(l).distSqr(i)<m?n=l:o.locationPoint(h).distSqr(i)<m&&(n=h)}for(;Math.abs(n.lng-o.center.lng)>180;){var y=o.locationPoint(n);if(y.x>=0&&y.y>=0&&y.x<=o.width&&y.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}co.prototype._rotateCompassArrow=function(){var n="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=n},co.prototype.onAdd=function(n){return this._map=n,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new kr(n,{button:"left",element:this._compass}),k.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},co.prototype.onRemove=function(){k.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),k.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},co.prototype._createButton=function(n,i,o){var l=k.create("button",n,this._container);return l.type="button",l.title=i,l.setAttribute("aria-label",i),l.addEventListener("click",o),l};var gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Il(n,i,o){var l=n.classList;for(var h in gi)l.remove("mapboxgl-"+o+"-anchor-"+h);l.add("mapboxgl-"+o+"-anchor-"+i)}var Bi,ur=function(n){function i(o,l){if(n.call(this),(o instanceof s.window.HTMLElement||l)&&(o=s.extend({element:o},l)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._draggable=o&&o.draggable||!1,this._state="inactive",o&&o.element)this._element=o.element,this._offset=s.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div");var h=k.createNS("http://www.w3.org/2000/svg","svg");h.setAttributeNS(null,"height","41px"),h.setAttributeNS(null,"width","27px"),h.setAttributeNS(null,"viewBox","0 0 27 41");var m=k.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");var y=k.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"fill-rule","nonzero");var v=k.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(3.0, 29.0)"),v.setAttributeNS(null,"fill","#000000");for(var S=0,C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];S<C.length;S+=1){var L=C[S],O=k.createNS("http://www.w3.org/2000/svg","ellipse");O.setAttributeNS(null,"opacity","0.04"),O.setAttributeNS(null,"cx","10.5"),O.setAttributeNS(null,"cy","5.80029008"),O.setAttributeNS(null,"rx",L.rx),O.setAttributeNS(null,"ry",L.ry),v.appendChild(O)}var V=k.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);var Y=k.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(Y);var K=k.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");var X=k.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(X);var te=k.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");var ae=k.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");var le=k.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");var ie=k.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#FFFFFF"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962"),ae.appendChild(le),ae.appendChild(ie),y.appendChild(v),y.appendChild(V),y.appendChild(K),y.appendChild(te),y.appendChild(ae),h.appendChild(y),this._element.appendChild(h),this._offset=s.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(o){return this._lngLat=s.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null),o){if(!("offset"in o.options)){var l=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[l,-1*(24.6+l)],"bottom-right":[-l,-1*(24.6+l)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},i.prototype._onMapClick=function(o){var l=o.originalEvent.target,h=this._element;this._popup&&(l===h||h.contains(l))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},i.prototype._update=function(o){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ii(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,gi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Il(this._element,this._anchor,"marker"))},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(o){return this._offset=s.Point.convert(o),this._update(),this},i.prototype._onMove=function(o){this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i}(s.Evented),vn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Cl=function(n){function i(o){n.call(this),this.options=s.extend({},vn,o),s.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(o){var l;return this._map=o,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Bi!==void 0?l(Bi):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(function(h){Bi=h.state!=="denied",l(Bi)}):(Bi=!!s.window.navigator.geolocation,l(Bi)),this._container},i.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),k.remove(this._container),this._map=void 0},i.prototype._onSuccess=function(o){if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",o)),this._finish()},i.prototype._updateCamera=function(o){var l=new s.LngLat(o.coords.longitude,o.coords.latitude),h=o.coords.accuracy;this._map.fitBounds(l.toBounds(h),this.options.fitBoundsOptions,{geolocateSource:!0})},i.prototype._updateMarker=function(o){o?this._userLocationDotMarker.setLngLat([o.coords.longitude,o.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},i.prototype._onError=function(o){if(this.options.trackUserLocation)if(o.code===1)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocationWatchID!==void 0&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",o)),this._finish()},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(o){var l=this;o!==!1?(this._container.addEventListener("contextmenu",function(h){return h.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ur(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(h){h.geolocateSource||l._watchState!=="ACTIVE_LOCK"||(l._watchState="BACKGROUND",l._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),l._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),l.fire(new s.Event("trackuserlocationend")))})):s.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},i.prototype.trigger=function(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}this._watchState==="OFF"&&this._geolocationWatchID!==void 0?this._clearWatch():this._geolocationWatchID===void 0&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(s.Evented),Za={maxWidth:100,unit:"metric"},po=function(n){this.options=s.extend({},Za,n),s.bindAll(["_onMove","setUnit"],this)};function cs(n,i,o){var l,h,m,y,v,S,C=o&&o.maxWidth||100,L=n._container.clientHeight/2,O=(l=n.unproject([0,L]),h=n.unproject([C,L]),m=Math.PI/180,y=l.lat*m,v=h.lat*m,S=Math.sin(y)*Math.sin(v)+Math.cos(y)*Math.cos(v)*Math.cos((h.lng-l.lng)*m),6371e3*Math.acos(Math.min(S,1)));if(o&&o.unit==="imperial"){var V=3.2808*O;V>5280?Sa(i,C,V/5280,"mi"):Sa(i,C,V,"ft")}else o&&o.unit==="nautical"?Sa(i,C,O/1852,"nm"):Sa(i,C,O,"m")}function Sa(n,i,o,l){var h,m,y,v=(h=o,m=Math.pow(10,(""+Math.floor(h)).length-1),y=(y=h/m)>=10?10:y>=5?5:y>=3?3:y>=2?2:y>=1?1:function(C){var L=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*L)/L}(y),m*y),S=v/o;l==="m"&&v>=1e3&&(v/=1e3,l="km"),n.style.width=i*S+"px",n.innerHTML=v+l}po.prototype.getDefaultPosition=function(){return"bottom-left"},po.prototype._onMove=function(){cs(this._map,this._container,this.options)},po.prototype.onAdd=function(n){return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},po.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},po.prototype.setUnit=function(n){this.options.unit=n,cs(this._map,this._container,this.options)};var Nn=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof s.window.HTMLElement?this._container=n.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in s.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in s.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in s.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Nn.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Nn.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Nn.prototype._checkFullscreenSupport=function(){return!!(s.window.document.fullscreenEnabled||s.window.document.mozFullScreenEnabled||s.window.document.msFullscreenEnabled||s.window.document.webkitFullscreenEnabled)},Nn.prototype._setupUI=function(){var n=this._fullscreenButton=k.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);n.setAttribute("aria-label","Toggle fullscreen"),n.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Nn.prototype._isFullscreen=function(){return this._fullscreen},Nn.prototype._changeIcon=function(){(s.window.document.fullscreenElement||s.window.document.mozFullScreenElement||s.window.document.webkitFullscreenElement||s.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Nn.prototype._onClickFullscreen=function(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.mozCancelFullScreen?s.window.document.mozCancelFullScreen():s.window.document.msExitFullscreen?s.window.document.msExitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Gs={closeButton:!0,closeOnClick:!0,className:""},Xs=function(n){function i(o){n.call(this),this.options=s.extend(Object.create(Gs),o),s.bindAll(["_update","_onClickClose","remove"],this)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.addTo=function(o){return this._map=o,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new s.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new s.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(o){return this._lngLat=s.LngLat.convert(o),this._pos=null,this._update(),this},i.prototype.setText=function(o){return this.setDOMContent(s.window.document.createTextNode(o))},i.prototype.setHTML=function(o){var l,h=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");for(m.innerHTML=o;l=m.firstChild;)h.appendChild(l);return this.setDOMContent(h)},i.prototype.setDOMContent=function(o){return this._createContent(),this._content.appendChild(o),this._update(),this},i.prototype._createContent=function(){this._content&&k.remove(this._content),this._content=k.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},i.prototype._update=function(){var o=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(L){return o._container.classList.add(L)})),this._map.transform.renderWorldCopies&&(this._lngLat=ii(this._lngLat,this._pos,this._map.transform));var l=this._pos=this._map.project(this._lngLat),h=this.options.anchor,m=function L(O){if(O){if(typeof O=="number"){var V=Math.round(Math.sqrt(.5*Math.pow(O,2)));return{center:new s.Point(0,0),top:new s.Point(0,O),"top-left":new s.Point(V,V),"top-right":new s.Point(-V,V),bottom:new s.Point(0,-O),"bottom-left":new s.Point(V,-V),"bottom-right":new s.Point(-V,-V),left:new s.Point(O,0),right:new s.Point(-O,0)}}if(O instanceof s.Point||Array.isArray(O)){var Y=s.Point.convert(O);return{center:Y,top:Y,"top-left":Y,"top-right":Y,bottom:Y,"bottom-left":Y,"bottom-right":Y,left:Y,right:Y}}return{center:s.Point.convert(O.center||[0,0]),top:s.Point.convert(O.top||[0,0]),"top-left":s.Point.convert(O["top-left"]||[0,0]),"top-right":s.Point.convert(O["top-right"]||[0,0]),bottom:s.Point.convert(O.bottom||[0,0]),"bottom-left":s.Point.convert(O["bottom-left"]||[0,0]),"bottom-right":s.Point.convert(O["bottom-right"]||[0,0]),left:s.Point.convert(O.left||[0,0]),right:s.Point.convert(O.right||[0,0])}}return L(new s.Point(0,0))}(this.options.offset);if(!h){var y,v=this._container.offsetWidth,S=this._container.offsetHeight;y=l.y+m.bottom.y<S?["top"]:l.y>this._map.transform.height-S?["bottom"]:[],l.x<v/2?y.push("left"):l.x>this._map.transform.width-v/2&&y.push("right"),h=y.length===0?"bottom":y.join("-")}var C=l.add(m[h]).round();k.setTransform(this._container,gi[h]+" translate("+C.x+"px,"+C.y+"px)"),Il(this._container,h,"popup")}},i.prototype._onClickClose=function(){this.remove()},i}(s.Evented),ps={version:s.version,supported:G,setRTLTextPlugin:s.setRTLTextPlugin,Map:mt,NavigationControl:co,GeolocateControl:Cl,AttributionControl:Di,ScaleControl:po,FullscreenControl:Nn,Popup:Xs,Marker:ur,Style:Ut,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,config:s.config,get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(n){s.config.ACCESS_TOKEN=n},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(n){s.config.API_URL=n},get workerCount(){return Et.workerCount},set workerCount(n){Et.workerCount=n},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){s.config.MAX_PARALLEL_IMAGE_REQUESTS=n},workerUrl:""};return ps}),T})})(Gf);var xv=Gf.exports;const Ti=vv(xv);const bv={mounted(){Ti.accessToken="pk.eyJ1Ijoic2JoYWt0YTEiLCJhIjoiY2xqeTcxMnZiMDI3ZzNocXI1amkycm9vcCJ9.wvQNiCSgwpkhNaRe9KAx4w";const u=new Ti.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",center:[1,50],zoom:1.5});u.on("load",()=>{});const f=new Ti.Marker;f.setLngLat([13.405,52.52]),f.setPopup(new Ti.Popup().setHTML('<a href="/Berlin">Berlin, Germany | Sept. 2023</a>')),f.addTo(u);const g=new Ti.Marker;g.setLngLat([7.44,46.94]),g.setPopup(new Ti.Popup().setHTML('<a href="/Bern">Bern, Swizterland | Jan 2022</a>')),g.addTo(u);const w=new Ti.Marker;w.setLngLat([101.68,3.13]),w.setPopup(new Ti.Popup().setHTML('<a href="/KualaLumpur">Kuala Lumpur, Malaysia | Aug 2019</a>')),w.addTo(u);const T=new Ti.Marker;T.setLngLat([12.49,41.9]),T.setPopup(new Ti.Popup().setHTML('<a href="/Rome">Rome, Italy | Aug 2022</a>')),T.addTo(u);const P=new Ti.Marker;P.setLngLat([139.65,35.67]),P.setPopup(new Ti.Popup().setHTML('<a href="/Tokyo">Tokyo, Japan | Sept 2019</a>')),P.addTo(u);const s=new Ti.Marker;s.setLngLat([-117.16,32.71]),s.setPopup(new Ti.Popup().setHTML('<a href="/SanDiego">San Diego, USA | June 2017</a>')),s.addTo(u)}},wv=u=>(Mc("data-v-ae526a14"),u=u(),Lc(),u),Ev={class:"map-container"},Sv=wv(()=>er("div",{id:"map"},null,-1)),Tv=[Sv];function Av(u,f,g,w,T,P){return El(),Sl("div",Ev,Tv)}const Iv=Tl(bv,[["render",Av],["__scopeId","data-v-ae526a14"]]);const Cv={components:{TravelCards:gv,MapBox:Iv}},Pv={class:"acc-wrapper"},zv={class:"accordion"},kv={class:"item"},Mv={class:"item"},Lv={class:"item"},Rv={clas:"item"},Dv={class:"item"},Bv={class:"item"};function Ov(u,f,g,w,T,P){const s=Ps("TravelCards"),G=Ps("RouterLink"),k=Ps("MapBox");return El(),Sl(go,null,[er("main",null,[er("div",Pv,[er("div",zv,[er("div",kv,[yr(G,{to:"/Berlin"},{default:aa(()=>[yr(s,{location:"Berlin, Germany",date:"Septemer 2023",imageSrc:"https://deih43ym53wif.cloudfront.net/berlin-germany-shutterstock_314149679_87b7a543ce.jpeg"})]),_:1})]),er("div",Mv,[yr(G,{to:"/Bern"},{default:aa(()=>[yr(s,{location:"Bern, Swizterland",date:"January 2022",imageSrc:"https://www.railbookers.ca/sites/railbookers/files/styles/hero/public/media/images/shutterstock_1438073690.jpg?h=82f92a78&itok=4jjanHvF"})]),_:1})]),er("div",Lv,[yr(G,{to:"/Rome"},{default:aa(()=>[yr(s,{location:"Rome, Italy",date:"August 2022",imageSrc:"https://www.thediaryofanomad.com/wp-content/uploads/2020/11/rome-for-3-days-in-rome-itinerary-vatican-dome-view.jpg"})]),_:1})]),er("div",Rv,[yr(G,{to:"/KualaLumpur"},{default:aa(()=>[yr(s,{location:"Kuala Lumpur, Malaysia",date:"August 2019",imageSrc:"https://images.ctfassets.net/bth3mlrehms2/28u9gceQawOZDYkvxnwGVH/4efcf610efe90527d2411cebf517cdd2/Malaysia_Kuala_Lumpur_Petronas_Towers.jpg?w=3864&h=2173&fl=progressive&q=50&fm=jpg"})]),_:1})]),er("div",Dv,[yr(G,{to:"/Tokyo"},{default:aa(()=>[yr(s,{location:"Tokyo, Japan",date:"September 2019",imageSrc:"../images/TokyoHeader.avif"})]),_:1})]),er("div",Bv,[yr(G,{to:"/SanDiego"},{default:aa(()=>[yr(s,{location:"San Diego, USA",date:"June 2017",imageSrc:"https://fox5sandiego.com/wp-content/uploads/sites/15/2023/04/AdobeStock_413086770-1.jpeg"})]),_:1})])])])]),yr(k)],64)}const Fv=Tl(Cv,[["render",Ov],["__scopeId","data-v-267906ad"]]),Uv=uv({history:T_("/Roaming_New_Routes/"),routes:[{path:"/",name:"home",component:Fv},{path:"/Berlin",name:"Berlin",component:()=>Ja(()=>import("./BerlinView-f21f9d1c.js"),["assets/BerlinView-f21f9d1c.js","assets/BerlinView-fa4c4726.css"])},{path:"/Bern",name:"Bern",component:()=>Ja(()=>import("./BernView-72cd44bc.js"),["assets/BernView-72cd44bc.js","assets/BernView-c0e83185.css"])},{path:"/KualaLumpur",name:"Kuala Lumpur",component:()=>Ja(()=>import("./KualaLumpurView-f61476e3.js"),["assets/KualaLumpurView-f61476e3.js","assets/KualaLumpurView-6dffe3a0.css"])},{path:"/Rome",name:"Rome",component:()=>Ja(()=>import("./RomeView-2c101638.js"),["assets/RomeView-2c101638.js","assets/RomeView-10d0947a.css"])},{path:"/Tokyo",name:"Tokyo",component:()=>Ja(()=>import("./TokyoView-09ddbb25.js"),["assets/TokyoView-09ddbb25.js","assets/TokyoView-8719a7b4.css"])},{path:"/SanDiego",name:"San Diego",component:()=>Ja(()=>import("./SanDiegoView-8935e2ad.js"),["assets/SanDiegoView-8935e2ad.js","assets/SanDiegoView-c1856d2d.css"])},{path:"/contact",name:"contact",component:()=>Ja(()=>import("./ContactView-f4c03bec.js"),["assets/ContactView-f4c03bec.js","assets/ContactView-75f5f55f.css"])}]}),Xf=Dg(o_);Xf.use(Uv);Xf.mount("#app");export{go as F,Tl as _,er as a,yr as b,Sl as c,rg as d,Lc as e,zs as f,Ti as m,El as o,Mc as p,Ps as r,aa as w};
