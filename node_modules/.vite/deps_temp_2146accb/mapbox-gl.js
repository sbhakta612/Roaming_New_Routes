import {
  __commonJS
} from "./chunk-76J2PTFD.js";

// node_modules/mapbox-gl/dist/mapbox-gl.js
var require_mapbox_gl = __commonJS({
  "node_modules/mapbox-gl/dist/mapbox-gl.js"(exports, module) {
    (function(global, factory) {
      typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global = global || self, global.mapboxgl = factory());
    })(exports, function() {
      "use strict";
      var shared, worker, mapboxgl;
      function define2(_, chunk) {
        if (!shared) {
          shared = chunk;
        } else if (!worker) {
          worker = chunk;
        } else {
          var workerBundleString = "var sharedChunk = {}; (" + shared + ")(sharedChunk); (" + worker + ")(sharedChunk);";
          var sharedChunk = {};
          shared(sharedChunk);
          mapboxgl = chunk(sharedChunk);
          mapboxgl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], { type: "text/javascript" }));
        }
      }
      define2(["exports"], function(t) {
        "use strict";
        function e(t2, e2) {
          return t2(e2 = { exports: {} }, e2.exports), e2.exports;
        }
        var r = n;
        function n(t2, e2, r2, n2) {
          this.cx = 3 * t2, this.bx = 3 * (r2 - t2) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e2, this.by = 3 * (n2 - e2) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t2, this.p1y = n2, this.p2x = r2, this.p2y = n2;
        }
        n.prototype.sampleCurveX = function(t2) {
          return ((this.ax * t2 + this.bx) * t2 + this.cx) * t2;
        }, n.prototype.sampleCurveY = function(t2) {
          return ((this.ay * t2 + this.by) * t2 + this.cy) * t2;
        }, n.prototype.sampleCurveDerivativeX = function(t2) {
          return (3 * this.ax * t2 + 2 * this.bx) * t2 + this.cx;
        }, n.prototype.solveCurveX = function(t2, e2) {
          var r2, n2, i2, a2, o2;
          for (void 0 === e2 && (e2 = 1e-6), i2 = t2, o2 = 0; o2 < 8; o2++) {
            if (a2 = this.sampleCurveX(i2) - t2, Math.abs(a2) < e2)
              return i2;
            var s2 = this.sampleCurveDerivativeX(i2);
            if (Math.abs(s2) < 1e-6)
              break;
            i2 -= a2 / s2;
          }
          if ((i2 = t2) < (r2 = 0))
            return r2;
          if (i2 > (n2 = 1))
            return n2;
          for (; r2 < n2; ) {
            if (a2 = this.sampleCurveX(i2), Math.abs(a2 - t2) < e2)
              return i2;
            t2 > a2 ? r2 = i2 : n2 = i2, i2 = 0.5 * (n2 - r2) + r2;
          }
          return i2;
        }, n.prototype.solve = function(t2, e2) {
          return this.sampleCurveY(this.solveCurveX(t2, e2));
        };
        var i = a;
        function a(t2, e2) {
          this.x = t2, this.y = e2;
        }
        function o(t2, e2) {
          if (Array.isArray(t2)) {
            if (!Array.isArray(e2) || t2.length !== e2.length)
              return false;
            for (var r2 = 0; r2 < t2.length; r2++)
              if (!o(t2[r2], e2[r2]))
                return false;
            return true;
          }
          if ("object" == typeof t2 && null !== t2 && null !== e2) {
            if ("object" != typeof e2)
              return false;
            if (Object.keys(t2).length !== Object.keys(e2).length)
              return false;
            for (var n2 in t2)
              if (!o(t2[n2], e2[n2]))
                return false;
            return true;
          }
          return t2 === e2;
        }
        function s(t2, e2, n2, i2) {
          var a2 = new r(t2, e2, n2, i2);
          return function(t3) {
            return a2.solve(t3);
          };
        }
        a.prototype = { clone: function() {
          return new a(this.x, this.y);
        }, add: function(t2) {
          return this.clone()._add(t2);
        }, sub: function(t2) {
          return this.clone()._sub(t2);
        }, multByPoint: function(t2) {
          return this.clone()._multByPoint(t2);
        }, divByPoint: function(t2) {
          return this.clone()._divByPoint(t2);
        }, mult: function(t2) {
          return this.clone()._mult(t2);
        }, div: function(t2) {
          return this.clone()._div(t2);
        }, rotate: function(t2) {
          return this.clone()._rotate(t2);
        }, rotateAround: function(t2, e2) {
          return this.clone()._rotateAround(t2, e2);
        }, matMult: function(t2) {
          return this.clone()._matMult(t2);
        }, unit: function() {
          return this.clone()._unit();
        }, perp: function() {
          return this.clone()._perp();
        }, round: function() {
          return this.clone()._round();
        }, mag: function() {
          return Math.sqrt(this.x * this.x + this.y * this.y);
        }, equals: function(t2) {
          return this.x === t2.x && this.y === t2.y;
        }, dist: function(t2) {
          return Math.sqrt(this.distSqr(t2));
        }, distSqr: function(t2) {
          var e2 = t2.x - this.x, r2 = t2.y - this.y;
          return e2 * e2 + r2 * r2;
        }, angle: function() {
          return Math.atan2(this.y, this.x);
        }, angleTo: function(t2) {
          return Math.atan2(this.y - t2.y, this.x - t2.x);
        }, angleWith: function(t2) {
          return this.angleWithSep(t2.x, t2.y);
        }, angleWithSep: function(t2, e2) {
          return Math.atan2(this.x * e2 - this.y * t2, this.x * t2 + this.y * e2);
        }, _matMult: function(t2) {
          var e2 = t2[0] * this.x + t2[1] * this.y, r2 = t2[2] * this.x + t2[3] * this.y;
          return this.x = e2, this.y = r2, this;
        }, _add: function(t2) {
          return this.x += t2.x, this.y += t2.y, this;
        }, _sub: function(t2) {
          return this.x -= t2.x, this.y -= t2.y, this;
        }, _mult: function(t2) {
          return this.x *= t2, this.y *= t2, this;
        }, _div: function(t2) {
          return this.x /= t2, this.y /= t2, this;
        }, _multByPoint: function(t2) {
          return this.x *= t2.x, this.y *= t2.y, this;
        }, _divByPoint: function(t2) {
          return this.x /= t2.x, this.y /= t2.y, this;
        }, _unit: function() {
          return this._div(this.mag()), this;
        }, _perp: function() {
          var t2 = this.y;
          return this.y = this.x, this.x = -t2, this;
        }, _rotate: function(t2) {
          var e2 = Math.cos(t2), r2 = Math.sin(t2), n2 = e2 * this.x - r2 * this.y, i2 = r2 * this.x + e2 * this.y;
          return this.x = n2, this.y = i2, this;
        }, _rotateAround: function(t2, e2) {
          var r2 = Math.cos(t2), n2 = Math.sin(t2), i2 = e2.x + r2 * (this.x - e2.x) - n2 * (this.y - e2.y), a2 = e2.y + n2 * (this.x - e2.x) + r2 * (this.y - e2.y);
          return this.x = i2, this.y = a2, this;
        }, _round: function() {
          return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
        } }, a.convert = function(t2) {
          return t2 instanceof a ? t2 : Array.isArray(t2) ? new a(t2[0], t2[1]) : t2;
        };
        var u = s(0.25, 0.1, 0.25, 1);
        function l(t2, e2, r2) {
          return Math.min(r2, Math.max(e2, t2));
        }
        function p(t2, e2, r2) {
          var n2 = r2 - e2, i2 = ((t2 - e2) % n2 + n2) % n2 + e2;
          return i2 === e2 ? r2 : i2;
        }
        function c(t2) {
          for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
            e2[r2] = arguments[r2 + 1];
          for (var n2 = 0, i2 = e2; n2 < i2.length; n2 += 1) {
            var a2 = i2[n2];
            for (var o2 in a2)
              t2[o2] = a2[o2];
          }
          return t2;
        }
        var h = 1;
        function f() {
          return h++;
        }
        function y() {
          return function t2(e2) {
            return e2 ? (e2 ^ 16 * Math.random() >> e2 / 4).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t2);
          }();
        }
        function d(t2) {
          return !!t2 && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t2);
        }
        function m(t2, e2) {
          t2.forEach(function(t3) {
            e2[t3] && (e2[t3] = e2[t3].bind(e2));
          });
        }
        function v(t2, e2) {
          return -1 !== t2.indexOf(e2, t2.length - e2.length);
        }
        function g(t2, e2, r2) {
          var n2 = {};
          for (var i2 in t2)
            n2[i2] = e2.call(r2 || this, t2[i2], i2, t2);
          return n2;
        }
        function x(t2, e2, r2) {
          var n2 = {};
          for (var i2 in t2)
            e2.call(r2 || this, t2[i2], i2, t2) && (n2[i2] = t2[i2]);
          return n2;
        }
        function b(t2) {
          return Array.isArray(t2) ? t2.map(b) : "object" == typeof t2 && t2 ? g(t2, b) : t2;
        }
        var _ = {};
        function w(t2) {
          _[t2] || ("undefined" != typeof console && console.warn(t2), _[t2] = true);
        }
        function A(t2, e2, r2) {
          return (r2.y - t2.y) * (e2.x - t2.x) > (e2.y - t2.y) * (r2.x - t2.x);
        }
        function S(t2) {
          for (var e2 = 0, r2 = 0, n2 = t2.length, i2 = n2 - 1, a2 = void 0, o2 = void 0; r2 < n2; i2 = r2++)
            a2 = t2[r2], e2 += ((o2 = t2[i2]).x - a2.x) * (a2.y + o2.y);
          return e2;
        }
        function k(t2) {
          try {
            var e2 = self[t2];
            return e2.setItem("_mapbox_test_", 1), e2.removeItem("_mapbox_test_"), true;
          } catch (t3) {
            return false;
          }
        }
        var z, I, B = self.performance && self.performance.now ? self.performance.now.bind(self.performance) : Date.now.bind(Date), E = self.requestAnimationFrame || self.mozRequestAnimationFrame || self.webkitRequestAnimationFrame || self.msRequestAnimationFrame, P = self.cancelAnimationFrame || self.mozCancelAnimationFrame || self.webkitCancelAnimationFrame || self.msCancelAnimationFrame, V = { now: B, frame: function(t2) {
          var e2 = E(t2);
          return { cancel: function() {
            return P(e2);
          } };
        }, getImageData: function(t2) {
          var e2 = self.document.createElement("canvas"), r2 = e2.getContext("2d");
          if (!r2)
            throw new Error("failed to create canvas 2d context");
          return e2.width = t2.width, e2.height = t2.height, r2.drawImage(t2, 0, 0, t2.width, t2.height), r2.getImageData(0, 0, t2.width, t2.height);
        }, resolveURL: function(t2) {
          var e2 = self.document.createElement("a");
          return e2.href = t2, e2.href;
        }, hardwareConcurrency: self.navigator.hardwareConcurrency || 4, get devicePixelRatio() {
          return self.devicePixelRatio;
        } }, C = { API_URL: "https://api.mapbox.com", get EVENTS_URL() {
          return this.API_URL ? 0 === this.API_URL.indexOf("https://api.mapbox.cn") ? "https://events.mapbox.cn/events/v2" : 0 === this.API_URL.indexOf("https://api.mapbox.com") ? "https://events.mapbox.com/events/v2" : null : null;
        }, FEEDBACK_URL: "https://apps.mapbox.com/feedback", REQUIRE_ACCESS_TOKEN: true, ACCESS_TOKEN: null, MAX_PARALLEL_IMAGE_REQUESTS: 16 }, M = { supported: false, testSupport: function(t2) {
          if (T || !I)
            return;
          F ? L(t2) : z = t2;
        } }, T = false, F = false;
        function L(t2) {
          var e2 = t2.createTexture();
          t2.bindTexture(t2.TEXTURE_2D, e2);
          try {
            if (t2.texImage2D(t2.TEXTURE_2D, 0, t2.RGBA, t2.RGBA, t2.UNSIGNED_BYTE, I), t2.isContextLost())
              return;
            M.supported = true;
          } catch (t3) {
          }
          t2.deleteTexture(e2), T = true;
        }
        self.document && ((I = self.document.createElement("img")).onload = function() {
          z && L(z), z = null, F = true;
        }, I.onerror = function() {
          T = true, z = null;
        }, I.src = "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");
        var O = "See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";
        function D(t2, e2) {
          var r2 = X(C.API_URL);
          if (t2.protocol = r2.protocol, t2.authority = r2.authority, "/" !== r2.path && (t2.path = "" + r2.path + t2.path), !C.REQUIRE_ACCESS_TOKEN)
            return Z(t2);
          if (!(e2 = e2 || C.ACCESS_TOKEN))
            throw new Error("An API access token is required to use Mapbox GL. " + O);
          if ("s" === e2[0])
            throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). " + O);
          return t2.params.push("access_token=" + e2), Z(t2);
        }
        function U(t2) {
          return 0 === t2.indexOf("mapbox:");
        }
        var j = /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;
        function R(t2) {
          return j.test(t2);
        }
        var q = /(\.(png|jpg)\d*)(?=$)/, N = /\.[\w]+$/, K = function(t2) {
          var e2 = X(t2);
          if (!e2.path.match(/(^\/v4\/)/) || !e2.path.match(N))
            return t2;
          var r2 = "mapbox://tiles/";
          r2 += e2.path.replace("/v4/", "");
          var n2 = e2.params.filter(function(t3) {
            return !t3.match(/^access_token=/);
          });
          return n2.length && (r2 += "?" + n2.join("&")), r2;
        }, G = /^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;
        function X(t2) {
          var e2 = t2.match(G);
          if (!e2)
            throw new Error("Unable to parse URL object");
          return { protocol: e2[1], authority: e2[2], path: e2[3] || "/", params: e2[4] ? e2[4].split("&") : [] };
        }
        function Z(t2) {
          var e2 = t2.params.length ? "?" + t2.params.join("&") : "";
          return t2.protocol + "://" + t2.authority + t2.path + e2;
        }
        function H(t2) {
          if (!t2)
            return null;
          var e2, r2 = t2.split(".");
          if (!r2 || 3 !== r2.length)
            return null;
          try {
            return JSON.parse((e2 = r2[1], decodeURIComponent(self.atob(e2).split("").map(function(t3) {
              return "%" + ("00" + t3.charCodeAt(0).toString(16)).slice(-2);
            }).join(""))));
          } catch (t3) {
            return null;
          }
        }
        var Y = function(t2) {
          this.type = t2, this.anonId = null, this.eventData = {}, this.queue = [], this.pendingRequest = null;
        };
        Y.prototype.getStorageKey = function(t2) {
          var e2, r2 = H(C.ACCESS_TOKEN), n2 = "";
          return r2 && r2.u ? (e2 = r2.u, n2 = self.btoa(encodeURIComponent(e2).replace(/%([0-9A-F]{2})/g, function(t3, e3) {
            return String.fromCharCode(Number("0x" + e3));
          }))) : n2 = C.ACCESS_TOKEN || "", t2 ? "mapbox.eventData." + t2 + ":" + n2 : "mapbox.eventData:" + n2;
        }, Y.prototype.fetchEventData = function() {
          var t2 = k("localStorage"), e2 = this.getStorageKey(), r2 = this.getStorageKey("uuid");
          if (t2)
            try {
              var n2 = self.localStorage.getItem(e2);
              n2 && (this.eventData = JSON.parse(n2));
              var i2 = self.localStorage.getItem(r2);
              i2 && (this.anonId = i2);
            } catch (t3) {
              w("Unable to read from LocalStorage");
            }
        }, Y.prototype.saveEventData = function() {
          var t2 = k("localStorage"), e2 = this.getStorageKey(), r2 = this.getStorageKey("uuid");
          if (t2)
            try {
              self.localStorage.setItem(r2, this.anonId), Object.keys(this.eventData).length >= 1 && self.localStorage.setItem(e2, JSON.stringify(this.eventData));
            } catch (t3) {
              w("Unable to write to LocalStorage");
            }
        }, Y.prototype.processRequests = function() {
        }, Y.prototype.postEvent = function(t2, e2, r2) {
          var n2 = this;
          if (C.EVENTS_URL) {
            var i2 = X(C.EVENTS_URL);
            i2.params.push("access_token=" + (C.ACCESS_TOKEN || ""));
            var a2 = { event: this.type, created: new Date(t2).toISOString(), sdkIdentifier: "mapbox-gl-js", sdkVersion: "0.53.1", userId: this.anonId }, o2 = e2 ? c(a2, e2) : a2, s2 = { url: Z(i2), headers: { "Content-Type": "text/plain" }, body: JSON.stringify([o2]) };
            this.pendingRequest = st(s2, function(t3) {
              n2.pendingRequest = null, r2(t3), n2.saveEventData(), n2.processRequests();
            });
          }
        }, Y.prototype.queueRequest = function(t2) {
          this.queue.push(t2), this.processRequests();
        };
        var J = function(t2) {
          function e2() {
            t2.call(this, "map.load"), this.success = {};
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.postMapLoadEvent = function(t3, e3) {
            C.EVENTS_URL && C.ACCESS_TOKEN && Array.isArray(t3) && t3.some(function(t4) {
              return U(t4) || R(t4);
            }) && this.queueRequest({ id: e3, timestamp: Date.now() });
          }, e2.prototype.processRequests = function() {
            var t3 = this;
            if (!this.pendingRequest && 0 !== this.queue.length) {
              var e3 = this.queue.shift(), r2 = e3.id, n2 = e3.timestamp;
              r2 && this.success[r2] || (this.anonId || this.fetchEventData(), d(this.anonId) || (this.anonId = y()), this.postEvent(n2, {}, function(e4) {
                e4 || r2 && (t3.success[r2] = true);
              }));
            }
          }, e2;
        }(Y), $ = new (function(t2) {
          function e2() {
            t2.call(this, "appUserTurnstile");
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.postTurnstileEvent = function(t3) {
            C.EVENTS_URL && C.ACCESS_TOKEN && Array.isArray(t3) && t3.some(function(t4) {
              return U(t4) || R(t4);
            }) && this.queueRequest(Date.now());
          }, e2.prototype.processRequests = function() {
            var t3 = this;
            if (!this.pendingRequest && 0 !== this.queue.length) {
              this.anonId && this.eventData.lastSuccess && this.eventData.tokenU || this.fetchEventData();
              var e3 = H(C.ACCESS_TOKEN), r2 = e3 ? e3.u : C.ACCESS_TOKEN, n2 = r2 !== this.eventData.tokenU;
              d(this.anonId) || (this.anonId = y(), n2 = true);
              var i2 = this.queue.shift();
              if (this.eventData.lastSuccess) {
                var a2 = new Date(this.eventData.lastSuccess), o2 = new Date(i2), s2 = (i2 - this.eventData.lastSuccess) / 864e5;
                n2 = n2 || s2 >= 1 || s2 < -1 || a2.getDate() !== o2.getDate();
              } else
                n2 = true;
              if (!n2)
                return this.processRequests();
              this.postEvent(i2, { "enabled.telemetry": false }, function(e4) {
                e4 || (t3.eventData.lastSuccess = i2, t3.eventData.tokenU = r2);
              });
            }
          }, e2;
        }(Y))(), W = $.postTurnstileEvent.bind($), Q = new J(), tt = Q.postMapLoadEvent.bind(Q), et = { Unknown: "Unknown", Style: "Style", Source: "Source", Tile: "Tile", Glyphs: "Glyphs", SpriteImage: "SpriteImage", SpriteJSON: "SpriteJSON", Image: "Image" };
        "function" == typeof Object.freeze && Object.freeze(et);
        var rt = function(t2) {
          function e2(e3, r2, n2) {
            401 === r2 && R(n2) && (e3 += ": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"), t2.call(this, e3), this.status = r2, this.url = n2, this.name = this.constructor.name, this.message = e3;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.toString = function() {
            return this.name + ": " + this.message + " (" + this.status + "): " + this.url;
          }, e2;
        }(Error);
        function nt() {
          return "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope;
        }
        var it = nt() ? function() {
          return self.worker && self.worker.referrer;
        } : function() {
          var t2 = self.location.origin;
          if (t2 && "null" !== t2 && "file://" !== t2)
            return t2 + self.location.pathname;
        };
        var at = function(t2, e2) {
          if (!/^file:/.test(t2.url)) {
            if (self.fetch && self.Request && self.AbortController)
              return function(t3, e3) {
                var r2 = new self.AbortController(), n2 = new self.Request(t3.url, { method: t3.method || "GET", body: t3.body, credentials: t3.credentials, headers: t3.headers, referrer: it(), signal: r2.signal });
                return "json" === t3.type && n2.headers.set("Accept", "application/json"), self.fetch(n2).then(function(r3) {
                  r3.ok ? r3[t3.type || "text"]().then(function(t4) {
                    e3(null, t4, r3.headers.get("Cache-Control"), r3.headers.get("Expires"));
                  }).catch(function(t4) {
                    return e3(new Error(t4.message));
                  }) : e3(new rt(r3.statusText, r3.status, t3.url));
                }).catch(function(t4) {
                  20 !== t4.code && e3(new Error(t4.message));
                }), { cancel: function() {
                  return r2.abort();
                } };
              }(t2, e2);
            if (nt() && self.worker && self.worker.actor)
              return self.worker.actor.send("getResource", t2, e2);
          }
          return function(t3, e3) {
            var r2 = new self.XMLHttpRequest();
            for (var n2 in r2.open(t3.method || "GET", t3.url, true), "arrayBuffer" === t3.type && (r2.responseType = "arraybuffer"), t3.headers)
              r2.setRequestHeader(n2, t3.headers[n2]);
            return "json" === t3.type && r2.setRequestHeader("Accept", "application/json"), r2.withCredentials = "include" === t3.credentials, r2.onerror = function() {
              e3(new Error(r2.statusText));
            }, r2.onload = function() {
              if ((r2.status >= 200 && r2.status < 300 || 0 === r2.status) && null !== r2.response) {
                var n3 = r2.response;
                if ("json" === t3.type)
                  try {
                    n3 = JSON.parse(r2.response);
                  } catch (t4) {
                    return e3(t4);
                  }
                e3(null, n3, r2.getResponseHeader("Cache-Control"), r2.getResponseHeader("Expires"));
              } else
                e3(new rt(r2.statusText, r2.status, t3.url));
            }, r2.send(t3.body), { cancel: function() {
              return r2.abort();
            } };
          }(t2, e2);
        }, ot = function(t2, e2) {
          return at(c(t2, { type: "arrayBuffer" }), e2);
        }, st = function(t2, e2) {
          return at(c(t2, { method: "POST" }), e2);
        };
        var ut, lt;
        ut = [], lt = 0;
        var pt = function(t2, e2) {
          if (lt >= C.MAX_PARALLEL_IMAGE_REQUESTS) {
            var r2 = { requestParameters: t2, callback: e2, cancelled: false, cancel: function() {
              this.cancelled = true;
            } };
            return ut.push(r2), r2;
          }
          lt++;
          var n2 = false, i2 = function() {
            if (!n2)
              for (n2 = true, lt--; ut.length && lt < C.MAX_PARALLEL_IMAGE_REQUESTS; ) {
                var t3 = ut.shift(), e3 = t3.requestParameters, r3 = t3.callback;
                t3.cancelled || (t3.cancel = pt(e3, r3).cancel);
              }
          }, a2 = ot(t2, function(t3, r3, n3, a3) {
            if (i2(), t3)
              e2(t3);
            else if (r3) {
              var o2 = new self.Image(), s2 = self.URL || self.webkitURL;
              o2.onload = function() {
                e2(null, o2), s2.revokeObjectURL(o2.src);
              }, o2.onerror = function() {
                return e2(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));
              };
              var u2 = new self.Blob([new Uint8Array(r3)], { type: "image/png" });
              o2.cacheControl = n3, o2.expires = a3, o2.src = r3.byteLength ? s2.createObjectURL(u2) : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
            }
          });
          return { cancel: function() {
            a2.cancel(), i2();
          } };
        };
        function ct(t2, e2, r2) {
          r2[t2] && -1 !== r2[t2].indexOf(e2) || (r2[t2] = r2[t2] || [], r2[t2].push(e2));
        }
        function ht(t2, e2, r2) {
          if (r2 && r2[t2]) {
            var n2 = r2[t2].indexOf(e2);
            -1 !== n2 && r2[t2].splice(n2, 1);
          }
        }
        var ft = function(t2, e2) {
          void 0 === e2 && (e2 = {}), c(this, e2), this.type = t2;
        }, yt = function(t2) {
          function e2(e3, r2) {
            void 0 === r2 && (r2 = {}), t2.call(this, "error", c({ error: e3 }, r2));
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2;
        }(ft), dt = function() {
        };
        dt.prototype.on = function(t2, e2) {
          return this._listeners = this._listeners || {}, ct(t2, e2, this._listeners), this;
        }, dt.prototype.off = function(t2, e2) {
          return ht(t2, e2, this._listeners), ht(t2, e2, this._oneTimeListeners), this;
        }, dt.prototype.once = function(t2, e2) {
          return this._oneTimeListeners = this._oneTimeListeners || {}, ct(t2, e2, this._oneTimeListeners), this;
        }, dt.prototype.fire = function(t2, e2) {
          "string" == typeof t2 && (t2 = new ft(t2, e2 || {}));
          var r2 = t2.type;
          if (this.listens(r2)) {
            t2.target = this;
            for (var n2 = 0, i2 = this._listeners && this._listeners[r2] ? this._listeners[r2].slice() : []; n2 < i2.length; n2 += 1) {
              i2[n2].call(this, t2);
            }
            for (var a2 = 0, o2 = this._oneTimeListeners && this._oneTimeListeners[r2] ? this._oneTimeListeners[r2].slice() : []; a2 < o2.length; a2 += 1) {
              var s2 = o2[a2];
              ht(r2, s2, this._oneTimeListeners), s2.call(this, t2);
            }
            var u2 = this._eventedParent;
            u2 && (c(t2, "function" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), u2.fire(t2));
          } else
            t2 instanceof yt && console.error(t2.error);
          return this;
        }, dt.prototype.listens = function(t2) {
          return this._listeners && this._listeners[t2] && this._listeners[t2].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t2] && this._oneTimeListeners[t2].length > 0 || this._eventedParent && this._eventedParent.listens(t2);
        }, dt.prototype.setEventedParent = function(t2, e2) {
          return this._eventedParent = t2, this._eventedParentData = e2, this;
        };
        var mt = { $version: 8, $root: { version: { required: true, type: "enum", values: [8] }, name: { type: "string" }, metadata: { type: "*" }, center: { type: "array", value: "number" }, zoom: { type: "number" }, bearing: { type: "number", default: 0, period: 360, units: "degrees" }, pitch: { type: "number", default: 0, units: "degrees" }, light: { type: "light" }, sources: { required: true, type: "sources" }, sprite: { type: "string" }, glyphs: { type: "string" }, transition: { type: "transition" }, layers: { required: true, type: "array", value: "layer" } }, sources: { "*": { type: "source" } }, source: ["source_vector", "source_raster", "source_raster_dem", "source_geojson", "source_video", "source_image"], source_vector: { type: { required: true, type: "enum", values: { vector: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, attribution: { type: "string" }, "*": { type: "*" } }, source_raster: { type: { required: true, type: "enum", values: { raster: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, attribution: { type: "string" }, "*": { type: "*" } }, source_raster_dem: { type: { required: true, type: "enum", values: { "raster-dem": {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, attribution: { type: "string" }, encoding: { type: "enum", values: { terrarium: {}, mapbox: {} }, default: "mapbox" }, "*": { type: "*" } }, source_geojson: { type: { required: true, type: "enum", values: { geojson: {} } }, data: { type: "*" }, maxzoom: { type: "number", default: 18 }, attribution: { type: "string" }, buffer: { type: "number", default: 128, maximum: 512, minimum: 0 }, tolerance: { type: "number", default: 0.375 }, cluster: { type: "boolean", default: false }, clusterRadius: { type: "number", default: 50, minimum: 0 }, clusterMaxZoom: { type: "number" }, clusterProperties: { type: "*" }, lineMetrics: { type: "boolean", default: false }, generateId: { type: "boolean", default: false } }, source_video: { type: { required: true, type: "enum", values: { video: {} } }, urls: { required: true, type: "array", value: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, source_image: { type: { required: true, type: "enum", values: { image: {} } }, url: { required: true, type: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, layer: { id: { type: "string", required: true }, type: { type: "enum", values: { fill: {}, line: {}, symbol: {}, circle: {}, heatmap: {}, "fill-extrusion": {}, raster: {}, hillshade: {}, background: {} }, required: true }, metadata: { type: "*" }, source: { type: "string" }, "source-layer": { type: "string" }, minzoom: { type: "number", minimum: 0, maximum: 24 }, maxzoom: { type: "number", minimum: 0, maximum: 24 }, filter: { type: "filter" }, layout: { type: "layout" }, paint: { type: "paint" } }, layout: ["layout_fill", "layout_line", "layout_circle", "layout_heatmap", "layout_fill-extrusion", "layout_symbol", "layout_raster", "layout_hillshade", "layout_background"], layout_background: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_fill: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_circle: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_heatmap: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, "layout_fill-extrusion": { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_line: { "line-cap": { type: "enum", values: { butt: {}, round: {}, square: {} }, default: "butt", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-join": { type: "enum", values: { bevel: {}, round: {}, miter: {} }, default: "miter", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "line-miter-limit": { type: "number", default: 2, requires: [{ "line-join": "miter" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-round-limit": { type: "number", default: 1.05, requires: [{ "line-join": "round" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_symbol: { "symbol-placement": { type: "enum", values: { point: {}, line: {}, "line-center": {} }, default: "point", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-spacing": { type: "number", default: 250, minimum: 1, units: "pixels", requires: [{ "symbol-placement": "line" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-avoid-edges": { type: "boolean", default: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "symbol-z-order": { type: "enum", values: { auto: {}, "viewport-y": {}, source: {} }, default: "auto", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-allow-overlap": { type: "boolean", default: false, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-ignore-placement": { type: "boolean", default: false, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-optional": { type: "boolean", default: false, requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-size": { type: "number", default: 1, minimum: 0, units: "factor of the original icon size", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-text-fit": { type: "enum", values: { none: {}, width: {}, height: {}, both: {} }, default: "none", requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-text-fit-padding": { type: "array", value: "number", length: 4, default: [0, 0, 0, 0], units: "pixels", requires: ["icon-image", "text-field", { "icon-text-fit": ["both", "width", "height"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-image": { type: "string", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-padding": { type: "number", default: 2, minimum: 0, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-keep-upright": { type: "boolean", default: false, requires: ["icon-image", { "icon-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-offset": { type: "array", value: "number", length: 2, default: [0, 0], requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-field": { type: "formatted", default: "", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-font": { type: "array", value: "string", default: ["Open Sans Regular", "Arial Unicode MS Regular"], requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-size": { type: "number", default: 16, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-width": { type: "number", default: 10, minimum: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-line-height": { type: "number", default: 1.2, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-letter-spacing": { type: "number", default: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-justify": { type: "enum", values: { left: {}, center: {}, right: {} }, default: "center", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-angle": { type: "number", default: 45, units: "degrees", requires: ["text-field", { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-padding": { type: "number", default: 2, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-keep-upright": { type: "boolean", default: true, requires: ["text-field", { "text-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-transform": { type: "enum", values: { none: {}, uppercase: {}, lowercase: {} }, default: "none", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-offset": { type: "array", value: "number", units: "ems", length: 2, default: [0, 0], requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-allow-overlap": { type: "boolean", default: false, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-ignore-placement": { type: "boolean", default: false, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-optional": { type: "boolean", default: false, requires: ["text-field", "icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_raster: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_hillshade: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, filter: { type: "array", value: "*" }, filter_operator: { type: "enum", values: { "==": {}, "!=": {}, ">": {}, ">=": {}, "<": {}, "<=": {}, in: {}, "!in": {}, all: {}, any: {}, none: {}, has: {}, "!has": {} } }, geometry_type: { type: "enum", values: { Point: {}, LineString: {}, Polygon: {} } }, function: { expression: { type: "expression" }, stops: { type: "array", value: "function_stop" }, base: { type: "number", default: 1, minimum: 0 }, property: { type: "string", default: "$zoom" }, type: { type: "enum", values: { identity: {}, exponential: {}, interval: {}, categorical: {} }, default: "exponential" }, colorSpace: { type: "enum", values: { rgb: {}, lab: {}, hcl: {} }, default: "rgb" }, default: { type: "*", required: false } }, function_stop: { type: "array", minimum: 0, maximum: 22, value: ["number", "color"], length: 2 }, expression: { type: "array", value: "*", minimum: 1 }, expression_name: { type: "enum", values: { let: { group: "Variable binding" }, var: { group: "Variable binding" }, literal: { group: "Types" }, array: { group: "Types" }, at: { group: "Lookup" }, case: { group: "Decision" }, match: { group: "Decision" }, coalesce: { group: "Decision" }, step: { group: "Ramps, scales, curves" }, interpolate: { group: "Ramps, scales, curves" }, "interpolate-hcl": { group: "Ramps, scales, curves" }, "interpolate-lab": { group: "Ramps, scales, curves" }, ln2: { group: "Math" }, pi: { group: "Math" }, e: { group: "Math" }, typeof: { group: "Types" }, string: { group: "Types" }, number: { group: "Types" }, boolean: { group: "Types" }, object: { group: "Types" }, collator: { group: "Types" }, format: { group: "Types" }, "number-format": { group: "Types" }, "to-string": { group: "Types" }, "to-number": { group: "Types" }, "to-boolean": { group: "Types" }, "to-rgba": { group: "Color" }, "to-color": { group: "Types" }, rgb: { group: "Color" }, rgba: { group: "Color" }, get: { group: "Lookup" }, has: { group: "Lookup" }, length: { group: "Lookup" }, properties: { group: "Feature data" }, "feature-state": { group: "Feature data" }, "geometry-type": { group: "Feature data" }, id: { group: "Feature data" }, zoom: { group: "Zoom" }, "heatmap-density": { group: "Heatmap" }, "line-progress": { group: "Feature data" }, accumulated: { group: "Feature data" }, "+": { group: "Math" }, "*": { group: "Math" }, "-": { group: "Math" }, "/": { group: "Math" }, "%": { group: "Math" }, "^": { group: "Math" }, sqrt: { group: "Math" }, log10: { group: "Math" }, ln: { group: "Math" }, log2: { group: "Math" }, sin: { group: "Math" }, cos: { group: "Math" }, tan: { group: "Math" }, asin: { group: "Math" }, acos: { group: "Math" }, atan: { group: "Math" }, min: { group: "Math" }, max: { group: "Math" }, round: { group: "Math" }, abs: { group: "Math" }, ceil: { group: "Math" }, floor: { group: "Math" }, "==": { group: "Decision" }, "!=": { group: "Decision" }, ">": { group: "Decision" }, "<": { group: "Decision" }, ">=": { group: "Decision" }, "<=": { group: "Decision" }, all: { group: "Decision" }, any: { group: "Decision" }, "!": { group: "Decision" }, "is-supported-script": { group: "String" }, upcase: { group: "String" }, downcase: { group: "String" }, concat: { group: "String" }, "resolved-locale": { group: "String" } } }, light: { anchor: { type: "enum", default: "viewport", values: { map: {}, viewport: {} }, "property-type": "data-constant", transition: false, expression: { interpolated: false, parameters: ["zoom"] } }, position: { type: "array", default: [1.15, 210, 30], length: 3, value: "number", "property-type": "data-constant", transition: true, expression: { interpolated: true, parameters: ["zoom"] } }, color: { type: "color", "property-type": "data-constant", default: "#ffffff", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, intensity: { type: "number", "property-type": "data-constant", default: 0.5, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true } }, paint: ["paint_fill", "paint_line", "paint_circle", "paint_heatmap", "paint_fill-extrusion", "paint_symbol", "paint_raster", "paint_hillshade", "paint_background"], paint_fill: { "fill-antialias": { type: "boolean", default: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-outline-color": { type: "color", transition: true, requires: [{ "!": "fill-pattern" }, { "fill-antialias": true }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-pattern": { type: "string", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" } }, "paint_fill-extrusion": { "fill-extrusion-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-extrusion-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-extrusion-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-pattern": { type: "string", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "fill-extrusion-height": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-base": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, requires: ["fill-extrusion-height"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-vertical-gradient": { type: "boolean", default: true, transition: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_line: { "line-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "line-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["line-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-width": { type: "number", default: 1, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-gap-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-offset": { type: "number", default: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-dasharray": { type: "array", value: "number", minimum: 0, transition: true, units: "line widths", requires: [{ "!": "line-pattern" }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "cross-faded" }, "line-pattern": { type: "string", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-gradient": { type: "color", transition: false, requires: [{ "!": "line-dasharray" }, { "!": "line-pattern" }, { source: "geojson", has: { lineMetrics: true } }], expression: { interpolated: true, parameters: ["line-progress"] }, "property-type": "color-ramp" } }, paint_circle: { "circle-radius": { type: "number", default: 5, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-blur": { type: "number", default: 0, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["circle-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-scale": { type: "enum", values: { map: {}, viewport: {} }, default: "map", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-alignment": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-stroke-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" } }, paint_heatmap: { "heatmap-radius": { type: "number", default: 30, minimum: 1, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-weight": { type: "number", default: 1, minimum: 0, transition: false, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-intensity": { type: "number", default: 1, minimum: 0, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "heatmap-color": { type: "color", default: ["interpolate", ["linear"], ["heatmap-density"], 0, "rgba(0, 0, 255, 0)", 0.1, "royalblue", 0.3, "cyan", 0.5, "lime", 0.7, "yellow", 1, "red"], transition: false, expression: { interpolated: true, parameters: ["heatmap-density"] }, "property-type": "color-ramp" }, "heatmap-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_symbol: { "icon-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-color": { type: "color", default: "#000000", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["icon-image", "icon-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-color": { type: "color", default: "#000000", transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["text-field", "text-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_raster: { "raster-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-hue-rotate": { type: "number", default: 0, period: 360, transition: true, units: "degrees", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-min": { type: "number", default: 0, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-max": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-saturation": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-contrast": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-resampling": { type: "enum", values: { linear: {}, nearest: {} }, default: "linear", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-fade-duration": { type: "number", default: 300, minimum: 0, transition: false, units: "milliseconds", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_hillshade: { "hillshade-illumination-direction": { type: "number", default: 335, minimum: 0, maximum: 359, transition: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-illumination-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-exaggeration": { type: "number", default: 0.5, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-shadow-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-highlight-color": { type: "color", default: "#FFFFFF", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-accent-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_background: { "background-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "background-pattern" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "background-pattern": { type: "string", transition: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "cross-faded" }, "background-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, transition: { duration: { type: "number", default: 300, minimum: 0, units: "milliseconds" }, delay: { type: "number", default: 0, minimum: 0, units: "milliseconds" } }, "property-type": { "data-driven": { type: "property-type" }, "cross-faded": { type: "property-type" }, "cross-faded-data-driven": { type: "property-type" }, "color-ramp": { type: "property-type" }, "data-constant": { type: "property-type" }, constant: { type: "property-type" } } }, vt = function(t2, e2, r2, n2) {
          this.message = (t2 ? t2 + ": " : "") + r2, n2 && (this.identifier = n2), null != e2 && e2.__line__ && (this.line = e2.__line__);
        };
        function gt(t2) {
          var e2 = t2.key, r2 = t2.value;
          return r2 ? [new vt(e2, r2, "constants have been deprecated as of v8")] : [];
        }
        function xt(t2) {
          for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
            e2[r2] = arguments[r2 + 1];
          for (var n2 = 0, i2 = e2; n2 < i2.length; n2 += 1) {
            var a2 = i2[n2];
            for (var o2 in a2)
              t2[o2] = a2[o2];
          }
          return t2;
        }
        function bt(t2) {
          return t2 instanceof Number || t2 instanceof String || t2 instanceof Boolean ? t2.valueOf() : t2;
        }
        function _t(t2) {
          return Array.isArray(t2) ? t2.map(_t) : bt(t2);
        }
        var wt = function(t2) {
          function e2(e3, r2) {
            t2.call(this, r2), this.message = r2, this.key = e3;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2;
        }(Error), At = function(t2, e2) {
          void 0 === e2 && (e2 = []), this.parent = t2, this.bindings = {};
          for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2[0], o2 = i2[1];
            this.bindings[a2] = o2;
          }
        };
        At.prototype.concat = function(t2) {
          return new At(this, t2);
        }, At.prototype.get = function(t2) {
          if (this.bindings[t2])
            return this.bindings[t2];
          if (this.parent)
            return this.parent.get(t2);
          throw new Error(t2 + " not found in scope.");
        }, At.prototype.has = function(t2) {
          return !!this.bindings[t2] || !!this.parent && this.parent.has(t2);
        };
        var St = { kind: "null" }, kt = { kind: "number" }, zt = { kind: "string" }, It = { kind: "boolean" }, Bt = { kind: "color" }, Et = { kind: "object" }, Pt = { kind: "value" }, Vt = { kind: "collator" }, Ct = { kind: "formatted" };
        function Mt(t2, e2) {
          return { kind: "array", itemType: t2, N: e2 };
        }
        function Tt(t2) {
          if ("array" === t2.kind) {
            var e2 = Tt(t2.itemType);
            return "number" == typeof t2.N ? "array<" + e2 + ", " + t2.N + ">" : "value" === t2.itemType.kind ? "array" : "array<" + e2 + ">";
          }
          return t2.kind;
        }
        var Ft = [St, kt, zt, It, Bt, Ct, Et, Mt(Pt)];
        function Lt(t2, e2) {
          if ("error" === e2.kind)
            return null;
          if ("array" === t2.kind) {
            if ("array" === e2.kind && (0 === e2.N && "value" === e2.itemType.kind || !Lt(t2.itemType, e2.itemType)) && ("number" != typeof t2.N || t2.N === e2.N))
              return null;
          } else {
            if (t2.kind === e2.kind)
              return null;
            if ("value" === t2.kind)
              for (var r2 = 0, n2 = Ft; r2 < n2.length; r2 += 1) {
                if (!Lt(n2[r2], e2))
                  return null;
              }
          }
          return "Expected " + Tt(t2) + " but found " + Tt(e2) + " instead.";
        }
        var Ot = e(function(t2, e2) {
          var r2 = { transparent: [0, 0, 0, 0], aliceblue: [240, 248, 255, 1], antiquewhite: [250, 235, 215, 1], aqua: [0, 255, 255, 1], aquamarine: [127, 255, 212, 1], azure: [240, 255, 255, 1], beige: [245, 245, 220, 1], bisque: [255, 228, 196, 1], black: [0, 0, 0, 1], blanchedalmond: [255, 235, 205, 1], blue: [0, 0, 255, 1], blueviolet: [138, 43, 226, 1], brown: [165, 42, 42, 1], burlywood: [222, 184, 135, 1], cadetblue: [95, 158, 160, 1], chartreuse: [127, 255, 0, 1], chocolate: [210, 105, 30, 1], coral: [255, 127, 80, 1], cornflowerblue: [100, 149, 237, 1], cornsilk: [255, 248, 220, 1], crimson: [220, 20, 60, 1], cyan: [0, 255, 255, 1], darkblue: [0, 0, 139, 1], darkcyan: [0, 139, 139, 1], darkgoldenrod: [184, 134, 11, 1], darkgray: [169, 169, 169, 1], darkgreen: [0, 100, 0, 1], darkgrey: [169, 169, 169, 1], darkkhaki: [189, 183, 107, 1], darkmagenta: [139, 0, 139, 1], darkolivegreen: [85, 107, 47, 1], darkorange: [255, 140, 0, 1], darkorchid: [153, 50, 204, 1], darkred: [139, 0, 0, 1], darksalmon: [233, 150, 122, 1], darkseagreen: [143, 188, 143, 1], darkslateblue: [72, 61, 139, 1], darkslategray: [47, 79, 79, 1], darkslategrey: [47, 79, 79, 1], darkturquoise: [0, 206, 209, 1], darkviolet: [148, 0, 211, 1], deeppink: [255, 20, 147, 1], deepskyblue: [0, 191, 255, 1], dimgray: [105, 105, 105, 1], dimgrey: [105, 105, 105, 1], dodgerblue: [30, 144, 255, 1], firebrick: [178, 34, 34, 1], floralwhite: [255, 250, 240, 1], forestgreen: [34, 139, 34, 1], fuchsia: [255, 0, 255, 1], gainsboro: [220, 220, 220, 1], ghostwhite: [248, 248, 255, 1], gold: [255, 215, 0, 1], goldenrod: [218, 165, 32, 1], gray: [128, 128, 128, 1], green: [0, 128, 0, 1], greenyellow: [173, 255, 47, 1], grey: [128, 128, 128, 1], honeydew: [240, 255, 240, 1], hotpink: [255, 105, 180, 1], indianred: [205, 92, 92, 1], indigo: [75, 0, 130, 1], ivory: [255, 255, 240, 1], khaki: [240, 230, 140, 1], lavender: [230, 230, 250, 1], lavenderblush: [255, 240, 245, 1], lawngreen: [124, 252, 0, 1], lemonchiffon: [255, 250, 205, 1], lightblue: [173, 216, 230, 1], lightcoral: [240, 128, 128, 1], lightcyan: [224, 255, 255, 1], lightgoldenrodyellow: [250, 250, 210, 1], lightgray: [211, 211, 211, 1], lightgreen: [144, 238, 144, 1], lightgrey: [211, 211, 211, 1], lightpink: [255, 182, 193, 1], lightsalmon: [255, 160, 122, 1], lightseagreen: [32, 178, 170, 1], lightskyblue: [135, 206, 250, 1], lightslategray: [119, 136, 153, 1], lightslategrey: [119, 136, 153, 1], lightsteelblue: [176, 196, 222, 1], lightyellow: [255, 255, 224, 1], lime: [0, 255, 0, 1], limegreen: [50, 205, 50, 1], linen: [250, 240, 230, 1], magenta: [255, 0, 255, 1], maroon: [128, 0, 0, 1], mediumaquamarine: [102, 205, 170, 1], mediumblue: [0, 0, 205, 1], mediumorchid: [186, 85, 211, 1], mediumpurple: [147, 112, 219, 1], mediumseagreen: [60, 179, 113, 1], mediumslateblue: [123, 104, 238, 1], mediumspringgreen: [0, 250, 154, 1], mediumturquoise: [72, 209, 204, 1], mediumvioletred: [199, 21, 133, 1], midnightblue: [25, 25, 112, 1], mintcream: [245, 255, 250, 1], mistyrose: [255, 228, 225, 1], moccasin: [255, 228, 181, 1], navajowhite: [255, 222, 173, 1], navy: [0, 0, 128, 1], oldlace: [253, 245, 230, 1], olive: [128, 128, 0, 1], olivedrab: [107, 142, 35, 1], orange: [255, 165, 0, 1], orangered: [255, 69, 0, 1], orchid: [218, 112, 214, 1], palegoldenrod: [238, 232, 170, 1], palegreen: [152, 251, 152, 1], paleturquoise: [175, 238, 238, 1], palevioletred: [219, 112, 147, 1], papayawhip: [255, 239, 213, 1], peachpuff: [255, 218, 185, 1], peru: [205, 133, 63, 1], pink: [255, 192, 203, 1], plum: [221, 160, 221, 1], powderblue: [176, 224, 230, 1], purple: [128, 0, 128, 1], rebeccapurple: [102, 51, 153, 1], red: [255, 0, 0, 1], rosybrown: [188, 143, 143, 1], royalblue: [65, 105, 225, 1], saddlebrown: [139, 69, 19, 1], salmon: [250, 128, 114, 1], sandybrown: [244, 164, 96, 1], seagreen: [46, 139, 87, 1], seashell: [255, 245, 238, 1], sienna: [160, 82, 45, 1], silver: [192, 192, 192, 1], skyblue: [135, 206, 235, 1], slateblue: [106, 90, 205, 1], slategray: [112, 128, 144, 1], slategrey: [112, 128, 144, 1], snow: [255, 250, 250, 1], springgreen: [0, 255, 127, 1], steelblue: [70, 130, 180, 1], tan: [210, 180, 140, 1], teal: [0, 128, 128, 1], thistle: [216, 191, 216, 1], tomato: [255, 99, 71, 1], turquoise: [64, 224, 208, 1], violet: [238, 130, 238, 1], wheat: [245, 222, 179, 1], white: [255, 255, 255, 1], whitesmoke: [245, 245, 245, 1], yellow: [255, 255, 0, 1], yellowgreen: [154, 205, 50, 1] };
          function n2(t3) {
            return (t3 = Math.round(t3)) < 0 ? 0 : t3 > 255 ? 255 : t3;
          }
          function i2(t3) {
            return t3 < 0 ? 0 : t3 > 1 ? 1 : t3;
          }
          function a2(t3) {
            return "%" === t3[t3.length - 1] ? n2(parseFloat(t3) / 100 * 255) : n2(parseInt(t3));
          }
          function o2(t3) {
            return "%" === t3[t3.length - 1] ? i2(parseFloat(t3) / 100) : i2(parseFloat(t3));
          }
          function s2(t3, e3, r3) {
            return r3 < 0 ? r3 += 1 : r3 > 1 && (r3 -= 1), 6 * r3 < 1 ? t3 + (e3 - t3) * r3 * 6 : 2 * r3 < 1 ? e3 : 3 * r3 < 2 ? t3 + (e3 - t3) * (2 / 3 - r3) * 6 : t3;
          }
          try {
            e2.parseCSSColor = function(t3) {
              var e3, i3 = t3.replace(/ /g, "").toLowerCase();
              if (i3 in r2)
                return r2[i3].slice();
              if ("#" === i3[0])
                return 4 === i3.length ? (e3 = parseInt(i3.substr(1), 16)) >= 0 && e3 <= 4095 ? [(3840 & e3) >> 4 | (3840 & e3) >> 8, 240 & e3 | (240 & e3) >> 4, 15 & e3 | (15 & e3) << 4, 1] : null : 7 === i3.length && (e3 = parseInt(i3.substr(1), 16)) >= 0 && e3 <= 16777215 ? [(16711680 & e3) >> 16, (65280 & e3) >> 8, 255 & e3, 1] : null;
              var u2 = i3.indexOf("("), l2 = i3.indexOf(")");
              if (-1 !== u2 && l2 + 1 === i3.length) {
                var p2 = i3.substr(0, u2), c2 = i3.substr(u2 + 1, l2 - (u2 + 1)).split(","), h2 = 1;
                switch (p2) {
                  case "rgba":
                    if (4 !== c2.length)
                      return null;
                    h2 = o2(c2.pop());
                  case "rgb":
                    return 3 !== c2.length ? null : [a2(c2[0]), a2(c2[1]), a2(c2[2]), h2];
                  case "hsla":
                    if (4 !== c2.length)
                      return null;
                    h2 = o2(c2.pop());
                  case "hsl":
                    if (3 !== c2.length)
                      return null;
                    var f2 = (parseFloat(c2[0]) % 360 + 360) % 360 / 360, y2 = o2(c2[1]), d2 = o2(c2[2]), m2 = d2 <= 0.5 ? d2 * (y2 + 1) : d2 + y2 - d2 * y2, v2 = 2 * d2 - m2;
                    return [n2(255 * s2(v2, m2, f2 + 1 / 3)), n2(255 * s2(v2, m2, f2)), n2(255 * s2(v2, m2, f2 - 1 / 3)), h2];
                  default:
                    return null;
                }
              }
              return null;
            };
          } catch (t3) {
          }
        }).parseCSSColor, Dt = function(t2, e2, r2, n2) {
          void 0 === n2 && (n2 = 1), this.r = t2, this.g = e2, this.b = r2, this.a = n2;
        };
        Dt.parse = function(t2) {
          if (t2) {
            if (t2 instanceof Dt)
              return t2;
            if ("string" == typeof t2) {
              var e2 = Ot(t2);
              if (e2)
                return new Dt(e2[0] / 255 * e2[3], e2[1] / 255 * e2[3], e2[2] / 255 * e2[3], e2[3]);
            }
          }
        }, Dt.prototype.toString = function() {
          var t2 = this.toArray(), e2 = t2[0], r2 = t2[1], n2 = t2[2], i2 = t2[3];
          return "rgba(" + Math.round(e2) + "," + Math.round(r2) + "," + Math.round(n2) + "," + i2 + ")";
        }, Dt.prototype.toArray = function() {
          var t2 = this.r, e2 = this.g, r2 = this.b, n2 = this.a;
          return 0 === n2 ? [0, 0, 0, 0] : [255 * t2 / n2, 255 * e2 / n2, 255 * r2 / n2, n2];
        }, Dt.black = new Dt(0, 0, 0, 1), Dt.white = new Dt(1, 1, 1, 1), Dt.transparent = new Dt(0, 0, 0, 0), Dt.red = new Dt(1, 0, 0, 1);
        var Ut = function(t2, e2, r2) {
          this.sensitivity = t2 ? e2 ? "variant" : "case" : e2 ? "accent" : "base", this.locale = r2, this.collator = new Intl.Collator(this.locale ? this.locale : [], { sensitivity: this.sensitivity, usage: "search" });
        };
        Ut.prototype.compare = function(t2, e2) {
          return this.collator.compare(t2, e2);
        }, Ut.prototype.resolvedLocale = function() {
          return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;
        };
        var jt = function(t2, e2, r2) {
          this.text = t2, this.scale = e2, this.fontStack = r2;
        }, Rt = function(t2) {
          this.sections = t2;
        };
        function qt(t2, e2, r2, n2) {
          return "number" == typeof t2 && t2 >= 0 && t2 <= 255 && "number" == typeof e2 && e2 >= 0 && e2 <= 255 && "number" == typeof r2 && r2 >= 0 && r2 <= 255 ? void 0 === n2 || "number" == typeof n2 && n2 >= 0 && n2 <= 1 ? null : "Invalid rgba value [" + [t2, e2, r2, n2].join(", ") + "]: 'a' must be between 0 and 1." : "Invalid rgba value [" + ("number" == typeof n2 ? [t2, e2, r2, n2] : [t2, e2, r2]).join(", ") + "]: 'r', 'g', and 'b' must be between 0 and 255.";
        }
        function Nt(t2) {
          if (null === t2)
            return St;
          if ("string" == typeof t2)
            return zt;
          if ("boolean" == typeof t2)
            return It;
          if ("number" == typeof t2)
            return kt;
          if (t2 instanceof Dt)
            return Bt;
          if (t2 instanceof Ut)
            return Vt;
          if (t2 instanceof Rt)
            return Ct;
          if (Array.isArray(t2)) {
            for (var e2, r2 = t2.length, n2 = 0, i2 = t2; n2 < i2.length; n2 += 1) {
              var a2 = Nt(i2[n2]);
              if (e2) {
                if (e2 === a2)
                  continue;
                e2 = Pt;
                break;
              }
              e2 = a2;
            }
            return Mt(e2 || Pt, r2);
          }
          return Et;
        }
        function Kt(t2) {
          var e2 = typeof t2;
          return null === t2 ? "" : "string" === e2 || "number" === e2 || "boolean" === e2 ? String(t2) : t2 instanceof Dt || t2 instanceof Rt ? t2.toString() : JSON.stringify(t2);
        }
        Rt.fromString = function(t2) {
          return new Rt([new jt(t2, null, null)]);
        }, Rt.prototype.toString = function() {
          return this.sections.map(function(t2) {
            return t2.text;
          }).join("");
        }, Rt.prototype.serialize = function() {
          for (var t2 = ["format"], e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2];
            t2.push(n2.text);
            var i2 = {};
            n2.fontStack && (i2["text-font"] = ["literal", n2.fontStack.split(",")]), n2.scale && (i2["font-scale"] = n2.scale), t2.push(i2);
          }
          return t2;
        };
        var Gt = function(t2, e2) {
          this.type = t2, this.value = e2;
        };
        Gt.parse = function(t2, e2) {
          if (2 !== t2.length)
            return e2.error("'literal' expression requires exactly one argument, but found " + (t2.length - 1) + " instead.");
          if (!function t3(e3) {
            if (null === e3)
              return true;
            if ("string" == typeof e3)
              return true;
            if ("boolean" == typeof e3)
              return true;
            if ("number" == typeof e3)
              return true;
            if (e3 instanceof Dt)
              return true;
            if (e3 instanceof Ut)
              return true;
            if (e3 instanceof Rt)
              return true;
            if (Array.isArray(e3)) {
              for (var r3 = 0, n3 = e3; r3 < n3.length; r3 += 1)
                if (!t3(n3[r3]))
                  return false;
              return true;
            }
            if ("object" == typeof e3) {
              for (var i3 in e3)
                if (!t3(e3[i3]))
                  return false;
              return true;
            }
            return false;
          }(t2[1]))
            return e2.error("invalid value");
          var r2 = t2[1], n2 = Nt(r2), i2 = e2.expectedType;
          return "array" !== n2.kind || 0 !== n2.N || !i2 || "array" !== i2.kind || "number" == typeof i2.N && 0 !== i2.N || (n2 = i2), new Gt(n2, r2);
        }, Gt.prototype.evaluate = function() {
          return this.value;
        }, Gt.prototype.eachChild = function() {
        }, Gt.prototype.possibleOutputs = function() {
          return [this.value];
        }, Gt.prototype.serialize = function() {
          return "array" === this.type.kind || "object" === this.type.kind ? ["literal", this.value] : this.value instanceof Dt ? ["rgba"].concat(this.value.toArray()) : this.value instanceof Rt ? this.value.serialize() : this.value;
        };
        var Xt = function(t2) {
          this.name = "ExpressionEvaluationError", this.message = t2;
        };
        Xt.prototype.toJSON = function() {
          return this.message;
        };
        var Zt = { string: zt, number: kt, boolean: It, object: Et }, Ht = function(t2, e2) {
          this.type = t2, this.args = e2;
        };
        Ht.parse = function(t2, e2) {
          if (t2.length < 2)
            return e2.error("Expected at least one argument.");
          var r2, n2 = 1, i2 = t2[0];
          if ("array" === i2) {
            var a2, o2;
            if (t2.length > 2) {
              var s2 = t2[1];
              if ("string" != typeof s2 || !(s2 in Zt) || "object" === s2)
                return e2.error('The item type argument of "array" must be one of string, number, boolean', 1);
              a2 = Zt[s2], n2++;
            } else
              a2 = Pt;
            if (t2.length > 3) {
              if (null !== t2[2] && ("number" != typeof t2[2] || t2[2] < 0 || t2[2] !== Math.floor(t2[2])))
                return e2.error('The length argument to "array" must be a positive integer literal', 2);
              o2 = t2[2], n2++;
            }
            r2 = Mt(a2, o2);
          } else
            r2 = Zt[i2];
          for (var u2 = []; n2 < t2.length; n2++) {
            var l2 = e2.parse(t2[n2], n2, Pt);
            if (!l2)
              return null;
            u2.push(l2);
          }
          return new Ht(r2, u2);
        }, Ht.prototype.evaluate = function(t2) {
          for (var e2 = 0; e2 < this.args.length; e2++) {
            var r2 = this.args[e2].evaluate(t2);
            if (!Lt(this.type, Nt(r2)))
              return r2;
            if (e2 === this.args.length - 1)
              throw new Xt("Expected value to be of type " + Tt(this.type) + ", but found " + Tt(Nt(r2)) + " instead.");
          }
          return null;
        }, Ht.prototype.eachChild = function(t2) {
          this.args.forEach(t2);
        }, Ht.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.args.map(function(t3) {
            return t3.possibleOutputs();
          }));
        }, Ht.prototype.serialize = function() {
          var t2 = this.type, e2 = [t2.kind];
          if ("array" === t2.kind) {
            var r2 = t2.itemType;
            if ("string" === r2.kind || "number" === r2.kind || "boolean" === r2.kind) {
              e2.push(r2.kind);
              var n2 = t2.N;
              ("number" == typeof n2 || this.args.length > 1) && e2.push(n2);
            }
          }
          return e2.concat(this.args.map(function(t3) {
            return t3.serialize();
          }));
        };
        var Yt = function(t2) {
          this.type = Ct, this.sections = t2;
        };
        Yt.parse = function(t2, e2) {
          if (t2.length < 3)
            return e2.error("Expected at least two arguments.");
          if ((t2.length - 1) % 2 != 0)
            return e2.error("Expected an even number of arguments.");
          for (var r2 = [], n2 = 1; n2 < t2.length - 1; n2 += 2) {
            var i2 = e2.parse(t2[n2], 1, Pt);
            if (!i2)
              return null;
            var a2 = i2.type.kind;
            if ("string" !== a2 && "value" !== a2 && "null" !== a2)
              return e2.error("Formatted text type must be 'string', 'value', or 'null'.");
            var o2 = t2[n2 + 1];
            if ("object" != typeof o2 || Array.isArray(o2))
              return e2.error("Format options argument must be an object.");
            var s2 = null;
            if (o2["font-scale"] && !(s2 = e2.parse(o2["font-scale"], 1, kt)))
              return null;
            var u2 = null;
            if (o2["text-font"] && !(u2 = e2.parse(o2["text-font"], 1, Mt(zt))))
              return null;
            r2.push({ text: i2, scale: s2, font: u2 });
          }
          return new Yt(r2);
        }, Yt.prototype.evaluate = function(t2) {
          return new Rt(this.sections.map(function(e2) {
            return new jt(Kt(e2.text.evaluate(t2)), e2.scale ? e2.scale.evaluate(t2) : null, e2.font ? e2.font.evaluate(t2).join(",") : null);
          }));
        }, Yt.prototype.eachChild = function(t2) {
          for (var e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2];
            t2(n2.text), n2.scale && t2(n2.scale), n2.font && t2(n2.font);
          }
        }, Yt.prototype.possibleOutputs = function() {
          return [void 0];
        }, Yt.prototype.serialize = function() {
          for (var t2 = ["format"], e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2];
            t2.push(n2.text.serialize());
            var i2 = {};
            n2.scale && (i2["font-scale"] = n2.scale.serialize()), n2.font && (i2["text-font"] = n2.font.serialize()), t2.push(i2);
          }
          return t2;
        };
        var Jt = { "to-boolean": It, "to-color": Bt, "to-number": kt, "to-string": zt }, $t = function(t2, e2) {
          this.type = t2, this.args = e2;
        };
        $t.parse = function(t2, e2) {
          if (t2.length < 2)
            return e2.error("Expected at least one argument.");
          var r2 = t2[0];
          if (("to-boolean" === r2 || "to-string" === r2) && 2 !== t2.length)
            return e2.error("Expected one argument.");
          for (var n2 = Jt[r2], i2 = [], a2 = 1; a2 < t2.length; a2++) {
            var o2 = e2.parse(t2[a2], a2, Pt);
            if (!o2)
              return null;
            i2.push(o2);
          }
          return new $t(n2, i2);
        }, $t.prototype.evaluate = function(t2) {
          if ("boolean" === this.type.kind)
            return Boolean(this.args[0].evaluate(t2));
          if ("color" === this.type.kind) {
            for (var e2, r2, n2 = 0, i2 = this.args; n2 < i2.length; n2 += 1) {
              if (r2 = null, (e2 = i2[n2].evaluate(t2)) instanceof Dt)
                return e2;
              if ("string" == typeof e2) {
                var a2 = t2.parseColor(e2);
                if (a2)
                  return a2;
              } else if (Array.isArray(e2) && !(r2 = e2.length < 3 || e2.length > 4 ? "Invalid rbga value " + JSON.stringify(e2) + ": expected an array containing either three or four numeric values." : qt(e2[0], e2[1], e2[2], e2[3])))
                return new Dt(e2[0] / 255, e2[1] / 255, e2[2] / 255, e2[3]);
            }
            throw new Xt(r2 || "Could not parse color from value '" + ("string" == typeof e2 ? e2 : JSON.stringify(e2)) + "'");
          }
          if ("number" === this.type.kind) {
            for (var o2 = null, s2 = 0, u2 = this.args; s2 < u2.length; s2 += 1) {
              if (null === (o2 = u2[s2].evaluate(t2)))
                return 0;
              var l2 = Number(o2);
              if (!isNaN(l2))
                return l2;
            }
            throw new Xt("Could not convert " + JSON.stringify(o2) + " to number.");
          }
          return "formatted" === this.type.kind ? Rt.fromString(Kt(this.args[0].evaluate(t2))) : Kt(this.args[0].evaluate(t2));
        }, $t.prototype.eachChild = function(t2) {
          this.args.forEach(t2);
        }, $t.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.args.map(function(t3) {
            return t3.possibleOutputs();
          }));
        }, $t.prototype.serialize = function() {
          if ("formatted" === this.type.kind)
            return new Yt([{ text: this.args[0], scale: null, font: null }]).serialize();
          var t2 = ["to-" + this.type.kind];
          return this.eachChild(function(e2) {
            t2.push(e2.serialize());
          }), t2;
        };
        var Wt = ["Unknown", "Point", "LineString", "Polygon"], Qt = function() {
          this.globals = null, this.feature = null, this.featureState = null, this._parseColorCache = {};
        };
        Qt.prototype.id = function() {
          return this.feature && "id" in this.feature ? this.feature.id : null;
        }, Qt.prototype.geometryType = function() {
          return this.feature ? "number" == typeof this.feature.type ? Wt[this.feature.type] : this.feature.type : null;
        }, Qt.prototype.properties = function() {
          return this.feature && this.feature.properties || {};
        }, Qt.prototype.parseColor = function(t2) {
          var e2 = this._parseColorCache[t2];
          return e2 || (e2 = this._parseColorCache[t2] = Dt.parse(t2)), e2;
        };
        var te = function(t2, e2, r2, n2) {
          this.name = t2, this.type = e2, this._evaluate = r2, this.args = n2;
        };
        te.prototype.evaluate = function(t2) {
          return this._evaluate(t2, this.args);
        }, te.prototype.eachChild = function(t2) {
          this.args.forEach(t2);
        }, te.prototype.possibleOutputs = function() {
          return [void 0];
        }, te.prototype.serialize = function() {
          return [this.name].concat(this.args.map(function(t2) {
            return t2.serialize();
          }));
        }, te.parse = function(t2, e2) {
          var r2, n2 = t2[0], i2 = te.definitions[n2];
          if (!i2)
            return e2.error('Unknown expression "' + n2 + '". If you wanted a literal array, use ["literal", [...]].', 0);
          for (var a2 = Array.isArray(i2) ? i2[0] : i2.type, o2 = Array.isArray(i2) ? [[i2[1], i2[2]]] : i2.overloads, s2 = o2.filter(function(e3) {
            var r3 = e3[0];
            return !Array.isArray(r3) || r3.length === t2.length - 1;
          }), u2 = null, l2 = 0, p2 = s2; l2 < p2.length; l2 += 1) {
            var c2 = p2[l2], h2 = c2[0], f2 = c2[1];
            u2 = new oe(e2.registry, e2.path, null, e2.scope);
            for (var y2 = [], d2 = false, m2 = 1; m2 < t2.length; m2++) {
              var v2 = t2[m2], g2 = Array.isArray(h2) ? h2[m2 - 1] : h2.type, x2 = u2.parse(v2, 1 + y2.length, g2);
              if (!x2) {
                d2 = true;
                break;
              }
              y2.push(x2);
            }
            if (!d2)
              if (Array.isArray(h2) && h2.length !== y2.length)
                u2.error("Expected " + h2.length + " arguments, but found " + y2.length + " instead.");
              else {
                for (var b2 = 0; b2 < y2.length; b2++) {
                  var _2 = Array.isArray(h2) ? h2[b2] : h2.type, w2 = y2[b2];
                  u2.concat(b2 + 1).checkSubtype(_2, w2.type);
                }
                if (0 === u2.errors.length)
                  return new te(n2, a2, f2, y2);
              }
          }
          if (1 === s2.length)
            (r2 = e2.errors).push.apply(r2, u2.errors);
          else {
            for (var A2 = (s2.length ? s2 : o2).map(function(t3) {
              var e3, r3 = t3[0];
              return e3 = r3, Array.isArray(e3) ? "(" + e3.map(Tt).join(", ") + ")" : "(" + Tt(e3.type) + "...)";
            }).join(" | "), S2 = [], k2 = 1; k2 < t2.length; k2++) {
              var z2 = e2.parse(t2[k2], 1 + S2.length);
              if (!z2)
                return null;
              S2.push(Tt(z2.type));
            }
            e2.error("Expected arguments of type " + A2 + ", but found (" + S2.join(", ") + ") instead.");
          }
          return null;
        }, te.register = function(t2, e2) {
          for (var r2 in te.definitions = e2, e2)
            t2[r2] = te;
        };
        var ee = function(t2, e2, r2) {
          this.type = Vt, this.locale = r2, this.caseSensitive = t2, this.diacriticSensitive = e2;
        };
        function re(t2) {
          if (t2 instanceof te) {
            if ("get" === t2.name && 1 === t2.args.length)
              return false;
            if ("feature-state" === t2.name)
              return false;
            if ("has" === t2.name && 1 === t2.args.length)
              return false;
            if ("properties" === t2.name || "geometry-type" === t2.name || "id" === t2.name)
              return false;
            if (/^filter-/.test(t2.name))
              return false;
          }
          var e2 = true;
          return t2.eachChild(function(t3) {
            e2 && !re(t3) && (e2 = false);
          }), e2;
        }
        function ne(t2) {
          if (t2 instanceof te && "feature-state" === t2.name)
            return false;
          var e2 = true;
          return t2.eachChild(function(t3) {
            e2 && !ne(t3) && (e2 = false);
          }), e2;
        }
        function ie(t2, e2) {
          if (t2 instanceof te && e2.indexOf(t2.name) >= 0)
            return false;
          var r2 = true;
          return t2.eachChild(function(t3) {
            r2 && !ie(t3, e2) && (r2 = false);
          }), r2;
        }
        ee.parse = function(t2, e2) {
          if (2 !== t2.length)
            return e2.error("Expected one argument.");
          var r2 = t2[1];
          if ("object" != typeof r2 || Array.isArray(r2))
            return e2.error("Collator options argument must be an object.");
          var n2 = e2.parse(void 0 !== r2["case-sensitive"] && r2["case-sensitive"], 1, It);
          if (!n2)
            return null;
          var i2 = e2.parse(void 0 !== r2["diacritic-sensitive"] && r2["diacritic-sensitive"], 1, It);
          if (!i2)
            return null;
          var a2 = null;
          return r2.locale && !(a2 = e2.parse(r2.locale, 1, zt)) ? null : new ee(n2, i2, a2);
        }, ee.prototype.evaluate = function(t2) {
          return new Ut(this.caseSensitive.evaluate(t2), this.diacriticSensitive.evaluate(t2), this.locale ? this.locale.evaluate(t2) : null);
        }, ee.prototype.eachChild = function(t2) {
          t2(this.caseSensitive), t2(this.diacriticSensitive), this.locale && t2(this.locale);
        }, ee.prototype.possibleOutputs = function() {
          return [void 0];
        }, ee.prototype.serialize = function() {
          var t2 = {};
          return t2["case-sensitive"] = this.caseSensitive.serialize(), t2["diacritic-sensitive"] = this.diacriticSensitive.serialize(), this.locale && (t2.locale = this.locale.serialize()), ["collator", t2];
        };
        var ae = function(t2, e2) {
          this.type = e2.type, this.name = t2, this.boundExpression = e2;
        };
        ae.parse = function(t2, e2) {
          if (2 !== t2.length || "string" != typeof t2[1])
            return e2.error("'var' expression requires exactly one string literal argument.");
          var r2 = t2[1];
          return e2.scope.has(r2) ? new ae(r2, e2.scope.get(r2)) : e2.error('Unknown variable "' + r2 + '". Make sure "' + r2 + '" has been bound in an enclosing "let" expression before using it.', 1);
        }, ae.prototype.evaluate = function(t2) {
          return this.boundExpression.evaluate(t2);
        }, ae.prototype.eachChild = function() {
        }, ae.prototype.possibleOutputs = function() {
          return [void 0];
        }, ae.prototype.serialize = function() {
          return ["var", this.name];
        };
        var oe = function(t2, e2, r2, n2, i2) {
          void 0 === e2 && (e2 = []), void 0 === n2 && (n2 = new At()), void 0 === i2 && (i2 = []), this.registry = t2, this.path = e2, this.key = e2.map(function(t3) {
            return "[" + t3 + "]";
          }).join(""), this.scope = n2, this.errors = i2, this.expectedType = r2;
        };
        function se(t2, e2) {
          for (var r2, n2, i2 = 0, a2 = t2.length - 1, o2 = 0; i2 <= a2; ) {
            if (r2 = t2[o2 = Math.floor((i2 + a2) / 2)], n2 = t2[o2 + 1], e2 === r2 || e2 > r2 && e2 < n2)
              return o2;
            if (r2 < e2)
              i2 = o2 + 1;
            else {
              if (!(r2 > e2))
                throw new Xt("Input is not a number.");
              a2 = o2 - 1;
            }
          }
          return Math.max(o2 - 1, 0);
        }
        oe.prototype.parse = function(t2, e2, r2, n2, i2) {
          return void 0 === i2 && (i2 = {}), e2 ? this.concat(e2, r2, n2)._parse(t2, i2) : this._parse(t2, i2);
        }, oe.prototype._parse = function(t2, e2) {
          function r2(t3, e3, r3) {
            return "assert" === r3 ? new Ht(e3, [t3]) : "coerce" === r3 ? new $t(e3, [t3]) : t3;
          }
          if (null !== t2 && "string" != typeof t2 && "boolean" != typeof t2 && "number" != typeof t2 || (t2 = ["literal", t2]), Array.isArray(t2)) {
            if (0 === t2.length)
              return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
            var n2 = t2[0];
            if ("string" != typeof n2)
              return this.error("Expression name must be a string, but found " + typeof n2 + ' instead. If you wanted a literal array, use ["literal", [...]].', 0), null;
            var i2 = this.registry[n2];
            if (i2) {
              var a2 = i2.parse(t2, this);
              if (!a2)
                return null;
              if (this.expectedType) {
                var o2 = this.expectedType, s2 = a2.type;
                if ("string" !== o2.kind && "number" !== o2.kind && "boolean" !== o2.kind && "object" !== o2.kind && "array" !== o2.kind || "value" !== s2.kind)
                  if ("color" !== o2.kind && "formatted" !== o2.kind || "value" !== s2.kind && "string" !== s2.kind) {
                    if (this.checkSubtype(o2, s2))
                      return null;
                  } else
                    a2 = r2(a2, o2, e2.typeAnnotation || "coerce");
                else
                  a2 = r2(a2, o2, e2.typeAnnotation || "assert");
              }
              if (!(a2 instanceof Gt) && function t3(e3) {
                if (e3 instanceof ae)
                  return t3(e3.boundExpression);
                if (e3 instanceof te && "error" === e3.name)
                  return false;
                if (e3 instanceof ee)
                  return false;
                var r3 = e3 instanceof $t || e3 instanceof Ht;
                var n3 = true;
                e3.eachChild(function(e4) {
                  n3 = r3 ? n3 && t3(e4) : n3 && e4 instanceof Gt;
                });
                if (!n3)
                  return false;
                return re(e3) && ie(e3, ["zoom", "heatmap-density", "line-progress", "accumulated", "is-supported-script"]);
              }(a2)) {
                var u2 = new Qt();
                try {
                  a2 = new Gt(a2.type, a2.evaluate(u2));
                } catch (t3) {
                  return this.error(t3.message), null;
                }
              }
              return a2;
            }
            return this.error('Unknown expression "' + n2 + '". If you wanted a literal array, use ["literal", [...]].', 0);
          }
          return void 0 === t2 ? this.error("'undefined' value invalid. Use null instead.") : "object" == typeof t2 ? this.error('Bare objects invalid. Use ["literal", {...}] instead.') : this.error("Expected an array, but found " + typeof t2 + " instead.");
        }, oe.prototype.concat = function(t2, e2, r2) {
          var n2 = "number" == typeof t2 ? this.path.concat(t2) : this.path, i2 = r2 ? this.scope.concat(r2) : this.scope;
          return new oe(this.registry, n2, e2 || null, i2, this.errors);
        }, oe.prototype.error = function(t2) {
          for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
            e2[r2] = arguments[r2 + 1];
          var n2 = "" + this.key + e2.map(function(t3) {
            return "[" + t3 + "]";
          }).join("");
          this.errors.push(new wt(n2, t2));
        }, oe.prototype.checkSubtype = function(t2, e2) {
          var r2 = Lt(t2, e2);
          return r2 && this.error(r2), r2;
        };
        var ue = function(t2, e2, r2) {
          this.type = t2, this.input = e2, this.labels = [], this.outputs = [];
          for (var n2 = 0, i2 = r2; n2 < i2.length; n2 += 1) {
            var a2 = i2[n2], o2 = a2[0], s2 = a2[1];
            this.labels.push(o2), this.outputs.push(s2);
          }
        };
        function le(t2, e2, r2) {
          return t2 * (1 - r2) + e2 * r2;
        }
        ue.parse = function(t2, e2) {
          var r2 = t2[1], n2 = t2.slice(2);
          if (t2.length - 1 < 4)
            return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
          if ((t2.length - 1) % 2 != 0)
            return e2.error("Expected an even number of arguments.");
          if (!(r2 = e2.parse(r2, 1, kt)))
            return null;
          var i2 = [], a2 = null;
          e2.expectedType && "value" !== e2.expectedType.kind && (a2 = e2.expectedType), n2.unshift(-1 / 0);
          for (var o2 = 0; o2 < n2.length; o2 += 2) {
            var s2 = n2[o2], u2 = n2[o2 + 1], l2 = o2 + 1, p2 = o2 + 2;
            if ("number" != typeof s2)
              return e2.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', l2);
            if (i2.length && i2[i2.length - 1][0] >= s2)
              return e2.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', l2);
            var c2 = e2.parse(u2, p2, a2);
            if (!c2)
              return null;
            a2 = a2 || c2.type, i2.push([s2, c2]);
          }
          return new ue(a2, r2, i2);
        }, ue.prototype.evaluate = function(t2) {
          var e2 = this.labels, r2 = this.outputs;
          if (1 === e2.length)
            return r2[0].evaluate(t2);
          var n2 = this.input.evaluate(t2);
          if (n2 <= e2[0])
            return r2[0].evaluate(t2);
          var i2 = e2.length;
          return n2 >= e2[i2 - 1] ? r2[i2 - 1].evaluate(t2) : r2[se(e2, n2)].evaluate(t2);
        }, ue.prototype.eachChild = function(t2) {
          t2(this.input);
          for (var e2 = 0, r2 = this.outputs; e2 < r2.length; e2 += 1) {
            t2(r2[e2]);
          }
        }, ue.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.outputs.map(function(t3) {
            return t3.possibleOutputs();
          }));
        }, ue.prototype.serialize = function() {
          for (var t2 = ["step", this.input.serialize()], e2 = 0; e2 < this.labels.length; e2++)
            e2 > 0 && t2.push(this.labels[e2]), t2.push(this.outputs[e2].serialize());
          return t2;
        };
        var pe = Object.freeze({ number: le, color: function(t2, e2, r2) {
          return new Dt(le(t2.r, e2.r, r2), le(t2.g, e2.g, r2), le(t2.b, e2.b, r2), le(t2.a, e2.a, r2));
        }, array: function(t2, e2, r2) {
          return t2.map(function(t3, n2) {
            return le(t3, e2[n2], r2);
          });
        } }), ce = 0.95047, he = 1, fe = 1.08883, ye = 4 / 29, de = 6 / 29, me = 3 * de * de, ve = de * de * de, ge = Math.PI / 180, xe = 180 / Math.PI;
        function be(t2) {
          return t2 > ve ? Math.pow(t2, 1 / 3) : t2 / me + ye;
        }
        function _e(t2) {
          return t2 > de ? t2 * t2 * t2 : me * (t2 - ye);
        }
        function we(t2) {
          return 255 * (t2 <= 31308e-7 ? 12.92 * t2 : 1.055 * Math.pow(t2, 1 / 2.4) - 0.055);
        }
        function Ae(t2) {
          return (t2 /= 255) <= 0.04045 ? t2 / 12.92 : Math.pow((t2 + 0.055) / 1.055, 2.4);
        }
        function Se(t2) {
          var e2 = Ae(t2.r), r2 = Ae(t2.g), n2 = Ae(t2.b), i2 = be((0.4124564 * e2 + 0.3575761 * r2 + 0.1804375 * n2) / ce), a2 = be((0.2126729 * e2 + 0.7151522 * r2 + 0.072175 * n2) / he);
          return { l: 116 * a2 - 16, a: 500 * (i2 - a2), b: 200 * (a2 - be((0.0193339 * e2 + 0.119192 * r2 + 0.9503041 * n2) / fe)), alpha: t2.a };
        }
        function ke(t2) {
          var e2 = (t2.l + 16) / 116, r2 = isNaN(t2.a) ? e2 : e2 + t2.a / 500, n2 = isNaN(t2.b) ? e2 : e2 - t2.b / 200;
          return e2 = he * _e(e2), r2 = ce * _e(r2), n2 = fe * _e(n2), new Dt(we(3.2404542 * r2 - 1.5371385 * e2 - 0.4985314 * n2), we(-0.969266 * r2 + 1.8760108 * e2 + 0.041556 * n2), we(0.0556434 * r2 - 0.2040259 * e2 + 1.0572252 * n2), t2.alpha);
        }
        function ze(t2, e2, r2) {
          var n2 = e2 - t2;
          return t2 + r2 * (n2 > 180 || n2 < -180 ? n2 - 360 * Math.round(n2 / 360) : n2);
        }
        var Ie = { forward: Se, reverse: ke, interpolate: function(t2, e2, r2) {
          return { l: le(t2.l, e2.l, r2), a: le(t2.a, e2.a, r2), b: le(t2.b, e2.b, r2), alpha: le(t2.alpha, e2.alpha, r2) };
        } }, Be = { forward: function(t2) {
          var e2 = Se(t2), r2 = e2.l, n2 = e2.a, i2 = e2.b, a2 = Math.atan2(i2, n2) * xe;
          return { h: a2 < 0 ? a2 + 360 : a2, c: Math.sqrt(n2 * n2 + i2 * i2), l: r2, alpha: t2.a };
        }, reverse: function(t2) {
          var e2 = t2.h * ge, r2 = t2.c;
          return ke({ l: t2.l, a: Math.cos(e2) * r2, b: Math.sin(e2) * r2, alpha: t2.alpha });
        }, interpolate: function(t2, e2, r2) {
          return { h: ze(t2.h, e2.h, r2), c: le(t2.c, e2.c, r2), l: le(t2.l, e2.l, r2), alpha: le(t2.alpha, e2.alpha, r2) };
        } }, Ee = Object.freeze({ lab: Ie, hcl: Be }), Pe = function(t2, e2, r2, n2, i2) {
          this.type = t2, this.operator = e2, this.interpolation = r2, this.input = n2, this.labels = [], this.outputs = [];
          for (var a2 = 0, o2 = i2; a2 < o2.length; a2 += 1) {
            var s2 = o2[a2], u2 = s2[0], l2 = s2[1];
            this.labels.push(u2), this.outputs.push(l2);
          }
        };
        function Ve(t2, e2, r2, n2) {
          var i2 = n2 - r2, a2 = t2 - r2;
          return 0 === i2 ? 0 : 1 === e2 ? a2 / i2 : (Math.pow(e2, a2) - 1) / (Math.pow(e2, i2) - 1);
        }
        Pe.interpolationFactor = function(t2, e2, n2, i2) {
          var a2 = 0;
          if ("exponential" === t2.name)
            a2 = Ve(e2, t2.base, n2, i2);
          else if ("linear" === t2.name)
            a2 = Ve(e2, 1, n2, i2);
          else if ("cubic-bezier" === t2.name) {
            var o2 = t2.controlPoints;
            a2 = new r(o2[0], o2[1], o2[2], o2[3]).solve(Ve(e2, 1, n2, i2));
          }
          return a2;
        }, Pe.parse = function(t2, e2) {
          var r2 = t2[0], n2 = t2[1], i2 = t2[2], a2 = t2.slice(3);
          if (!Array.isArray(n2) || 0 === n2.length)
            return e2.error("Expected an interpolation type expression.", 1);
          if ("linear" === n2[0])
            n2 = { name: "linear" };
          else if ("exponential" === n2[0]) {
            var o2 = n2[1];
            if ("number" != typeof o2)
              return e2.error("Exponential interpolation requires a numeric base.", 1, 1);
            n2 = { name: "exponential", base: o2 };
          } else {
            if ("cubic-bezier" !== n2[0])
              return e2.error("Unknown interpolation type " + String(n2[0]), 1, 0);
            var s2 = n2.slice(1);
            if (4 !== s2.length || s2.some(function(t3) {
              return "number" != typeof t3 || t3 < 0 || t3 > 1;
            }))
              return e2.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.", 1);
            n2 = { name: "cubic-bezier", controlPoints: s2 };
          }
          if (t2.length - 1 < 4)
            return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
          if ((t2.length - 1) % 2 != 0)
            return e2.error("Expected an even number of arguments.");
          if (!(i2 = e2.parse(i2, 2, kt)))
            return null;
          var u2 = [], l2 = null;
          "interpolate-hcl" === r2 || "interpolate-lab" === r2 ? l2 = Bt : e2.expectedType && "value" !== e2.expectedType.kind && (l2 = e2.expectedType);
          for (var p2 = 0; p2 < a2.length; p2 += 2) {
            var c2 = a2[p2], h2 = a2[p2 + 1], f2 = p2 + 3, y2 = p2 + 4;
            if ("number" != typeof c2)
              return e2.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', f2);
            if (u2.length && u2[u2.length - 1][0] >= c2)
              return e2.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', f2);
            var d2 = e2.parse(h2, y2, l2);
            if (!d2)
              return null;
            l2 = l2 || d2.type, u2.push([c2, d2]);
          }
          return "number" === l2.kind || "color" === l2.kind || "array" === l2.kind && "number" === l2.itemType.kind && "number" == typeof l2.N ? new Pe(l2, r2, n2, i2, u2) : e2.error("Type " + Tt(l2) + " is not interpolatable.");
        }, Pe.prototype.evaluate = function(t2) {
          var e2 = this.labels, r2 = this.outputs;
          if (1 === e2.length)
            return r2[0].evaluate(t2);
          var n2 = this.input.evaluate(t2);
          if (n2 <= e2[0])
            return r2[0].evaluate(t2);
          var i2 = e2.length;
          if (n2 >= e2[i2 - 1])
            return r2[i2 - 1].evaluate(t2);
          var a2 = se(e2, n2), o2 = e2[a2], s2 = e2[a2 + 1], u2 = Pe.interpolationFactor(this.interpolation, n2, o2, s2), l2 = r2[a2].evaluate(t2), p2 = r2[a2 + 1].evaluate(t2);
          return "interpolate" === this.operator ? pe[this.type.kind.toLowerCase()](l2, p2, u2) : "interpolate-hcl" === this.operator ? Be.reverse(Be.interpolate(Be.forward(l2), Be.forward(p2), u2)) : Ie.reverse(Ie.interpolate(Ie.forward(l2), Ie.forward(p2), u2));
        }, Pe.prototype.eachChild = function(t2) {
          t2(this.input);
          for (var e2 = 0, r2 = this.outputs; e2 < r2.length; e2 += 1) {
            t2(r2[e2]);
          }
        }, Pe.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.outputs.map(function(t3) {
            return t3.possibleOutputs();
          }));
        }, Pe.prototype.serialize = function() {
          var t2;
          t2 = "linear" === this.interpolation.name ? ["linear"] : "exponential" === this.interpolation.name ? 1 === this.interpolation.base ? ["linear"] : ["exponential", this.interpolation.base] : ["cubic-bezier"].concat(this.interpolation.controlPoints);
          for (var e2 = [this.operator, t2, this.input.serialize()], r2 = 0; r2 < this.labels.length; r2++)
            e2.push(this.labels[r2], this.outputs[r2].serialize());
          return e2;
        };
        var Ce = function(t2, e2) {
          this.type = t2, this.args = e2;
        };
        Ce.parse = function(t2, e2) {
          if (t2.length < 2)
            return e2.error("Expectected at least one argument.");
          var r2 = null, n2 = e2.expectedType;
          n2 && "value" !== n2.kind && (r2 = n2);
          for (var i2 = [], a2 = 0, o2 = t2.slice(1); a2 < o2.length; a2 += 1) {
            var s2 = o2[a2], u2 = e2.parse(s2, 1 + i2.length, r2, void 0, { typeAnnotation: "omit" });
            if (!u2)
              return null;
            r2 = r2 || u2.type, i2.push(u2);
          }
          var l2 = n2 && i2.some(function(t3) {
            return Lt(n2, t3.type);
          });
          return new Ce(l2 ? Pt : r2, i2);
        }, Ce.prototype.evaluate = function(t2) {
          for (var e2 = null, r2 = 0, n2 = this.args; r2 < n2.length; r2 += 1) {
            if (null !== (e2 = n2[r2].evaluate(t2)))
              break;
          }
          return e2;
        }, Ce.prototype.eachChild = function(t2) {
          this.args.forEach(t2);
        }, Ce.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.args.map(function(t3) {
            return t3.possibleOutputs();
          }));
        }, Ce.prototype.serialize = function() {
          var t2 = ["coalesce"];
          return this.eachChild(function(e2) {
            t2.push(e2.serialize());
          }), t2;
        };
        var Me = function(t2, e2) {
          this.type = e2.type, this.bindings = [].concat(t2), this.result = e2;
        };
        Me.prototype.evaluate = function(t2) {
          return this.result.evaluate(t2);
        }, Me.prototype.eachChild = function(t2) {
          for (var e2 = 0, r2 = this.bindings; e2 < r2.length; e2 += 1) {
            t2(r2[e2][1]);
          }
          t2(this.result);
        }, Me.parse = function(t2, e2) {
          if (t2.length < 4)
            return e2.error("Expected at least 3 arguments, but found " + (t2.length - 1) + " instead.");
          for (var r2 = [], n2 = 1; n2 < t2.length - 1; n2 += 2) {
            var i2 = t2[n2];
            if ("string" != typeof i2)
              return e2.error("Expected string, but found " + typeof i2 + " instead.", n2);
            if (/[^a-zA-Z0-9_]/.test(i2))
              return e2.error("Variable names must contain only alphanumeric characters or '_'.", n2);
            var a2 = e2.parse(t2[n2 + 1], n2 + 1);
            if (!a2)
              return null;
            r2.push([i2, a2]);
          }
          var o2 = e2.parse(t2[t2.length - 1], t2.length - 1, e2.expectedType, r2);
          return o2 ? new Me(r2, o2) : null;
        }, Me.prototype.possibleOutputs = function() {
          return this.result.possibleOutputs();
        }, Me.prototype.serialize = function() {
          for (var t2 = ["let"], e2 = 0, r2 = this.bindings; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2], i2 = n2[0], a2 = n2[1];
            t2.push(i2, a2.serialize());
          }
          return t2.push(this.result.serialize()), t2;
        };
        var Te = function(t2, e2, r2) {
          this.type = t2, this.index = e2, this.input = r2;
        };
        Te.parse = function(t2, e2) {
          if (3 !== t2.length)
            return e2.error("Expected 2 arguments, but found " + (t2.length - 1) + " instead.");
          var r2 = e2.parse(t2[1], 1, kt), n2 = e2.parse(t2[2], 2, Mt(e2.expectedType || Pt));
          if (!r2 || !n2)
            return null;
          var i2 = n2.type;
          return new Te(i2.itemType, r2, n2);
        }, Te.prototype.evaluate = function(t2) {
          var e2 = this.index.evaluate(t2), r2 = this.input.evaluate(t2);
          if (e2 < 0)
            throw new Xt("Array index out of bounds: " + e2 + " < 0.");
          if (e2 >= r2.length)
            throw new Xt("Array index out of bounds: " + e2 + " > " + (r2.length - 1) + ".");
          if (e2 !== Math.floor(e2))
            throw new Xt("Array index must be an integer, but found " + e2 + " instead.");
          return r2[e2];
        }, Te.prototype.eachChild = function(t2) {
          t2(this.index), t2(this.input);
        }, Te.prototype.possibleOutputs = function() {
          return [void 0];
        }, Te.prototype.serialize = function() {
          return ["at", this.index.serialize(), this.input.serialize()];
        };
        var Fe = function(t2, e2, r2, n2, i2, a2) {
          this.inputType = t2, this.type = e2, this.input = r2, this.cases = n2, this.outputs = i2, this.otherwise = a2;
        };
        Fe.parse = function(t2, e2) {
          if (t2.length < 5)
            return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
          if (t2.length % 2 != 1)
            return e2.error("Expected an even number of arguments.");
          var r2, n2;
          e2.expectedType && "value" !== e2.expectedType.kind && (n2 = e2.expectedType);
          for (var i2 = {}, a2 = [], o2 = 2; o2 < t2.length - 1; o2 += 2) {
            var s2 = t2[o2], u2 = t2[o2 + 1];
            Array.isArray(s2) || (s2 = [s2]);
            var l2 = e2.concat(o2);
            if (0 === s2.length)
              return l2.error("Expected at least one branch label.");
            for (var p2 = 0, c2 = s2; p2 < c2.length; p2 += 1) {
              var h2 = c2[p2];
              if ("number" != typeof h2 && "string" != typeof h2)
                return l2.error("Branch labels must be numbers or strings.");
              if ("number" == typeof h2 && Math.abs(h2) > Number.MAX_SAFE_INTEGER)
                return l2.error("Branch labels must be integers no larger than " + Number.MAX_SAFE_INTEGER + ".");
              if ("number" == typeof h2 && Math.floor(h2) !== h2)
                return l2.error("Numeric branch labels must be integer values.");
              if (r2) {
                if (l2.checkSubtype(r2, Nt(h2)))
                  return null;
              } else
                r2 = Nt(h2);
              if (void 0 !== i2[String(h2)])
                return l2.error("Branch labels must be unique.");
              i2[String(h2)] = a2.length;
            }
            var f2 = e2.parse(u2, o2, n2);
            if (!f2)
              return null;
            n2 = n2 || f2.type, a2.push(f2);
          }
          var y2 = e2.parse(t2[1], 1, Pt);
          if (!y2)
            return null;
          var d2 = e2.parse(t2[t2.length - 1], t2.length - 1, n2);
          return d2 ? "value" !== y2.type.kind && e2.concat(1).checkSubtype(r2, y2.type) ? null : new Fe(r2, n2, y2, i2, a2, d2) : null;
        }, Fe.prototype.evaluate = function(t2) {
          var e2 = this.input.evaluate(t2);
          return (Nt(e2) === this.inputType && this.outputs[this.cases[e2]] || this.otherwise).evaluate(t2);
        }, Fe.prototype.eachChild = function(t2) {
          t2(this.input), this.outputs.forEach(t2), t2(this.otherwise);
        }, Fe.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.outputs.map(function(t3) {
            return t3.possibleOutputs();
          })).concat(this.otherwise.possibleOutputs());
        }, Fe.prototype.serialize = function() {
          for (var t2 = this, e2 = ["match", this.input.serialize()], r2 = [], n2 = {}, i2 = 0, a2 = Object.keys(this.cases).sort(); i2 < a2.length; i2 += 1) {
            var o2 = a2[i2];
            void 0 === (c2 = n2[this.cases[o2]]) ? (n2[this.cases[o2]] = r2.length, r2.push([this.cases[o2], [o2]])) : r2[c2][1].push(o2);
          }
          for (var s2 = function(e3) {
            return "number" === t2.inputType.kind ? Number(e3) : e3;
          }, u2 = 0, l2 = r2; u2 < l2.length; u2 += 1) {
            var p2 = l2[u2], c2 = p2[0], h2 = p2[1];
            1 === h2.length ? e2.push(s2(h2[0])) : e2.push(h2.map(s2)), e2.push(this.outputs[outputIndex$1].serialize());
          }
          return e2.push(this.otherwise.serialize()), e2;
        };
        var Le = function(t2, e2, r2) {
          this.type = t2, this.branches = e2, this.otherwise = r2;
        };
        function Oe(t2, e2) {
          return "==" === t2 || "!=" === t2 ? "boolean" === e2.kind || "string" === e2.kind || "number" === e2.kind || "null" === e2.kind || "value" === e2.kind : "string" === e2.kind || "number" === e2.kind || "value" === e2.kind;
        }
        function De(t2, e2, r2, n2) {
          return 0 === n2.compare(e2, r2);
        }
        function Ue(t2, e2, r2) {
          var n2 = "==" !== t2 && "!=" !== t2;
          return function() {
            function i2(t3, e3, r3) {
              this.type = It, this.lhs = t3, this.rhs = e3, this.collator = r3, this.hasUntypedArgument = "value" === t3.type.kind || "value" === e3.type.kind;
            }
            return i2.parse = function(t3, e3) {
              if (3 !== t3.length && 4 !== t3.length)
                return e3.error("Expected two or three arguments.");
              var r3 = t3[0], a2 = e3.parse(t3[1], 1, Pt);
              if (!a2)
                return null;
              if (!Oe(r3, a2.type))
                return e3.concat(1).error('"' + r3 + `" comparisons are not supported for type '` + Tt(a2.type) + "'.");
              var o2 = e3.parse(t3[2], 2, Pt);
              if (!o2)
                return null;
              if (!Oe(r3, o2.type))
                return e3.concat(2).error('"' + r3 + `" comparisons are not supported for type '` + Tt(o2.type) + "'.");
              if (a2.type.kind !== o2.type.kind && "value" !== a2.type.kind && "value" !== o2.type.kind)
                return e3.error("Cannot compare types '" + Tt(a2.type) + "' and '" + Tt(o2.type) + "'.");
              n2 && ("value" === a2.type.kind && "value" !== o2.type.kind ? a2 = new Ht(o2.type, [a2]) : "value" !== a2.type.kind && "value" === o2.type.kind && (o2 = new Ht(a2.type, [o2])));
              var s2 = null;
              if (4 === t3.length) {
                if ("string" !== a2.type.kind && "string" !== o2.type.kind && "value" !== a2.type.kind && "value" !== o2.type.kind)
                  return e3.error("Cannot use collator to compare non-string types.");
                if (!(s2 = e3.parse(t3[3], 3, Vt)))
                  return null;
              }
              return new i2(a2, o2, s2);
            }, i2.prototype.evaluate = function(i3) {
              var a2 = this.lhs.evaluate(i3), o2 = this.rhs.evaluate(i3);
              if (n2 && this.hasUntypedArgument) {
                var s2 = Nt(a2), u2 = Nt(o2);
                if (s2.kind !== u2.kind || "string" !== s2.kind && "number" !== s2.kind)
                  throw new Xt('Expected arguments for "' + t2 + '" to be (string, string) or (number, number), but found (' + s2.kind + ", " + u2.kind + ") instead.");
              }
              if (this.collator && !n2 && this.hasUntypedArgument) {
                var l2 = Nt(a2), p2 = Nt(o2);
                if ("string" !== l2.kind || "string" !== p2.kind)
                  return e2(i3, a2, o2);
              }
              return this.collator ? r2(i3, a2, o2, this.collator.evaluate(i3)) : e2(i3, a2, o2);
            }, i2.prototype.eachChild = function(t3) {
              t3(this.lhs), t3(this.rhs), this.collator && t3(this.collator);
            }, i2.prototype.possibleOutputs = function() {
              return [true, false];
            }, i2.prototype.serialize = function() {
              var e3 = [t2];
              return this.eachChild(function(t3) {
                e3.push(t3.serialize());
              }), e3;
            }, i2;
          }();
        }
        Le.parse = function(t2, e2) {
          if (t2.length < 4)
            return e2.error("Expected at least 3 arguments, but found only " + (t2.length - 1) + ".");
          if (t2.length % 2 != 0)
            return e2.error("Expected an odd number of arguments.");
          var r2;
          e2.expectedType && "value" !== e2.expectedType.kind && (r2 = e2.expectedType);
          for (var n2 = [], i2 = 1; i2 < t2.length - 1; i2 += 2) {
            var a2 = e2.parse(t2[i2], i2, It);
            if (!a2)
              return null;
            var o2 = e2.parse(t2[i2 + 1], i2 + 1, r2);
            if (!o2)
              return null;
            n2.push([a2, o2]), r2 = r2 || o2.type;
          }
          var s2 = e2.parse(t2[t2.length - 1], t2.length - 1, r2);
          return s2 ? new Le(r2, n2, s2) : null;
        }, Le.prototype.evaluate = function(t2) {
          for (var e2 = 0, r2 = this.branches; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2], i2 = n2[0], a2 = n2[1];
            if (i2.evaluate(t2))
              return a2.evaluate(t2);
          }
          return this.otherwise.evaluate(t2);
        }, Le.prototype.eachChild = function(t2) {
          for (var e2 = 0, r2 = this.branches; e2 < r2.length; e2 += 1) {
            var n2 = r2[e2], i2 = n2[0], a2 = n2[1];
            t2(i2), t2(a2);
          }
          t2(this.otherwise);
        }, Le.prototype.possibleOutputs = function() {
          var t2;
          return (t2 = []).concat.apply(t2, this.branches.map(function(t3) {
            t3[0];
            return t3[1].possibleOutputs();
          })).concat(this.otherwise.possibleOutputs());
        }, Le.prototype.serialize = function() {
          var t2 = ["case"];
          return this.eachChild(function(e2) {
            t2.push(e2.serialize());
          }), t2;
        };
        var je = Ue("==", function(t2, e2, r2) {
          return e2 === r2;
        }, De), Re = Ue("!=", function(t2, e2, r2) {
          return e2 !== r2;
        }, function(t2, e2, r2, n2) {
          return !De(0, e2, r2, n2);
        }), qe = Ue("<", function(t2, e2, r2) {
          return e2 < r2;
        }, function(t2, e2, r2, n2) {
          return n2.compare(e2, r2) < 0;
        }), Ne = Ue(">", function(t2, e2, r2) {
          return e2 > r2;
        }, function(t2, e2, r2, n2) {
          return n2.compare(e2, r2) > 0;
        }), Ke = Ue("<=", function(t2, e2, r2) {
          return e2 <= r2;
        }, function(t2, e2, r2, n2) {
          return n2.compare(e2, r2) <= 0;
        }), Ge = Ue(">=", function(t2, e2, r2) {
          return e2 >= r2;
        }, function(t2, e2, r2, n2) {
          return n2.compare(e2, r2) >= 0;
        }), Xe = function(t2, e2, r2, n2, i2) {
          this.type = zt, this.number = t2, this.locale = e2, this.currency = r2, this.minFractionDigits = n2, this.maxFractionDigits = i2;
        };
        Xe.parse = function(t2, e2) {
          if (3 !== t2.length)
            return e2.error("Expected two arguments.");
          var r2 = e2.parse(t2[1], 1, kt);
          if (!r2)
            return null;
          var n2 = t2[2];
          if ("object" != typeof n2 || Array.isArray(n2))
            return e2.error("NumberFormat options argument must be an object.");
          var i2 = null;
          if (n2.locale && !(i2 = e2.parse(n2.locale, 1, zt)))
            return null;
          var a2 = null;
          if (n2.currency && !(a2 = e2.parse(n2.currency, 1, zt)))
            return null;
          var o2 = null;
          if (n2["min-fraction-digits"] && !(o2 = e2.parse(n2["min-fraction-digits"], 1, kt)))
            return null;
          var s2 = null;
          return n2["max-fraction-digits"] && !(s2 = e2.parse(n2["max-fraction-digits"], 1, kt)) ? null : new Xe(r2, i2, a2, o2, s2);
        }, Xe.prototype.evaluate = function(t2) {
          return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t2) : [], { style: this.currency ? "currency" : "decimal", currency: this.currency ? this.currency.evaluate(t2) : void 0, minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t2) : void 0, maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t2) : void 0 }).format(this.number.evaluate(t2));
        }, Xe.prototype.eachChild = function(t2) {
          t2(this.number), this.locale && t2(this.locale), this.currency && t2(this.currency), this.minFractionDigits && t2(this.minFractionDigits), this.maxFractionDigits && t2(this.maxFractionDigits);
        }, Xe.prototype.possibleOutputs = function() {
          return [void 0];
        }, Xe.prototype.serialize = function() {
          var t2 = {};
          return this.locale && (t2.locale = this.locale.serialize()), this.currency && (t2.currency = this.currency.serialize()), this.minFractionDigits && (t2["min-fraction-digits"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t2["max-fraction-digits"] = this.maxFractionDigits.serialize()), ["number-format", this.number.serialize(), t2];
        };
        var Ze = function(t2) {
          this.type = kt, this.input = t2;
        };
        Ze.parse = function(t2, e2) {
          if (2 !== t2.length)
            return e2.error("Expected 1 argument, but found " + (t2.length - 1) + " instead.");
          var r2 = e2.parse(t2[1], 1);
          return r2 ? "array" !== r2.type.kind && "string" !== r2.type.kind && "value" !== r2.type.kind ? e2.error("Expected argument of type string or array, but found " + Tt(r2.type) + " instead.") : new Ze(r2) : null;
        }, Ze.prototype.evaluate = function(t2) {
          var e2 = this.input.evaluate(t2);
          if ("string" == typeof e2)
            return e2.length;
          if (Array.isArray(e2))
            return e2.length;
          throw new Xt("Expected value to be of type string or array, but found " + Tt(Nt(e2)) + " instead.");
        }, Ze.prototype.eachChild = function(t2) {
          t2(this.input);
        }, Ze.prototype.possibleOutputs = function() {
          return [void 0];
        }, Ze.prototype.serialize = function() {
          var t2 = ["length"];
          return this.eachChild(function(e2) {
            t2.push(e2.serialize());
          }), t2;
        };
        var He = { "==": je, "!=": Re, ">": Ne, "<": qe, ">=": Ge, "<=": Ke, array: Ht, at: Te, boolean: Ht, case: Le, coalesce: Ce, collator: ee, format: Yt, interpolate: Pe, "interpolate-hcl": Pe, "interpolate-lab": Pe, length: Ze, let: Me, literal: Gt, match: Fe, number: Ht, "number-format": Xe, object: Ht, step: ue, string: Ht, "to-boolean": $t, "to-color": $t, "to-number": $t, "to-string": $t, var: ae };
        function Ye(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = e2[2], a2 = e2[3];
          r2 = r2.evaluate(t2), n2 = n2.evaluate(t2), i2 = i2.evaluate(t2);
          var o2 = a2 ? a2.evaluate(t2) : 1, s2 = qt(r2, n2, i2, o2);
          if (s2)
            throw new Xt(s2);
          return new Dt(r2 / 255 * o2, n2 / 255 * o2, i2 / 255 * o2, o2);
        }
        function Je(t2, e2) {
          return t2 in e2;
        }
        function $e(t2, e2) {
          var r2 = e2[t2];
          return void 0 === r2 ? null : r2;
        }
        function We(t2) {
          return { type: t2 };
        }
        function Qe(t2) {
          return { result: "success", value: t2 };
        }
        function tr(t2) {
          return { result: "error", value: t2 };
        }
        function er(t2) {
          return "data-driven" === t2["property-type"] || "cross-faded-data-driven" === t2["property-type"];
        }
        function rr(t2) {
          return !!t2.expression && t2.expression.parameters.indexOf("zoom") > -1;
        }
        function nr(t2) {
          return !!t2.expression && t2.expression.interpolated;
        }
        function ir(t2) {
          return t2 instanceof Number ? "number" : t2 instanceof String ? "string" : t2 instanceof Boolean ? "boolean" : Array.isArray(t2) ? "array" : null === t2 ? "null" : typeof t2;
        }
        function ar(t2) {
          return "object" == typeof t2 && null !== t2 && !Array.isArray(t2);
        }
        function or(t2) {
          return t2;
        }
        function sr(t2, e2, r2) {
          return void 0 !== t2 ? t2 : void 0 !== e2 ? e2 : void 0 !== r2 ? r2 : void 0;
        }
        function ur(t2, e2, r2, n2, i2) {
          return sr(typeof r2 === i2 ? n2[r2] : void 0, t2.default, e2.default);
        }
        function lr(t2, e2, r2) {
          if ("number" !== ir(r2))
            return sr(t2.default, e2.default);
          var n2 = t2.stops.length;
          if (1 === n2)
            return t2.stops[0][1];
          if (r2 <= t2.stops[0][0])
            return t2.stops[0][1];
          if (r2 >= t2.stops[n2 - 1][0])
            return t2.stops[n2 - 1][1];
          var i2 = hr(t2.stops, r2);
          return t2.stops[i2][1];
        }
        function pr(t2, e2, r2) {
          var n2 = void 0 !== t2.base ? t2.base : 1;
          if ("number" !== ir(r2))
            return sr(t2.default, e2.default);
          var i2 = t2.stops.length;
          if (1 === i2)
            return t2.stops[0][1];
          if (r2 <= t2.stops[0][0])
            return t2.stops[0][1];
          if (r2 >= t2.stops[i2 - 1][0])
            return t2.stops[i2 - 1][1];
          var a2 = hr(t2.stops, r2), o2 = function(t3, e3, r3, n3) {
            var i3 = n3 - r3, a3 = t3 - r3;
            return 0 === i3 ? 0 : 1 === e3 ? a3 / i3 : (Math.pow(e3, a3) - 1) / (Math.pow(e3, i3) - 1);
          }(r2, n2, t2.stops[a2][0], t2.stops[a2 + 1][0]), s2 = t2.stops[a2][1], u2 = t2.stops[a2 + 1][1], l2 = pe[e2.type] || or;
          if (t2.colorSpace && "rgb" !== t2.colorSpace) {
            var p2 = Ee[t2.colorSpace];
            l2 = function(t3, e3) {
              return p2.reverse(p2.interpolate(p2.forward(t3), p2.forward(e3), o2));
            };
          }
          return "function" == typeof s2.evaluate ? { evaluate: function() {
            for (var t3 = [], e3 = arguments.length; e3--; )
              t3[e3] = arguments[e3];
            var r3 = s2.evaluate.apply(void 0, t3), n3 = u2.evaluate.apply(void 0, t3);
            if (void 0 !== r3 && void 0 !== n3)
              return l2(r3, n3, o2);
          } } : l2(s2, u2, o2);
        }
        function cr(t2, e2, r2) {
          return "color" === e2.type ? r2 = Dt.parse(r2) : "formatted" === e2.type ? r2 = Rt.fromString(r2.toString()) : ir(r2) === e2.type || "enum" === e2.type && e2.values[r2] || (r2 = void 0), sr(r2, t2.default, e2.default);
        }
        function hr(t2, e2) {
          for (var r2, n2, i2 = 0, a2 = t2.length - 1, o2 = 0; i2 <= a2; ) {
            if (r2 = t2[o2 = Math.floor((i2 + a2) / 2)][0], n2 = t2[o2 + 1][0], e2 === r2 || e2 > r2 && e2 < n2)
              return o2;
            r2 < e2 ? i2 = o2 + 1 : r2 > e2 && (a2 = o2 - 1);
          }
          return Math.max(o2 - 1, 0);
        }
        te.register(He, { error: [{ kind: "error" }, [zt], function(t2, e2) {
          var r2 = e2[0];
          throw new Xt(r2.evaluate(t2));
        }], typeof: [zt, [Pt], function(t2, e2) {
          return Tt(Nt(e2[0].evaluate(t2)));
        }], "to-rgba": [Mt(kt, 4), [Bt], function(t2, e2) {
          return e2[0].evaluate(t2).toArray();
        }], rgb: [Bt, [kt, kt, kt], Ye], rgba: [Bt, [kt, kt, kt, kt], Ye], has: { type: It, overloads: [[[zt], function(t2, e2) {
          return Je(e2[0].evaluate(t2), t2.properties());
        }], [[zt, Et], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return Je(r2.evaluate(t2), n2.evaluate(t2));
        }]] }, get: { type: Pt, overloads: [[[zt], function(t2, e2) {
          return $e(e2[0].evaluate(t2), t2.properties());
        }], [[zt, Et], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return $e(r2.evaluate(t2), n2.evaluate(t2));
        }]] }, "feature-state": [Pt, [zt], function(t2, e2) {
          return $e(e2[0].evaluate(t2), t2.featureState || {});
        }], properties: [Et, [], function(t2) {
          return t2.properties();
        }], "geometry-type": [zt, [], function(t2) {
          return t2.geometryType();
        }], id: [Pt, [], function(t2) {
          return t2.id();
        }], zoom: [kt, [], function(t2) {
          return t2.globals.zoom;
        }], "heatmap-density": [kt, [], function(t2) {
          return t2.globals.heatmapDensity || 0;
        }], "line-progress": [kt, [], function(t2) {
          return t2.globals.lineProgress || 0;
        }], accumulated: [Pt, [], function(t2) {
          return void 0 === t2.globals.accumulated ? null : t2.globals.accumulated;
        }], "+": [kt, We(kt), function(t2, e2) {
          for (var r2 = 0, n2 = 0, i2 = e2; n2 < i2.length; n2 += 1) {
            r2 += i2[n2].evaluate(t2);
          }
          return r2;
        }], "*": [kt, We(kt), function(t2, e2) {
          for (var r2 = 1, n2 = 0, i2 = e2; n2 < i2.length; n2 += 1) {
            r2 *= i2[n2].evaluate(t2);
          }
          return r2;
        }], "-": { type: kt, overloads: [[[kt, kt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return r2.evaluate(t2) - n2.evaluate(t2);
        }], [[kt], function(t2, e2) {
          return -e2[0].evaluate(t2);
        }]] }, "/": [kt, [kt, kt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return r2.evaluate(t2) / n2.evaluate(t2);
        }], "%": [kt, [kt, kt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return r2.evaluate(t2) % n2.evaluate(t2);
        }], ln2: [kt, [], function() {
          return Math.LN2;
        }], pi: [kt, [], function() {
          return Math.PI;
        }], e: [kt, [], function() {
          return Math.E;
        }], "^": [kt, [kt, kt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return Math.pow(r2.evaluate(t2), n2.evaluate(t2));
        }], sqrt: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.sqrt(r2.evaluate(t2));
        }], log10: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.log(r2.evaluate(t2)) / Math.LN10;
        }], ln: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.log(r2.evaluate(t2));
        }], log2: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.log(r2.evaluate(t2)) / Math.LN2;
        }], sin: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.sin(r2.evaluate(t2));
        }], cos: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.cos(r2.evaluate(t2));
        }], tan: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.tan(r2.evaluate(t2));
        }], asin: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.asin(r2.evaluate(t2));
        }], acos: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.acos(r2.evaluate(t2));
        }], atan: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.atan(r2.evaluate(t2));
        }], min: [kt, We(kt), function(t2, e2) {
          return Math.min.apply(Math, e2.map(function(e3) {
            return e3.evaluate(t2);
          }));
        }], max: [kt, We(kt), function(t2, e2) {
          return Math.max.apply(Math, e2.map(function(e3) {
            return e3.evaluate(t2);
          }));
        }], abs: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.abs(r2.evaluate(t2));
        }], round: [kt, [kt], function(t2, e2) {
          var r2 = e2[0].evaluate(t2);
          return r2 < 0 ? -Math.round(-r2) : Math.round(r2);
        }], floor: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.floor(r2.evaluate(t2));
        }], ceil: [kt, [kt], function(t2, e2) {
          var r2 = e2[0];
          return Math.ceil(r2.evaluate(t2));
        }], "filter-==": [It, [zt, Pt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return t2.properties()[r2.value] === n2.value;
        }], "filter-id-==": [It, [Pt], function(t2, e2) {
          var r2 = e2[0];
          return t2.id() === r2.value;
        }], "filter-type-==": [It, [zt], function(t2, e2) {
          var r2 = e2[0];
          return t2.geometryType() === r2.value;
        }], "filter-<": [It, [zt, Pt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = t2.properties()[r2.value], a2 = n2.value;
          return typeof i2 == typeof a2 && i2 < a2;
        }], "filter-id-<": [It, [Pt], function(t2, e2) {
          var r2 = e2[0], n2 = t2.id(), i2 = r2.value;
          return typeof n2 == typeof i2 && n2 < i2;
        }], "filter->": [It, [zt, Pt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = t2.properties()[r2.value], a2 = n2.value;
          return typeof i2 == typeof a2 && i2 > a2;
        }], "filter-id->": [It, [Pt], function(t2, e2) {
          var r2 = e2[0], n2 = t2.id(), i2 = r2.value;
          return typeof n2 == typeof i2 && n2 > i2;
        }], "filter-<=": [It, [zt, Pt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = t2.properties()[r2.value], a2 = n2.value;
          return typeof i2 == typeof a2 && i2 <= a2;
        }], "filter-id-<=": [It, [Pt], function(t2, e2) {
          var r2 = e2[0], n2 = t2.id(), i2 = r2.value;
          return typeof n2 == typeof i2 && n2 <= i2;
        }], "filter->=": [It, [zt, Pt], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = t2.properties()[r2.value], a2 = n2.value;
          return typeof i2 == typeof a2 && i2 >= a2;
        }], "filter-id->=": [It, [Pt], function(t2, e2) {
          var r2 = e2[0], n2 = t2.id(), i2 = r2.value;
          return typeof n2 == typeof i2 && n2 >= i2;
        }], "filter-has": [It, [Pt], function(t2, e2) {
          return e2[0].value in t2.properties();
        }], "filter-has-id": [It, [], function(t2) {
          return null !== t2.id();
        }], "filter-type-in": [It, [Mt(zt)], function(t2, e2) {
          return e2[0].value.indexOf(t2.geometryType()) >= 0;
        }], "filter-id-in": [It, [Mt(Pt)], function(t2, e2) {
          return e2[0].value.indexOf(t2.id()) >= 0;
        }], "filter-in-small": [It, [zt, Mt(Pt)], function(t2, e2) {
          var r2 = e2[0];
          return e2[1].value.indexOf(t2.properties()[r2.value]) >= 0;
        }], "filter-in-large": [It, [zt, Mt(Pt)], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return function(t3, e3, r3, n3) {
            for (; r3 <= n3; ) {
              var i2 = r3 + n3 >> 1;
              if (e3[i2] === t3)
                return true;
              e3[i2] > t3 ? n3 = i2 - 1 : r3 = i2 + 1;
            }
            return false;
          }(t2.properties()[r2.value], n2.value, 0, n2.value.length - 1);
        }], all: { type: It, overloads: [[[It, It], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return r2.evaluate(t2) && n2.evaluate(t2);
        }], [We(It), function(t2, e2) {
          for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1) {
            if (!n2[r2].evaluate(t2))
              return false;
          }
          return true;
        }]] }, any: { type: It, overloads: [[[It, It], function(t2, e2) {
          var r2 = e2[0], n2 = e2[1];
          return r2.evaluate(t2) || n2.evaluate(t2);
        }], [We(It), function(t2, e2) {
          for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1) {
            if (n2[r2].evaluate(t2))
              return true;
          }
          return false;
        }]] }, "!": [It, [It], function(t2, e2) {
          return !e2[0].evaluate(t2);
        }], "is-supported-script": [It, [zt], function(t2, e2) {
          var r2 = e2[0], n2 = t2.globals && t2.globals.isSupportedScript;
          return !n2 || n2(r2.evaluate(t2));
        }], upcase: [zt, [zt], function(t2, e2) {
          return e2[0].evaluate(t2).toUpperCase();
        }], downcase: [zt, [zt], function(t2, e2) {
          return e2[0].evaluate(t2).toLowerCase();
        }], concat: [zt, We(Pt), function(t2, e2) {
          return e2.map(function(e3) {
            return Kt(e3.evaluate(t2));
          }).join("");
        }], "resolved-locale": [zt, [Vt], function(t2, e2) {
          return e2[0].evaluate(t2).resolvedLocale();
        }] });
        var fr = function(t2, e2) {
          var r2;
          this.expression = t2, this._warningHistory = {}, this._evaluator = new Qt(), this._defaultValue = e2 ? "color" === (r2 = e2).type && ar(r2.default) ? new Dt(0, 0, 0, 0) : "color" === r2.type ? Dt.parse(r2.default) || null : void 0 === r2.default ? null : r2.default : null, this._enumValues = e2 && "enum" === e2.type ? e2.values : null;
        };
        function yr(t2) {
          return Array.isArray(t2) && t2.length > 0 && "string" == typeof t2[0] && t2[0] in He;
        }
        function dr(t2, e2) {
          var r2 = new oe(He, [], e2 ? function(t3) {
            var e3 = { color: Bt, string: zt, number: kt, enum: zt, boolean: It, formatted: Ct };
            if ("array" === t3.type)
              return Mt(e3[t3.value] || Pt, t3.length);
            return e3[t3.type];
          }(e2) : void 0), n2 = r2.parse(t2, void 0, void 0, void 0, e2 && "string" === e2.type ? { typeAnnotation: "coerce" } : void 0);
          return n2 ? Qe(new fr(n2, e2)) : tr(r2.errors);
        }
        fr.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2) {
          return this._evaluator.globals = t2, this._evaluator.feature = e2, this._evaluator.featureState = r2, this.expression.evaluate(this._evaluator);
        }, fr.prototype.evaluate = function(t2, e2, r2) {
          this._evaluator.globals = t2, this._evaluator.feature = e2 || null, this._evaluator.featureState = r2 || null;
          try {
            var n2 = this.expression.evaluate(this._evaluator);
            if (null == n2)
              return this._defaultValue;
            if (this._enumValues && !(n2 in this._enumValues))
              throw new Xt("Expected value to be one of " + Object.keys(this._enumValues).map(function(t3) {
                return JSON.stringify(t3);
              }).join(", ") + ", but found " + JSON.stringify(n2) + " instead.");
            return n2;
          } catch (t3) {
            return this._warningHistory[t3.message] || (this._warningHistory[t3.message] = true, "undefined" != typeof console && console.warn(t3.message)), this._defaultValue;
          }
        };
        var mr = function(t2, e2) {
          this.kind = t2, this._styleExpression = e2, this.isStateDependent = "constant" !== t2 && !ne(e2.expression);
        };
        mr.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2) {
          return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2);
        }, mr.prototype.evaluate = function(t2, e2, r2) {
          return this._styleExpression.evaluate(t2, e2, r2);
        };
        var vr = function(t2, e2, r2) {
          this.kind = t2, this.zoomStops = r2.labels, this._styleExpression = e2, this.isStateDependent = "camera" !== t2 && !ne(e2.expression), r2 instanceof Pe && (this._interpolationType = r2.interpolation);
        };
        function gr(t2, e2) {
          if ("error" === (t2 = dr(t2, e2)).result)
            return t2;
          var r2 = t2.value.expression, n2 = re(r2);
          if (!n2 && !er(e2))
            return tr([new wt("", "data expressions not supported")]);
          var i2 = ie(r2, ["zoom"]);
          if (!i2 && !rr(e2))
            return tr([new wt("", "zoom expressions not supported")]);
          var a2 = function t3(e3) {
            var r3 = null;
            if (e3 instanceof Me)
              r3 = t3(e3.result);
            else if (e3 instanceof Ce)
              for (var n3 = 0, i3 = e3.args; n3 < i3.length; n3 += 1) {
                var a3 = i3[n3];
                if (r3 = t3(a3))
                  break;
              }
            else
              (e3 instanceof ue || e3 instanceof Pe) && e3.input instanceof te && "zoom" === e3.input.name && (r3 = e3);
            if (r3 instanceof wt)
              return r3;
            e3.eachChild(function(e4) {
              var n4 = t3(e4);
              n4 instanceof wt ? r3 = n4 : !r3 && n4 ? r3 = new wt("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : r3 && n4 && r3 !== n4 && (r3 = new wt("", 'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));
            });
            return r3;
          }(r2);
          return a2 || i2 ? a2 instanceof wt ? tr([a2]) : a2 instanceof Pe && !nr(e2) ? tr([new wt("", '"interpolate" expressions cannot be used with this property')]) : Qe(a2 ? new vr(n2 ? "camera" : "composite", t2.value, a2) : new mr(n2 ? "constant" : "source", t2.value)) : tr([new wt("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);
        }
        vr.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2) {
          return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2);
        }, vr.prototype.evaluate = function(t2, e2, r2) {
          return this._styleExpression.evaluate(t2, e2, r2);
        }, vr.prototype.interpolationFactor = function(t2, e2, r2) {
          return this._interpolationType ? Pe.interpolationFactor(this._interpolationType, t2, e2, r2) : 0;
        };
        var xr = function(t2, e2) {
          this._parameters = t2, this._specification = e2, xt(this, function t3(e3, r2) {
            var n2, i2, a2, o2 = "color" === r2.type, s2 = e3.stops && "object" == typeof e3.stops[0][0], u2 = s2 || void 0 !== e3.property, l2 = s2 || !u2, p2 = e3.type || (nr(r2) ? "exponential" : "interval");
            if (o2 && ((e3 = xt({}, e3)).stops && (e3.stops = e3.stops.map(function(t4) {
              return [t4[0], Dt.parse(t4[1])];
            })), e3.default ? e3.default = Dt.parse(e3.default) : e3.default = Dt.parse(r2.default)), e3.colorSpace && "rgb" !== e3.colorSpace && !Ee[e3.colorSpace])
              throw new Error("Unknown color space: " + e3.colorSpace);
            if ("exponential" === p2)
              n2 = pr;
            else if ("interval" === p2)
              n2 = lr;
            else if ("categorical" === p2) {
              n2 = ur, i2 = /* @__PURE__ */ Object.create(null);
              for (var c2 = 0, h2 = e3.stops; c2 < h2.length; c2 += 1) {
                var f2 = h2[c2];
                i2[f2[0]] = f2[1];
              }
              a2 = typeof e3.stops[0][0];
            } else {
              if ("identity" !== p2)
                throw new Error('Unknown function type "' + p2 + '"');
              n2 = cr;
            }
            if (s2) {
              for (var y2 = {}, d2 = [], m2 = 0; m2 < e3.stops.length; m2++) {
                var v2 = e3.stops[m2], g2 = v2[0].zoom;
                void 0 === y2[g2] && (y2[g2] = { zoom: g2, type: e3.type, property: e3.property, default: e3.default, stops: [] }, d2.push(g2)), y2[g2].stops.push([v2[0].value, v2[1]]);
              }
              for (var x2 = [], b2 = 0, _2 = d2; b2 < _2.length; b2 += 1) {
                var w2 = _2[b2];
                x2.push([y2[w2].zoom, t3(y2[w2], r2)]);
              }
              return { kind: "composite", interpolationFactor: Pe.interpolationFactor.bind(void 0, { name: "linear" }), zoomStops: x2.map(function(t4) {
                return t4[0];
              }), evaluate: function(t4, n3) {
                var i3 = t4.zoom;
                return pr({ stops: x2, base: e3.base }, r2, i3).evaluate(i3, n3);
              } };
            }
            return l2 ? { kind: "camera", interpolationFactor: "exponential" === p2 ? Pe.interpolationFactor.bind(void 0, { name: "exponential", base: void 0 !== e3.base ? e3.base : 1 }) : function() {
              return 0;
            }, zoomStops: e3.stops.map(function(t4) {
              return t4[0];
            }), evaluate: function(t4) {
              var o3 = t4.zoom;
              return n2(e3, r2, o3, i2, a2);
            } } : { kind: "source", evaluate: function(t4, o3) {
              var s3 = o3 && o3.properties ? o3.properties[e3.property] : void 0;
              return void 0 === s3 ? sr(e3.default, r2.default) : n2(e3, r2, s3, i2, a2);
            } };
          }(this._parameters, this._specification));
        };
        function br(t2, e2) {
          if (ar(t2))
            return new xr(t2, e2);
          if (yr(t2)) {
            var r2 = gr(t2, e2);
            if ("error" === r2.result)
              throw new Error(r2.value.map(function(t3) {
                return t3.key + ": " + t3.message;
              }).join(", "));
            return r2.value;
          }
          var n2 = t2;
          return "string" == typeof t2 && "color" === e2.type && (n2 = Dt.parse(t2)), { kind: "constant", evaluate: function() {
            return n2;
          } };
        }
        function _r(t2) {
          var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec || {}, i2 = t2.objectElementValidators || {}, a2 = t2.style, o2 = t2.styleSpec, s2 = [], u2 = ir(r2);
          if ("object" !== u2)
            return [new vt(e2, r2, "object expected, " + u2 + " found")];
          for (var l2 in r2) {
            var p2 = l2.split(".")[0], c2 = n2[p2] || n2["*"], h2 = void 0;
            if (i2[p2])
              h2 = i2[p2];
            else if (n2[p2])
              h2 = Gr;
            else if (i2["*"])
              h2 = i2["*"];
            else {
              if (!n2["*"]) {
                s2.push(new vt(e2, r2[l2], 'unknown property "' + l2 + '"'));
                continue;
              }
              h2 = Gr;
            }
            s2 = s2.concat(h2({ key: (e2 ? e2 + "." : e2) + l2, value: r2[l2], valueSpec: c2, style: a2, styleSpec: o2, object: r2, objectKey: l2 }, r2));
          }
          for (var f2 in n2)
            i2[f2] || n2[f2].required && void 0 === n2[f2].default && void 0 === r2[f2] && s2.push(new vt(e2, r2, 'missing required property "' + f2 + '"'));
          return s2;
        }
        function wr(t2) {
          var e2 = t2.value, r2 = t2.valueSpec, n2 = t2.style, i2 = t2.styleSpec, a2 = t2.key, o2 = t2.arrayElementValidator || Gr;
          if ("array" !== ir(e2))
            return [new vt(a2, e2, "array expected, " + ir(e2) + " found")];
          if (r2.length && e2.length !== r2.length)
            return [new vt(a2, e2, "array length " + r2.length + " expected, length " + e2.length + " found")];
          if (r2["min-length"] && e2.length < r2["min-length"])
            return [new vt(a2, e2, "array length at least " + r2["min-length"] + " expected, length " + e2.length + " found")];
          var s2 = { type: r2.value };
          i2.$version < 7 && (s2.function = r2.function), "object" === ir(r2.value) && (s2 = r2.value);
          for (var u2 = [], l2 = 0; l2 < e2.length; l2++)
            u2 = u2.concat(o2({ array: e2, arrayIndex: l2, value: e2[l2], valueSpec: s2, style: n2, styleSpec: i2, key: a2 + "[" + l2 + "]" }));
          return u2;
        }
        function Ar(t2) {
          var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec, i2 = ir(r2);
          return "number" !== i2 ? [new vt(e2, r2, "number expected, " + i2 + " found")] : "minimum" in n2 && r2 < n2.minimum ? [new vt(e2, r2, r2 + " is less than the minimum value " + n2.minimum)] : "maximum" in n2 && r2 > n2.maximum ? [new vt(e2, r2, r2 + " is greater than the maximum value " + n2.maximum)] : [];
        }
        function Sr(t2) {
          var e2, r2, n2, i2 = t2.valueSpec, a2 = bt(t2.value.type), o2 = {}, s2 = "categorical" !== a2 && void 0 === t2.value.property, u2 = !s2, l2 = "array" === ir(t2.value.stops) && "array" === ir(t2.value.stops[0]) && "object" === ir(t2.value.stops[0][0]), p2 = _r({ key: t2.key, value: t2.value, valueSpec: t2.styleSpec.function, style: t2.style, styleSpec: t2.styleSpec, objectElementValidators: { stops: function(t3) {
            if ("identity" === a2)
              return [new vt(t3.key, t3.value, 'identity function may not have a "stops" property')];
            var e3 = [], r3 = t3.value;
            e3 = e3.concat(wr({ key: t3.key, value: r3, valueSpec: t3.valueSpec, style: t3.style, styleSpec: t3.styleSpec, arrayElementValidator: c2 })), "array" === ir(r3) && 0 === r3.length && e3.push(new vt(t3.key, r3, "array must have at least one stop"));
            return e3;
          }, default: function(t3) {
            return Gr({ key: t3.key, value: t3.value, valueSpec: i2, style: t3.style, styleSpec: t3.styleSpec });
          } } });
          return "identity" === a2 && s2 && p2.push(new vt(t2.key, t2.value, 'missing required property "property"')), "identity" === a2 || t2.value.stops || p2.push(new vt(t2.key, t2.value, 'missing required property "stops"')), "exponential" === a2 && t2.valueSpec.expression && !nr(t2.valueSpec) && p2.push(new vt(t2.key, t2.value, "exponential functions not supported")), t2.styleSpec.$version >= 8 && (u2 && !er(t2.valueSpec) ? p2.push(new vt(t2.key, t2.value, "property functions not supported")) : s2 && !rr(t2.valueSpec) && p2.push(new vt(t2.key, t2.value, "zoom functions not supported"))), "categorical" !== a2 && !l2 || void 0 !== t2.value.property || p2.push(new vt(t2.key, t2.value, '"property" property is required')), p2;
          function c2(t3) {
            var e3 = [], a3 = t3.value, s3 = t3.key;
            if ("array" !== ir(a3))
              return [new vt(s3, a3, "array expected, " + ir(a3) + " found")];
            if (2 !== a3.length)
              return [new vt(s3, a3, "array length 2 expected, length " + a3.length + " found")];
            if (l2) {
              if ("object" !== ir(a3[0]))
                return [new vt(s3, a3, "object expected, " + ir(a3[0]) + " found")];
              if (void 0 === a3[0].zoom)
                return [new vt(s3, a3, "object stop key must have zoom")];
              if (void 0 === a3[0].value)
                return [new vt(s3, a3, "object stop key must have value")];
              if (n2 && n2 > bt(a3[0].zoom))
                return [new vt(s3, a3[0].zoom, "stop zoom values must appear in ascending order")];
              bt(a3[0].zoom) !== n2 && (n2 = bt(a3[0].zoom), r2 = void 0, o2 = {}), e3 = e3.concat(_r({ key: s3 + "[0]", value: a3[0], valueSpec: { zoom: {} }, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { zoom: Ar, value: h2 } }));
            } else
              e3 = e3.concat(h2({ key: s3 + "[0]", value: a3[0], valueSpec: {}, style: t3.style, styleSpec: t3.styleSpec }, a3));
            return yr(_t(a3[1])) ? e3.concat([new vt(s3 + "[1]", a3[1], "expressions are not allowed in function stops.")]) : e3.concat(Gr({ key: s3 + "[1]", value: a3[1], valueSpec: i2, style: t3.style, styleSpec: t3.styleSpec }));
          }
          function h2(t3, n3) {
            var s3 = ir(t3.value), u3 = bt(t3.value), l3 = null !== t3.value ? t3.value : n3;
            if (e2) {
              if (s3 !== e2)
                return [new vt(t3.key, l3, s3 + " stop domain type must match previous stop domain type " + e2)];
            } else
              e2 = s3;
            if ("number" !== s3 && "string" !== s3 && "boolean" !== s3)
              return [new vt(t3.key, l3, "stop domain value must be a number, string, or boolean")];
            if ("number" !== s3 && "categorical" !== a2) {
              var p3 = "number expected, " + s3 + " found";
              return er(i2) && void 0 === a2 && (p3 += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'), [new vt(t3.key, l3, p3)];
            }
            return "categorical" !== a2 || "number" !== s3 || isFinite(u3) && Math.floor(u3) === u3 ? "categorical" !== a2 && "number" === s3 && void 0 !== r2 && u3 < r2 ? [new vt(t3.key, l3, "stop domain values must appear in ascending order")] : (r2 = u3, "categorical" === a2 && u3 in o2 ? [new vt(t3.key, l3, "stop domain values must be unique")] : (o2[u3] = true, [])) : [new vt(t3.key, l3, "integer expected, found " + u3)];
          }
        }
        function kr(t2) {
          var e2 = ("property" === t2.expressionContext ? gr : dr)(_t(t2.value), t2.valueSpec);
          if ("error" === e2.result)
            return e2.value.map(function(e3) {
              return new vt("" + t2.key + e3.key, t2.value, e3.message);
            });
          var r2 = e2.value.expression || e2.value._styleExpression.expression;
          if ("property" === t2.expressionContext && "text-font" === t2.propertyKey && -1 !== r2.possibleOutputs().indexOf(void 0))
            return [new vt(t2.key, t2.value, 'Invalid data expression for "' + t2.propertyKey + '". Output values must be contained as literals within the expression.')];
          if ("property" === t2.expressionContext && "layout" === t2.propertyType && !ne(r2))
            return [new vt(t2.key, t2.value, '"feature-state" data expressions are not supported with layout properties.')];
          if ("filter" === t2.expressionContext && !ne(r2))
            return [new vt(t2.key, t2.value, '"feature-state" data expressions are not supported with filters.')];
          if (t2.expressionContext && 0 === t2.expressionContext.indexOf("cluster")) {
            if (!ie(r2, ["zoom", "feature-state"]))
              return [new vt(t2.key, t2.value, '"zoom" and "feature-state" expressions are not supported with cluster properties.')];
            if ("cluster-initial" === t2.expressionContext && !re(r2))
              return [new vt(t2.key, t2.value, "Feature data expressions are not supported with initial expression part of cluster properties.")];
          }
          return [];
        }
        function zr(t2) {
          var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec, i2 = [];
          return Array.isArray(n2.values) ? -1 === n2.values.indexOf(bt(r2)) && i2.push(new vt(e2, r2, "expected one of [" + n2.values.join(", ") + "], " + JSON.stringify(r2) + " found")) : -1 === Object.keys(n2.values).indexOf(bt(r2)) && i2.push(new vt(e2, r2, "expected one of [" + Object.keys(n2.values).join(", ") + "], " + JSON.stringify(r2) + " found")), i2;
        }
        function Ir(t2) {
          if (true === t2 || false === t2)
            return true;
          if (!Array.isArray(t2) || 0 === t2.length)
            return false;
          switch (t2[0]) {
            case "has":
              return t2.length >= 2 && "$id" !== t2[1] && "$type" !== t2[1];
            case "in":
            case "!in":
            case "!has":
            case "none":
              return false;
            case "==":
            case "!=":
            case ">":
            case ">=":
            case "<":
            case "<=":
              return 3 !== t2.length || Array.isArray(t2[1]) || Array.isArray(t2[2]);
            case "any":
            case "all":
              for (var e2 = 0, r2 = t2.slice(1); e2 < r2.length; e2 += 1) {
                var n2 = r2[e2];
                if (!Ir(n2) && "boolean" != typeof n2)
                  return false;
              }
              return true;
            default:
              return true;
          }
        }
        xr.deserialize = function(t2) {
          return new xr(t2._parameters, t2._specification);
        }, xr.serialize = function(t2) {
          return { _parameters: t2._parameters, _specification: t2._specification };
        };
        var Br = { type: "boolean", default: false, transition: false, "property-type": "data-driven", expression: { interpolated: false, parameters: ["zoom", "feature"] } };
        function Er(t2) {
          if (null == t2)
            return function() {
              return true;
            };
          Ir(t2) || (t2 = Vr(t2));
          var e2 = dr(t2, Br);
          if ("error" === e2.result)
            throw new Error(e2.value.map(function(t3) {
              return t3.key + ": " + t3.message;
            }).join(", "));
          return function(t3, r2) {
            return e2.value.evaluate(t3, r2);
          };
        }
        function Pr(t2, e2) {
          return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
        }
        function Vr(t2) {
          if (!t2)
            return true;
          var e2, r2 = t2[0];
          return t2.length <= 1 ? "any" !== r2 : "==" === r2 ? Cr(t2[1], t2[2], "==") : "!=" === r2 ? Fr(Cr(t2[1], t2[2], "==")) : "<" === r2 || ">" === r2 || "<=" === r2 || ">=" === r2 ? Cr(t2[1], t2[2], r2) : "any" === r2 ? (e2 = t2.slice(1), ["any"].concat(e2.map(Vr))) : "all" === r2 ? ["all"].concat(t2.slice(1).map(Vr)) : "none" === r2 ? ["all"].concat(t2.slice(1).map(Vr).map(Fr)) : "in" === r2 ? Mr(t2[1], t2.slice(2)) : "!in" === r2 ? Fr(Mr(t2[1], t2.slice(2))) : "has" === r2 ? Tr(t2[1]) : "!has" !== r2 || Fr(Tr(t2[1]));
        }
        function Cr(t2, e2, r2) {
          switch (t2) {
            case "$type":
              return ["filter-type-" + r2, e2];
            case "$id":
              return ["filter-id-" + r2, e2];
            default:
              return ["filter-" + r2, t2, e2];
          }
        }
        function Mr(t2, e2) {
          if (0 === e2.length)
            return false;
          switch (t2) {
            case "$type":
              return ["filter-type-in", ["literal", e2]];
            case "$id":
              return ["filter-id-in", ["literal", e2]];
            default:
              return e2.length > 200 && !e2.some(function(t3) {
                return typeof t3 != typeof e2[0];
              }) ? ["filter-in-large", t2, ["literal", e2.sort(Pr)]] : ["filter-in-small", t2, ["literal", e2]];
          }
        }
        function Tr(t2) {
          switch (t2) {
            case "$type":
              return true;
            case "$id":
              return ["filter-has-id"];
            default:
              return ["filter-has", t2];
          }
        }
        function Fr(t2) {
          return ["!", t2];
        }
        function Lr(t2) {
          return Ir(_t(t2.value)) ? kr(xt({}, t2, { expressionContext: "filter", valueSpec: { value: "boolean" } })) : function t3(e2) {
            var r2 = e2.value;
            var n2 = e2.key;
            if ("array" !== ir(r2))
              return [new vt(n2, r2, "array expected, " + ir(r2) + " found")];
            var i2 = e2.styleSpec;
            var a2;
            var o2 = [];
            if (r2.length < 1)
              return [new vt(n2, r2, "filter array must have at least 1 element")];
            o2 = o2.concat(zr({ key: n2 + "[0]", value: r2[0], valueSpec: i2.filter_operator, style: e2.style, styleSpec: e2.styleSpec }));
            switch (bt(r2[0])) {
              case "<":
              case "<=":
              case ">":
              case ">=":
                r2.length >= 2 && "$type" === bt(r2[1]) && o2.push(new vt(n2, r2, '"$type" cannot be use with operator "' + r2[0] + '"'));
              case "==":
              case "!=":
                3 !== r2.length && o2.push(new vt(n2, r2, 'filter array for operator "' + r2[0] + '" must have 3 elements'));
              case "in":
              case "!in":
                r2.length >= 2 && "string" !== (a2 = ir(r2[1])) && o2.push(new vt(n2 + "[1]", r2[1], "string expected, " + a2 + " found"));
                for (var s2 = 2; s2 < r2.length; s2++)
                  a2 = ir(r2[s2]), "$type" === bt(r2[1]) ? o2 = o2.concat(zr({ key: n2 + "[" + s2 + "]", value: r2[s2], valueSpec: i2.geometry_type, style: e2.style, styleSpec: e2.styleSpec })) : "string" !== a2 && "number" !== a2 && "boolean" !== a2 && o2.push(new vt(n2 + "[" + s2 + "]", r2[s2], "string, number, or boolean expected, " + a2 + " found"));
                break;
              case "any":
              case "all":
              case "none":
                for (var u2 = 1; u2 < r2.length; u2++)
                  o2 = o2.concat(t3({ key: n2 + "[" + u2 + "]", value: r2[u2], style: e2.style, styleSpec: e2.styleSpec }));
                break;
              case "has":
              case "!has":
                a2 = ir(r2[1]), 2 !== r2.length ? o2.push(new vt(n2, r2, 'filter array for "' + r2[0] + '" operator must have 2 elements')) : "string" !== a2 && o2.push(new vt(n2 + "[1]", r2[1], "string expected, " + a2 + " found"));
            }
            return o2;
          }(t2);
        }
        function Or(t2, e2) {
          var r2 = t2.key, n2 = t2.style, i2 = t2.styleSpec, a2 = t2.value, o2 = t2.objectKey, s2 = i2[e2 + "_" + t2.layerType];
          if (!s2)
            return [];
          var u2 = o2.match(/^(.*)-transition$/);
          if ("paint" === e2 && u2 && s2[u2[1]] && s2[u2[1]].transition)
            return Gr({ key: r2, value: a2, valueSpec: i2.transition, style: n2, styleSpec: i2 });
          var l2, p2 = t2.valueSpec || s2[o2];
          if (!p2)
            return [new vt(r2, a2, 'unknown property "' + o2 + '"')];
          if ("string" === ir(a2) && er(p2) && !p2.tokens && (l2 = /^{([^}]+)}$/.exec(a2)))
            return [new vt(r2, a2, '"' + o2 + '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' + JSON.stringify(l2[1]) + " }`.")];
          var c2 = [];
          return "symbol" === t2.layerType && ("text-field" === o2 && n2 && !n2.glyphs && c2.push(new vt(r2, a2, 'use of "text-field" requires a style "glyphs" property')), "text-font" === o2 && ar(_t(a2)) && "identity" === bt(a2.type) && c2.push(new vt(r2, a2, '"text-font" does not support identity functions'))), c2.concat(Gr({ key: t2.key, value: a2, valueSpec: p2, style: n2, styleSpec: i2, expressionContext: "property", propertyType: e2, propertyKey: o2 }));
        }
        function Dr(t2) {
          return Or(t2, "paint");
        }
        function Ur(t2) {
          return Or(t2, "layout");
        }
        function jr(t2) {
          var e2 = [], r2 = t2.value, n2 = t2.key, i2 = t2.style, a2 = t2.styleSpec;
          r2.type || r2.ref || e2.push(new vt(n2, r2, 'either "type" or "ref" is required'));
          var o2, s2 = bt(r2.type), u2 = bt(r2.ref);
          if (r2.id)
            for (var l2 = bt(r2.id), p2 = 0; p2 < t2.arrayIndex; p2++) {
              var c2 = i2.layers[p2];
              bt(c2.id) === l2 && e2.push(new vt(n2, r2.id, 'duplicate layer id "' + r2.id + '", previously used at line ' + c2.id.__line__));
            }
          if ("ref" in r2)
            ["type", "source", "source-layer", "filter", "layout"].forEach(function(t3) {
              t3 in r2 && e2.push(new vt(n2, r2[t3], '"' + t3 + '" is prohibited for ref layers'));
            }), i2.layers.forEach(function(t3) {
              bt(t3.id) === u2 && (o2 = t3);
            }), o2 ? o2.ref ? e2.push(new vt(n2, r2.ref, "ref cannot reference another ref layer")) : s2 = bt(o2.type) : e2.push(new vt(n2, r2.ref, 'ref layer "' + u2 + '" not found'));
          else if ("background" !== s2)
            if (r2.source) {
              var h2 = i2.sources && i2.sources[r2.source], f2 = h2 && bt(h2.type);
              h2 ? "vector" === f2 && "raster" === s2 ? e2.push(new vt(n2, r2.source, 'layer "' + r2.id + '" requires a raster source')) : "raster" === f2 && "raster" !== s2 ? e2.push(new vt(n2, r2.source, 'layer "' + r2.id + '" requires a vector source')) : "vector" !== f2 || r2["source-layer"] ? "raster-dem" === f2 && "hillshade" !== s2 ? e2.push(new vt(n2, r2.source, "raster-dem source can only be used with layer type 'hillshade'.")) : "line" !== s2 || !r2.paint || !r2.paint["line-gradient"] || "geojson" === f2 && h2.lineMetrics || e2.push(new vt(n2, r2, 'layer "' + r2.id + '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')) : e2.push(new vt(n2, r2, 'layer "' + r2.id + '" must specify a "source-layer"')) : e2.push(new vt(n2, r2.source, 'source "' + r2.source + '" not found'));
            } else
              e2.push(new vt(n2, r2, 'missing required property "source"'));
          return e2 = e2.concat(_r({ key: n2, value: r2, valueSpec: a2.layer, style: t2.style, styleSpec: t2.styleSpec, objectElementValidators: { "*": function() {
            return [];
          }, type: function() {
            return Gr({ key: n2 + ".type", value: r2.type, valueSpec: a2.layer.type, style: t2.style, styleSpec: t2.styleSpec, object: r2, objectKey: "type" });
          }, filter: Lr, layout: function(t3) {
            return _r({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { "*": function(t4) {
              return Ur(xt({ layerType: s2 }, t4));
            } } });
          }, paint: function(t3) {
            return _r({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { "*": function(t4) {
              return Dr(xt({ layerType: s2 }, t4));
            } } });
          } } }));
        }
        function Rr(t2) {
          var e2 = t2.value, r2 = t2.key, n2 = t2.styleSpec, i2 = t2.style;
          if (!e2.type)
            return [new vt(r2, e2, '"type" is required')];
          var a2, o2 = bt(e2.type);
          switch (o2) {
            case "vector":
            case "raster":
            case "raster-dem":
              if (a2 = _r({ key: r2, value: e2, valueSpec: n2["source_" + o2.replace("-", "_")], style: t2.style, styleSpec: n2 }), "url" in e2)
                for (var s2 in e2)
                  ["type", "url", "tileSize"].indexOf(s2) < 0 && a2.push(new vt(r2 + "." + s2, e2[s2], 'a source with a "url" property may not include a "' + s2 + '" property'));
              return a2;
            case "geojson":
              if (a2 = _r({ key: r2, value: e2, valueSpec: n2.source_geojson, style: i2, styleSpec: n2 }), e2.cluster)
                for (var u2 in e2.clusterProperties) {
                  var l2 = e2.clusterProperties[u2], p2 = l2[0], c2 = l2[1], h2 = "string" == typeof p2 ? [p2, ["accumulated"], ["get", u2]] : p2;
                  a2.push.apply(a2, kr({ key: r2 + "." + u2 + ".map", value: c2, expressionContext: "cluster-map" })), a2.push.apply(a2, kr({ key: r2 + "." + u2 + ".reduce", value: h2, expressionContext: "cluster-reduce" }));
                }
              return a2;
            case "video":
              return _r({ key: r2, value: e2, valueSpec: n2.source_video, style: i2, styleSpec: n2 });
            case "image":
              return _r({ key: r2, value: e2, valueSpec: n2.source_image, style: i2, styleSpec: n2 });
            case "canvas":
              return [new vt(r2, null, "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.", "source.canvas")];
            default:
              return zr({ key: r2 + ".type", value: e2.type, valueSpec: { values: ["vector", "raster", "raster-dem", "geojson", "video", "image"] }, style: i2, styleSpec: n2 });
          }
        }
        function qr(t2) {
          var e2 = t2.value, r2 = t2.styleSpec, n2 = r2.light, i2 = t2.style, a2 = [], o2 = ir(e2);
          if (void 0 === e2)
            return a2;
          if ("object" !== o2)
            return a2 = a2.concat([new vt("light", e2, "object expected, " + o2 + " found")]);
          for (var s2 in e2) {
            var u2 = s2.match(/^(.*)-transition$/);
            a2 = u2 && n2[u2[1]] && n2[u2[1]].transition ? a2.concat(Gr({ key: s2, value: e2[s2], valueSpec: r2.transition, style: i2, styleSpec: r2 })) : n2[s2] ? a2.concat(Gr({ key: s2, value: e2[s2], valueSpec: n2[s2], style: i2, styleSpec: r2 })) : a2.concat([new vt(s2, e2[s2], 'unknown property "' + s2 + '"')]);
          }
          return a2;
        }
        function Nr(t2) {
          var e2 = t2.value, r2 = t2.key, n2 = ir(e2);
          return "string" !== n2 ? [new vt(r2, e2, "string expected, " + n2 + " found")] : [];
        }
        var Kr = { "*": function() {
          return [];
        }, array: wr, boolean: function(t2) {
          var e2 = t2.value, r2 = t2.key, n2 = ir(e2);
          return "boolean" !== n2 ? [new vt(r2, e2, "boolean expected, " + n2 + " found")] : [];
        }, number: Ar, color: function(t2) {
          var e2 = t2.key, r2 = t2.value, n2 = ir(r2);
          return "string" !== n2 ? [new vt(e2, r2, "color expected, " + n2 + " found")] : null === Ot(r2) ? [new vt(e2, r2, 'color expected, "' + r2 + '" found')] : [];
        }, constants: gt, enum: zr, filter: Lr, function: Sr, layer: jr, object: _r, source: Rr, light: qr, string: Nr, formatted: function(t2) {
          return 0 === Nr(t2).length ? [] : kr(t2);
        } };
        function Gr(t2) {
          var e2 = t2.value, r2 = t2.valueSpec, n2 = t2.styleSpec;
          return r2.expression && ar(bt(e2)) ? Sr(t2) : r2.expression && yr(_t(e2)) ? kr(t2) : r2.type && Kr[r2.type] ? Kr[r2.type](t2) : _r(xt({}, t2, { valueSpec: r2.type ? n2[r2.type] : r2 }));
        }
        function Xr(t2) {
          var e2 = t2.value, r2 = t2.key, n2 = Nr(t2);
          return n2.length ? n2 : (-1 === e2.indexOf("{fontstack}") && n2.push(new vt(r2, e2, '"glyphs" url must include a "{fontstack}" token')), -1 === e2.indexOf("{range}") && n2.push(new vt(r2, e2, '"glyphs" url must include a "{range}" token')), n2);
        }
        function Zr(t2, e2) {
          e2 = e2 || mt;
          var r2 = [];
          return r2 = r2.concat(Gr({ key: "", value: t2, valueSpec: e2.$root, styleSpec: e2, style: t2, objectElementValidators: { glyphs: Xr, "*": function() {
            return [];
          } } })), t2.constants && (r2 = r2.concat(gt({ key: "constants", value: t2.constants, style: t2, styleSpec: e2 }))), Hr(r2);
        }
        function Hr(t2) {
          return [].concat(t2).sort(function(t3, e2) {
            return t3.line - e2.line;
          });
        }
        function Yr(t2) {
          return function() {
            for (var e2 = [], r2 = arguments.length; r2--; )
              e2[r2] = arguments[r2];
            return Hr(t2.apply(this, e2));
          };
        }
        Zr.source = Yr(Rr), Zr.light = Yr(qr), Zr.layer = Yr(jr), Zr.filter = Yr(Lr), Zr.paintProperty = Yr(Dr), Zr.layoutProperty = Yr(Ur);
        var Jr = Zr, $r = Zr.light, Wr = Zr.paintProperty, Qr = Zr.layoutProperty;
        function tn(t2, e2) {
          var r2 = false;
          if (e2 && e2.length)
            for (var n2 = 0, i2 = e2; n2 < i2.length; n2 += 1) {
              var a2 = i2[n2];
              t2.fire(new yt(new Error(a2.message))), r2 = true;
            }
          return r2;
        }
        var en = nn, rn = 3;
        function nn(t2, e2, r2) {
          var n2 = this.cells = [];
          if (t2 instanceof ArrayBuffer) {
            this.arrayBuffer = t2;
            var i2 = new Int32Array(this.arrayBuffer);
            t2 = i2[0], e2 = i2[1], r2 = i2[2], this.d = e2 + 2 * r2;
            for (var a2 = 0; a2 < this.d * this.d; a2++) {
              var o2 = i2[rn + a2], s2 = i2[rn + a2 + 1];
              n2.push(o2 === s2 ? null : i2.subarray(o2, s2));
            }
            var u2 = i2[rn + n2.length], l2 = i2[rn + n2.length + 1];
            this.keys = i2.subarray(u2, l2), this.bboxes = i2.subarray(l2), this.insert = this._insertReadonly;
          } else {
            this.d = e2 + 2 * r2;
            for (var p2 = 0; p2 < this.d * this.d; p2++)
              n2.push([]);
            this.keys = [], this.bboxes = [];
          }
          this.n = e2, this.extent = t2, this.padding = r2, this.scale = e2 / t2, this.uid = 0;
          var c2 = r2 / e2 * t2;
          this.min = -c2, this.max = t2 + c2;
        }
        nn.prototype.insert = function(t2, e2, r2, n2, i2) {
          this._forEachCell(e2, r2, n2, i2, this._insertCell, this.uid++), this.keys.push(t2), this.bboxes.push(e2), this.bboxes.push(r2), this.bboxes.push(n2), this.bboxes.push(i2);
        }, nn.prototype._insertReadonly = function() {
          throw "Cannot insert into a GridIndex created from an ArrayBuffer.";
        }, nn.prototype._insertCell = function(t2, e2, r2, n2, i2, a2) {
          this.cells[i2].push(a2);
        }, nn.prototype.query = function(t2, e2, r2, n2, i2) {
          var a2 = this.min, o2 = this.max;
          if (t2 <= a2 && e2 <= a2 && o2 <= r2 && o2 <= n2 && !i2)
            return Array.prototype.slice.call(this.keys);
          var s2 = [];
          return this._forEachCell(t2, e2, r2, n2, this._queryCell, s2, {}, i2), s2;
        }, nn.prototype._queryCell = function(t2, e2, r2, n2, i2, a2, o2, s2) {
          var u2 = this.cells[i2];
          if (null !== u2)
            for (var l2 = this.keys, p2 = this.bboxes, c2 = 0; c2 < u2.length; c2++) {
              var h2 = u2[c2];
              if (void 0 === o2[h2]) {
                var f2 = 4 * h2;
                (s2 ? s2(p2[f2 + 0], p2[f2 + 1], p2[f2 + 2], p2[f2 + 3]) : t2 <= p2[f2 + 2] && e2 <= p2[f2 + 3] && r2 >= p2[f2 + 0] && n2 >= p2[f2 + 1]) ? (o2[h2] = true, a2.push(l2[h2])) : o2[h2] = false;
              }
            }
        }, nn.prototype._forEachCell = function(t2, e2, r2, n2, i2, a2, o2, s2) {
          for (var u2 = this._convertToCellCoord(t2), l2 = this._convertToCellCoord(e2), p2 = this._convertToCellCoord(r2), c2 = this._convertToCellCoord(n2), h2 = u2; h2 <= p2; h2++)
            for (var f2 = l2; f2 <= c2; f2++) {
              var y2 = this.d * f2 + h2;
              if ((!s2 || s2(this._convertFromCellCoord(h2), this._convertFromCellCoord(f2), this._convertFromCellCoord(h2 + 1), this._convertFromCellCoord(f2 + 1))) && i2.call(this, t2, e2, r2, n2, y2, a2, o2, s2))
                return;
            }
        }, nn.prototype._convertFromCellCoord = function(t2) {
          return (t2 - this.padding) / this.scale;
        }, nn.prototype._convertToCellCoord = function(t2) {
          return Math.max(0, Math.min(this.d - 1, Math.floor(t2 * this.scale) + this.padding));
        }, nn.prototype.toArrayBuffer = function() {
          if (this.arrayBuffer)
            return this.arrayBuffer;
          for (var t2 = this.cells, e2 = rn + this.cells.length + 1 + 1, r2 = 0, n2 = 0; n2 < this.cells.length; n2++)
            r2 += this.cells[n2].length;
          var i2 = new Int32Array(e2 + r2 + this.keys.length + this.bboxes.length);
          i2[0] = this.extent, i2[1] = this.n, i2[2] = this.padding;
          for (var a2 = e2, o2 = 0; o2 < t2.length; o2++) {
            var s2 = t2[o2];
            i2[rn + o2] = a2, i2.set(s2, a2), a2 += s2.length;
          }
          return i2[rn + t2.length] = a2, i2.set(this.keys, a2), a2 += this.keys.length, i2[rn + t2.length + 1] = a2, i2.set(this.bboxes, a2), a2 += this.bboxes.length, i2.buffer;
        };
        var an = self.ImageData, on = {};
        function sn(t2, e2, r2) {
          void 0 === r2 && (r2 = {}), Object.defineProperty(e2, "_classRegistryKey", { value: t2, writeable: false }), on[t2] = { klass: e2, omit: r2.omit || [], shallow: r2.shallow || [] };
        }
        for (var un in sn("Object", Object), en.serialize = function(t2, e2) {
          var r2 = t2.toArrayBuffer();
          return e2 && e2.push(r2), { buffer: r2 };
        }, en.deserialize = function(t2) {
          return new en(t2.buffer);
        }, sn("Grid", en), sn("Color", Dt), sn("Error", Error), sn("StylePropertyFunction", xr), sn("StyleExpression", fr, { omit: ["_evaluator"] }), sn("ZoomDependentExpression", vr), sn("ZoomConstantExpression", mr), sn("CompoundExpression", te, { omit: ["_evaluate"] }), He)
          He[un]._classRegistryKey || sn("Expression_" + un, He[un]);
        function ln(t2, e2) {
          if (null == t2 || "boolean" == typeof t2 || "number" == typeof t2 || "string" == typeof t2 || t2 instanceof Boolean || t2 instanceof Number || t2 instanceof String || t2 instanceof Date || t2 instanceof RegExp)
            return t2;
          if (t2 instanceof ArrayBuffer)
            return e2 && e2.push(t2), t2;
          if (ArrayBuffer.isView(t2)) {
            var r2 = t2;
            return e2 && e2.push(r2.buffer), r2;
          }
          if (t2 instanceof an)
            return e2 && e2.push(t2.data.buffer), t2;
          if (Array.isArray(t2)) {
            for (var n2 = [], i2 = 0, a2 = t2; i2 < a2.length; i2 += 1) {
              var o2 = a2[i2];
              n2.push(ln(o2, e2));
            }
            return n2;
          }
          if ("object" == typeof t2) {
            var s2 = t2.constructor, u2 = s2._classRegistryKey;
            if (!u2)
              throw new Error("can't serialize object of unregistered class");
            var l2 = s2.serialize ? s2.serialize(t2, e2) : {};
            if (!s2.serialize) {
              for (var p2 in t2)
                if (t2.hasOwnProperty(p2) && !(on[u2].omit.indexOf(p2) >= 0)) {
                  var c2 = t2[p2];
                  l2[p2] = on[u2].shallow.indexOf(p2) >= 0 ? c2 : ln(c2, e2);
                }
              t2 instanceof Error && (l2.message = t2.message);
            }
            if (l2.$name)
              throw new Error("$name property is reserved for worker serialization logic.");
            return "Object" !== u2 && (l2.$name = u2), l2;
          }
          throw new Error("can't serialize object of type " + typeof t2);
        }
        function pn(t2) {
          if (null == t2 || "boolean" == typeof t2 || "number" == typeof t2 || "string" == typeof t2 || t2 instanceof Boolean || t2 instanceof Number || t2 instanceof String || t2 instanceof Date || t2 instanceof RegExp || t2 instanceof ArrayBuffer || ArrayBuffer.isView(t2) || t2 instanceof an)
            return t2;
          if (Array.isArray(t2))
            return t2.map(pn);
          if ("object" == typeof t2) {
            var e2 = t2.$name || "Object", r2 = on[e2].klass;
            if (!r2)
              throw new Error("can't deserialize unregistered class " + e2);
            if (r2.deserialize)
              return r2.deserialize(t2);
            for (var n2 = Object.create(r2.prototype), i2 = 0, a2 = Object.keys(t2); i2 < a2.length; i2 += 1) {
              var o2 = a2[i2];
              if ("$name" !== o2) {
                var s2 = t2[o2];
                n2[o2] = on[e2].shallow.indexOf(o2) >= 0 ? s2 : pn(s2);
              }
            }
            return n2;
          }
          throw new Error("can't deserialize object of type " + typeof t2);
        }
        var cn = function() {
          this.first = true;
        };
        cn.prototype.update = function(t2, e2) {
          var r2 = Math.floor(t2);
          return this.first ? (this.first = false, this.lastIntegerZoom = r2, this.lastIntegerZoomTime = 0, this.lastZoom = t2, this.lastFloorZoom = r2, true) : (this.lastFloorZoom > r2 ? (this.lastIntegerZoom = r2 + 1, this.lastIntegerZoomTime = e2) : this.lastFloorZoom < r2 && (this.lastIntegerZoom = r2, this.lastIntegerZoomTime = e2), t2 !== this.lastZoom && (this.lastZoom = t2, this.lastFloorZoom = r2, true));
        };
        var hn = { "Latin-1 Supplement": function(t2) {
          return t2 >= 128 && t2 <= 255;
        }, Arabic: function(t2) {
          return t2 >= 1536 && t2 <= 1791;
        }, "Arabic Supplement": function(t2) {
          return t2 >= 1872 && t2 <= 1919;
        }, "Arabic Extended-A": function(t2) {
          return t2 >= 2208 && t2 <= 2303;
        }, "Hangul Jamo": function(t2) {
          return t2 >= 4352 && t2 <= 4607;
        }, "Unified Canadian Aboriginal Syllabics": function(t2) {
          return t2 >= 5120 && t2 <= 5759;
        }, Khmer: function(t2) {
          return t2 >= 6016 && t2 <= 6143;
        }, "Unified Canadian Aboriginal Syllabics Extended": function(t2) {
          return t2 >= 6320 && t2 <= 6399;
        }, "General Punctuation": function(t2) {
          return t2 >= 8192 && t2 <= 8303;
        }, "Letterlike Symbols": function(t2) {
          return t2 >= 8448 && t2 <= 8527;
        }, "Number Forms": function(t2) {
          return t2 >= 8528 && t2 <= 8591;
        }, "Miscellaneous Technical": function(t2) {
          return t2 >= 8960 && t2 <= 9215;
        }, "Control Pictures": function(t2) {
          return t2 >= 9216 && t2 <= 9279;
        }, "Optical Character Recognition": function(t2) {
          return t2 >= 9280 && t2 <= 9311;
        }, "Enclosed Alphanumerics": function(t2) {
          return t2 >= 9312 && t2 <= 9471;
        }, "Geometric Shapes": function(t2) {
          return t2 >= 9632 && t2 <= 9727;
        }, "Miscellaneous Symbols": function(t2) {
          return t2 >= 9728 && t2 <= 9983;
        }, "Miscellaneous Symbols and Arrows": function(t2) {
          return t2 >= 11008 && t2 <= 11263;
        }, "CJK Radicals Supplement": function(t2) {
          return t2 >= 11904 && t2 <= 12031;
        }, "Kangxi Radicals": function(t2) {
          return t2 >= 12032 && t2 <= 12255;
        }, "Ideographic Description Characters": function(t2) {
          return t2 >= 12272 && t2 <= 12287;
        }, "CJK Symbols and Punctuation": function(t2) {
          return t2 >= 12288 && t2 <= 12351;
        }, Hiragana: function(t2) {
          return t2 >= 12352 && t2 <= 12447;
        }, Katakana: function(t2) {
          return t2 >= 12448 && t2 <= 12543;
        }, Bopomofo: function(t2) {
          return t2 >= 12544 && t2 <= 12591;
        }, "Hangul Compatibility Jamo": function(t2) {
          return t2 >= 12592 && t2 <= 12687;
        }, Kanbun: function(t2) {
          return t2 >= 12688 && t2 <= 12703;
        }, "Bopomofo Extended": function(t2) {
          return t2 >= 12704 && t2 <= 12735;
        }, "CJK Strokes": function(t2) {
          return t2 >= 12736 && t2 <= 12783;
        }, "Katakana Phonetic Extensions": function(t2) {
          return t2 >= 12784 && t2 <= 12799;
        }, "Enclosed CJK Letters and Months": function(t2) {
          return t2 >= 12800 && t2 <= 13055;
        }, "CJK Compatibility": function(t2) {
          return t2 >= 13056 && t2 <= 13311;
        }, "CJK Unified Ideographs Extension A": function(t2) {
          return t2 >= 13312 && t2 <= 19903;
        }, "Yijing Hexagram Symbols": function(t2) {
          return t2 >= 19904 && t2 <= 19967;
        }, "CJK Unified Ideographs": function(t2) {
          return t2 >= 19968 && t2 <= 40959;
        }, "Yi Syllables": function(t2) {
          return t2 >= 40960 && t2 <= 42127;
        }, "Yi Radicals": function(t2) {
          return t2 >= 42128 && t2 <= 42191;
        }, "Hangul Jamo Extended-A": function(t2) {
          return t2 >= 43360 && t2 <= 43391;
        }, "Hangul Syllables": function(t2) {
          return t2 >= 44032 && t2 <= 55215;
        }, "Hangul Jamo Extended-B": function(t2) {
          return t2 >= 55216 && t2 <= 55295;
        }, "Private Use Area": function(t2) {
          return t2 >= 57344 && t2 <= 63743;
        }, "CJK Compatibility Ideographs": function(t2) {
          return t2 >= 63744 && t2 <= 64255;
        }, "Arabic Presentation Forms-A": function(t2) {
          return t2 >= 64336 && t2 <= 65023;
        }, "Vertical Forms": function(t2) {
          return t2 >= 65040 && t2 <= 65055;
        }, "CJK Compatibility Forms": function(t2) {
          return t2 >= 65072 && t2 <= 65103;
        }, "Small Form Variants": function(t2) {
          return t2 >= 65104 && t2 <= 65135;
        }, "Arabic Presentation Forms-B": function(t2) {
          return t2 >= 65136 && t2 <= 65279;
        }, "Halfwidth and Fullwidth Forms": function(t2) {
          return t2 >= 65280 && t2 <= 65519;
        } };
        function fn(t2) {
          for (var e2 = 0, r2 = t2; e2 < r2.length; e2 += 1) {
            if (dn(r2[e2].charCodeAt(0)))
              return true;
          }
          return false;
        }
        function yn(t2) {
          return !hn.Arabic(t2) && (!hn["Arabic Supplement"](t2) && (!hn["Arabic Extended-A"](t2) && (!hn["Arabic Presentation Forms-A"](t2) && !hn["Arabic Presentation Forms-B"](t2))));
        }
        function dn(t2) {
          return 746 === t2 || 747 === t2 || !(t2 < 4352) && (!!hn["Bopomofo Extended"](t2) || (!!hn.Bopomofo(t2) || (!(!hn["CJK Compatibility Forms"](t2) || t2 >= 65097 && t2 <= 65103) || (!!hn["CJK Compatibility Ideographs"](t2) || (!!hn["CJK Compatibility"](t2) || (!!hn["CJK Radicals Supplement"](t2) || (!!hn["CJK Strokes"](t2) || (!(!hn["CJK Symbols and Punctuation"](t2) || t2 >= 12296 && t2 <= 12305 || t2 >= 12308 && t2 <= 12319 || 12336 === t2) || (!!hn["CJK Unified Ideographs Extension A"](t2) || (!!hn["CJK Unified Ideographs"](t2) || (!!hn["Enclosed CJK Letters and Months"](t2) || (!!hn["Hangul Compatibility Jamo"](t2) || (!!hn["Hangul Jamo Extended-A"](t2) || (!!hn["Hangul Jamo Extended-B"](t2) || (!!hn["Hangul Jamo"](t2) || (!!hn["Hangul Syllables"](t2) || (!!hn.Hiragana(t2) || (!!hn["Ideographic Description Characters"](t2) || (!!hn.Kanbun(t2) || (!!hn["Kangxi Radicals"](t2) || (!!hn["Katakana Phonetic Extensions"](t2) || (!(!hn.Katakana(t2) || 12540 === t2) || (!(!hn["Halfwidth and Fullwidth Forms"](t2) || 65288 === t2 || 65289 === t2 || 65293 === t2 || t2 >= 65306 && t2 <= 65310 || 65339 === t2 || 65341 === t2 || 65343 === t2 || t2 >= 65371 && t2 <= 65503 || 65507 === t2 || t2 >= 65512 && t2 <= 65519) || (!(!hn["Small Form Variants"](t2) || t2 >= 65112 && t2 <= 65118 || t2 >= 65123 && t2 <= 65126) || (!!hn["Unified Canadian Aboriginal Syllabics"](t2) || (!!hn["Unified Canadian Aboriginal Syllabics Extended"](t2) || (!!hn["Vertical Forms"](t2) || (!!hn["Yijing Hexagram Symbols"](t2) || (!!hn["Yi Syllables"](t2) || !!hn["Yi Radicals"](t2))))))))))))))))))))))))))))));
        }
        function mn(t2) {
          return !(dn(t2) || function(t3) {
            return !!(hn["Latin-1 Supplement"](t3) && (167 === t3 || 169 === t3 || 174 === t3 || 177 === t3 || 188 === t3 || 189 === t3 || 190 === t3 || 215 === t3 || 247 === t3) || hn["General Punctuation"](t3) && (8214 === t3 || 8224 === t3 || 8225 === t3 || 8240 === t3 || 8241 === t3 || 8251 === t3 || 8252 === t3 || 8258 === t3 || 8263 === t3 || 8264 === t3 || 8265 === t3 || 8273 === t3) || hn["Letterlike Symbols"](t3) || hn["Number Forms"](t3) || hn["Miscellaneous Technical"](t3) && (t3 >= 8960 && t3 <= 8967 || t3 >= 8972 && t3 <= 8991 || t3 >= 8996 && t3 <= 9e3 || 9003 === t3 || t3 >= 9085 && t3 <= 9114 || t3 >= 9150 && t3 <= 9165 || 9167 === t3 || t3 >= 9169 && t3 <= 9179 || t3 >= 9186 && t3 <= 9215) || hn["Control Pictures"](t3) && 9251 !== t3 || hn["Optical Character Recognition"](t3) || hn["Enclosed Alphanumerics"](t3) || hn["Geometric Shapes"](t3) || hn["Miscellaneous Symbols"](t3) && !(t3 >= 9754 && t3 <= 9759) || hn["Miscellaneous Symbols and Arrows"](t3) && (t3 >= 11026 && t3 <= 11055 || t3 >= 11088 && t3 <= 11097 || t3 >= 11192 && t3 <= 11243) || hn["CJK Symbols and Punctuation"](t3) || hn.Katakana(t3) || hn["Private Use Area"](t3) || hn["CJK Compatibility Forms"](t3) || hn["Small Form Variants"](t3) || hn["Halfwidth and Fullwidth Forms"](t3) || 8734 === t3 || 8756 === t3 || 8757 === t3 || t3 >= 9984 && t3 <= 10087 || t3 >= 10102 && t3 <= 10131 || 65532 === t3 || 65533 === t3);
          }(t2));
        }
        function vn(t2, e2) {
          return !(!e2 && (t2 >= 1424 && t2 <= 2303 || hn["Arabic Presentation Forms-A"](t2) || hn["Arabic Presentation Forms-B"](t2))) && !(t2 >= 2304 && t2 <= 3583 || t2 >= 3840 && t2 <= 4255 || hn.Khmer(t2));
        }
        var gn, xn = false, bn = null, _n = false, wn = new dt(), An = { applyArabicShaping: null, processBidirectionalText: null, processStyledBidirectionalText: null, isLoaded: function() {
          return _n || null != An.applyArabicShaping;
        } }, Sn = function(t2, e2) {
          this.zoom = t2, e2 ? (this.now = e2.now, this.fadeDuration = e2.fadeDuration, this.zoomHistory = e2.zoomHistory, this.transition = e2.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new cn(), this.transition = {});
        };
        Sn.prototype.isSupportedScript = function(t2) {
          return function(t3, e2) {
            for (var r2 = 0, n2 = t3; r2 < n2.length; r2 += 1)
              if (!vn(n2[r2].charCodeAt(0), e2))
                return false;
            return true;
          }(t2, An.isLoaded());
        }, Sn.prototype.crossFadingFactor = function() {
          return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);
        }, Sn.prototype.getCrossfadeParameters = function() {
          var t2 = this.zoom, e2 = t2 - Math.floor(t2), r2 = this.crossFadingFactor();
          return t2 > this.zoomHistory.lastIntegerZoom ? { fromScale: 2, toScale: 1, t: e2 + (1 - e2) * r2 } : { fromScale: 0.5, toScale: 1, t: 1 - (1 - r2) * e2 };
        };
        var kn = function(t2, e2) {
          this.property = t2, this.value = e2, this.expression = br(void 0 === e2 ? t2.specification.default : e2, t2.specification);
        };
        kn.prototype.isDataDriven = function() {
          return "source" === this.expression.kind || "composite" === this.expression.kind;
        }, kn.prototype.possiblyEvaluate = function(t2) {
          return this.property.possiblyEvaluate(this, t2);
        };
        var zn = function(t2) {
          this.property = t2, this.value = new kn(t2, void 0);
        };
        zn.prototype.transitioned = function(t2, e2) {
          return new Bn(this.property, this.value, e2, c({}, t2.transition, this.transition), t2.now);
        }, zn.prototype.untransitioned = function() {
          return new Bn(this.property, this.value, null, {}, 0);
        };
        var In = function(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultTransitionablePropertyValues);
        };
        In.prototype.getValue = function(t2) {
          return b(this._values[t2].value.value);
        }, In.prototype.setValue = function(t2, e2) {
          this._values.hasOwnProperty(t2) || (this._values[t2] = new zn(this._values[t2].property)), this._values[t2].value = new kn(this._values[t2].property, null === e2 ? void 0 : b(e2));
        }, In.prototype.getTransition = function(t2) {
          return b(this._values[t2].transition);
        }, In.prototype.setTransition = function(t2, e2) {
          this._values.hasOwnProperty(t2) || (this._values[t2] = new zn(this._values[t2].property)), this._values[t2].transition = b(e2) || void 0;
        }, In.prototype.serialize = function() {
          for (var t2 = {}, e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
            var n2 = r2[e2], i2 = this.getValue(n2);
            void 0 !== i2 && (t2[n2] = i2);
            var a2 = this.getTransition(n2);
            void 0 !== a2 && (t2[n2 + "-transition"] = a2);
          }
          return t2;
        }, In.prototype.transitioned = function(t2, e2) {
          for (var r2 = new En(this._properties), n2 = 0, i2 = Object.keys(this._values); n2 < i2.length; n2 += 1) {
            var a2 = i2[n2];
            r2._values[a2] = this._values[a2].transitioned(t2, e2._values[a2]);
          }
          return r2;
        }, In.prototype.untransitioned = function() {
          for (var t2 = new En(this._properties), e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
            var n2 = r2[e2];
            t2._values[n2] = this._values[n2].untransitioned();
          }
          return t2;
        };
        var Bn = function(t2, e2, r2, n2, i2) {
          this.property = t2, this.value = e2, this.begin = i2 + n2.delay || 0, this.end = this.begin + n2.duration || 0, t2.specification.transition && (n2.delay || n2.duration) && (this.prior = r2);
        };
        Bn.prototype.possiblyEvaluate = function(t2) {
          var e2 = t2.now || 0, r2 = this.value.possiblyEvaluate(t2), n2 = this.prior;
          if (n2) {
            if (e2 > this.end)
              return this.prior = null, r2;
            if (this.value.isDataDriven())
              return this.prior = null, r2;
            if (e2 < this.begin)
              return n2.possiblyEvaluate(t2);
            var i2 = (e2 - this.begin) / (this.end - this.begin);
            return this.property.interpolate(n2.possiblyEvaluate(t2), r2, function(t3) {
              if (t3 <= 0)
                return 0;
              if (t3 >= 1)
                return 1;
              var e3 = t3 * t3, r3 = e3 * t3;
              return 4 * (t3 < 0.5 ? r3 : 3 * (t3 - e3) + r3 - 0.75);
            }(i2));
          }
          return r2;
        };
        var En = function(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultTransitioningPropertyValues);
        };
        En.prototype.possiblyEvaluate = function(t2) {
          for (var e2 = new Cn(this._properties), r2 = 0, n2 = Object.keys(this._values); r2 < n2.length; r2 += 1) {
            var i2 = n2[r2];
            e2._values[i2] = this._values[i2].possiblyEvaluate(t2);
          }
          return e2;
        }, En.prototype.hasTransition = function() {
          for (var t2 = 0, e2 = Object.keys(this._values); t2 < e2.length; t2 += 1) {
            var r2 = e2[t2];
            if (this._values[r2].prior)
              return true;
          }
          return false;
        };
        var Pn = function(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultPropertyValues);
        };
        Pn.prototype.getValue = function(t2) {
          return b(this._values[t2].value);
        }, Pn.prototype.setValue = function(t2, e2) {
          this._values[t2] = new kn(this._values[t2].property, null === e2 ? void 0 : b(e2));
        }, Pn.prototype.serialize = function() {
          for (var t2 = {}, e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
            var n2 = r2[e2], i2 = this.getValue(n2);
            void 0 !== i2 && (t2[n2] = i2);
          }
          return t2;
        }, Pn.prototype.possiblyEvaluate = function(t2) {
          for (var e2 = new Cn(this._properties), r2 = 0, n2 = Object.keys(this._values); r2 < n2.length; r2 += 1) {
            var i2 = n2[r2];
            e2._values[i2] = this._values[i2].possiblyEvaluate(t2);
          }
          return e2;
        };
        var Vn = function(t2, e2, r2) {
          this.property = t2, this.value = e2, this.parameters = r2;
        };
        Vn.prototype.isConstant = function() {
          return "constant" === this.value.kind;
        }, Vn.prototype.constantOr = function(t2) {
          return "constant" === this.value.kind ? this.value.value : t2;
        }, Vn.prototype.evaluate = function(t2, e2) {
          return this.property.evaluate(this.value, this.parameters, t2, e2);
        };
        var Cn = function(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultPossiblyEvaluatedValues);
        };
        Cn.prototype.get = function(t2) {
          return this._values[t2];
        };
        var Mn = function(t2) {
          this.specification = t2;
        };
        Mn.prototype.possiblyEvaluate = function(t2, e2) {
          return t2.expression.evaluate(e2);
        }, Mn.prototype.interpolate = function(t2, e2, r2) {
          var n2 = pe[this.specification.type];
          return n2 ? n2(t2, e2, r2) : t2;
        };
        var Tn = function(t2) {
          this.specification = t2;
        };
        Tn.prototype.possiblyEvaluate = function(t2, e2) {
          return "constant" === t2.expression.kind || "camera" === t2.expression.kind ? new Vn(this, { kind: "constant", value: t2.expression.evaluate(e2) }, e2) : new Vn(this, t2.expression, e2);
        }, Tn.prototype.interpolate = function(t2, e2, r2) {
          if ("constant" !== t2.value.kind || "constant" !== e2.value.kind)
            return t2;
          if (void 0 === t2.value.value || void 0 === e2.value.value)
            return new Vn(this, { kind: "constant", value: void 0 }, t2.parameters);
          var n2 = pe[this.specification.type];
          return n2 ? new Vn(this, { kind: "constant", value: n2(t2.value.value, e2.value.value, r2) }, t2.parameters) : t2;
        }, Tn.prototype.evaluate = function(t2, e2, r2, n2) {
          return "constant" === t2.kind ? t2.value : t2.evaluate(e2, r2, n2);
        };
        var Fn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.possiblyEvaluate = function(t3, e3) {
            if (void 0 === t3.value)
              return new Vn(this, { kind: "constant", value: void 0 }, e3);
            if ("constant" === t3.expression.kind) {
              var r2 = t3.expression.evaluate(e3), n2 = this._calculate(r2, r2, r2, e3);
              return new Vn(this, { kind: "constant", value: n2 }, e3);
            }
            if ("camera" === t3.expression.kind) {
              var i2 = this._calculate(t3.expression.evaluate({ zoom: e3.zoom - 1 }), t3.expression.evaluate({ zoom: e3.zoom }), t3.expression.evaluate({ zoom: e3.zoom + 1 }), e3);
              return new Vn(this, { kind: "constant", value: i2 }, e3);
            }
            return new Vn(this, t3.expression, e3);
          }, e2.prototype.evaluate = function(t3, e3, r2, n2) {
            if ("source" === t3.kind) {
              var i2 = t3.evaluate(e3, r2, n2);
              return this._calculate(i2, i2, i2, e3);
            }
            return "composite" === t3.kind ? this._calculate(t3.evaluate({ zoom: Math.floor(e3.zoom) - 1 }, r2, n2), t3.evaluate({ zoom: Math.floor(e3.zoom) }, r2, n2), t3.evaluate({ zoom: Math.floor(e3.zoom) + 1 }, r2, n2), e3) : t3.value;
          }, e2.prototype._calculate = function(t3, e3, r2, n2) {
            return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t3, to: e3 } : { from: r2, to: e3 };
          }, e2.prototype.interpolate = function(t3) {
            return t3;
          }, e2;
        }(Tn), Ln = function(t2) {
          this.specification = t2;
        };
        Ln.prototype.possiblyEvaluate = function(t2, e2) {
          if (void 0 !== t2.value) {
            if ("constant" === t2.expression.kind) {
              var r2 = t2.expression.evaluate(e2);
              return this._calculate(r2, r2, r2, e2);
            }
            return this._calculate(t2.expression.evaluate(new Sn(Math.floor(e2.zoom - 1), e2)), t2.expression.evaluate(new Sn(Math.floor(e2.zoom), e2)), t2.expression.evaluate(new Sn(Math.floor(e2.zoom + 1), e2)), e2);
          }
        }, Ln.prototype._calculate = function(t2, e2, r2, n2) {
          return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t2, to: e2 } : { from: r2, to: e2 };
        }, Ln.prototype.interpolate = function(t2) {
          return t2;
        };
        var On = function(t2) {
          this.specification = t2;
        };
        On.prototype.possiblyEvaluate = function(t2, e2) {
          return !!t2.expression.evaluate(e2);
        }, On.prototype.interpolate = function() {
          return false;
        };
        var Dn = function(t2) {
          for (var e2 in this.properties = t2, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, t2) {
            var r2 = t2[e2], n2 = this.defaultPropertyValues[e2] = new kn(r2, void 0), i2 = this.defaultTransitionablePropertyValues[e2] = new zn(r2);
            this.defaultTransitioningPropertyValues[e2] = i2.untransitioned(), this.defaultPossiblyEvaluatedValues[e2] = n2.possiblyEvaluate({});
          }
        };
        sn("DataDrivenProperty", Tn), sn("DataConstantProperty", Mn), sn("CrossFadedDataDrivenProperty", Fn), sn("CrossFadedProperty", Ln), sn("ColorRampProperty", On);
        var Un = function(t2) {
          function e2(e3, r2) {
            if (t2.call(this), this.id = e3.id, this.type = e3.type, this.visibility = "visible", this._featureFilter = function() {
              return true;
            }, "custom" !== e3.type && (e3 = e3, this.metadata = e3.metadata, this.minzoom = e3.minzoom, this.maxzoom = e3.maxzoom, "background" !== e3.type && (this.source = e3.source, this.sourceLayer = e3["source-layer"], this.filter = e3.filter), r2.layout && (this._unevaluatedLayout = new Pn(r2.layout)), r2.paint)) {
              for (var n2 in this._transitionablePaint = new In(r2.paint), e3.paint)
                this.setPaintProperty(n2, e3.paint[n2], { validate: false });
              for (var i2 in e3.layout)
                this.setLayoutProperty(i2, e3.layout[i2], { validate: false });
              this._transitioningPaint = this._transitionablePaint.untransitioned();
            }
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getCrossfadeParameters = function() {
            return this._crossfadeParameters;
          }, e2.prototype.getLayoutProperty = function(t3) {
            return "visibility" === t3 ? this.visibility : this._unevaluatedLayout.getValue(t3);
          }, e2.prototype.setLayoutProperty = function(t3, e3, r2) {
            if (void 0 === r2 && (r2 = {}), null != e3) {
              var n2 = "layers." + this.id + ".layout." + t3;
              if (this._validate(Qr, n2, t3, e3, r2))
                return;
            }
            "visibility" !== t3 ? this._unevaluatedLayout.setValue(t3, e3) : this.visibility = "none" === e3 ? e3 : "visible";
          }, e2.prototype.getPaintProperty = function(t3) {
            return v(t3, "-transition") ? this._transitionablePaint.getTransition(t3.slice(0, -"-transition".length)) : this._transitionablePaint.getValue(t3);
          }, e2.prototype.setPaintProperty = function(t3, e3, r2) {
            if (void 0 === r2 && (r2 = {}), null != e3) {
              var n2 = "layers." + this.id + ".paint." + t3;
              if (this._validate(Wr, n2, t3, e3, r2))
                return false;
            }
            if (v(t3, "-transition"))
              return this._transitionablePaint.setTransition(t3.slice(0, -"-transition".length), e3 || void 0), false;
            var i2 = this._transitionablePaint._values[t3], a2 = "cross-faded-data-driven" === i2.property.specification["property-type"] && !i2.value.value && e3, o2 = this._transitionablePaint._values[t3].value.isDataDriven();
            this._transitionablePaint.setValue(t3, e3);
            var s2 = this._transitionablePaint._values[t3].value.isDataDriven();
            return this._handleSpecialPaintPropertyUpdate(t3), s2 || o2 || a2;
          }, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
          }, e2.prototype.isHidden = function(t3) {
            return !!(this.minzoom && t3 < this.minzoom) || (!!(this.maxzoom && t3 >= this.maxzoom) || "none" === this.visibility);
          }, e2.prototype.updateTransitions = function(t3) {
            this._transitioningPaint = this._transitionablePaint.transitioned(t3, this._transitioningPaint);
          }, e2.prototype.hasTransition = function() {
            return this._transitioningPaint.hasTransition();
          }, e2.prototype.recalculate = function(t3) {
            t3.getCrossfadeParameters && (this._crossfadeParameters = t3.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t3)), this.paint = this._transitioningPaint.possiblyEvaluate(t3);
          }, e2.prototype.serialize = function() {
            var t3 = { id: this.id, type: this.type, source: this.source, "source-layer": this.sourceLayer, metadata: this.metadata, minzoom: this.minzoom, maxzoom: this.maxzoom, filter: this.filter, layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(), paint: this._transitionablePaint && this._transitionablePaint.serialize() };
            return "none" === this.visibility && (t3.layout = t3.layout || {}, t3.layout.visibility = "none"), x(t3, function(t4, e3) {
              return !(void 0 === t4 || "layout" === e3 && !Object.keys(t4).length || "paint" === e3 && !Object.keys(t4).length);
            });
          }, e2.prototype._validate = function(t3, e3, r2, n2, i2) {
            return void 0 === i2 && (i2 = {}), (!i2 || false !== i2.validate) && tn(this, t3.call(Jr, { key: e3, layerType: this.type, objectKey: r2, value: n2, styleSpec: mt, style: { glyphs: true, sprite: true } }));
          }, e2.prototype.hasOffscreenPass = function() {
            return false;
          }, e2.prototype.resize = function() {
          }, e2.prototype.isStateDependent = function() {
            for (var t3 in this.paint._values) {
              var e3 = this.paint.get(t3);
              if (e3 instanceof Vn && er(e3.property.specification) && (("source" === e3.value.kind || "composite" === e3.value.kind) && e3.value.isStateDependent))
                return true;
            }
            return false;
          }, e2;
        }(dt), jn = { Int8: Int8Array, Uint8: Uint8Array, Int16: Int16Array, Uint16: Uint16Array, Int32: Int32Array, Uint32: Uint32Array, Float32: Float32Array }, Rn = function(t2, e2) {
          this._structArray = t2, this._pos1 = e2 * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;
        }, qn = function() {
          this.isTransferred = false, this.capacity = -1, this.resize(0);
        };
        function Nn(t2, e2) {
          void 0 === e2 && (e2 = 1);
          var r2 = 0, n2 = 0;
          return { members: t2.map(function(t3) {
            var i2, a2 = (i2 = t3.type, jn[i2].BYTES_PER_ELEMENT), o2 = r2 = Kn(r2, Math.max(e2, a2)), s2 = t3.components || 1;
            return n2 = Math.max(n2, a2), r2 += a2 * s2, { name: t3.name, type: t3.type, components: s2, offset: o2 };
          }), size: Kn(r2, Math.max(n2, e2)), alignment: e2 };
        }
        function Kn(t2, e2) {
          return Math.ceil(t2 / e2) * e2;
        }
        qn.serialize = function(t2, e2) {
          return t2._trim(), e2 && (t2.isTransferred = true, e2.push(t2.arrayBuffer)), { length: t2.length, arrayBuffer: t2.arrayBuffer };
        }, qn.deserialize = function(t2) {
          var e2 = Object.create(this.prototype);
          return e2.arrayBuffer = t2.arrayBuffer, e2.length = t2.length, e2.capacity = t2.arrayBuffer.byteLength / e2.bytesPerElement, e2._refreshViews(), e2;
        }, qn.prototype._trim = function() {
          this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());
        }, qn.prototype.clear = function() {
          this.length = 0;
        }, qn.prototype.resize = function(t2) {
          this.reserve(t2), this.length = t2;
        }, qn.prototype.reserve = function(t2) {
          if (t2 > this.capacity) {
            this.capacity = Math.max(t2, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
            var e2 = this.uint8;
            this._refreshViews(), e2 && this.uint8.set(e2);
          }
        }, qn.prototype._refreshViews = function() {
          throw new Error("_refreshViews() must be implemented by each concrete StructArray layout");
        };
        var Gn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3) {
            var r2 = this.length;
            return this.resize(r2 + 1), this.emplace(r2, t3, e3);
          }, e2.prototype.emplace = function(t3, e3, r2) {
            var n2 = 2 * t3;
            return this.int16[n2 + 0] = e3, this.int16[n2 + 1] = r2, t3;
          }, e2;
        }(qn);
        Gn.prototype.bytesPerElement = 4, sn("StructArrayLayout2i4", Gn);
        var Xn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2) {
            var i2 = this.length;
            return this.resize(i2 + 1), this.emplace(i2, t3, e3, r2, n2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2) {
            var a2 = 4 * t3;
            return this.int16[a2 + 0] = e3, this.int16[a2 + 1] = r2, this.int16[a2 + 2] = n2, this.int16[a2 + 3] = i2, t3;
          }, e2;
        }(qn);
        Xn.prototype.bytesPerElement = 8, sn("StructArrayLayout4i8", Xn);
        var Zn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2) {
            var o2 = this.length;
            return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i2, a2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2) {
            var s2 = 6 * t3;
            return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.int16[s2 + 2] = n2, this.int16[s2 + 3] = i2, this.int16[s2 + 4] = a2, this.int16[s2 + 5] = o2, t3;
          }, e2;
        }(qn);
        Zn.prototype.bytesPerElement = 12, sn("StructArrayLayout2i4i12", Zn);
        var Hn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2) {
            var u2 = this.length;
            return this.resize(u2 + 1), this.emplace(u2, t3, e3, r2, n2, i2, a2, o2, s2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2) {
            var l2 = 6 * t3, p2 = 12 * t3;
            return this.int16[l2 + 0] = e3, this.int16[l2 + 1] = r2, this.int16[l2 + 2] = n2, this.int16[l2 + 3] = i2, this.uint8[p2 + 8] = a2, this.uint8[p2 + 9] = o2, this.uint8[p2 + 10] = s2, this.uint8[p2 + 11] = u2, t3;
          }, e2;
        }(qn);
        Hn.prototype.bytesPerElement = 12, sn("StructArrayLayout4i4ub12", Hn);
        var Yn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2) {
            var u2 = this.length;
            return this.resize(u2 + 1), this.emplace(u2, t3, e3, r2, n2, i2, a2, o2, s2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2) {
            var l2 = 8 * t3;
            return this.uint16[l2 + 0] = e3, this.uint16[l2 + 1] = r2, this.uint16[l2 + 2] = n2, this.uint16[l2 + 3] = i2, this.uint16[l2 + 4] = a2, this.uint16[l2 + 5] = o2, this.uint16[l2 + 6] = s2, this.uint16[l2 + 7] = u2, t3;
          }, e2;
        }(qn);
        Yn.prototype.bytesPerElement = 16, sn("StructArrayLayout8ui16", Yn);
        var Jn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2) {
            var u2 = this.length;
            return this.resize(u2 + 1), this.emplace(u2, t3, e3, r2, n2, i2, a2, o2, s2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2) {
            var l2 = 8 * t3;
            return this.int16[l2 + 0] = e3, this.int16[l2 + 1] = r2, this.int16[l2 + 2] = n2, this.int16[l2 + 3] = i2, this.uint16[l2 + 4] = a2, this.uint16[l2 + 5] = o2, this.uint16[l2 + 6] = s2, this.uint16[l2 + 7] = u2, t3;
          }, e2;
        }(qn);
        Jn.prototype.bytesPerElement = 16, sn("StructArrayLayout4i4ui16", Jn);
        var $n = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2) {
            var n2 = this.length;
            return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2) {
            var i2 = 3 * t3;
            return this.float32[i2 + 0] = e3, this.float32[i2 + 1] = r2, this.float32[i2 + 2] = n2, t3;
          }, e2;
        }(qn);
        $n.prototype.bytesPerElement = 12, sn("StructArrayLayout3f12", $n);
        var Wn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3) {
            var e3 = this.length;
            return this.resize(e3 + 1), this.emplace(e3, t3);
          }, e2.prototype.emplace = function(t3, e3) {
            var r2 = 1 * t3;
            return this.uint32[r2 + 0] = e3, t3;
          }, e2;
        }(qn);
        Wn.prototype.bytesPerElement = 4, sn("StructArrayLayout1ul4", Wn);
        var Qn = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2) {
            var c2 = this.length;
            return this.resize(c2 + 1), this.emplace(c2, t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2) {
            var h2 = 12 * t3, f2 = 6 * t3;
            return this.int16[h2 + 0] = e3, this.int16[h2 + 1] = r2, this.int16[h2 + 2] = n2, this.int16[h2 + 3] = i2, this.int16[h2 + 4] = a2, this.int16[h2 + 5] = o2, this.uint32[f2 + 3] = s2, this.uint16[h2 + 8] = u2, this.uint16[h2 + 9] = l2, this.int16[h2 + 10] = p2, this.int16[h2 + 11] = c2, t3;
          }, e2;
        }(qn);
        Qn.prototype.bytesPerElement = 24, sn("StructArrayLayout6i1ul2ui2i24", Qn);
        var ti = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2) {
            var o2 = this.length;
            return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i2, a2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2) {
            var s2 = 6 * t3;
            return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.int16[s2 + 2] = n2, this.int16[s2 + 3] = i2, this.int16[s2 + 4] = a2, this.int16[s2 + 5] = o2, t3;
          }, e2;
        }(qn);
        ti.prototype.bytesPerElement = 12, sn("StructArrayLayout2i2i2i12", ti);
        var ei = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3) {
            var r2 = this.length;
            return this.resize(r2 + 1), this.emplace(r2, t3, e3);
          }, e2.prototype.emplace = function(t3, e3, r2) {
            var n2 = 4 * t3;
            return this.uint8[n2 + 0] = e3, this.uint8[n2 + 1] = r2, t3;
          }, e2;
        }(qn);
        ei.prototype.bytesPerElement = 4, sn("StructArrayLayout2ub4", ei);
        var ri = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2) {
            var y2 = this.length;
            return this.resize(y2 + 1), this.emplace(y2, t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2, y2) {
            var d2 = 20 * t3, m2 = 10 * t3, v2 = 40 * t3;
            return this.int16[d2 + 0] = e3, this.int16[d2 + 1] = r2, this.uint16[d2 + 2] = n2, this.uint16[d2 + 3] = i2, this.uint32[m2 + 2] = a2, this.uint32[m2 + 3] = o2, this.uint32[m2 + 4] = s2, this.uint16[d2 + 10] = u2, this.uint16[d2 + 11] = l2, this.uint16[d2 + 12] = p2, this.float32[m2 + 7] = c2, this.float32[m2 + 8] = h2, this.uint8[v2 + 36] = f2, this.uint8[v2 + 37] = y2, t3;
          }, e2;
        }(qn);
        ri.prototype.bytesPerElement = 40, sn("StructArrayLayout2i2ui3ul3ui2f2ub40", ri);
        var ni = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2) {
            var y2 = this.length;
            return this.resize(y2 + 1), this.emplace(y2, t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2, y2) {
            var d2 = 16 * t3, m2 = 8 * t3;
            return this.int16[d2 + 0] = e3, this.int16[d2 + 1] = r2, this.int16[d2 + 2] = n2, this.int16[d2 + 3] = i2, this.uint16[d2 + 4] = a2, this.uint16[d2 + 5] = o2, this.uint16[d2 + 6] = s2, this.uint16[d2 + 7] = u2, this.uint16[d2 + 8] = l2, this.uint16[d2 + 9] = p2, this.uint16[d2 + 10] = c2, this.uint16[d2 + 11] = h2, this.uint16[d2 + 12] = f2, this.uint32[m2 + 7] = y2, t3;
          }, e2;
        }(qn);
        ni.prototype.bytesPerElement = 32, sn("StructArrayLayout4i9ui1ul32", ni);
        var ii = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3) {
            var e3 = this.length;
            return this.resize(e3 + 1), this.emplace(e3, t3);
          }, e2.prototype.emplace = function(t3, e3) {
            var r2 = 1 * t3;
            return this.float32[r2 + 0] = e3, t3;
          }, e2;
        }(qn);
        ii.prototype.bytesPerElement = 4, sn("StructArrayLayout1f4", ii);
        var ai = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2) {
            var n2 = this.length;
            return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2) {
            var i2 = 3 * t3;
            return this.int16[i2 + 0] = e3, this.int16[i2 + 1] = r2, this.int16[i2 + 2] = n2, t3;
          }, e2;
        }(qn);
        ai.prototype.bytesPerElement = 6, sn("StructArrayLayout3i6", ai);
        var oi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2) {
            var n2 = this.length;
            return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2) {
            var i2 = 2 * t3, a2 = 4 * t3;
            return this.uint32[i2 + 0] = e3, this.uint16[a2 + 2] = r2, this.uint16[a2 + 3] = n2, t3;
          }, e2;
        }(qn);
        oi.prototype.bytesPerElement = 8, sn("StructArrayLayout1ul2ui8", oi);
        var si = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2) {
            var n2 = this.length;
            return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2) {
            var i2 = 3 * t3;
            return this.uint16[i2 + 0] = e3, this.uint16[i2 + 1] = r2, this.uint16[i2 + 2] = n2, t3;
          }, e2;
        }(qn);
        si.prototype.bytesPerElement = 6, sn("StructArrayLayout3ui6", si);
        var ui = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3) {
            var r2 = this.length;
            return this.resize(r2 + 1), this.emplace(r2, t3, e3);
          }, e2.prototype.emplace = function(t3, e3, r2) {
            var n2 = 2 * t3;
            return this.uint16[n2 + 0] = e3, this.uint16[n2 + 1] = r2, t3;
          }, e2;
        }(qn);
        ui.prototype.bytesPerElement = 4, sn("StructArrayLayout2ui4", ui);
        var li = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3) {
            var e3 = this.length;
            return this.resize(e3 + 1), this.emplace(e3, t3);
          }, e2.prototype.emplace = function(t3, e3) {
            var r2 = 1 * t3;
            return this.uint16[r2 + 0] = e3, t3;
          }, e2;
        }(qn);
        li.prototype.bytesPerElement = 2, sn("StructArrayLayout1ui2", li);
        var pi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3) {
            var r2 = this.length;
            return this.resize(r2 + 1), this.emplace(r2, t3, e3);
          }, e2.prototype.emplace = function(t3, e3, r2) {
            var n2 = 2 * t3;
            return this.float32[n2 + 0] = e3, this.float32[n2 + 1] = r2, t3;
          }, e2;
        }(qn);
        pi.prototype.bytesPerElement = 8, sn("StructArrayLayout2f8", pi);
        var ci = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._refreshViews = function() {
            this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
          }, e2.prototype.emplaceBack = function(t3, e3, r2, n2) {
            var i2 = this.length;
            return this.resize(i2 + 1), this.emplace(i2, t3, e3, r2, n2);
          }, e2.prototype.emplace = function(t3, e3, r2, n2, i2) {
            var a2 = 4 * t3;
            return this.float32[a2 + 0] = e3, this.float32[a2 + 1] = r2, this.float32[a2 + 2] = n2, this.float32[a2 + 3] = i2, t3;
          }, e2;
        }(qn);
        ci.prototype.bytesPerElement = 16, sn("StructArrayLayout4f16", ci);
        var hi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { anchorPointX: { configurable: true }, anchorPointY: { configurable: true }, x1: { configurable: true }, y1: { configurable: true }, x2: { configurable: true }, y2: { configurable: true }, featureIndex: { configurable: true }, sourceLayerIndex: { configurable: true }, bucketIndex: { configurable: true }, radius: { configurable: true }, signedDistanceFromAnchor: { configurable: true }, anchorPoint: { configurable: true } };
          return r2.anchorPointX.get = function() {
            return this._structArray.int16[this._pos2 + 0];
          }, r2.anchorPointX.set = function(t3) {
            this._structArray.int16[this._pos2 + 0] = t3;
          }, r2.anchorPointY.get = function() {
            return this._structArray.int16[this._pos2 + 1];
          }, r2.anchorPointY.set = function(t3) {
            this._structArray.int16[this._pos2 + 1] = t3;
          }, r2.x1.get = function() {
            return this._structArray.int16[this._pos2 + 2];
          }, r2.x1.set = function(t3) {
            this._structArray.int16[this._pos2 + 2] = t3;
          }, r2.y1.get = function() {
            return this._structArray.int16[this._pos2 + 3];
          }, r2.y1.set = function(t3) {
            this._structArray.int16[this._pos2 + 3] = t3;
          }, r2.x2.get = function() {
            return this._structArray.int16[this._pos2 + 4];
          }, r2.x2.set = function(t3) {
            this._structArray.int16[this._pos2 + 4] = t3;
          }, r2.y2.get = function() {
            return this._structArray.int16[this._pos2 + 5];
          }, r2.y2.set = function(t3) {
            this._structArray.int16[this._pos2 + 5] = t3;
          }, r2.featureIndex.get = function() {
            return this._structArray.uint32[this._pos4 + 3];
          }, r2.featureIndex.set = function(t3) {
            this._structArray.uint32[this._pos4 + 3] = t3;
          }, r2.sourceLayerIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 8];
          }, r2.sourceLayerIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 8] = t3;
          }, r2.bucketIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 9];
          }, r2.bucketIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 9] = t3;
          }, r2.radius.get = function() {
            return this._structArray.int16[this._pos2 + 10];
          }, r2.radius.set = function(t3) {
            this._structArray.int16[this._pos2 + 10] = t3;
          }, r2.signedDistanceFromAnchor.get = function() {
            return this._structArray.int16[this._pos2 + 11];
          }, r2.signedDistanceFromAnchor.set = function(t3) {
            this._structArray.int16[this._pos2 + 11] = t3;
          }, r2.anchorPoint.get = function() {
            return new i(this.anchorPointX, this.anchorPointY);
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        hi.prototype.size = 24;
        var fi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.get = function(t3) {
            return new hi(this, t3);
          }, e2;
        }(Qn);
        sn("CollisionBoxArray", fi);
        var yi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { anchorX: { configurable: true }, anchorY: { configurable: true }, glyphStartIndex: { configurable: true }, numGlyphs: { configurable: true }, vertexStartIndex: { configurable: true }, lineStartIndex: { configurable: true }, lineLength: { configurable: true }, segment: { configurable: true }, lowerSize: { configurable: true }, upperSize: { configurable: true }, lineOffsetX: { configurable: true }, lineOffsetY: { configurable: true }, writingMode: { configurable: true }, hidden: { configurable: true } };
          return r2.anchorX.get = function() {
            return this._structArray.int16[this._pos2 + 0];
          }, r2.anchorX.set = function(t3) {
            this._structArray.int16[this._pos2 + 0] = t3;
          }, r2.anchorY.get = function() {
            return this._structArray.int16[this._pos2 + 1];
          }, r2.anchorY.set = function(t3) {
            this._structArray.int16[this._pos2 + 1] = t3;
          }, r2.glyphStartIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 2];
          }, r2.glyphStartIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 2] = t3;
          }, r2.numGlyphs.get = function() {
            return this._structArray.uint16[this._pos2 + 3];
          }, r2.numGlyphs.set = function(t3) {
            this._structArray.uint16[this._pos2 + 3] = t3;
          }, r2.vertexStartIndex.get = function() {
            return this._structArray.uint32[this._pos4 + 2];
          }, r2.vertexStartIndex.set = function(t3) {
            this._structArray.uint32[this._pos4 + 2] = t3;
          }, r2.lineStartIndex.get = function() {
            return this._structArray.uint32[this._pos4 + 3];
          }, r2.lineStartIndex.set = function(t3) {
            this._structArray.uint32[this._pos4 + 3] = t3;
          }, r2.lineLength.get = function() {
            return this._structArray.uint32[this._pos4 + 4];
          }, r2.lineLength.set = function(t3) {
            this._structArray.uint32[this._pos4 + 4] = t3;
          }, r2.segment.get = function() {
            return this._structArray.uint16[this._pos2 + 10];
          }, r2.segment.set = function(t3) {
            this._structArray.uint16[this._pos2 + 10] = t3;
          }, r2.lowerSize.get = function() {
            return this._structArray.uint16[this._pos2 + 11];
          }, r2.lowerSize.set = function(t3) {
            this._structArray.uint16[this._pos2 + 11] = t3;
          }, r2.upperSize.get = function() {
            return this._structArray.uint16[this._pos2 + 12];
          }, r2.upperSize.set = function(t3) {
            this._structArray.uint16[this._pos2 + 12] = t3;
          }, r2.lineOffsetX.get = function() {
            return this._structArray.float32[this._pos4 + 7];
          }, r2.lineOffsetX.set = function(t3) {
            this._structArray.float32[this._pos4 + 7] = t3;
          }, r2.lineOffsetY.get = function() {
            return this._structArray.float32[this._pos4 + 8];
          }, r2.lineOffsetY.set = function(t3) {
            this._structArray.float32[this._pos4 + 8] = t3;
          }, r2.writingMode.get = function() {
            return this._structArray.uint8[this._pos1 + 36];
          }, r2.writingMode.set = function(t3) {
            this._structArray.uint8[this._pos1 + 36] = t3;
          }, r2.hidden.get = function() {
            return this._structArray.uint8[this._pos1 + 37];
          }, r2.hidden.set = function(t3) {
            this._structArray.uint8[this._pos1 + 37] = t3;
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        yi.prototype.size = 40;
        var di = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.get = function(t3) {
            return new yi(this, t3);
          }, e2;
        }(ri);
        sn("PlacedSymbolArray", di);
        var mi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { anchorX: { configurable: true }, anchorY: { configurable: true }, horizontalPlacedTextSymbolIndex: { configurable: true }, verticalPlacedTextSymbolIndex: { configurable: true }, key: { configurable: true }, textBoxStartIndex: { configurable: true }, textBoxEndIndex: { configurable: true }, iconBoxStartIndex: { configurable: true }, iconBoxEndIndex: { configurable: true }, featureIndex: { configurable: true }, numGlyphVertices: { configurable: true }, numVerticalGlyphVertices: { configurable: true }, numIconVertices: { configurable: true }, crossTileID: { configurable: true } };
          return r2.anchorX.get = function() {
            return this._structArray.int16[this._pos2 + 0];
          }, r2.anchorX.set = function(t3) {
            this._structArray.int16[this._pos2 + 0] = t3;
          }, r2.anchorY.get = function() {
            return this._structArray.int16[this._pos2 + 1];
          }, r2.anchorY.set = function(t3) {
            this._structArray.int16[this._pos2 + 1] = t3;
          }, r2.horizontalPlacedTextSymbolIndex.get = function() {
            return this._structArray.int16[this._pos2 + 2];
          }, r2.horizontalPlacedTextSymbolIndex.set = function(t3) {
            this._structArray.int16[this._pos2 + 2] = t3;
          }, r2.verticalPlacedTextSymbolIndex.get = function() {
            return this._structArray.int16[this._pos2 + 3];
          }, r2.verticalPlacedTextSymbolIndex.set = function(t3) {
            this._structArray.int16[this._pos2 + 3] = t3;
          }, r2.key.get = function() {
            return this._structArray.uint16[this._pos2 + 4];
          }, r2.key.set = function(t3) {
            this._structArray.uint16[this._pos2 + 4] = t3;
          }, r2.textBoxStartIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 5];
          }, r2.textBoxStartIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 5] = t3;
          }, r2.textBoxEndIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 6];
          }, r2.textBoxEndIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 6] = t3;
          }, r2.iconBoxStartIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 7];
          }, r2.iconBoxStartIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 7] = t3;
          }, r2.iconBoxEndIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 8];
          }, r2.iconBoxEndIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 8] = t3;
          }, r2.featureIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 9];
          }, r2.featureIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 9] = t3;
          }, r2.numGlyphVertices.get = function() {
            return this._structArray.uint16[this._pos2 + 10];
          }, r2.numGlyphVertices.set = function(t3) {
            this._structArray.uint16[this._pos2 + 10] = t3;
          }, r2.numVerticalGlyphVertices.get = function() {
            return this._structArray.uint16[this._pos2 + 11];
          }, r2.numVerticalGlyphVertices.set = function(t3) {
            this._structArray.uint16[this._pos2 + 11] = t3;
          }, r2.numIconVertices.get = function() {
            return this._structArray.uint16[this._pos2 + 12];
          }, r2.numIconVertices.set = function(t3) {
            this._structArray.uint16[this._pos2 + 12] = t3;
          }, r2.crossTileID.get = function() {
            return this._structArray.uint32[this._pos4 + 7];
          }, r2.crossTileID.set = function(t3) {
            this._structArray.uint32[this._pos4 + 7] = t3;
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        mi.prototype.size = 32;
        var vi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.get = function(t3) {
            return new mi(this, t3);
          }, e2;
        }(ni);
        sn("SymbolInstanceArray", vi);
        var gi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { offsetX: { configurable: true } };
          return r2.offsetX.get = function() {
            return this._structArray.float32[this._pos4 + 0];
          }, r2.offsetX.set = function(t3) {
            this._structArray.float32[this._pos4 + 0] = t3;
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        gi.prototype.size = 4;
        var xi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getoffsetX = function(t3) {
            return this.float32[1 * t3 + 0];
          }, e2.prototype.get = function(t3) {
            return new gi(this, t3);
          }, e2;
        }(ii);
        sn("GlyphOffsetArray", xi);
        var bi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { x: { configurable: true }, y: { configurable: true }, tileUnitDistanceFromAnchor: { configurable: true } };
          return r2.x.get = function() {
            return this._structArray.int16[this._pos2 + 0];
          }, r2.x.set = function(t3) {
            this._structArray.int16[this._pos2 + 0] = t3;
          }, r2.y.get = function() {
            return this._structArray.int16[this._pos2 + 1];
          }, r2.y.set = function(t3) {
            this._structArray.int16[this._pos2 + 1] = t3;
          }, r2.tileUnitDistanceFromAnchor.get = function() {
            return this._structArray.int16[this._pos2 + 2];
          }, r2.tileUnitDistanceFromAnchor.set = function(t3) {
            this._structArray.int16[this._pos2 + 2] = t3;
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        bi.prototype.size = 6;
        var _i = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getx = function(t3) {
            return this.int16[3 * t3 + 0];
          }, e2.prototype.gety = function(t3) {
            return this.int16[3 * t3 + 1];
          }, e2.prototype.gettileUnitDistanceFromAnchor = function(t3) {
            return this.int16[3 * t3 + 2];
          }, e2.prototype.get = function(t3) {
            return new bi(this, t3);
          }, e2;
        }(ai);
        sn("SymbolLineVertexArray", _i);
        var wi = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var r2 = { featureIndex: { configurable: true }, sourceLayerIndex: { configurable: true }, bucketIndex: { configurable: true } };
          return r2.featureIndex.get = function() {
            return this._structArray.uint32[this._pos4 + 0];
          }, r2.featureIndex.set = function(t3) {
            this._structArray.uint32[this._pos4 + 0] = t3;
          }, r2.sourceLayerIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 2];
          }, r2.sourceLayerIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 2] = t3;
          }, r2.bucketIndex.get = function() {
            return this._structArray.uint16[this._pos2 + 3];
          }, r2.bucketIndex.set = function(t3) {
            this._structArray.uint16[this._pos2 + 3] = t3;
          }, Object.defineProperties(e2.prototype, r2), e2;
        }(Rn);
        wi.prototype.size = 8;
        var Ai = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.get = function(t3) {
            return new wi(this, t3);
          }, e2;
        }(oi);
        sn("FeatureIndexArray", Ai);
        var Si = Nn([{ name: "a_pos", components: 2, type: "Int16" }], 4), ki = Si.members, zi = (Si.size, Si.alignment, function(t2) {
          void 0 === t2 && (t2 = []), this.segments = t2;
        });
        function Ii(t2, e2) {
          return 256 * (t2 = l(Math.floor(t2), 0, 255)) + (e2 = l(Math.floor(e2), 0, 255));
        }
        zi.prototype.prepareSegment = function(t2, e2, r2, n2) {
          var i2 = this.segments[this.segments.length - 1];
          return t2 > zi.MAX_VERTEX_ARRAY_LENGTH && w("Max vertices per segment is " + zi.MAX_VERTEX_ARRAY_LENGTH + ": bucket requested " + t2), (!i2 || i2.vertexLength + t2 > zi.MAX_VERTEX_ARRAY_LENGTH || i2.sortKey !== n2) && (i2 = { vertexOffset: e2.length, primitiveOffset: r2.length, vertexLength: 0, primitiveLength: 0 }, void 0 !== n2 && (i2.sortKey = n2), this.segments.push(i2)), i2;
        }, zi.prototype.get = function() {
          return this.segments;
        }, zi.prototype.destroy = function() {
          for (var t2 = 0, e2 = this.segments; t2 < e2.length; t2 += 1) {
            var r2 = e2[t2];
            for (var n2 in r2.vaos)
              r2.vaos[n2].destroy();
          }
        }, zi.simpleSegment = function(t2, e2, r2, n2) {
          return new zi([{ vertexOffset: t2, primitiveOffset: e2, vertexLength: r2, primitiveLength: n2, vaos: {}, sortKey: 0 }]);
        }, zi.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, sn("SegmentVector", zi);
        var Bi = function() {
          this.ids = [], this.positions = [], this.indexed = false;
        };
        function Ei(t2, e2, r2) {
          var n2 = t2[e2];
          t2[e2] = t2[r2], t2[r2] = n2;
        }
        Bi.prototype.add = function(t2, e2, r2, n2) {
          this.ids.push(t2), this.positions.push(e2, r2, n2);
        }, Bi.prototype.getPositions = function(t2) {
          for (var e2 = 0, r2 = this.ids.length - 1; e2 < r2; ) {
            var n2 = e2 + r2 >> 1;
            this.ids[n2] >= t2 ? r2 = n2 : e2 = n2 + 1;
          }
          for (var i2 = []; this.ids[e2] === t2; ) {
            var a2 = this.positions[3 * e2], o2 = this.positions[3 * e2 + 1], s2 = this.positions[3 * e2 + 2];
            i2.push({ index: a2, start: o2, end: s2 }), e2++;
          }
          return i2;
        }, Bi.serialize = function(t2, e2) {
          var r2 = new Float64Array(t2.ids), n2 = new Uint32Array(t2.positions);
          return function t3(e3, r3, n3, i2) {
            if (n3 >= i2)
              return;
            var a2 = e3[n3 + i2 >> 1];
            var o2 = n3 - 1;
            var s2 = i2 + 1;
            for (; ; ) {
              do {
                o2++;
              } while (e3[o2] < a2);
              do {
                s2--;
              } while (e3[s2] > a2);
              if (o2 >= s2)
                break;
              Ei(e3, o2, s2), Ei(r3, 3 * o2, 3 * s2), Ei(r3, 3 * o2 + 1, 3 * s2 + 1), Ei(r3, 3 * o2 + 2, 3 * s2 + 2);
            }
            t3(e3, r3, n3, s2);
            t3(e3, r3, s2 + 1, i2);
          }(r2, n2, 0, r2.length - 1), e2.push(r2.buffer, n2.buffer), { ids: r2, positions: n2 };
        }, Bi.deserialize = function(t2) {
          var e2 = new Bi();
          return e2.ids = t2.ids, e2.positions = t2.positions, e2.indexed = true, e2;
        }, sn("FeaturePositionMap", Bi);
        var Pi = function(t2, e2) {
          this.gl = t2.gl, this.location = e2;
        }, Vi = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = 0;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            this.current !== t3 && (this.current = t3, this.gl.uniform1i(this.location, t3));
          }, e2;
        }(Pi), Ci = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = 0;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            this.current !== t3 && (this.current = t3, this.gl.uniform1f(this.location, t3));
          }, e2;
        }(Pi), Mi = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = [0, 0];
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            t3[0] === this.current[0] && t3[1] === this.current[1] || (this.current = t3, this.gl.uniform2f(this.location, t3[0], t3[1]));
          }, e2;
        }(Pi), Ti = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = [0, 0, 0];
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            t3[0] === this.current[0] && t3[1] === this.current[1] && t3[2] === this.current[2] || (this.current = t3, this.gl.uniform3f(this.location, t3[0], t3[1], t3[2]));
          }, e2;
        }(Pi), Fi = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = [0, 0, 0, 0];
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            t3[0] === this.current[0] && t3[1] === this.current[1] && t3[2] === this.current[2] && t3[3] === this.current[3] || (this.current = t3, this.gl.uniform4f(this.location, t3[0], t3[1], t3[2], t3[3]));
          }, e2;
        }(Pi), Li = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = Dt.transparent;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            t3.r === this.current.r && t3.g === this.current.g && t3.b === this.current.b && t3.a === this.current.a || (this.current = t3, this.gl.uniform4f(this.location, t3.r, t3.g, t3.b, t3.a));
          }, e2;
        }(Pi), Oi = new Float32Array(16), Di = function(t2) {
          function e2(e3, r2) {
            t2.call(this, e3, r2), this.current = Oi;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            if (t3[12] !== this.current[12] || t3[0] !== this.current[0])
              return this.current = t3, void this.gl.uniformMatrix4fv(this.location, false, t3);
            for (var e3 = 1; e3 < 16; e3++)
              if (t3[e3] !== this.current[e3]) {
                this.current = t3, this.gl.uniformMatrix4fv(this.location, false, t3);
                break;
              }
          }, e2;
        }(Pi);
        function Ui(t2) {
          return [Ii(255 * t2.r, 255 * t2.g), Ii(255 * t2.b, 255 * t2.a)];
        }
        var ji = function(t2, e2, r2) {
          this.value = t2, this.names = e2, this.uniformNames = this.names.map(function(t3) {
            return "u_" + t3;
          }), this.type = r2, this.maxValue = -1 / 0;
        };
        ji.prototype.defines = function() {
          return this.names.map(function(t2) {
            return "#define HAS_UNIFORM_u_" + t2;
          });
        }, ji.prototype.setConstantPatternPositions = function() {
        }, ji.prototype.populatePaintArray = function() {
        }, ji.prototype.updatePaintArray = function() {
        }, ji.prototype.upload = function() {
        }, ji.prototype.destroy = function() {
        }, ji.prototype.setUniforms = function(t2, e2, r2, n2) {
          e2.set(n2.constantOr(this.value));
        }, ji.prototype.getBinding = function(t2, e2) {
          return "color" === this.type ? new Li(t2, e2) : new Ci(t2, e2);
        }, ji.serialize = function(t2) {
          var e2 = t2.value, r2 = t2.names, n2 = t2.type;
          return { value: ln(e2), names: r2, type: n2 };
        }, ji.deserialize = function(t2) {
          var e2 = t2.value, r2 = t2.names, n2 = t2.type;
          return new ji(pn(e2), r2, n2);
        };
        var Ri = function(t2, e2, r2) {
          this.value = t2, this.names = e2, this.uniformNames = this.names.map(function(t3) {
            return "u_" + t3;
          }), this.type = r2, this.maxValue = -1 / 0, this.patternPositions = { patternTo: null, patternFrom: null };
        };
        Ri.prototype.defines = function() {
          return this.names.map(function(t2) {
            return "#define HAS_UNIFORM_u_" + t2;
          });
        }, Ri.prototype.populatePaintArray = function() {
        }, Ri.prototype.updatePaintArray = function() {
        }, Ri.prototype.upload = function() {
        }, Ri.prototype.destroy = function() {
        }, Ri.prototype.setConstantPatternPositions = function(t2, e2) {
          this.patternPositions.patternTo = t2.tlbr, this.patternPositions.patternFrom = e2.tlbr;
        }, Ri.prototype.setUniforms = function(t2, e2, r2, n2, i2) {
          var a2 = this.patternPositions;
          "u_pattern_to" === i2 && a2.patternTo && e2.set(a2.patternTo), "u_pattern_from" === i2 && a2.patternFrom && e2.set(a2.patternFrom);
        }, Ri.prototype.getBinding = function(t2, e2) {
          return new Fi(t2, e2);
        };
        var qi = function(t2, e2, r2, n2) {
          this.expression = t2, this.names = e2, this.type = r2, this.uniformNames = this.names.map(function(t3) {
            return "a_" + t3;
          }), this.maxValue = -1 / 0, this.paintVertexAttributes = e2.map(function(t3) {
            return { name: "a_" + t3, type: "Float32", components: "color" === r2 ? 2 : 1, offset: 0 };
          }), this.paintVertexArray = new n2();
        };
        qi.prototype.defines = function() {
          return [];
        }, qi.prototype.setConstantPatternPositions = function() {
        }, qi.prototype.populatePaintArray = function(t2, e2) {
          var r2 = this.paintVertexArray, n2 = r2.length;
          r2.reserve(t2);
          var i2 = this.expression.evaluate(new Sn(0), e2, {});
          if ("color" === this.type)
            for (var a2 = Ui(i2), o2 = n2; o2 < t2; o2++)
              r2.emplaceBack(a2[0], a2[1]);
          else {
            for (var s2 = n2; s2 < t2; s2++)
              r2.emplaceBack(i2);
            this.maxValue = Math.max(this.maxValue, i2);
          }
        }, qi.prototype.updatePaintArray = function(t2, e2, r2, n2) {
          var i2 = this.paintVertexArray, a2 = this.expression.evaluate({ zoom: 0 }, r2, n2);
          if ("color" === this.type)
            for (var o2 = Ui(a2), s2 = t2; s2 < e2; s2++)
              i2.emplace(s2, o2[0], o2[1]);
          else {
            for (var u2 = t2; u2 < e2; u2++)
              i2.emplace(u2, a2);
            this.maxValue = Math.max(this.maxValue, a2);
          }
        }, qi.prototype.upload = function(t2) {
          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
        }, qi.prototype.destroy = function() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }, qi.prototype.setUniforms = function(t2, e2) {
          e2.set(0);
        }, qi.prototype.getBinding = function(t2, e2) {
          return new Ci(t2, e2);
        };
        var Ni = function(t2, e2, r2, n2, i2, a2) {
          this.expression = t2, this.names = e2, this.uniformNames = this.names.map(function(t3) {
            return "a_" + t3 + "_t";
          }), this.type = r2, this.useIntegerZoom = n2, this.zoom = i2, this.maxValue = -1 / 0;
          var o2 = a2;
          this.paintVertexAttributes = e2.map(function(t3) {
            return { name: "a_" + t3, type: "Float32", components: "color" === r2 ? 4 : 2, offset: 0 };
          }), this.paintVertexArray = new o2();
        };
        Ni.prototype.defines = function() {
          return [];
        }, Ni.prototype.setConstantPatternPositions = function() {
        }, Ni.prototype.populatePaintArray = function(t2, e2) {
          var r2 = this.paintVertexArray, n2 = r2.length;
          r2.reserve(t2);
          var i2 = this.expression.evaluate(new Sn(this.zoom), e2, {}), a2 = this.expression.evaluate(new Sn(this.zoom + 1), e2, {});
          if ("color" === this.type)
            for (var o2 = Ui(i2), s2 = Ui(a2), u2 = n2; u2 < t2; u2++)
              r2.emplaceBack(o2[0], o2[1], s2[0], s2[1]);
          else {
            for (var l2 = n2; l2 < t2; l2++)
              r2.emplaceBack(i2, a2);
            this.maxValue = Math.max(this.maxValue, i2, a2);
          }
        }, Ni.prototype.updatePaintArray = function(t2, e2, r2, n2) {
          var i2 = this.paintVertexArray, a2 = this.expression.evaluate({ zoom: this.zoom }, r2, n2), o2 = this.expression.evaluate({ zoom: this.zoom + 1 }, r2, n2);
          if ("color" === this.type)
            for (var s2 = Ui(a2), u2 = Ui(o2), l2 = t2; l2 < e2; l2++)
              i2.emplace(l2, s2[0], s2[1], u2[0], u2[1]);
          else {
            for (var p2 = t2; p2 < e2; p2++)
              i2.emplace(p2, a2, o2);
            this.maxValue = Math.max(this.maxValue, a2, o2);
          }
        }, Ni.prototype.upload = function(t2) {
          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
        }, Ni.prototype.destroy = function() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }, Ni.prototype.interpolationFactor = function(t2) {
          return this.useIntegerZoom ? this.expression.interpolationFactor(Math.floor(t2), this.zoom, this.zoom + 1) : this.expression.interpolationFactor(t2, this.zoom, this.zoom + 1);
        }, Ni.prototype.setUniforms = function(t2, e2, r2) {
          e2.set(this.interpolationFactor(r2.zoom));
        }, Ni.prototype.getBinding = function(t2, e2) {
          return new Ci(t2, e2);
        };
        var Ki = function(t2, e2, r2, n2, i2, a2, o2) {
          this.expression = t2, this.names = e2, this.type = r2, this.uniformNames = this.names.map(function(t3) {
            return "a_" + t3 + "_t";
          }), this.useIntegerZoom = n2, this.zoom = i2, this.maxValue = -1 / 0, this.layerId = o2, this.paintVertexAttributes = e2.map(function(t3) {
            return { name: "a_" + t3, type: "Uint16", components: 4, offset: 0 };
          }), this.zoomInPaintVertexArray = new a2(), this.zoomOutPaintVertexArray = new a2();
        };
        Ki.prototype.defines = function() {
          return [];
        }, Ki.prototype.setConstantPatternPositions = function() {
        }, Ki.prototype.populatePaintArray = function(t2, e2, r2) {
          var n2 = this.zoomInPaintVertexArray, i2 = this.zoomOutPaintVertexArray, a2 = this.layerId, o2 = n2.length;
          if (n2.reserve(t2), i2.reserve(t2), r2 && e2.patterns && e2.patterns[a2]) {
            var s2 = e2.patterns[a2], u2 = s2.min, l2 = s2.mid, p2 = s2.max, c2 = r2[u2], h2 = r2[l2], f2 = r2[p2];
            if (!c2 || !h2 || !f2)
              return;
            for (var y2 = o2; y2 < t2; y2++)
              n2.emplaceBack(h2.tl[0], h2.tl[1], h2.br[0], h2.br[1], c2.tl[0], c2.tl[1], c2.br[0], c2.br[1]), i2.emplaceBack(h2.tl[0], h2.tl[1], h2.br[0], h2.br[1], f2.tl[0], f2.tl[1], f2.br[0], f2.br[1]);
          }
        }, Ki.prototype.updatePaintArray = function(t2, e2, r2, n2, i2) {
          var a2 = this.zoomInPaintVertexArray, o2 = this.zoomOutPaintVertexArray, s2 = this.layerId;
          if (i2 && r2.patterns && r2.patterns[s2]) {
            var u2 = r2.patterns[s2], l2 = u2.min, p2 = u2.mid, c2 = u2.max, h2 = i2[l2], f2 = i2[p2], y2 = i2[c2];
            if (!h2 || !f2 || !y2)
              return;
            for (var d2 = t2; d2 < e2; d2++)
              a2.emplace(d2, f2.tl[0], f2.tl[1], f2.br[0], f2.br[1], h2.tl[0], h2.tl[1], h2.br[0], h2.br[1]), o2.emplace(d2, f2.tl[0], f2.tl[1], f2.br[0], f2.br[1], y2.tl[0], y2.tl[1], y2.br[0], y2.br[1]);
          }
        }, Ki.prototype.upload = function(t2) {
          this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t2.createVertexBuffer(this.zoomInPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t2.createVertexBuffer(this.zoomOutPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
        }, Ki.prototype.destroy = function() {
          this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();
        }, Ki.prototype.setUniforms = function(t2, e2) {
          e2.set(0);
        }, Ki.prototype.getBinding = function(t2, e2) {
          return new Ci(t2, e2);
        };
        var Gi = function() {
          this.binders = {}, this.cacheKey = "", this._buffers = [], this._featureMap = new Bi(), this._bufferOffset = 0;
        };
        Gi.createDynamic = function(t2, e2, r2) {
          var n2 = new Gi(), i2 = [];
          for (var a2 in t2.paint._values)
            if (r2(a2)) {
              var o2 = t2.paint.get(a2);
              if (o2 instanceof Vn && er(o2.property.specification)) {
                var s2 = Zi(a2, t2.type), u2 = o2.property.specification.type, l2 = o2.property.useIntegerZoom;
                if ("cross-faded" === o2.property.specification["property-type"] || "cross-faded-data-driven" === o2.property.specification["property-type"])
                  if ("constant" === o2.value.kind)
                    n2.binders[a2] = new Ri(o2.value.value, s2, u2), i2.push("/u_" + a2);
                  else {
                    var p2 = Hi(a2, u2, "source");
                    n2.binders[a2] = new Ki(o2.value, s2, u2, l2, e2, p2, t2.id), i2.push("/a_" + a2);
                  }
                else if ("constant" === o2.value.kind)
                  n2.binders[a2] = new ji(o2.value.value, s2, u2), i2.push("/u_" + a2);
                else if ("source" === o2.value.kind) {
                  var c2 = Hi(a2, u2, "source");
                  n2.binders[a2] = new qi(o2.value, s2, u2, c2), i2.push("/a_" + a2);
                } else {
                  var h2 = Hi(a2, u2, "composite");
                  n2.binders[a2] = new Ni(o2.value, s2, u2, l2, e2, h2), i2.push("/z_" + a2);
                }
              }
            }
          return n2.cacheKey = i2.sort().join(""), n2;
        }, Gi.prototype.populatePaintArrays = function(t2, e2, r2, n2) {
          for (var i2 in this.binders) {
            this.binders[i2].populatePaintArray(t2, e2, n2);
          }
          void 0 !== e2.id && this._featureMap.add(+e2.id, r2, this._bufferOffset, t2), this._bufferOffset = t2;
        }, Gi.prototype.setConstantPatternPositions = function(t2, e2) {
          for (var r2 in this.binders) {
            this.binders[r2].setConstantPatternPositions(t2, e2);
          }
        }, Gi.prototype.updatePaintArrays = function(t2, e2, r2, n2) {
          var i2 = false;
          for (var a2 in t2)
            for (var o2 = 0, s2 = this._featureMap.getPositions(+a2); o2 < s2.length; o2 += 1) {
              var u2 = s2[o2], l2 = e2.feature(u2.index);
              for (var p2 in this.binders) {
                var c2 = this.binders[p2];
                if (!(c2 instanceof ji || c2 instanceof Ri) && true === c2.expression.isStateDependent) {
                  var h2 = r2.paint.get(p2);
                  c2.expression = h2.value, c2.updatePaintArray(u2.start, u2.end, l2, t2[a2], n2), i2 = true;
                }
              }
            }
          return i2;
        }, Gi.prototype.defines = function() {
          var t2 = [];
          for (var e2 in this.binders)
            t2.push.apply(t2, this.binders[e2].defines());
          return t2;
        }, Gi.prototype.getPaintVertexBuffers = function() {
          return this._buffers;
        }, Gi.prototype.getUniforms = function(t2, e2) {
          var r2 = {};
          for (var n2 in this.binders)
            for (var i2 = this.binders[n2], a2 = 0, o2 = i2.uniformNames; a2 < o2.length; a2 += 1) {
              var s2 = o2[a2];
              r2[s2] = i2.getBinding(t2, e2[s2]);
            }
          return r2;
        }, Gi.prototype.setUniforms = function(t2, e2, r2, n2) {
          for (var i2 in this.binders)
            for (var a2 = this.binders[i2], o2 = 0, s2 = a2.uniformNames; o2 < s2.length; o2 += 1) {
              var u2 = s2[o2];
              a2.setUniforms(t2, e2[u2], n2, r2.get(i2), u2);
            }
        }, Gi.prototype.updatePatternPaintBuffers = function(t2) {
          var e2 = [];
          for (var r2 in this.binders) {
            var n2 = this.binders[r2];
            if (n2 instanceof Ki) {
              var i2 = 2 === t2.fromScale ? n2.zoomInPaintVertexBuffer : n2.zoomOutPaintVertexBuffer;
              i2 && e2.push(i2);
            } else
              (n2 instanceof qi || n2 instanceof Ni) && n2.paintVertexBuffer && e2.push(n2.paintVertexBuffer);
          }
          this._buffers = e2;
        }, Gi.prototype.upload = function(t2) {
          for (var e2 in this.binders)
            this.binders[e2].upload(t2);
          var r2 = [];
          for (var n2 in this.binders) {
            var i2 = this.binders[n2];
            (i2 instanceof qi || i2 instanceof Ni) && i2.paintVertexBuffer && r2.push(i2.paintVertexBuffer);
          }
          this._buffers = r2;
        }, Gi.prototype.destroy = function() {
          for (var t2 in this.binders)
            this.binders[t2].destroy();
        };
        var Xi = function(t2, e2, r2, n2) {
          void 0 === n2 && (n2 = function() {
            return true;
          }), this.programConfigurations = {};
          for (var i2 = 0, a2 = e2; i2 < a2.length; i2 += 1) {
            var o2 = a2[i2];
            this.programConfigurations[o2.id] = Gi.createDynamic(o2, r2, n2), this.programConfigurations[o2.id].layoutAttributes = t2;
          }
          this.needsUpload = false;
        };
        function Zi(t2, e2) {
          return { "text-opacity": ["opacity"], "icon-opacity": ["opacity"], "text-color": ["fill_color"], "icon-color": ["fill_color"], "text-halo-color": ["halo_color"], "icon-halo-color": ["halo_color"], "text-halo-blur": ["halo_blur"], "icon-halo-blur": ["halo_blur"], "text-halo-width": ["halo_width"], "icon-halo-width": ["halo_width"], "line-gap-width": ["gapwidth"], "line-pattern": ["pattern_to", "pattern_from"], "fill-pattern": ["pattern_to", "pattern_from"], "fill-extrusion-pattern": ["pattern_to", "pattern_from"] }[t2] || [t2.replace(e2 + "-", "").replace(/-/g, "_")];
        }
        function Hi(t2, e2, r2) {
          var n2 = { color: { source: pi, composite: ci }, number: { source: ii, composite: pi } }, i2 = function(t3) {
            return { "line-pattern": { source: Yn, composite: Yn }, "fill-pattern": { source: Yn, composite: Yn }, "fill-extrusion-pattern": { source: Yn, composite: Yn } }[t3];
          }(t2);
          return i2 && i2[r2] || n2[e2][r2];
        }
        Xi.prototype.populatePaintArrays = function(t2, e2, r2, n2) {
          for (var i2 in this.programConfigurations)
            this.programConfigurations[i2].populatePaintArrays(t2, e2, r2, n2);
          this.needsUpload = true;
        }, Xi.prototype.updatePaintArrays = function(t2, e2, r2, n2) {
          for (var i2 = 0, a2 = r2; i2 < a2.length; i2 += 1) {
            var o2 = a2[i2];
            this.needsUpload = this.programConfigurations[o2.id].updatePaintArrays(t2, e2, o2, n2) || this.needsUpload;
          }
        }, Xi.prototype.get = function(t2) {
          return this.programConfigurations[t2];
        }, Xi.prototype.upload = function(t2) {
          if (this.needsUpload) {
            for (var e2 in this.programConfigurations)
              this.programConfigurations[e2].upload(t2);
            this.needsUpload = false;
          }
        }, Xi.prototype.destroy = function() {
          for (var t2 in this.programConfigurations)
            this.programConfigurations[t2].destroy();
        }, sn("ConstantBinder", ji), sn("CrossFadedConstantBinder", Ri), sn("SourceExpressionBinder", qi), sn("CrossFadedCompositeBinder", Ki), sn("CompositeExpressionBinder", Ni), sn("ProgramConfiguration", Gi, { omit: ["_buffers"] }), sn("ProgramConfigurationSet", Xi);
        var Yi = 8192;
        var Ji, $i = (Ji = 16, { min: -1 * Math.pow(2, Ji - 1), max: Math.pow(2, Ji - 1) - 1 });
        function Wi(t2) {
          for (var e2 = Yi / t2.extent, r2 = t2.loadGeometry(), n2 = 0; n2 < r2.length; n2++)
            for (var i2 = r2[n2], a2 = 0; a2 < i2.length; a2++) {
              var o2 = i2[a2];
              o2.x = Math.round(o2.x * e2), o2.y = Math.round(o2.y * e2), (o2.x < $i.min || o2.x > $i.max || o2.y < $i.min || o2.y > $i.max) && w("Geometry exceeds allowed extent, reduce your vector tile buffer size");
            }
          return r2;
        }
        function Qi(t2, e2, r2, n2, i2) {
          t2.emplaceBack(2 * e2 + (n2 + 1) / 2, 2 * r2 + (i2 + 1) / 2);
        }
        var ta = function(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
            return t3.id;
          }), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new Gn(), this.indexArray = new si(), this.segments = new zi(), this.programConfigurations = new Xi(ki, t2.layers, t2.zoom), this.stateDependentLayerIds = this.layers.filter(function(t3) {
            return t3.isStateDependent();
          }).map(function(t3) {
            return t3.id;
          });
        };
        function ea(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            if (pa(e2, t2[r2]))
              return true;
          for (var n2 = 0; n2 < e2.length; n2++)
            if (pa(t2, e2[n2]))
              return true;
          return !!aa(t2, e2);
        }
        function ra(t2, e2, r2) {
          return !!pa(t2, e2) || !!sa(e2, t2, r2);
        }
        function na(t2, e2) {
          if (1 === t2.length)
            return la(e2, t2[0]);
          for (var r2 = 0; r2 < e2.length; r2++)
            for (var n2 = e2[r2], i2 = 0; i2 < n2.length; i2++)
              if (pa(t2, n2[i2]))
                return true;
          for (var a2 = 0; a2 < t2.length; a2++)
            if (la(e2, t2[a2]))
              return true;
          for (var o2 = 0; o2 < e2.length; o2++)
            if (aa(t2, e2[o2]))
              return true;
          return false;
        }
        function ia(t2, e2, r2) {
          if (t2.length > 1) {
            if (aa(t2, e2))
              return true;
            for (var n2 = 0; n2 < e2.length; n2++)
              if (sa(e2[n2], t2, r2))
                return true;
          }
          for (var i2 = 0; i2 < t2.length; i2++)
            if (sa(t2[i2], e2, r2))
              return true;
          return false;
        }
        function aa(t2, e2) {
          if (0 === t2.length || 0 === e2.length)
            return false;
          for (var r2 = 0; r2 < t2.length - 1; r2++)
            for (var n2 = t2[r2], i2 = t2[r2 + 1], a2 = 0; a2 < e2.length - 1; a2++) {
              if (oa(n2, i2, e2[a2], e2[a2 + 1]))
                return true;
            }
          return false;
        }
        function oa(t2, e2, r2, n2) {
          return A(t2, r2, n2) !== A(e2, r2, n2) && A(t2, e2, r2) !== A(t2, e2, n2);
        }
        function sa(t2, e2, r2) {
          var n2 = r2 * r2;
          if (1 === e2.length)
            return t2.distSqr(e2[0]) < n2;
          for (var i2 = 1; i2 < e2.length; i2++) {
            if (ua(t2, e2[i2 - 1], e2[i2]) < n2)
              return true;
          }
          return false;
        }
        function ua(t2, e2, r2) {
          var n2 = e2.distSqr(r2);
          if (0 === n2)
            return t2.distSqr(e2);
          var i2 = ((t2.x - e2.x) * (r2.x - e2.x) + (t2.y - e2.y) * (r2.y - e2.y)) / n2;
          return i2 < 0 ? t2.distSqr(e2) : i2 > 1 ? t2.distSqr(r2) : t2.distSqr(r2.sub(e2)._mult(i2)._add(e2));
        }
        function la(t2, e2) {
          for (var r2, n2, i2, a2 = false, o2 = 0; o2 < t2.length; o2++)
            for (var s2 = 0, u2 = (r2 = t2[o2]).length - 1; s2 < r2.length; u2 = s2++)
              n2 = r2[s2], i2 = r2[u2], n2.y > e2.y != i2.y > e2.y && e2.x < (i2.x - n2.x) * (e2.y - n2.y) / (i2.y - n2.y) + n2.x && (a2 = !a2);
          return a2;
        }
        function pa(t2, e2) {
          for (var r2 = false, n2 = 0, i2 = t2.length - 1; n2 < t2.length; i2 = n2++) {
            var a2 = t2[n2], o2 = t2[i2];
            a2.y > e2.y != o2.y > e2.y && e2.x < (o2.x - a2.x) * (e2.y - a2.y) / (o2.y - a2.y) + a2.x && (r2 = !r2);
          }
          return r2;
        }
        function ca(t2, e2, r2) {
          var n2 = r2[0], i2 = r2[2];
          if (t2.x < n2.x && e2.x < n2.x || t2.x > i2.x && e2.x > i2.x || t2.y < n2.y && e2.y < n2.y || t2.y > i2.y && e2.y > i2.y)
            return false;
          var a2 = A(t2, e2, r2[0]);
          return a2 !== A(t2, e2, r2[1]) || a2 !== A(t2, e2, r2[2]) || a2 !== A(t2, e2, r2[3]);
        }
        function ha(t2, e2, r2) {
          var n2 = e2.paint.get(t2).value;
          return "constant" === n2.kind ? n2.value : r2.programConfigurations.get(e2.id).binders[t2].maxValue;
        }
        function fa(t2) {
          return Math.sqrt(t2[0] * t2[0] + t2[1] * t2[1]);
        }
        function ya(t2, e2, r2, n2, a2) {
          if (!e2[0] && !e2[1])
            return t2;
          var o2 = i.convert(e2)._mult(a2);
          "viewport" === r2 && o2._rotate(-n2);
          for (var s2 = [], u2 = 0; u2 < t2.length; u2++) {
            var l2 = t2[u2];
            s2.push(l2.sub(o2));
          }
          return s2;
        }
        ta.prototype.populate = function(t2, e2) {
          for (var r2 = 0, n2 = t2; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.feature, o2 = i2.index, s2 = i2.sourceLayerIndex;
            if (this.layers[0]._featureFilter(new Sn(this.zoom), a2)) {
              var u2 = Wi(a2);
              this.addFeature(a2, u2, o2), e2.featureIndex.insert(a2, u2, o2, s2, this.index);
            }
          }
        }, ta.prototype.update = function(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }, ta.prototype.isEmpty = function() {
          return 0 === this.layoutVertexArray.length;
        }, ta.prototype.uploadPending = function() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }, ta.prototype.upload = function(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, ki), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }, ta.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
        }, ta.prototype.addFeature = function(t2, e2, r2) {
          for (var n2 = 0, i2 = e2; n2 < i2.length; n2 += 1)
            for (var a2 = 0, o2 = i2[n2]; a2 < o2.length; a2 += 1) {
              var s2 = o2[a2], u2 = s2.x, l2 = s2.y;
              if (!(u2 < 0 || u2 >= Yi || l2 < 0 || l2 >= Yi)) {
                var p2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray), c2 = p2.vertexLength;
                Qi(this.layoutVertexArray, u2, l2, -1, -1), Qi(this.layoutVertexArray, u2, l2, 1, -1), Qi(this.layoutVertexArray, u2, l2, 1, 1), Qi(this.layoutVertexArray, u2, l2, -1, 1), this.indexArray.emplaceBack(c2, c2 + 1, c2 + 2), this.indexArray.emplaceBack(c2, c2 + 3, c2 + 2), p2.vertexLength += 4, p2.primitiveLength += 2;
              }
            }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, {});
        }, sn("CircleBucket", ta, { omit: ["layers"] });
        var da = { paint: new Dn({ "circle-radius": new Tn(mt.paint_circle["circle-radius"]), "circle-color": new Tn(mt.paint_circle["circle-color"]), "circle-blur": new Tn(mt.paint_circle["circle-blur"]), "circle-opacity": new Tn(mt.paint_circle["circle-opacity"]), "circle-translate": new Mn(mt.paint_circle["circle-translate"]), "circle-translate-anchor": new Mn(mt.paint_circle["circle-translate-anchor"]), "circle-pitch-scale": new Mn(mt.paint_circle["circle-pitch-scale"]), "circle-pitch-alignment": new Mn(mt.paint_circle["circle-pitch-alignment"]), "circle-stroke-width": new Tn(mt.paint_circle["circle-stroke-width"]), "circle-stroke-color": new Tn(mt.paint_circle["circle-stroke-color"]), "circle-stroke-opacity": new Tn(mt.paint_circle["circle-stroke-opacity"]) }) }, ma = 1e-6, va = "undefined" != typeof Float32Array ? Float32Array : Array;
        Math.PI;
        function ga() {
          var t2 = new va(9);
          return va != Float32Array && (t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[5] = 0, t2[6] = 0, t2[7] = 0), t2[0] = 1, t2[4] = 1, t2[8] = 1, t2;
        }
        function xa() {
          var t2 = new va(3);
          return va != Float32Array && (t2[0] = 0, t2[1] = 0, t2[2] = 0), t2;
        }
        function ba(t2, e2, r2) {
          var n2 = new va(3);
          return n2[0] = t2, n2[1] = e2, n2[2] = r2, n2;
        }
        function _a(t2, e2, r2) {
          var n2 = e2[0], i2 = e2[1], a2 = e2[2], o2 = r2[0], s2 = r2[1], u2 = r2[2];
          return t2[0] = i2 * u2 - a2 * s2, t2[1] = a2 * o2 - n2 * u2, t2[2] = n2 * s2 - i2 * o2, t2;
        }
        var wa, Aa = function(t2) {
          var e2 = t2[0], r2 = t2[1], n2 = t2[2];
          return Math.sqrt(e2 * e2 + r2 * r2 + n2 * n2);
        };
        wa = xa();
        function Sa(t2, e2, r2) {
          var n2 = e2[0], i2 = e2[1], a2 = e2[2], o2 = e2[3];
          return t2[0] = r2[0] * n2 + r2[4] * i2 + r2[8] * a2 + r2[12] * o2, t2[1] = r2[1] * n2 + r2[5] * i2 + r2[9] * a2 + r2[13] * o2, t2[2] = r2[2] * n2 + r2[6] * i2 + r2[10] * a2 + r2[14] * o2, t2[3] = r2[3] * n2 + r2[7] * i2 + r2[11] * a2 + r2[15] * o2, t2;
        }
        !function() {
          var t2, e2 = (t2 = new va(4), va != Float32Array && (t2[0] = 0, t2[1] = 0, t2[2] = 0, t2[3] = 0), t2);
        }();
        function ka() {
          var t2 = new va(4);
          return va != Float32Array && (t2[0] = 0, t2[1] = 0, t2[2] = 0), t2[3] = 1, t2;
        }
        function za(t2, e2, r2, n2) {
          var i2, a2, o2, s2, u2, l2 = e2[0], p2 = e2[1], c2 = e2[2], h2 = e2[3], f2 = r2[0], y2 = r2[1], d2 = r2[2], m2 = r2[3];
          return (a2 = l2 * f2 + p2 * y2 + c2 * d2 + h2 * m2) < 0 && (a2 = -a2, f2 = -f2, y2 = -y2, d2 = -d2, m2 = -m2), 1 - a2 > ma ? (i2 = Math.acos(a2), o2 = Math.sin(i2), s2 = Math.sin((1 - n2) * i2) / o2, u2 = Math.sin(n2 * i2) / o2) : (s2 = 1 - n2, u2 = n2), t2[0] = s2 * l2 + u2 * f2, t2[1] = s2 * p2 + u2 * y2, t2[2] = s2 * c2 + u2 * d2, t2[3] = s2 * h2 + u2 * m2, t2;
        }
        var Ia, Ba, Ea, Pa, Va, Ca, Ma = function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = e2[2], a2 = e2[3], o2 = r2 * r2 + n2 * n2 + i2 * i2 + a2 * a2;
          return o2 > 0 && (o2 = 1 / Math.sqrt(o2)), t2[0] = r2 * o2, t2[1] = n2 * o2, t2[2] = i2 * o2, t2[3] = a2 * o2, t2;
        };
        Ia = xa(), Ba = ba(1, 0, 0), Ea = ba(0, 1, 0), Pa = ka(), Va = ka(), Ca = ga();
        !function() {
          var t2, e2 = (t2 = new va(2), va != Float32Array && (t2[0] = 0, t2[1] = 0), t2);
        }();
        var Ta = function(t2) {
          function e2(e3) {
            t2.call(this, e3, da);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.createBucket = function(t3) {
            return new ta(t3);
          }, e2.prototype.queryRadius = function(t3) {
            var e3 = t3;
            return ha("circle-radius", this, e3) + ha("circle-stroke-width", this, e3) + fa(this.paint.get("circle-translate"));
          }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, i2, a2, o2, s2) {
            for (var u2 = ya(t3, this.paint.get("circle-translate"), this.paint.get("circle-translate-anchor"), a2.angle, o2), l2 = this.paint.get("circle-radius").evaluate(e3, r2) + this.paint.get("circle-stroke-width").evaluate(e3, r2), p2 = "map" === this.paint.get("circle-pitch-alignment"), c2 = p2 ? u2 : function(t4, e4) {
              return t4.map(function(t5) {
                return Fa(t5, e4);
              });
            }(u2, s2), h2 = p2 ? l2 * o2 : l2, f2 = 0, y2 = n2; f2 < y2.length; f2 += 1)
              for (var d2 = 0, m2 = y2[f2]; d2 < m2.length; d2 += 1) {
                var v2 = m2[d2], g2 = p2 ? v2 : Fa(v2, s2), x2 = h2, b2 = Sa([], [v2.x, v2.y, 0, 1], s2);
                if ("viewport" === this.paint.get("circle-pitch-scale") && "map" === this.paint.get("circle-pitch-alignment") ? x2 *= b2[3] / a2.cameraToCenterDistance : "map" === this.paint.get("circle-pitch-scale") && "viewport" === this.paint.get("circle-pitch-alignment") && (x2 *= a2.cameraToCenterDistance / b2[3]), ra(c2, g2, x2))
                  return true;
              }
            return false;
          }, e2;
        }(Un);
        function Fa(t2, e2) {
          var r2 = Sa([], [t2.x, t2.y, 0, 1], e2);
          return new i(r2[0] / r2[3], r2[1] / r2[3]);
        }
        var La = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2;
        }(ta);
        function Oa(t2, e2, r2, n2) {
          var i2 = e2.width, a2 = e2.height;
          if (n2) {
            if (n2.length !== i2 * a2 * r2)
              throw new RangeError("mismatched image size");
          } else
            n2 = new Uint8Array(i2 * a2 * r2);
          return t2.width = i2, t2.height = a2, t2.data = n2, t2;
        }
        function Da(t2, e2, r2) {
          var n2 = e2.width, i2 = e2.height;
          if (n2 !== t2.width || i2 !== t2.height) {
            var a2 = Oa({}, { width: n2, height: i2 }, r2);
            Ua(t2, a2, { x: 0, y: 0 }, { x: 0, y: 0 }, { width: Math.min(t2.width, n2), height: Math.min(t2.height, i2) }, r2), t2.width = n2, t2.height = i2, t2.data = a2.data;
          }
        }
        function Ua(t2, e2, r2, n2, i2, a2) {
          if (0 === i2.width || 0 === i2.height)
            return e2;
          if (i2.width > t2.width || i2.height > t2.height || r2.x > t2.width - i2.width || r2.y > t2.height - i2.height)
            throw new RangeError("out of range source coordinates for image copy");
          if (i2.width > e2.width || i2.height > e2.height || n2.x > e2.width - i2.width || n2.y > e2.height - i2.height)
            throw new RangeError("out of range destination coordinates for image copy");
          for (var o2 = t2.data, s2 = e2.data, u2 = 0; u2 < i2.height; u2++)
            for (var l2 = ((r2.y + u2) * t2.width + r2.x) * a2, p2 = ((n2.y + u2) * e2.width + n2.x) * a2, c2 = 0; c2 < i2.width * a2; c2++)
              s2[p2 + c2] = o2[l2 + c2];
          return e2;
        }
        sn("HeatmapBucket", La, { omit: ["layers"] });
        var ja = function(t2, e2) {
          Oa(this, t2, 1, e2);
        };
        ja.prototype.resize = function(t2) {
          Da(this, t2, 1);
        }, ja.prototype.clone = function() {
          return new ja({ width: this.width, height: this.height }, new Uint8Array(this.data));
        }, ja.copy = function(t2, e2, r2, n2, i2) {
          Ua(t2, e2, r2, n2, i2, 1);
        };
        var Ra = function(t2, e2) {
          Oa(this, t2, 4, e2);
        };
        Ra.prototype.resize = function(t2) {
          Da(this, t2, 4);
        }, Ra.prototype.clone = function() {
          return new Ra({ width: this.width, height: this.height }, new Uint8Array(this.data));
        }, Ra.copy = function(t2, e2, r2, n2, i2) {
          Ua(t2, e2, r2, n2, i2, 4);
        }, sn("AlphaImage", ja), sn("RGBAImage", Ra);
        var qa = { paint: new Dn({ "heatmap-radius": new Tn(mt.paint_heatmap["heatmap-radius"]), "heatmap-weight": new Tn(mt.paint_heatmap["heatmap-weight"]), "heatmap-intensity": new Mn(mt.paint_heatmap["heatmap-intensity"]), "heatmap-color": new On(mt.paint_heatmap["heatmap-color"]), "heatmap-opacity": new Mn(mt.paint_heatmap["heatmap-opacity"]) }) };
        function Na(t2, e2) {
          for (var r2 = new Uint8Array(1024), n2 = {}, i2 = 0, a2 = 0; i2 < 256; i2++, a2 += 4) {
            n2[e2] = i2 / 255;
            var o2 = t2.evaluate(n2);
            r2[a2 + 0] = Math.floor(255 * o2.r / o2.a), r2[a2 + 1] = Math.floor(255 * o2.g / o2.a), r2[a2 + 2] = Math.floor(255 * o2.b / o2.a), r2[a2 + 3] = Math.floor(255 * o2.a);
          }
          return new Ra({ width: 256, height: 1 }, r2);
        }
        var Ka = function(t2) {
          function e2(e3) {
            t2.call(this, e3, qa), this._updateColorRamp();
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.createBucket = function(t3) {
            return new La(t3);
          }, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
            "heatmap-color" === t3 && this._updateColorRamp();
          }, e2.prototype._updateColorRamp = function() {
            var t3 = this._transitionablePaint._values["heatmap-color"].value.expression;
            this.colorRamp = Na(t3, "heatmapDensity"), this.colorRampTexture = null;
          }, e2.prototype.resize = function() {
            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);
          }, e2.prototype.queryRadius = function() {
            return 0;
          }, e2.prototype.queryIntersectsFeature = function() {
            return false;
          }, e2.prototype.hasOffscreenPass = function() {
            return 0 !== this.paint.get("heatmap-opacity") && "none" !== this.visibility;
          }, e2;
        }(Un), Ga = { paint: new Dn({ "hillshade-illumination-direction": new Mn(mt.paint_hillshade["hillshade-illumination-direction"]), "hillshade-illumination-anchor": new Mn(mt.paint_hillshade["hillshade-illumination-anchor"]), "hillshade-exaggeration": new Mn(mt.paint_hillshade["hillshade-exaggeration"]), "hillshade-shadow-color": new Mn(mt.paint_hillshade["hillshade-shadow-color"]), "hillshade-highlight-color": new Mn(mt.paint_hillshade["hillshade-highlight-color"]), "hillshade-accent-color": new Mn(mt.paint_hillshade["hillshade-accent-color"]) }) }, Xa = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Ga);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.hasOffscreenPass = function() {
            return 0 !== this.paint.get("hillshade-exaggeration") && "none" !== this.visibility;
          }, e2;
        }(Un), Za = Nn([{ name: "a_pos", components: 2, type: "Int16" }], 4), Ha = Za.members, Ya = (Za.size, Za.alignment, $a), Ja = $a;
        function $a(t2, e2, r2) {
          r2 = r2 || 2;
          var n2, i2, a2, o2, s2, u2, l2, p2 = e2 && e2.length, c2 = p2 ? e2[0] * r2 : t2.length, h2 = Wa(t2, 0, c2, r2, true), f2 = [];
          if (!h2 || h2.next === h2.prev)
            return f2;
          if (p2 && (h2 = function(t3, e3, r3, n3) {
            var i3, a3, o3, s3, u3, l3 = [];
            for (i3 = 0, a3 = e3.length; i3 < a3; i3++)
              o3 = e3[i3] * n3, s3 = i3 < a3 - 1 ? e3[i3 + 1] * n3 : t3.length, (u3 = Wa(t3, o3, s3, n3, false)) === u3.next && (u3.steiner = true), l3.push(uo(u3));
            for (l3.sort(ao), i3 = 0; i3 < l3.length; i3++)
              oo(l3[i3], r3), r3 = Qa(r3, r3.next);
            return r3;
          }(t2, e2, h2, r2)), t2.length > 80 * r2) {
            n2 = a2 = t2[0], i2 = o2 = t2[1];
            for (var y2 = r2; y2 < c2; y2 += r2)
              (s2 = t2[y2]) < n2 && (n2 = s2), (u2 = t2[y2 + 1]) < i2 && (i2 = u2), s2 > a2 && (a2 = s2), u2 > o2 && (o2 = u2);
            l2 = 0 !== (l2 = Math.max(a2 - n2, o2 - i2)) ? 1 / l2 : 0;
          }
          return to(h2, f2, r2, n2, i2, l2), f2;
        }
        function Wa(t2, e2, r2, n2, i2) {
          var a2, o2;
          if (i2 === bo(t2, e2, r2, n2) > 0)
            for (a2 = e2; a2 < r2; a2 += n2)
              o2 = vo(a2, t2[a2], t2[a2 + 1], o2);
          else
            for (a2 = r2 - n2; a2 >= e2; a2 -= n2)
              o2 = vo(a2, t2[a2], t2[a2 + 1], o2);
          return o2 && ho(o2, o2.next) && (go(o2), o2 = o2.next), o2;
        }
        function Qa(t2, e2) {
          if (!t2)
            return t2;
          e2 || (e2 = t2);
          var r2, n2 = t2;
          do {
            if (r2 = false, n2.steiner || !ho(n2, n2.next) && 0 !== co(n2.prev, n2, n2.next))
              n2 = n2.next;
            else {
              if (go(n2), (n2 = e2 = n2.prev) === n2.next)
                break;
              r2 = true;
            }
          } while (r2 || n2 !== e2);
          return e2;
        }
        function to(t2, e2, r2, n2, i2, a2, o2) {
          if (t2) {
            !o2 && a2 && function(t3, e3, r3, n3) {
              var i3 = t3;
              do {
                null === i3.z && (i3.z = so(i3.x, i3.y, e3, r3, n3)), i3.prevZ = i3.prev, i3.nextZ = i3.next, i3 = i3.next;
              } while (i3 !== t3);
              i3.prevZ.nextZ = null, i3.prevZ = null, function(t4) {
                var e4, r4, n4, i4, a3, o3, s3, u3, l3 = 1;
                do {
                  for (r4 = t4, t4 = null, a3 = null, o3 = 0; r4; ) {
                    for (o3++, n4 = r4, s3 = 0, e4 = 0; e4 < l3 && (s3++, n4 = n4.nextZ); e4++)
                      ;
                    for (u3 = l3; s3 > 0 || u3 > 0 && n4; )
                      0 !== s3 && (0 === u3 || !n4 || r4.z <= n4.z) ? (i4 = r4, r4 = r4.nextZ, s3--) : (i4 = n4, n4 = n4.nextZ, u3--), a3 ? a3.nextZ = i4 : t4 = i4, i4.prevZ = a3, a3 = i4;
                    r4 = n4;
                  }
                  a3.nextZ = null, l3 *= 2;
                } while (o3 > 1);
              }(i3);
            }(t2, n2, i2, a2);
            for (var s2, u2, l2 = t2; t2.prev !== t2.next; )
              if (s2 = t2.prev, u2 = t2.next, a2 ? ro(t2, n2, i2, a2) : eo(t2))
                e2.push(s2.i / r2), e2.push(t2.i / r2), e2.push(u2.i / r2), go(t2), t2 = u2.next, l2 = u2.next;
              else if ((t2 = u2) === l2) {
                o2 ? 1 === o2 ? to(t2 = no(t2, e2, r2), e2, r2, n2, i2, a2, 2) : 2 === o2 && io(t2, e2, r2, n2, i2, a2) : to(Qa(t2), e2, r2, n2, i2, a2, 1);
                break;
              }
          }
        }
        function eo(t2) {
          var e2 = t2.prev, r2 = t2, n2 = t2.next;
          if (co(e2, r2, n2) >= 0)
            return false;
          for (var i2 = t2.next.next; i2 !== t2.prev; ) {
            if (lo(e2.x, e2.y, r2.x, r2.y, n2.x, n2.y, i2.x, i2.y) && co(i2.prev, i2, i2.next) >= 0)
              return false;
            i2 = i2.next;
          }
          return true;
        }
        function ro(t2, e2, r2, n2) {
          var i2 = t2.prev, a2 = t2, o2 = t2.next;
          if (co(i2, a2, o2) >= 0)
            return false;
          for (var s2 = i2.x < a2.x ? i2.x < o2.x ? i2.x : o2.x : a2.x < o2.x ? a2.x : o2.x, u2 = i2.y < a2.y ? i2.y < o2.y ? i2.y : o2.y : a2.y < o2.y ? a2.y : o2.y, l2 = i2.x > a2.x ? i2.x > o2.x ? i2.x : o2.x : a2.x > o2.x ? a2.x : o2.x, p2 = i2.y > a2.y ? i2.y > o2.y ? i2.y : o2.y : a2.y > o2.y ? a2.y : o2.y, c2 = so(s2, u2, e2, r2, n2), h2 = so(l2, p2, e2, r2, n2), f2 = t2.prevZ, y2 = t2.nextZ; f2 && f2.z >= c2 && y2 && y2.z <= h2; ) {
            if (f2 !== t2.prev && f2 !== t2.next && lo(i2.x, i2.y, a2.x, a2.y, o2.x, o2.y, f2.x, f2.y) && co(f2.prev, f2, f2.next) >= 0)
              return false;
            if (f2 = f2.prevZ, y2 !== t2.prev && y2 !== t2.next && lo(i2.x, i2.y, a2.x, a2.y, o2.x, o2.y, y2.x, y2.y) && co(y2.prev, y2, y2.next) >= 0)
              return false;
            y2 = y2.nextZ;
          }
          for (; f2 && f2.z >= c2; ) {
            if (f2 !== t2.prev && f2 !== t2.next && lo(i2.x, i2.y, a2.x, a2.y, o2.x, o2.y, f2.x, f2.y) && co(f2.prev, f2, f2.next) >= 0)
              return false;
            f2 = f2.prevZ;
          }
          for (; y2 && y2.z <= h2; ) {
            if (y2 !== t2.prev && y2 !== t2.next && lo(i2.x, i2.y, a2.x, a2.y, o2.x, o2.y, y2.x, y2.y) && co(y2.prev, y2, y2.next) >= 0)
              return false;
            y2 = y2.nextZ;
          }
          return true;
        }
        function no(t2, e2, r2) {
          var n2 = t2;
          do {
            var i2 = n2.prev, a2 = n2.next.next;
            !ho(i2, a2) && fo(i2, n2, n2.next, a2) && yo(i2, a2) && yo(a2, i2) && (e2.push(i2.i / r2), e2.push(n2.i / r2), e2.push(a2.i / r2), go(n2), go(n2.next), n2 = t2 = a2), n2 = n2.next;
          } while (n2 !== t2);
          return n2;
        }
        function io(t2, e2, r2, n2, i2, a2) {
          var o2 = t2;
          do {
            for (var s2 = o2.next.next; s2 !== o2.prev; ) {
              if (o2.i !== s2.i && po(o2, s2)) {
                var u2 = mo(o2, s2);
                return o2 = Qa(o2, o2.next), u2 = Qa(u2, u2.next), to(o2, e2, r2, n2, i2, a2), void to(u2, e2, r2, n2, i2, a2);
              }
              s2 = s2.next;
            }
            o2 = o2.next;
          } while (o2 !== t2);
        }
        function ao(t2, e2) {
          return t2.x - e2.x;
        }
        function oo(t2, e2) {
          if (e2 = function(t3, e3) {
            var r3, n2 = e3, i2 = t3.x, a2 = t3.y, o2 = -1 / 0;
            do {
              if (a2 <= n2.y && a2 >= n2.next.y && n2.next.y !== n2.y) {
                var s2 = n2.x + (a2 - n2.y) * (n2.next.x - n2.x) / (n2.next.y - n2.y);
                if (s2 <= i2 && s2 > o2) {
                  if (o2 = s2, s2 === i2) {
                    if (a2 === n2.y)
                      return n2;
                    if (a2 === n2.next.y)
                      return n2.next;
                  }
                  r3 = n2.x < n2.next.x ? n2 : n2.next;
                }
              }
              n2 = n2.next;
            } while (n2 !== e3);
            if (!r3)
              return null;
            if (i2 === o2)
              return r3.prev;
            var u2, l2 = r3, p2 = r3.x, c2 = r3.y, h2 = 1 / 0;
            n2 = r3.next;
            for (; n2 !== l2; )
              i2 >= n2.x && n2.x >= p2 && i2 !== n2.x && lo(a2 < c2 ? i2 : o2, a2, p2, c2, a2 < c2 ? o2 : i2, a2, n2.x, n2.y) && ((u2 = Math.abs(a2 - n2.y) / (i2 - n2.x)) < h2 || u2 === h2 && n2.x > r3.x) && yo(n2, t3) && (r3 = n2, h2 = u2), n2 = n2.next;
            return r3;
          }(t2, e2)) {
            var r2 = mo(e2, t2);
            Qa(r2, r2.next);
          }
        }
        function so(t2, e2, r2, n2, i2) {
          return (t2 = 1431655765 & ((t2 = 858993459 & ((t2 = 252645135 & ((t2 = 16711935 & ((t2 = 32767 * (t2 - r2) * i2) | t2 << 8)) | t2 << 4)) | t2 << 2)) | t2 << 1)) | (e2 = 1431655765 & ((e2 = 858993459 & ((e2 = 252645135 & ((e2 = 16711935 & ((e2 = 32767 * (e2 - n2) * i2) | e2 << 8)) | e2 << 4)) | e2 << 2)) | e2 << 1)) << 1;
        }
        function uo(t2) {
          var e2 = t2, r2 = t2;
          do {
            (e2.x < r2.x || e2.x === r2.x && e2.y < r2.y) && (r2 = e2), e2 = e2.next;
          } while (e2 !== t2);
          return r2;
        }
        function lo(t2, e2, r2, n2, i2, a2, o2, s2) {
          return (i2 - o2) * (e2 - s2) - (t2 - o2) * (a2 - s2) >= 0 && (t2 - o2) * (n2 - s2) - (r2 - o2) * (e2 - s2) >= 0 && (r2 - o2) * (a2 - s2) - (i2 - o2) * (n2 - s2) >= 0;
        }
        function po(t2, e2) {
          return t2.next.i !== e2.i && t2.prev.i !== e2.i && !function(t3, e3) {
            var r2 = t3;
            do {
              if (r2.i !== t3.i && r2.next.i !== t3.i && r2.i !== e3.i && r2.next.i !== e3.i && fo(r2, r2.next, t3, e3))
                return true;
              r2 = r2.next;
            } while (r2 !== t3);
            return false;
          }(t2, e2) && yo(t2, e2) && yo(e2, t2) && function(t3, e3) {
            var r2 = t3, n2 = false, i2 = (t3.x + e3.x) / 2, a2 = (t3.y + e3.y) / 2;
            do {
              r2.y > a2 != r2.next.y > a2 && r2.next.y !== r2.y && i2 < (r2.next.x - r2.x) * (a2 - r2.y) / (r2.next.y - r2.y) + r2.x && (n2 = !n2), r2 = r2.next;
            } while (r2 !== t3);
            return n2;
          }(t2, e2);
        }
        function co(t2, e2, r2) {
          return (e2.y - t2.y) * (r2.x - e2.x) - (e2.x - t2.x) * (r2.y - e2.y);
        }
        function ho(t2, e2) {
          return t2.x === e2.x && t2.y === e2.y;
        }
        function fo(t2, e2, r2, n2) {
          return !!(ho(t2, e2) && ho(r2, n2) || ho(t2, n2) && ho(r2, e2)) || co(t2, e2, r2) > 0 != co(t2, e2, n2) > 0 && co(r2, n2, t2) > 0 != co(r2, n2, e2) > 0;
        }
        function yo(t2, e2) {
          return co(t2.prev, t2, t2.next) < 0 ? co(t2, e2, t2.next) >= 0 && co(t2, t2.prev, e2) >= 0 : co(t2, e2, t2.prev) < 0 || co(t2, t2.next, e2) < 0;
        }
        function mo(t2, e2) {
          var r2 = new xo(t2.i, t2.x, t2.y), n2 = new xo(e2.i, e2.x, e2.y), i2 = t2.next, a2 = e2.prev;
          return t2.next = e2, e2.prev = t2, r2.next = i2, i2.prev = r2, n2.next = r2, r2.prev = n2, a2.next = n2, n2.prev = a2, n2;
        }
        function vo(t2, e2, r2, n2) {
          var i2 = new xo(t2, e2, r2);
          return n2 ? (i2.next = n2.next, i2.prev = n2, n2.next.prev = i2, n2.next = i2) : (i2.prev = i2, i2.next = i2), i2;
        }
        function go(t2) {
          t2.next.prev = t2.prev, t2.prev.next = t2.next, t2.prevZ && (t2.prevZ.nextZ = t2.nextZ), t2.nextZ && (t2.nextZ.prevZ = t2.prevZ);
        }
        function xo(t2, e2, r2) {
          this.i = t2, this.x = e2, this.y = r2, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = false;
        }
        function bo(t2, e2, r2, n2) {
          for (var i2 = 0, a2 = e2, o2 = r2 - n2; a2 < r2; a2 += n2)
            i2 += (t2[o2] - t2[a2]) * (t2[a2 + 1] + t2[o2 + 1]), o2 = a2;
          return i2;
        }
        function _o(t2, e2, r2, n2, i2) {
          !function t3(e3, r3, n3, i3, a2) {
            for (; i3 > n3; ) {
              if (i3 - n3 > 600) {
                var o2 = i3 - n3 + 1, s2 = r3 - n3 + 1, u2 = Math.log(o2), l2 = 0.5 * Math.exp(2 * u2 / 3), p2 = 0.5 * Math.sqrt(u2 * l2 * (o2 - l2) / o2) * (s2 - o2 / 2 < 0 ? -1 : 1), c2 = Math.max(n3, Math.floor(r3 - s2 * l2 / o2 + p2)), h2 = Math.min(i3, Math.floor(r3 + (o2 - s2) * l2 / o2 + p2));
                t3(e3, r3, c2, h2, a2);
              }
              var f2 = e3[r3], y2 = n3, d2 = i3;
              for (wo(e3, n3, r3), a2(e3[i3], f2) > 0 && wo(e3, n3, i3); y2 < d2; ) {
                for (wo(e3, y2, d2), y2++, d2--; a2(e3[y2], f2) < 0; )
                  y2++;
                for (; a2(e3[d2], f2) > 0; )
                  d2--;
              }
              0 === a2(e3[n3], f2) ? wo(e3, n3, d2) : wo(e3, ++d2, i3), d2 <= r3 && (n3 = d2 + 1), r3 <= d2 && (i3 = d2 - 1);
            }
          }(t2, e2, r2 || 0, n2 || t2.length - 1, i2 || Ao);
        }
        function wo(t2, e2, r2) {
          var n2 = t2[e2];
          t2[e2] = t2[r2], t2[r2] = n2;
        }
        function Ao(t2, e2) {
          return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
        }
        function So(t2, e2) {
          var r2 = t2.length;
          if (r2 <= 1)
            return [t2];
          for (var n2, i2, a2 = [], o2 = 0; o2 < r2; o2++) {
            var s2 = S(t2[o2]);
            0 !== s2 && (t2[o2].area = Math.abs(s2), void 0 === i2 && (i2 = s2 < 0), i2 === s2 < 0 ? (n2 && a2.push(n2), n2 = [t2[o2]]) : n2.push(t2[o2]));
          }
          if (n2 && a2.push(n2), e2 > 1)
            for (var u2 = 0; u2 < a2.length; u2++)
              a2[u2].length <= e2 || (_o(a2[u2], e2, 1, a2[u2].length - 1, ko), a2[u2] = a2[u2].slice(0, e2));
          return a2;
        }
        function ko(t2, e2) {
          return e2.area - t2.area;
        }
        function zo(t2, e2, r2) {
          for (var n2 = r2.patternDependencies, i2 = false, a2 = 0, o2 = e2; a2 < o2.length; a2 += 1) {
            var s2 = o2[a2].paint.get(t2 + "-pattern");
            s2.isConstant() || (i2 = true);
            var u2 = s2.constantOr(null);
            u2 && (i2 = true, n2[u2.to] = true, n2[u2.from] = true);
          }
          return i2;
        }
        function Io(t2, e2, r2, n2, i2) {
          for (var a2 = i2.patternDependencies, o2 = 0, s2 = e2; o2 < s2.length; o2 += 1) {
            var u2 = s2[o2], l2 = u2.paint.get(t2 + "-pattern").value;
            if ("constant" !== l2.kind) {
              var p2 = l2.evaluate({ zoom: n2 - 1 }, r2, {}), c2 = l2.evaluate({ zoom: n2 }, r2, {}), h2 = l2.evaluate({ zoom: n2 + 1 }, r2, {});
              a2[p2] = true, a2[c2] = true, a2[h2] = true, r2.patterns[u2.id] = { min: p2, mid: c2, max: h2 };
            }
          }
          return r2;
        }
        $a.deviation = function(t2, e2, r2, n2) {
          var i2 = e2 && e2.length, a2 = i2 ? e2[0] * r2 : t2.length, o2 = Math.abs(bo(t2, 0, a2, r2));
          if (i2)
            for (var s2 = 0, u2 = e2.length; s2 < u2; s2++) {
              var l2 = e2[s2] * r2, p2 = s2 < u2 - 1 ? e2[s2 + 1] * r2 : t2.length;
              o2 -= Math.abs(bo(t2, l2, p2, r2));
            }
          var c2 = 0;
          for (s2 = 0; s2 < n2.length; s2 += 3) {
            var h2 = n2[s2] * r2, f2 = n2[s2 + 1] * r2, y2 = n2[s2 + 2] * r2;
            c2 += Math.abs((t2[h2] - t2[y2]) * (t2[f2 + 1] - t2[h2 + 1]) - (t2[h2] - t2[f2]) * (t2[y2 + 1] - t2[h2 + 1]));
          }
          return 0 === o2 && 0 === c2 ? 0 : Math.abs((c2 - o2) / o2);
        }, $a.flatten = function(t2) {
          for (var e2 = t2[0][0].length, r2 = { vertices: [], holes: [], dimensions: e2 }, n2 = 0, i2 = 0; i2 < t2.length; i2++) {
            for (var a2 = 0; a2 < t2[i2].length; a2++)
              for (var o2 = 0; o2 < e2; o2++)
                r2.vertices.push(t2[i2][a2][o2]);
            i2 > 0 && (n2 += t2[i2 - 1].length, r2.holes.push(n2));
          }
          return r2;
        }, Ya.default = Ja;
        var Bo = function(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
            return t3.id;
          }), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new Gn(), this.indexArray = new si(), this.indexArray2 = new ui(), this.programConfigurations = new Xi(Ha, t2.layers, t2.zoom), this.segments = new zi(), this.segments2 = new zi(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
            return t3.isStateDependent();
          }).map(function(t3) {
            return t3.id;
          });
        };
        Bo.prototype.populate = function(t2, e2) {
          this.features = [], this.hasPattern = zo("fill", this.layers, e2);
          for (var r2 = 0, n2 = t2; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.feature, o2 = i2.index, s2 = i2.sourceLayerIndex;
            if (this.layers[0]._featureFilter(new Sn(this.zoom), a2)) {
              var u2 = Wi(a2), l2 = { sourceLayerIndex: s2, index: o2, geometry: u2, properties: a2.properties, type: a2.type, patterns: {} };
              void 0 !== a2.id && (l2.id = a2.id), this.hasPattern ? this.features.push(Io("fill", this.layers, l2, this.zoom, e2)) : this.addFeature(l2, u2, o2, {}), e2.featureIndex.insert(a2, u2, o2, s2, this.index);
            }
          }
        }, Bo.prototype.update = function(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }, Bo.prototype.addFeatures = function(t2, e2) {
          for (var r2 = 0, n2 = this.features; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.geometry;
            this.addFeature(i2, a2, i2.index, e2);
          }
        }, Bo.prototype.isEmpty = function() {
          return 0 === this.layoutVertexArray.length;
        }, Bo.prototype.uploadPending = function() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }, Bo.prototype.upload = function(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Ha), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.indexBuffer2 = t2.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t2), this.uploaded = true;
        }, Bo.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());
        }, Bo.prototype.addFeature = function(t2, e2, r2, n2) {
          for (var i2 = 0, a2 = So(e2, 500); i2 < a2.length; i2 += 1) {
            for (var o2 = a2[i2], s2 = 0, u2 = 0, l2 = o2; u2 < l2.length; u2 += 1) {
              s2 += l2[u2].length;
            }
            for (var p2 = this.segments.prepareSegment(s2, this.layoutVertexArray, this.indexArray), c2 = p2.vertexLength, h2 = [], f2 = [], y2 = 0, d2 = o2; y2 < d2.length; y2 += 1) {
              var m2 = d2[y2];
              if (0 !== m2.length) {
                m2 !== o2[0] && f2.push(h2.length / 2);
                var v2 = this.segments2.prepareSegment(m2.length, this.layoutVertexArray, this.indexArray2), g2 = v2.vertexLength;
                this.layoutVertexArray.emplaceBack(m2[0].x, m2[0].y), this.indexArray2.emplaceBack(g2 + m2.length - 1, g2), h2.push(m2[0].x), h2.push(m2[0].y);
                for (var x2 = 1; x2 < m2.length; x2++)
                  this.layoutVertexArray.emplaceBack(m2[x2].x, m2[x2].y), this.indexArray2.emplaceBack(g2 + x2 - 1, g2 + x2), h2.push(m2[x2].x), h2.push(m2[x2].y);
                v2.vertexLength += m2.length, v2.primitiveLength += m2.length;
              }
            }
            for (var b2 = Ya(h2, f2), _2 = 0; _2 < b2.length; _2 += 3)
              this.indexArray.emplaceBack(c2 + b2[_2], c2 + b2[_2 + 1], c2 + b2[_2 + 2]);
            p2.vertexLength += s2, p2.primitiveLength += b2.length / 3;
          }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, n2);
        }, sn("FillBucket", Bo, { omit: ["layers", "features"] });
        var Eo = { paint: new Dn({ "fill-antialias": new Mn(mt.paint_fill["fill-antialias"]), "fill-opacity": new Tn(mt.paint_fill["fill-opacity"]), "fill-color": new Tn(mt.paint_fill["fill-color"]), "fill-outline-color": new Tn(mt.paint_fill["fill-outline-color"]), "fill-translate": new Mn(mt.paint_fill["fill-translate"]), "fill-translate-anchor": new Mn(mt.paint_fill["fill-translate-anchor"]), "fill-pattern": new Fn(mt.paint_fill["fill-pattern"]) }) }, Po = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Eo);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.recalculate = function(e3) {
            t2.prototype.recalculate.call(this, e3);
            var r2 = this.paint._values["fill-outline-color"];
            "constant" === r2.value.kind && void 0 === r2.value.value && (this.paint._values["fill-outline-color"] = this.paint._values["fill-color"]);
          }, e2.prototype.createBucket = function(t3) {
            return new Bo(t3);
          }, e2.prototype.queryRadius = function() {
            return fa(this.paint.get("fill-translate"));
          }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, i2, a2, o2) {
            return na(ya(t3, this.paint.get("fill-translate"), this.paint.get("fill-translate-anchor"), a2.angle, o2), n2);
          }, e2;
        }(Un), Vo = Nn([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_normal_ed", components: 4, type: "Int16" }], 4), Co = Vo.members, Mo = (Vo.size, Vo.alignment, Math.pow(2, 13));
        function To(t2, e2, r2, n2, i2, a2, o2, s2) {
          t2.emplaceBack(e2, r2, 2 * Math.floor(n2 * Mo) + o2, i2 * Mo * 2, a2 * Mo * 2, Math.round(s2));
        }
        var Fo = function(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
            return t3.id;
          }), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new Zn(), this.indexArray = new si(), this.programConfigurations = new Xi(Co, t2.layers, t2.zoom), this.segments = new zi(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
            return t3.isStateDependent();
          }).map(function(t3) {
            return t3.id;
          });
        };
        function Lo(t2, e2) {
          return t2.x === e2.x && (t2.x < 0 || t2.x > Yi) || t2.y === e2.y && (t2.y < 0 || t2.y > Yi);
        }
        function Oo(t2) {
          return t2.every(function(t3) {
            return t3.x < 0;
          }) || t2.every(function(t3) {
            return t3.x > Yi;
          }) || t2.every(function(t3) {
            return t3.y < 0;
          }) || t2.every(function(t3) {
            return t3.y > Yi;
          });
        }
        Fo.prototype.populate = function(t2, e2) {
          this.features = [], this.hasPattern = zo("fill-extrusion", this.layers, e2);
          for (var r2 = 0, n2 = t2; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.feature, o2 = i2.index, s2 = i2.sourceLayerIndex;
            if (this.layers[0]._featureFilter(new Sn(this.zoom), a2)) {
              var u2 = Wi(a2), l2 = { sourceLayerIndex: s2, index: o2, geometry: u2, properties: a2.properties, type: a2.type, patterns: {} };
              void 0 !== a2.id && (l2.id = a2.id), this.hasPattern ? this.features.push(Io("fill-extrusion", this.layers, l2, this.zoom, e2)) : this.addFeature(l2, u2, o2, {}), e2.featureIndex.insert(a2, u2, o2, s2, this.index, true);
            }
          }
        }, Fo.prototype.addFeatures = function(t2, e2) {
          for (var r2 = 0, n2 = this.features; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.geometry;
            this.addFeature(i2, a2, i2.index, e2);
          }
        }, Fo.prototype.update = function(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }, Fo.prototype.isEmpty = function() {
          return 0 === this.layoutVertexArray.length;
        }, Fo.prototype.uploadPending = function() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }, Fo.prototype.upload = function(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Co), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }, Fo.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
        }, Fo.prototype.addFeature = function(t2, e2, r2, n2) {
          for (var i2 = 0, a2 = So(e2, 500); i2 < a2.length; i2 += 1) {
            for (var o2 = a2[i2], s2 = 0, u2 = 0, l2 = o2; u2 < l2.length; u2 += 1) {
              s2 += l2[u2].length;
            }
            for (var p2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray), c2 = 0, h2 = o2; c2 < h2.length; c2 += 1) {
              var f2 = h2[c2];
              if (0 !== f2.length && !Oo(f2))
                for (var y2 = 0, d2 = 0; d2 < f2.length; d2++) {
                  var m2 = f2[d2];
                  if (d2 >= 1) {
                    var v2 = f2[d2 - 1];
                    if (!Lo(m2, v2)) {
                      p2.vertexLength + 4 > zi.MAX_VERTEX_ARRAY_LENGTH && (p2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));
                      var g2 = m2.sub(v2)._perp()._unit(), x2 = v2.dist(m2);
                      y2 + x2 > 32768 && (y2 = 0), To(this.layoutVertexArray, m2.x, m2.y, g2.x, g2.y, 0, 0, y2), To(this.layoutVertexArray, m2.x, m2.y, g2.x, g2.y, 0, 1, y2), y2 += x2, To(this.layoutVertexArray, v2.x, v2.y, g2.x, g2.y, 0, 0, y2), To(this.layoutVertexArray, v2.x, v2.y, g2.x, g2.y, 0, 1, y2);
                      var b2 = p2.vertexLength;
                      this.indexArray.emplaceBack(b2, b2 + 2, b2 + 1), this.indexArray.emplaceBack(b2 + 1, b2 + 2, b2 + 3), p2.vertexLength += 4, p2.primitiveLength += 2;
                    }
                  }
                }
            }
            p2.vertexLength + s2 > zi.MAX_VERTEX_ARRAY_LENGTH && (p2 = this.segments.prepareSegment(s2, this.layoutVertexArray, this.indexArray));
            for (var _2 = [], w2 = [], A2 = p2.vertexLength, S2 = 0, k2 = o2; S2 < k2.length; S2 += 1) {
              var z2 = k2[S2];
              if (0 !== z2.length) {
                z2 !== o2[0] && w2.push(_2.length / 2);
                for (var I2 = 0; I2 < z2.length; I2++) {
                  var B2 = z2[I2];
                  To(this.layoutVertexArray, B2.x, B2.y, 0, 0, 1, 1, 0), _2.push(B2.x), _2.push(B2.y);
                }
              }
            }
            for (var E2 = Ya(_2, w2), P2 = 0; P2 < E2.length; P2 += 3)
              this.indexArray.emplaceBack(A2 + E2[P2], A2 + E2[P2 + 2], A2 + E2[P2 + 1]);
            p2.primitiveLength += E2.length / 3, p2.vertexLength += s2;
          }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, n2);
        }, sn("FillExtrusionBucket", Fo, { omit: ["layers", "features"] });
        var Do = { paint: new Dn({ "fill-extrusion-opacity": new Mn(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]), "fill-extrusion-color": new Tn(mt["paint_fill-extrusion"]["fill-extrusion-color"]), "fill-extrusion-translate": new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate"]), "fill-extrusion-translate-anchor": new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]), "fill-extrusion-pattern": new Fn(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]), "fill-extrusion-height": new Tn(mt["paint_fill-extrusion"]["fill-extrusion-height"]), "fill-extrusion-base": new Tn(mt["paint_fill-extrusion"]["fill-extrusion-base"]), "fill-extrusion-vertical-gradient": new Mn(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]) }) }, Uo = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Do);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.createBucket = function(t3) {
            return new Fo(t3);
          }, e2.prototype.queryRadius = function() {
            return fa(this.paint.get("fill-extrusion-translate"));
          }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, a2, o2, s2, u2) {
            var l2 = ya(t3, this.paint.get("fill-extrusion-translate"), this.paint.get("fill-extrusion-translate-anchor"), o2.angle, s2), p2 = this.paint.get("fill-extrusion-height").evaluate(e3, r2), c2 = this.paint.get("fill-extrusion-base").evaluate(e3, r2), h2 = function(t4, e4, r3, n3) {
              for (var a3 = [], o3 = 0, s3 = t4; o3 < s3.length; o3 += 1) {
                var u3 = s3[o3], l3 = [u3.x, u3.y, n3, 1];
                Sa(l3, l3, e4), a3.push(new i(l3[0] / l3[3], l3[1] / l3[3]));
              }
              return a3;
            }(l2, u2, 0, 0), f2 = function(t4, e4, r3, n3) {
              for (var a3 = [], o3 = [], s3 = n3[8] * e4, u3 = n3[9] * e4, l3 = n3[10] * e4, p3 = n3[11] * e4, c3 = n3[8] * r3, h3 = n3[9] * r3, f3 = n3[10] * r3, y2 = n3[11] * r3, d2 = 0, m2 = t4; d2 < m2.length; d2 += 1) {
                for (var v2 = m2[d2], g2 = [], x2 = [], b2 = 0, _2 = v2; b2 < _2.length; b2 += 1) {
                  var w2 = _2[b2], A2 = w2.x, S2 = w2.y, k2 = n3[0] * A2 + n3[4] * S2 + n3[12], z2 = n3[1] * A2 + n3[5] * S2 + n3[13], I2 = n3[2] * A2 + n3[6] * S2 + n3[14], B2 = n3[3] * A2 + n3[7] * S2 + n3[15], E2 = k2 + s3, P2 = z2 + u3, V2 = I2 + l3, C2 = B2 + p3, M2 = k2 + c3, T2 = z2 + h3, F2 = I2 + f3, L2 = B2 + y2, O2 = new i(E2 / C2, P2 / C2);
                  O2.z = V2 / C2, g2.push(O2);
                  var D2 = new i(M2 / L2, T2 / L2);
                  D2.z = F2 / L2, x2.push(D2);
                }
                a3.push(g2), o3.push(x2);
              }
              return [a3, o3];
            }(n2, c2, p2, u2);
            return function(t4, e4, r3) {
              var n3 = 1 / 0;
              na(r3, e4) && (n3 = Ro(r3, e4[0]));
              for (var i2 = 0; i2 < e4.length; i2++)
                for (var a3 = e4[i2], o3 = t4[i2], s3 = 0; s3 < a3.length - 1; s3++) {
                  var u3 = a3[s3], l3 = a3[s3 + 1], p3 = o3[s3], c3 = o3[s3 + 1], h3 = [u3, l3, c3, p3, u3];
                  ea(r3, h3) && (n3 = Math.min(n3, Ro(r3, h3)));
                }
              return n3 !== 1 / 0 && n3;
            }(f2[0], f2[1], h2);
          }, e2.prototype.hasOffscreenPass = function() {
            return 0 !== this.paint.get("fill-extrusion-opacity") && "none" !== this.visibility;
          }, e2.prototype.resize = function() {
            this.viewportFrame && (this.viewportFrame.destroy(), this.viewportFrame = null);
          }, e2;
        }(Un);
        function jo(t2, e2) {
          return t2.x * e2.x + t2.y * e2.y;
        }
        function Ro(t2, e2) {
          if (1 === t2.length) {
            var r2 = e2[0], n2 = e2[1], i2 = e2[3], a2 = t2[0], o2 = n2.sub(r2), s2 = i2.sub(r2), u2 = a2.sub(r2), l2 = jo(o2, o2), p2 = jo(o2, s2), c2 = jo(s2, s2), h2 = jo(u2, o2), f2 = jo(u2, s2), y2 = l2 * c2 - p2 * p2, d2 = (c2 * h2 - p2 * f2) / y2, m2 = (l2 * f2 - p2 * h2) / y2, v2 = 1 - d2 - m2;
            return r2.z * v2 + n2.z * d2 + i2.z * m2;
          }
          for (var g2 = 1 / 0, x2 = 0, b2 = e2; x2 < b2.length; x2 += 1) {
            var _2 = b2[x2];
            g2 = Math.min(g2, _2.z);
          }
          return g2;
        }
        var qo = Nn([{ name: "a_pos_normal", components: 4, type: "Int16" }, { name: "a_data", components: 4, type: "Uint8" }], 4), No = qo.members, Ko = (qo.size, qo.alignment, Go);
        function Go(t2, e2, r2, n2, i2) {
          this.properties = {}, this.extent = r2, this.type = 0, this._pbf = t2, this._geometry = -1, this._keys = n2, this._values = i2, t2.readFields(Xo, this, e2);
        }
        function Xo(t2, e2, r2) {
          1 == t2 ? e2.id = r2.readVarint() : 2 == t2 ? function(t3, e3) {
            var r3 = t3.readVarint() + t3.pos;
            for (; t3.pos < r3; ) {
              var n2 = e3._keys[t3.readVarint()], i2 = e3._values[t3.readVarint()];
              e3.properties[n2] = i2;
            }
          }(r2, e2) : 3 == t2 ? e2.type = r2.readVarint() : 4 == t2 && (e2._geometry = r2.pos);
        }
        function Zo(t2) {
          for (var e2, r2, n2 = 0, i2 = 0, a2 = t2.length, o2 = a2 - 1; i2 < a2; o2 = i2++)
            e2 = t2[i2], n2 += ((r2 = t2[o2]).x - e2.x) * (e2.y + r2.y);
          return n2;
        }
        Go.types = ["Unknown", "Point", "LineString", "Polygon"], Go.prototype.loadGeometry = function() {
          var t2 = this._pbf;
          t2.pos = this._geometry;
          for (var e2, r2 = t2.readVarint() + t2.pos, n2 = 1, a2 = 0, o2 = 0, s2 = 0, u2 = []; t2.pos < r2; ) {
            if (a2 <= 0) {
              var l2 = t2.readVarint();
              n2 = 7 & l2, a2 = l2 >> 3;
            }
            if (a2--, 1 === n2 || 2 === n2)
              o2 += t2.readSVarint(), s2 += t2.readSVarint(), 1 === n2 && (e2 && u2.push(e2), e2 = []), e2.push(new i(o2, s2));
            else {
              if (7 !== n2)
                throw new Error("unknown command " + n2);
              e2 && e2.push(e2[0].clone());
            }
          }
          return e2 && u2.push(e2), u2;
        }, Go.prototype.bbox = function() {
          var t2 = this._pbf;
          t2.pos = this._geometry;
          for (var e2 = t2.readVarint() + t2.pos, r2 = 1, n2 = 0, i2 = 0, a2 = 0, o2 = 1 / 0, s2 = -1 / 0, u2 = 1 / 0, l2 = -1 / 0; t2.pos < e2; ) {
            if (n2 <= 0) {
              var p2 = t2.readVarint();
              r2 = 7 & p2, n2 = p2 >> 3;
            }
            if (n2--, 1 === r2 || 2 === r2)
              (i2 += t2.readSVarint()) < o2 && (o2 = i2), i2 > s2 && (s2 = i2), (a2 += t2.readSVarint()) < u2 && (u2 = a2), a2 > l2 && (l2 = a2);
            else if (7 !== r2)
              throw new Error("unknown command " + r2);
          }
          return [o2, u2, s2, l2];
        }, Go.prototype.toGeoJSON = function(t2, e2, r2) {
          var n2, i2, a2 = this.extent * Math.pow(2, r2), o2 = this.extent * t2, s2 = this.extent * e2, u2 = this.loadGeometry(), l2 = Go.types[this.type];
          function p2(t3) {
            for (var e3 = 0; e3 < t3.length; e3++) {
              var r3 = t3[e3], n3 = 180 - 360 * (r3.y + s2) / a2;
              t3[e3] = [360 * (r3.x + o2) / a2 - 180, 360 / Math.PI * Math.atan(Math.exp(n3 * Math.PI / 180)) - 90];
            }
          }
          switch (this.type) {
            case 1:
              var c2 = [];
              for (n2 = 0; n2 < u2.length; n2++)
                c2[n2] = u2[n2][0];
              p2(u2 = c2);
              break;
            case 2:
              for (n2 = 0; n2 < u2.length; n2++)
                p2(u2[n2]);
              break;
            case 3:
              for (u2 = function(t3) {
                var e3 = t3.length;
                if (e3 <= 1)
                  return [t3];
                for (var r3, n3, i3 = [], a3 = 0; a3 < e3; a3++) {
                  var o3 = Zo(t3[a3]);
                  0 !== o3 && (void 0 === n3 && (n3 = o3 < 0), n3 === o3 < 0 ? (r3 && i3.push(r3), r3 = [t3[a3]]) : r3.push(t3[a3]));
                }
                r3 && i3.push(r3);
                return i3;
              }(u2), n2 = 0; n2 < u2.length; n2++)
                for (i2 = 0; i2 < u2[n2].length; i2++)
                  p2(u2[n2][i2]);
          }
          1 === u2.length ? u2 = u2[0] : l2 = "Multi" + l2;
          var h2 = { type: "Feature", geometry: { type: l2, coordinates: u2 }, properties: this.properties };
          return "id" in this && (h2.id = this.id), h2;
        };
        var Ho = Yo;
        function Yo(t2, e2) {
          this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t2, this._keys = [], this._values = [], this._features = [], t2.readFields(Jo, this, e2), this.length = this._features.length;
        }
        function Jo(t2, e2, r2) {
          15 === t2 ? e2.version = r2.readVarint() : 1 === t2 ? e2.name = r2.readString() : 5 === t2 ? e2.extent = r2.readVarint() : 2 === t2 ? e2._features.push(r2.pos) : 3 === t2 ? e2._keys.push(r2.readString()) : 4 === t2 && e2._values.push(function(t3) {
            var e3 = null, r3 = t3.readVarint() + t3.pos;
            for (; t3.pos < r3; ) {
              var n2 = t3.readVarint() >> 3;
              e3 = 1 === n2 ? t3.readString() : 2 === n2 ? t3.readFloat() : 3 === n2 ? t3.readDouble() : 4 === n2 ? t3.readVarint64() : 5 === n2 ? t3.readVarint() : 6 === n2 ? t3.readSVarint() : 7 === n2 ? t3.readBoolean() : null;
            }
            return e3;
          }(r2));
        }
        function $o(t2, e2, r2) {
          if (3 === t2) {
            var n2 = new Ho(r2, r2.readVarint() + r2.pos);
            n2.length && (e2[n2.name] = n2);
          }
        }
        Yo.prototype.feature = function(t2) {
          if (t2 < 0 || t2 >= this._features.length)
            throw new Error("feature index out of bounds");
          this._pbf.pos = this._features[t2];
          var e2 = this._pbf.readVarint() + this._pbf.pos;
          return new Ko(this._pbf, e2, this.extent, this._keys, this._values);
        };
        var Wo = { VectorTile: function(t2, e2) {
          this.layers = t2.readFields($o, {}, e2);
        }, VectorTileFeature: Ko, VectorTileLayer: Ho }, Qo = Wo.VectorTileFeature.types, ts = 63, es = Math.cos(Math.PI / 180 * 37.5), rs = 0.5, ns = Math.pow(2, 14) / rs;
        function is(t2, e2, r2, n2, i2, a2, o2) {
          t2.emplaceBack(e2.x, e2.y, n2 ? 1 : 0, i2 ? 1 : -1, Math.round(ts * r2.x) + 128, Math.round(ts * r2.y) + 128, 1 + (0 === a2 ? 0 : a2 < 0 ? -1 : 1) | (o2 * rs & 63) << 2, o2 * rs >> 6);
        }
        var as = function(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
            return t3.id;
          }), this.index = t2.index, this.features = [], this.hasPattern = false, this.layoutVertexArray = new Hn(), this.indexArray = new si(), this.programConfigurations = new Xi(No, t2.layers, t2.zoom), this.segments = new zi(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
            return t3.isStateDependent();
          }).map(function(t3) {
            return t3.id;
          });
        };
        function os(t2, e2) {
          return (t2 / e2.tileTotal * (e2.end - e2.start) + e2.start) * (ns - 1);
        }
        as.prototype.populate = function(t2, e2) {
          this.features = [], this.hasPattern = zo("line", this.layers, e2);
          for (var r2 = 0, n2 = t2; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.feature, o2 = i2.index, s2 = i2.sourceLayerIndex;
            if (this.layers[0]._featureFilter(new Sn(this.zoom), a2)) {
              var u2 = Wi(a2), l2 = { sourceLayerIndex: s2, index: o2, geometry: u2, properties: a2.properties, type: a2.type, patterns: {} };
              void 0 !== a2.id && (l2.id = a2.id), this.hasPattern ? this.features.push(Io("line", this.layers, l2, this.zoom, e2)) : this.addFeature(l2, u2, o2, {}), e2.featureIndex.insert(a2, u2, o2, s2, this.index);
            }
          }
        }, as.prototype.update = function(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }, as.prototype.addFeatures = function(t2, e2) {
          for (var r2 = 0, n2 = this.features; r2 < n2.length; r2 += 1) {
            var i2 = n2[r2], a2 = i2.geometry;
            this.addFeature(i2, a2, i2.index, e2);
          }
        }, as.prototype.isEmpty = function() {
          return 0 === this.layoutVertexArray.length;
        }, as.prototype.uploadPending = function() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }, as.prototype.upload = function(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, No), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }, as.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
        }, as.prototype.addFeature = function(t2, e2, r2, n2) {
          for (var i2 = this.layers[0].layout, a2 = i2.get("line-join").evaluate(t2, {}), o2 = i2.get("line-cap"), s2 = i2.get("line-miter-limit"), u2 = i2.get("line-round-limit"), l2 = 0, p2 = e2; l2 < p2.length; l2 += 1) {
            var c2 = p2[l2];
            this.addLine(c2, t2, a2, o2, s2, u2, r2, n2);
          }
        }, as.prototype.addLine = function(t2, e2, r2, n2, i2, a2, o2, s2) {
          var u2 = null;
          e2.properties && e2.properties.hasOwnProperty("mapbox_clip_start") && e2.properties.hasOwnProperty("mapbox_clip_end") && (u2 = { start: e2.properties.mapbox_clip_start, end: e2.properties.mapbox_clip_end, tileTotal: void 0 });
          for (var l2 = "Polygon" === Qo[e2.type], p2 = t2.length; p2 >= 2 && t2[p2 - 1].equals(t2[p2 - 2]); )
            p2--;
          for (var c2 = 0; c2 < p2 - 1 && t2[c2].equals(t2[c2 + 1]); )
            c2++;
          if (!(p2 < (l2 ? 3 : 2))) {
            u2 && (u2.tileTotal = function(t3, e3, r3) {
              for (var n3, i3, a3 = 0, o3 = e3; o3 < r3 - 1; o3++)
                n3 = t3[o3], i3 = t3[o3 + 1], a3 += n3.dist(i3);
              return a3;
            }(t2, c2, p2)), "bevel" === r2 && (i2 = 1.05);
            var h2 = Yi / (512 * this.overscaling) * 15, f2 = t2[c2], y2 = this.segments.prepareSegment(10 * p2, this.layoutVertexArray, this.indexArray);
            this.distance = 0;
            var d2, m2, v2, g2 = n2, x2 = l2 ? "butt" : n2, b2 = true, _2 = void 0, w2 = void 0, A2 = void 0, S2 = void 0;
            this.e1 = this.e2 = this.e3 = -1, l2 && (d2 = t2[p2 - 2], S2 = f2.sub(d2)._unit()._perp());
            for (var k2 = c2; k2 < p2; k2++)
              if (!(w2 = l2 && k2 === p2 - 1 ? t2[c2 + 1] : t2[k2 + 1]) || !t2[k2].equals(w2)) {
                S2 && (A2 = S2), d2 && (_2 = d2), d2 = t2[k2], S2 = w2 ? w2.sub(d2)._unit()._perp() : A2;
                var z2 = (A2 = A2 || S2).add(S2);
                0 === z2.x && 0 === z2.y || z2._unit();
                var I2 = z2.x * S2.x + z2.y * S2.y, B2 = 0 !== I2 ? 1 / I2 : 1 / 0, E2 = I2 < es && _2 && w2;
                if (E2 && k2 > c2) {
                  var P2 = d2.dist(_2);
                  if (P2 > 2 * h2) {
                    var V2 = d2.sub(d2.sub(_2)._mult(h2 / P2)._round());
                    this.distance += V2.dist(_2), this.addCurrentVertex(V2, this.distance, A2.mult(1), 0, 0, false, y2, u2), _2 = V2;
                  }
                }
                var C2 = _2 && w2, M2 = C2 ? r2 : w2 ? g2 : x2;
                if (C2 && "round" === M2 && (B2 < a2 ? M2 = "miter" : B2 <= 2 && (M2 = "fakeround")), "miter" === M2 && B2 > i2 && (M2 = "bevel"), "bevel" === M2 && (B2 > 2 && (M2 = "flipbevel"), B2 < i2 && (M2 = "miter")), _2 && (this.distance += d2.dist(_2)), "miter" === M2)
                  z2._mult(B2), this.addCurrentVertex(d2, this.distance, z2, 0, 0, false, y2, u2);
                else if ("flipbevel" === M2) {
                  if (B2 > 100)
                    z2 = S2.clone().mult(-1);
                  else {
                    var T2 = A2.x * S2.y - A2.y * S2.x > 0 ? -1 : 1, F2 = B2 * A2.add(S2).mag() / A2.sub(S2).mag();
                    z2._perp()._mult(F2 * T2);
                  }
                  this.addCurrentVertex(d2, this.distance, z2, 0, 0, false, y2, u2), this.addCurrentVertex(d2, this.distance, z2.mult(-1), 0, 0, false, y2, u2);
                } else if ("bevel" === M2 || "fakeround" === M2) {
                  var L2 = A2.x * S2.y - A2.y * S2.x > 0, O2 = -Math.sqrt(B2 * B2 - 1);
                  if (L2 ? (v2 = 0, m2 = O2) : (m2 = 0, v2 = O2), b2 || this.addCurrentVertex(d2, this.distance, A2, m2, v2, false, y2, u2), "fakeround" === M2) {
                    for (var D2 = Math.floor(8 * (0.5 - (I2 - 0.5))), U2 = void 0, j2 = 0; j2 < D2; j2++)
                      U2 = S2.mult((j2 + 1) / (D2 + 1))._add(A2)._unit(), this.addPieSliceVertex(d2, this.distance, U2, L2, y2, u2);
                    this.addPieSliceVertex(d2, this.distance, z2, L2, y2, u2);
                    for (var R2 = D2 - 1; R2 >= 0; R2--)
                      U2 = A2.mult((R2 + 1) / (D2 + 1))._add(S2)._unit(), this.addPieSliceVertex(d2, this.distance, U2, L2, y2, u2);
                  }
                  w2 && this.addCurrentVertex(d2, this.distance, S2, -m2, -v2, false, y2, u2);
                } else
                  "butt" === M2 ? (b2 || this.addCurrentVertex(d2, this.distance, A2, 0, 0, false, y2, u2), w2 && this.addCurrentVertex(d2, this.distance, S2, 0, 0, false, y2, u2)) : "square" === M2 ? (b2 || (this.addCurrentVertex(d2, this.distance, A2, 1, 1, false, y2, u2), this.e1 = this.e2 = -1), w2 && this.addCurrentVertex(d2, this.distance, S2, -1, -1, false, y2, u2)) : "round" === M2 && (b2 || (this.addCurrentVertex(d2, this.distance, A2, 0, 0, false, y2, u2), this.addCurrentVertex(d2, this.distance, A2, 1, 1, true, y2, u2), this.e1 = this.e2 = -1), w2 && (this.addCurrentVertex(d2, this.distance, S2, -1, -1, true, y2, u2), this.addCurrentVertex(d2, this.distance, S2, 0, 0, false, y2, u2)));
                if (E2 && k2 < p2 - 1) {
                  var q2 = d2.dist(w2);
                  if (q2 > 2 * h2) {
                    var N2 = d2.add(w2.sub(d2)._mult(h2 / q2)._round());
                    this.distance += N2.dist(d2), this.addCurrentVertex(N2, this.distance, S2.mult(1), 0, 0, false, y2, u2), d2 = N2;
                  }
                }
                b2 = false;
              }
            this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e2, o2, s2);
          }
        }, as.prototype.addCurrentVertex = function(t2, e2, r2, n2, i2, a2, o2, s2) {
          var u2, l2 = this.layoutVertexArray, p2 = this.indexArray;
          s2 && (e2 = os(e2, s2)), u2 = r2.clone(), n2 && u2._sub(r2.perp()._mult(n2)), is(l2, t2, u2, a2, false, n2, e2), this.e3 = o2.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (p2.emplaceBack(this.e1, this.e2, this.e3), o2.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, u2 = r2.mult(-1), i2 && u2._sub(r2.perp()._mult(i2)), is(l2, t2, u2, a2, true, -i2, e2), this.e3 = o2.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (p2.emplaceBack(this.e1, this.e2, this.e3), o2.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, e2 > ns / 2 && !s2 && (this.distance = 0, this.addCurrentVertex(t2, this.distance, r2, n2, i2, a2, o2));
        }, as.prototype.addPieSliceVertex = function(t2, e2, r2, n2, i2, a2) {
          r2 = r2.mult(n2 ? -1 : 1);
          var o2 = this.layoutVertexArray, s2 = this.indexArray;
          a2 && (e2 = os(e2, a2)), is(o2, t2, r2, false, n2, 0, e2), this.e3 = i2.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (s2.emplaceBack(this.e1, this.e2, this.e3), i2.primitiveLength++), n2 ? this.e2 = this.e3 : this.e1 = this.e3;
        }, sn("LineBucket", as, { omit: ["layers", "features"] });
        var ss = new Dn({ "line-cap": new Mn(mt.layout_line["line-cap"]), "line-join": new Tn(mt.layout_line["line-join"]), "line-miter-limit": new Mn(mt.layout_line["line-miter-limit"]), "line-round-limit": new Mn(mt.layout_line["line-round-limit"]) }), us = { paint: new Dn({ "line-opacity": new Tn(mt.paint_line["line-opacity"]), "line-color": new Tn(mt.paint_line["line-color"]), "line-translate": new Mn(mt.paint_line["line-translate"]), "line-translate-anchor": new Mn(mt.paint_line["line-translate-anchor"]), "line-width": new Tn(mt.paint_line["line-width"]), "line-gap-width": new Tn(mt.paint_line["line-gap-width"]), "line-offset": new Tn(mt.paint_line["line-offset"]), "line-blur": new Tn(mt.paint_line["line-blur"]), "line-dasharray": new Ln(mt.paint_line["line-dasharray"]), "line-pattern": new Fn(mt.paint_line["line-pattern"]), "line-gradient": new On(mt.paint_line["line-gradient"]) }), layout: ss }, ls = new (function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.possiblyEvaluate = function(e3, r2) {
            return r2 = new Sn(Math.floor(r2.zoom), { now: r2.now, fadeDuration: r2.fadeDuration, zoomHistory: r2.zoomHistory, transition: r2.transition }), t2.prototype.possiblyEvaluate.call(this, e3, r2);
          }, e2.prototype.evaluate = function(e3, r2, n2, i2) {
            return r2 = c({}, r2, { zoom: Math.floor(r2.zoom) }), t2.prototype.evaluate.call(this, e3, r2, n2, i2);
          }, e2;
        }(Tn))(us.paint.properties["line-width"].specification);
        ls.useIntegerZoom = true;
        var ps = function(t2) {
          function e2(e3) {
            t2.call(this, e3, us);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
            "line-gradient" === t3 && this._updateGradient();
          }, e2.prototype._updateGradient = function() {
            var t3 = this._transitionablePaint._values["line-gradient"].value.expression;
            this.gradient = Na(t3, "lineProgress"), this.gradientTexture = null;
          }, e2.prototype.recalculate = function(e3) {
            t2.prototype.recalculate.call(this, e3), this.paint._values["line-floorwidth"] = ls.possiblyEvaluate(this._transitioningPaint._values["line-width"].value, e3);
          }, e2.prototype.createBucket = function(t3) {
            return new as(t3);
          }, e2.prototype.queryRadius = function(t3) {
            var e3 = t3, r2 = cs(ha("line-width", this, e3), ha("line-gap-width", this, e3)), n2 = ha("line-offset", this, e3);
            return r2 / 2 + Math.abs(n2) + fa(this.paint.get("line-translate"));
          }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, a2, o2, s2) {
            var u2 = ya(t3, this.paint.get("line-translate"), this.paint.get("line-translate-anchor"), o2.angle, s2), l2 = s2 / 2 * cs(this.paint.get("line-width").evaluate(e3, r2), this.paint.get("line-gap-width").evaluate(e3, r2)), p2 = this.paint.get("line-offset").evaluate(e3, r2);
            return p2 && (n2 = function(t4, e4) {
              for (var r3 = [], n3 = new i(0, 0), a3 = 0; a3 < t4.length; a3++) {
                for (var o3 = t4[a3], s3 = [], u3 = 0; u3 < o3.length; u3++) {
                  var l3 = o3[u3 - 1], p3 = o3[u3], c2 = o3[u3 + 1], h2 = 0 === u3 ? n3 : p3.sub(l3)._unit()._perp(), f2 = u3 === o3.length - 1 ? n3 : c2.sub(p3)._unit()._perp(), y2 = h2._add(f2)._unit(), d2 = y2.x * f2.x + y2.y * f2.y;
                  y2._mult(1 / d2), s3.push(y2._mult(e4)._add(p3));
                }
                r3.push(s3);
              }
              return r3;
            }(n2, p2 * s2)), function(t4, e4, r3) {
              for (var n3 = 0; n3 < e4.length; n3++) {
                var i2 = e4[n3];
                if (t4.length >= 3) {
                  for (var a3 = 0; a3 < i2.length; a3++)
                    if (pa(t4, i2[a3]))
                      return true;
                }
                if (ia(t4, i2, r3))
                  return true;
              }
              return false;
            }(u2, n2, l2);
          }, e2;
        }(Un);
        function cs(t2, e2) {
          return e2 > 0 ? e2 + 2 * t2 : t2;
        }
        var hs = Nn([{ name: "a_pos_offset", components: 4, type: "Int16" }, { name: "a_data", components: 4, type: "Uint16" }]), fs = Nn([{ name: "a_projected_pos", components: 3, type: "Float32" }], 4), ys = (Nn([{ name: "a_fade_opacity", components: 1, type: "Uint32" }], 4), Nn([{ name: "a_placed", components: 2, type: "Uint8" }], 4)), ds = (Nn([{ type: "Int16", name: "anchorPointX" }, { type: "Int16", name: "anchorPointY" }, { type: "Int16", name: "x1" }, { type: "Int16", name: "y1" }, { type: "Int16", name: "x2" }, { type: "Int16", name: "y2" }, { type: "Uint32", name: "featureIndex" }, { type: "Uint16", name: "sourceLayerIndex" }, { type: "Uint16", name: "bucketIndex" }, { type: "Int16", name: "radius" }, { type: "Int16", name: "signedDistanceFromAnchor" }]), Nn([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_anchor_pos", components: 2, type: "Int16" }, { name: "a_extrude", components: 2, type: "Int16" }], 4)), ms = Nn([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_anchor_pos", components: 2, type: "Int16" }, { name: "a_extrude", components: 2, type: "Int16" }], 4);
        Nn([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Uint16", name: "glyphStartIndex" }, { type: "Uint16", name: "numGlyphs" }, { type: "Uint32", name: "vertexStartIndex" }, { type: "Uint32", name: "lineStartIndex" }, { type: "Uint32", name: "lineLength" }, { type: "Uint16", name: "segment" }, { type: "Uint16", name: "lowerSize" }, { type: "Uint16", name: "upperSize" }, { type: "Float32", name: "lineOffsetX" }, { type: "Float32", name: "lineOffsetY" }, { type: "Uint8", name: "writingMode" }, { type: "Uint8", name: "hidden" }]), Nn([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Int16", name: "horizontalPlacedTextSymbolIndex" }, { type: "Int16", name: "verticalPlacedTextSymbolIndex" }, { type: "Uint16", name: "key" }, { type: "Uint16", name: "textBoxStartIndex" }, { type: "Uint16", name: "textBoxEndIndex" }, { type: "Uint16", name: "iconBoxStartIndex" }, { type: "Uint16", name: "iconBoxEndIndex" }, { type: "Uint16", name: "featureIndex" }, { type: "Uint16", name: "numGlyphVertices" }, { type: "Uint16", name: "numVerticalGlyphVertices" }, { type: "Uint16", name: "numIconVertices" }, { type: "Uint32", name: "crossTileID" }]), Nn([{ type: "Float32", name: "offsetX" }]), Nn([{ type: "Int16", name: "x" }, { type: "Int16", name: "y" }, { type: "Int16", name: "tileUnitDistanceFromAnchor" }]);
        function vs(t2, e2, r2) {
          return t2.sections.forEach(function(t3) {
            t3.text = function(t4, e3, r3) {
              var n2 = e3.layout.get("text-transform").evaluate(r3, {});
              return "uppercase" === n2 ? t4 = t4.toLocaleUpperCase() : "lowercase" === n2 && (t4 = t4.toLocaleLowerCase()), An.applyArabicShaping && (t4 = An.applyArabicShaping(t4)), t4;
            }(t3.text, e2, r2);
          }), t2;
        }
        var gs = { "!": "", "#": "", $: "", "%": "", "&": "", "(": "", ")": "", "*": "", "+": "", ",": "", "-": "", ".": "", "/": "", ":": "", ";": "", "<": "", "=": "", ">": "", "?": "", "@": "", "[": "", "\\": "", "]": "", "^": "", _: "", "`": "", "{": "", "|": "", "}": "", "~": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "", "": "" };
        var xs = function(t2) {
          function e2(e3, r2, n2, i2) {
            t2.call(this, e3, r2), this.angle = n2, void 0 !== i2 && (this.segment = i2);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.clone = function() {
            return new e2(this.x, this.y, this.angle, this.segment);
          }, e2;
        }(i);
        sn("Anchor", xs);
        var bs = 256;
        function _s(t2, e2) {
          var r2 = e2.expression;
          if ("constant" === r2.kind)
            return { functionType: "constant", layoutSize: r2.evaluate(new Sn(t2 + 1)) };
          if ("source" === r2.kind)
            return { functionType: "source" };
          for (var n2 = r2.zoomStops, i2 = 0; i2 < n2.length && n2[i2] <= t2; )
            i2++;
          for (var a2 = i2 = Math.max(0, i2 - 1); a2 < n2.length && n2[a2] < t2 + 1; )
            a2++;
          a2 = Math.min(n2.length - 1, a2);
          var o2 = { min: n2[i2], max: n2[a2] };
          return "composite" === r2.kind ? { functionType: "composite", zoomRange: o2, propertyValue: e2.value } : { functionType: "camera", layoutSize: r2.evaluate(new Sn(t2 + 1)), zoomRange: o2, sizeRange: { min: r2.evaluate(new Sn(o2.min)), max: r2.evaluate(new Sn(o2.max)) }, propertyValue: e2.value };
        }
        var ws = Wo.VectorTileFeature.types, As = [{ name: "a_fade_opacity", components: 1, type: "Uint8", offset: 0 }];
        function Ss(t2, e2, r2, n2, i2, a2, o2, s2) {
          t2.emplaceBack(e2, r2, Math.round(32 * n2), Math.round(32 * i2), a2, o2, s2 ? s2[0] : 0, s2 ? s2[1] : 0);
        }
        function ks(t2, e2, r2) {
          t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2);
        }
        var zs = function(t2) {
          this.layoutVertexArray = new Jn(), this.indexArray = new si(), this.programConfigurations = t2, this.segments = new zi(), this.dynamicLayoutVertexArray = new $n(), this.opacityVertexArray = new Wn(), this.placedSymbolArray = new di();
        };
        zs.prototype.upload = function(t2, e2, r2, n2) {
          r2 && (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, hs.members), this.indexBuffer = t2.createIndexBuffer(this.indexArray, e2), this.dynamicLayoutVertexBuffer = t2.createVertexBuffer(this.dynamicLayoutVertexArray, fs.members, true), this.opacityVertexBuffer = t2.createVertexBuffer(this.opacityVertexArray, As, true), this.opacityVertexBuffer.itemSize = 1), (r2 || n2) && this.programConfigurations.upload(t2);
        }, zs.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());
        }, sn("SymbolBuffers", zs);
        var Is = function(t2, e2, r2) {
          this.layoutVertexArray = new t2(), this.layoutAttributes = e2, this.indexArray = new r2(), this.segments = new zi(), this.collisionVertexArray = new ei();
        };
        Is.prototype.upload = function(t2) {
          this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t2.createVertexBuffer(this.collisionVertexArray, ys.members, true);
        }, Is.prototype.destroy = function() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());
        }, sn("CollisionBuffers", Is);
        var Bs = function(t2) {
          this.collisionBoxArray = t2.collisionBoxArray, this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
            return t3.id;
          }), this.index = t2.index, this.pixelRatio = t2.pixelRatio, this.sourceLayerIndex = t2.sourceLayerIndex, this.hasPattern = false;
          var e2 = this.layers[0]._unevaluatedLayout._values;
          this.textSizeData = _s(this.zoom, e2["text-size"]), this.iconSizeData = _s(this.zoom, e2["icon-size"]);
          var r2 = this.layers[0].layout, n2 = r2.get("symbol-sort-key"), i2 = r2.get("symbol-z-order");
          this.sortFeaturesByKey = "viewport-y" !== i2 && void 0 !== n2.constantOr(1);
          var a2 = "viewport-y" === i2 || "auto" === i2 && !this.sortFeaturesByKey;
          this.sortFeaturesByY = a2 && (r2.get("text-allow-overlap") || r2.get("icon-allow-overlap") || r2.get("text-ignore-placement") || r2.get("icon-ignore-placement")), this.stateDependentLayerIds = this.layers.filter(function(t3) {
            return t3.isStateDependent();
          }).map(function(t3) {
            return t3.id;
          }), this.sourceID = t2.sourceID;
        };
        Bs.prototype.createArrays = function() {
          this.text = new zs(new Xi(hs.members, this.layers, this.zoom, function(t2) {
            return /^text/.test(t2);
          })), this.icon = new zs(new Xi(hs.members, this.layers, this.zoom, function(t2) {
            return /^icon/.test(t2);
          })), this.collisionBox = new Is(ti, ds.members, ui), this.collisionCircle = new Is(ti, ms.members, si), this.glyphOffsetArray = new xi(), this.lineVertexArray = new _i(), this.symbolInstances = new vi();
        }, Bs.prototype.calculateGlyphDependencies = function(t2, e2, r2, n2) {
          for (var i2 = 0; i2 < t2.length; i2++)
            if (e2[t2.charCodeAt(i2)] = true, r2 && n2) {
              var a2 = gs[t2.charAt(i2)];
              a2 && (e2[a2.charCodeAt(0)] = true);
            }
        }, Bs.prototype.populate = function(t2, e2) {
          var r2 = this.layers[0], n2 = r2.layout, i2 = n2.get("text-font"), a2 = n2.get("text-field"), o2 = n2.get("icon-image"), s2 = ("constant" !== a2.value.kind || a2.value.value.toString().length > 0) && ("constant" !== i2.value.kind || i2.value.value.length > 0), u2 = "constant" !== o2.value.kind || o2.value.value && o2.value.value.length > 0, l2 = n2.get("symbol-sort-key");
          if (this.features = [], s2 || u2) {
            for (var p2 = e2.iconDependencies, c2 = e2.glyphDependencies, h2 = new Sn(this.zoom), f2 = 0, y2 = t2; f2 < y2.length; f2 += 1) {
              var d2 = y2[f2], m2 = d2.feature, v2 = d2.index, g2 = d2.sourceLayerIndex;
              if (r2._featureFilter(h2, m2)) {
                var x2 = void 0;
                if (s2) {
                  var b2 = r2.getValueAndResolveTokens("text-field", m2);
                  x2 = vs(b2 instanceof Rt ? b2 : Rt.fromString(b2), r2, m2);
                }
                var _2 = void 0;
                if (u2 && (_2 = r2.getValueAndResolveTokens("icon-image", m2)), x2 || _2) {
                  var w2 = this.sortFeaturesByKey ? l2.evaluate(m2, {}) : void 0, A2 = { text: x2, icon: _2, index: v2, sourceLayerIndex: g2, geometry: Wi(m2), properties: m2.properties, type: ws[m2.type], sortKey: w2 };
                  if (void 0 !== m2.id && (A2.id = m2.id), this.features.push(A2), _2 && (p2[_2] = true), x2)
                    for (var S2 = i2.evaluate(m2, {}).join(","), k2 = "map" === n2.get("text-rotation-alignment") && "point" !== n2.get("symbol-placement"), z2 = 0, I2 = x2.sections; z2 < I2.length; z2 += 1) {
                      var B2 = I2[z2], E2 = fn(x2.toString()), P2 = B2.fontStack || S2, V2 = c2[P2] = c2[P2] || {};
                      this.calculateGlyphDependencies(B2.text, V2, k2, E2);
                    }
                }
              }
            }
            "line" === n2.get("symbol-placement") && (this.features = function(t3) {
              var e3 = {}, r3 = {}, n3 = [], i3 = 0;
              function a3(e4) {
                n3.push(t3[e4]), i3++;
              }
              function o3(t4, e4, i4) {
                var a4 = r3[t4];
                return delete r3[t4], r3[e4] = a4, n3[a4].geometry[0].pop(), n3[a4].geometry[0] = n3[a4].geometry[0].concat(i4[0]), a4;
              }
              function s3(t4, r4, i4) {
                var a4 = e3[r4];
                return delete e3[r4], e3[t4] = a4, n3[a4].geometry[0].shift(), n3[a4].geometry[0] = i4[0].concat(n3[a4].geometry[0]), a4;
              }
              function u3(t4, e4, r4) {
                var n4 = r4 ? e4[0][e4[0].length - 1] : e4[0][0];
                return t4 + ":" + n4.x + ":" + n4.y;
              }
              for (var l3 = 0; l3 < t3.length; l3++) {
                var p3 = t3[l3], c3 = p3.geometry, h3 = p3.text ? p3.text.toString() : null;
                if (h3) {
                  var f3 = u3(h3, c3), y3 = u3(h3, c3, true);
                  if (f3 in r3 && y3 in e3 && r3[f3] !== e3[y3]) {
                    var d3 = s3(f3, y3, c3), m3 = o3(f3, y3, n3[d3].geometry);
                    delete e3[f3], delete r3[y3], r3[u3(h3, n3[m3].geometry, true)] = m3, n3[d3].geometry = null;
                  } else
                    f3 in r3 ? o3(f3, y3, c3) : y3 in e3 ? s3(f3, y3, c3) : (a3(l3), e3[f3] = i3 - 1, r3[y3] = i3 - 1);
                } else
                  a3(l3);
              }
              return n3.filter(function(t4) {
                return t4.geometry;
              });
            }(this.features)), this.sortFeaturesByKey && this.features.sort(function(t3, e3) {
              return t3.sortKey - e3.sortKey;
            });
          }
        }, Bs.prototype.update = function(t2, e2, r2) {
          this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2), this.icon.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2));
        }, Bs.prototype.isEmpty = function() {
          return 0 === this.symbolInstances.length;
        }, Bs.prototype.uploadPending = function() {
          return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;
        }, Bs.prototype.upload = function(t2) {
          this.uploaded || (this.collisionBox.upload(t2), this.collisionCircle.upload(t2)), this.text.upload(t2, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t2, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = true;
        }, Bs.prototype.destroy = function() {
          this.text.destroy(), this.icon.destroy(), this.collisionBox.destroy(), this.collisionCircle.destroy();
        }, Bs.prototype.addToLineVertexArray = function(t2, e2) {
          var r2 = this.lineVertexArray.length;
          if (void 0 !== t2.segment) {
            for (var n2 = t2.dist(e2[t2.segment + 1]), i2 = t2.dist(e2[t2.segment]), a2 = {}, o2 = t2.segment + 1; o2 < e2.length; o2++)
              a2[o2] = { x: e2[o2].x, y: e2[o2].y, tileUnitDistanceFromAnchor: n2 }, o2 < e2.length - 1 && (n2 += e2[o2 + 1].dist(e2[o2]));
            for (var s2 = t2.segment || 0; s2 >= 0; s2--)
              a2[s2] = { x: e2[s2].x, y: e2[s2].y, tileUnitDistanceFromAnchor: i2 }, s2 > 0 && (i2 += e2[s2 - 1].dist(e2[s2]));
            for (var u2 = 0; u2 < e2.length; u2++) {
              var l2 = a2[u2];
              this.lineVertexArray.emplaceBack(l2.x, l2.y, l2.tileUnitDistanceFromAnchor);
            }
          }
          return { lineStartIndex: r2, lineLength: this.lineVertexArray.length - r2 };
        }, Bs.prototype.addSymbols = function(t2, e2, r2, n2, i2, a2, o2, s2, u2, l2) {
          for (var p2 = t2.indexArray, c2 = t2.layoutVertexArray, h2 = t2.dynamicLayoutVertexArray, f2 = t2.segments.prepareSegment(4 * e2.length, t2.layoutVertexArray, t2.indexArray, a2.sortKey), y2 = this.glyphOffsetArray.length, d2 = f2.vertexLength, m2 = 0, v2 = e2; m2 < v2.length; m2 += 1) {
            var g2 = v2[m2], x2 = g2.tl, b2 = g2.tr, _2 = g2.bl, w2 = g2.br, A2 = g2.tex, S2 = f2.vertexLength, k2 = g2.glyphOffset[1];
            Ss(c2, s2.x, s2.y, x2.x, k2 + x2.y, A2.x, A2.y, r2), Ss(c2, s2.x, s2.y, b2.x, k2 + b2.y, A2.x + A2.w, A2.y, r2), Ss(c2, s2.x, s2.y, _2.x, k2 + _2.y, A2.x, A2.y + A2.h, r2), Ss(c2, s2.x, s2.y, w2.x, k2 + w2.y, A2.x + A2.w, A2.y + A2.h, r2), ks(h2, s2, 0), p2.emplaceBack(S2, S2 + 1, S2 + 2), p2.emplaceBack(S2 + 1, S2 + 2, S2 + 3), f2.vertexLength += 4, f2.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(g2.glyphOffset[0]);
          }
          t2.placedSymbolArray.emplaceBack(s2.x, s2.y, y2, this.glyphOffsetArray.length - y2, d2, u2, l2, s2.segment, r2 ? r2[0] : 0, r2 ? r2[1] : 0, n2[0], n2[1], o2, false), t2.programConfigurations.populatePaintArrays(t2.layoutVertexArray.length, a2, a2.index, {});
        }, Bs.prototype._addCollisionDebugVertex = function(t2, e2, r2, n2, i2, a2) {
          return e2.emplaceBack(0, 0), t2.emplaceBack(r2.x, r2.y, n2, i2, Math.round(a2.x), Math.round(a2.y));
        }, Bs.prototype.addCollisionDebugVertices = function(t2, e2, r2, n2, a2, o2, s2, u2) {
          var l2 = a2.segments.prepareSegment(4, a2.layoutVertexArray, a2.indexArray), p2 = l2.vertexLength, c2 = a2.layoutVertexArray, h2 = a2.collisionVertexArray, f2 = s2.anchorX, y2 = s2.anchorY;
          if (this._addCollisionDebugVertex(c2, h2, o2, f2, y2, new i(t2, e2)), this._addCollisionDebugVertex(c2, h2, o2, f2, y2, new i(r2, e2)), this._addCollisionDebugVertex(c2, h2, o2, f2, y2, new i(r2, n2)), this._addCollisionDebugVertex(c2, h2, o2, f2, y2, new i(t2, n2)), l2.vertexLength += 4, u2) {
            var d2 = a2.indexArray;
            d2.emplaceBack(p2, p2 + 1, p2 + 2), d2.emplaceBack(p2, p2 + 2, p2 + 3), l2.primitiveLength += 2;
          } else {
            var m2 = a2.indexArray;
            m2.emplaceBack(p2, p2 + 1), m2.emplaceBack(p2 + 1, p2 + 2), m2.emplaceBack(p2 + 2, p2 + 3), m2.emplaceBack(p2 + 3, p2), l2.primitiveLength += 4;
          }
        }, Bs.prototype.addDebugCollisionBoxes = function(t2, e2, r2) {
          for (var n2 = t2; n2 < e2; n2++) {
            var i2 = this.collisionBoxArray.get(n2), a2 = i2.x1, o2 = i2.y1, s2 = i2.x2, u2 = i2.y2, l2 = i2.radius > 0;
            this.addCollisionDebugVertices(a2, o2, s2, u2, l2 ? this.collisionCircle : this.collisionBox, i2.anchorPoint, r2, l2);
          }
        }, Bs.prototype.generateCollisionDebugBuffers = function() {
          for (var t2 = 0; t2 < this.symbolInstances.length; t2++) {
            var e2 = this.symbolInstances.get(t2);
            this.addDebugCollisionBoxes(e2.textBoxStartIndex, e2.textBoxEndIndex, e2), this.addDebugCollisionBoxes(e2.iconBoxStartIndex, e2.iconBoxEndIndex, e2);
          }
        }, Bs.prototype._deserializeCollisionBoxesForSymbol = function(t2, e2, r2, n2, i2) {
          for (var a2 = {}, o2 = e2; o2 < r2; o2++) {
            var s2 = t2.get(o2);
            if (0 === s2.radius) {
              a2.textBox = { x1: s2.x1, y1: s2.y1, x2: s2.x2, y2: s2.y2, anchorPointX: s2.anchorPointX, anchorPointY: s2.anchorPointY }, a2.textFeatureIndex = s2.featureIndex;
              break;
            }
            a2.textCircles || (a2.textCircles = [], a2.textFeatureIndex = s2.featureIndex);
            a2.textCircles.push(s2.anchorPointX, s2.anchorPointY, s2.radius, s2.signedDistanceFromAnchor, 1);
          }
          for (var u2 = n2; u2 < i2; u2++) {
            var l2 = t2.get(u2);
            if (0 === l2.radius) {
              a2.iconBox = { x1: l2.x1, y1: l2.y1, x2: l2.x2, y2: l2.y2, anchorPointX: l2.anchorPointX, anchorPointY: l2.anchorPointY }, a2.iconFeatureIndex = l2.featureIndex;
              break;
            }
          }
          return a2;
        }, Bs.prototype.deserializeCollisionBoxes = function(t2) {
          this.collisionArrays = [];
          for (var e2 = 0; e2 < this.symbolInstances.length; e2++) {
            var r2 = this.symbolInstances.get(e2);
            this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t2, r2.textBoxStartIndex, r2.textBoxEndIndex, r2.iconBoxStartIndex, r2.iconBoxEndIndex));
          }
        }, Bs.prototype.hasTextData = function() {
          return this.text.segments.get().length > 0;
        }, Bs.prototype.hasIconData = function() {
          return this.icon.segments.get().length > 0;
        }, Bs.prototype.hasCollisionBoxData = function() {
          return this.collisionBox.segments.get().length > 0;
        }, Bs.prototype.hasCollisionCircleData = function() {
          return this.collisionCircle.segments.get().length > 0;
        }, Bs.prototype.addIndicesForPlacedTextSymbol = function(t2) {
          for (var e2 = this.text.placedSymbolArray.get(t2), r2 = e2.vertexStartIndex + 4 * e2.numGlyphs, n2 = e2.vertexStartIndex; n2 < r2; n2 += 4)
            this.text.indexArray.emplaceBack(n2, n2 + 1, n2 + 2), this.text.indexArray.emplaceBack(n2 + 1, n2 + 2, n2 + 3);
        }, Bs.prototype.sortFeatures = function(t2) {
          if (this.sortFeaturesByY && this.sortedAngle !== t2 && (this.sortedAngle = t2, !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1))) {
            for (var e2 = [], r2 = 0; r2 < this.symbolInstances.length; r2++)
              e2.push(r2);
            for (var n2 = Math.sin(t2), i2 = Math.cos(t2), a2 = [], o2 = [], s2 = 0; s2 < this.symbolInstances.length; s2++) {
              var u2 = this.symbolInstances.get(s2);
              a2.push(0 | Math.round(n2 * u2.anchorX + i2 * u2.anchorY)), o2.push(u2.featureIndex);
            }
            e2.sort(function(t3, e3) {
              return a2[t3] - a2[e3] || o2[e3] - o2[t3];
            }), this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];
            for (var l2 = 0, p2 = e2; l2 < p2.length; l2 += 1) {
              var c2 = p2[l2], h2 = this.symbolInstances.get(c2);
              this.featureSortOrder.push(h2.featureIndex), h2.horizontalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedTextSymbol(h2.horizontalPlacedTextSymbolIndex), h2.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedTextSymbol(h2.verticalPlacedTextSymbolIndex);
              var f2 = this.icon.placedSymbolArray.get(c2);
              if (f2.numGlyphs) {
                var y2 = f2.vertexStartIndex;
                this.icon.indexArray.emplaceBack(y2, y2 + 1, y2 + 2), this.icon.indexArray.emplaceBack(y2 + 1, y2 + 2, y2 + 3);
              }
            }
            this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);
          }
        }, sn("SymbolBucket", Bs, { omit: ["layers", "collisionBoxArray", "features", "compareText"] }), Bs.MAX_GLYPHS = 65535, Bs.addDynamicAttributes = ks;
        var Es = new Dn({ "symbol-placement": new Mn(mt.layout_symbol["symbol-placement"]), "symbol-spacing": new Mn(mt.layout_symbol["symbol-spacing"]), "symbol-avoid-edges": new Mn(mt.layout_symbol["symbol-avoid-edges"]), "symbol-sort-key": new Tn(mt.layout_symbol["symbol-sort-key"]), "symbol-z-order": new Mn(mt.layout_symbol["symbol-z-order"]), "icon-allow-overlap": new Mn(mt.layout_symbol["icon-allow-overlap"]), "icon-ignore-placement": new Mn(mt.layout_symbol["icon-ignore-placement"]), "icon-optional": new Mn(mt.layout_symbol["icon-optional"]), "icon-rotation-alignment": new Mn(mt.layout_symbol["icon-rotation-alignment"]), "icon-size": new Tn(mt.layout_symbol["icon-size"]), "icon-text-fit": new Mn(mt.layout_symbol["icon-text-fit"]), "icon-text-fit-padding": new Mn(mt.layout_symbol["icon-text-fit-padding"]), "icon-image": new Tn(mt.layout_symbol["icon-image"]), "icon-rotate": new Tn(mt.layout_symbol["icon-rotate"]), "icon-padding": new Mn(mt.layout_symbol["icon-padding"]), "icon-keep-upright": new Mn(mt.layout_symbol["icon-keep-upright"]), "icon-offset": new Tn(mt.layout_symbol["icon-offset"]), "icon-anchor": new Tn(mt.layout_symbol["icon-anchor"]), "icon-pitch-alignment": new Mn(mt.layout_symbol["icon-pitch-alignment"]), "text-pitch-alignment": new Mn(mt.layout_symbol["text-pitch-alignment"]), "text-rotation-alignment": new Mn(mt.layout_symbol["text-rotation-alignment"]), "text-field": new Tn(mt.layout_symbol["text-field"]), "text-font": new Tn(mt.layout_symbol["text-font"]), "text-size": new Tn(mt.layout_symbol["text-size"]), "text-max-width": new Tn(mt.layout_symbol["text-max-width"]), "text-line-height": new Mn(mt.layout_symbol["text-line-height"]), "text-letter-spacing": new Tn(mt.layout_symbol["text-letter-spacing"]), "text-justify": new Tn(mt.layout_symbol["text-justify"]), "text-anchor": new Tn(mt.layout_symbol["text-anchor"]), "text-max-angle": new Mn(mt.layout_symbol["text-max-angle"]), "text-rotate": new Tn(mt.layout_symbol["text-rotate"]), "text-padding": new Mn(mt.layout_symbol["text-padding"]), "text-keep-upright": new Mn(mt.layout_symbol["text-keep-upright"]), "text-transform": new Tn(mt.layout_symbol["text-transform"]), "text-offset": new Tn(mt.layout_symbol["text-offset"]), "text-allow-overlap": new Mn(mt.layout_symbol["text-allow-overlap"]), "text-ignore-placement": new Mn(mt.layout_symbol["text-ignore-placement"]), "text-optional": new Mn(mt.layout_symbol["text-optional"]) }), Ps = { paint: new Dn({ "icon-opacity": new Tn(mt.paint_symbol["icon-opacity"]), "icon-color": new Tn(mt.paint_symbol["icon-color"]), "icon-halo-color": new Tn(mt.paint_symbol["icon-halo-color"]), "icon-halo-width": new Tn(mt.paint_symbol["icon-halo-width"]), "icon-halo-blur": new Tn(mt.paint_symbol["icon-halo-blur"]), "icon-translate": new Mn(mt.paint_symbol["icon-translate"]), "icon-translate-anchor": new Mn(mt.paint_symbol["icon-translate-anchor"]), "text-opacity": new Tn(mt.paint_symbol["text-opacity"]), "text-color": new Tn(mt.paint_symbol["text-color"]), "text-halo-color": new Tn(mt.paint_symbol["text-halo-color"]), "text-halo-width": new Tn(mt.paint_symbol["text-halo-width"]), "text-halo-blur": new Tn(mt.paint_symbol["text-halo-blur"]), "text-translate": new Mn(mt.paint_symbol["text-translate"]), "text-translate-anchor": new Mn(mt.paint_symbol["text-translate-anchor"]) }), layout: Es }, Vs = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Ps);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.recalculate = function(e3) {
            t2.prototype.recalculate.call(this, e3), "auto" === this.layout.get("icon-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["icon-rotation-alignment"] = "map" : this.layout._values["icon-rotation-alignment"] = "viewport"), "auto" === this.layout.get("text-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["text-rotation-alignment"] = "map" : this.layout._values["text-rotation-alignment"] = "viewport"), "auto" === this.layout.get("text-pitch-alignment") && (this.layout._values["text-pitch-alignment"] = this.layout.get("text-rotation-alignment")), "auto" === this.layout.get("icon-pitch-alignment") && (this.layout._values["icon-pitch-alignment"] = this.layout.get("icon-rotation-alignment"));
          }, e2.prototype.getValueAndResolveTokens = function(t3, e3) {
            var r2, n2 = this.layout.get(t3).evaluate(e3, {}), i2 = this._unevaluatedLayout._values[t3];
            return i2.isDataDriven() || yr(i2.value) ? n2 : (r2 = e3.properties, n2.replace(/{([^{}]+)}/g, function(t4, e4) {
              return e4 in r2 ? String(r2[e4]) : "";
            }));
          }, e2.prototype.createBucket = function(t3) {
            return new Bs(t3);
          }, e2.prototype.queryRadius = function() {
            return 0;
          }, e2.prototype.queryIntersectsFeature = function() {
            return false;
          }, e2;
        }(Un), Cs = { paint: new Dn({ "background-color": new Mn(mt.paint_background["background-color"]), "background-pattern": new Ln(mt.paint_background["background-pattern"]), "background-opacity": new Mn(mt.paint_background["background-opacity"]) }) }, Ms = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Cs);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2;
        }(Un), Ts = { paint: new Dn({ "raster-opacity": new Mn(mt.paint_raster["raster-opacity"]), "raster-hue-rotate": new Mn(mt.paint_raster["raster-hue-rotate"]), "raster-brightness-min": new Mn(mt.paint_raster["raster-brightness-min"]), "raster-brightness-max": new Mn(mt.paint_raster["raster-brightness-max"]), "raster-saturation": new Mn(mt.paint_raster["raster-saturation"]), "raster-contrast": new Mn(mt.paint_raster["raster-contrast"]), "raster-resampling": new Mn(mt.paint_raster["raster-resampling"]), "raster-fade-duration": new Mn(mt.paint_raster["raster-fade-duration"]) }) }, Fs = function(t2) {
          function e2(e3) {
            t2.call(this, e3, Ts);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2;
        }(Un);
        var Ls = function(t2) {
          function e2(e3) {
            t2.call(this, e3, {}), this.implementation = e3;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.hasOffscreenPass = function() {
            return void 0 !== this.implementation.prerender || "3d" === this.implementation.renderingMode;
          }, e2.prototype.recalculate = function() {
          }, e2.prototype.updateTransitions = function() {
          }, e2.prototype.hasTransition = function() {
          }, e2.prototype.serialize = function() {
          }, e2.prototype.resize = function() {
            this.viewportFrame && (this.viewportFrame.destroy(), this.viewportFrame = null);
          }, e2.prototype.onAdd = function(t3) {
            this.implementation.onAdd && this.implementation.onAdd(t3, t3.painter.context.gl);
          }, e2.prototype.onRemove = function(t3) {
            this.implementation.onRemove && this.implementation.onRemove(t3);
          }, e2;
        }(Un), Os = { circle: Ta, heatmap: Ka, hillshade: Xa, fill: Po, "fill-extrusion": Uo, line: ps, symbol: Vs, background: Ms, raster: Fs };
        function Ds(t2) {
          for (var e2 = 0, r2 = 0, n2 = 0, i2 = t2; n2 < i2.length; n2 += 1) {
            var a2 = i2[n2];
            e2 += a2.w * a2.h, r2 = Math.max(r2, a2.w);
          }
          t2.sort(function(t3, e3) {
            return e3.h - t3.h;
          });
          for (var o2 = [{ x: 0, y: 0, w: Math.max(Math.ceil(Math.sqrt(e2 / 0.95)), r2), h: 1 / 0 }], s2 = 0, u2 = 0, l2 = 0, p2 = t2; l2 < p2.length; l2 += 1)
            for (var c2 = p2[l2], h2 = o2.length - 1; h2 >= 0; h2--) {
              var f2 = o2[h2];
              if (!(c2.w > f2.w || c2.h > f2.h)) {
                if (c2.x = f2.x, c2.y = f2.y, u2 = Math.max(u2, c2.y + c2.h), s2 = Math.max(s2, c2.x + c2.w), c2.w === f2.w && c2.h === f2.h) {
                  var y2 = o2.pop();
                  h2 < o2.length && (o2[h2] = y2);
                } else
                  c2.h === f2.h ? (f2.x += c2.w, f2.w -= c2.w) : c2.w === f2.w ? (f2.y += c2.h, f2.h -= c2.h) : (o2.push({ x: f2.x + c2.w, y: f2.y, w: f2.w - c2.w, h: c2.h }), f2.y += c2.h, f2.h -= c2.h);
                break;
              }
            }
          return { w: s2, h: u2, fill: e2 / (s2 * u2) || 0 };
        }
        var Us = function(t2, e2) {
          var r2 = e2.pixelRatio;
          this.paddedRect = t2, this.pixelRatio = r2;
        }, js = { tl: { configurable: true }, br: { configurable: true }, tlbr: { configurable: true }, displaySize: { configurable: true } };
        js.tl.get = function() {
          return [this.paddedRect.x + 1, this.paddedRect.y + 1];
        }, js.br.get = function() {
          return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];
        }, js.tlbr.get = function() {
          return this.tl.concat(this.br);
        }, js.displaySize.get = function() {
          return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];
        }, Object.defineProperties(Us.prototype, js);
        var Rs = function(t2, e2) {
          var r2 = {}, n2 = {}, i2 = [];
          for (var a2 in t2) {
            var o2 = t2[a2], s2 = { x: 0, y: 0, w: o2.data.width + 2, h: o2.data.height + 2 };
            i2.push(s2), r2[a2] = new Us(s2, o2);
          }
          for (var u2 in e2) {
            var l2 = e2[u2], p2 = { x: 0, y: 0, w: l2.data.width + 2, h: l2.data.height + 2 };
            i2.push(p2), n2[u2] = new Us(p2, l2);
          }
          var c2 = Ds(i2), h2 = c2.w, f2 = c2.h, y2 = new Ra({ width: h2 || 1, height: f2 || 1 });
          for (var d2 in t2) {
            var m2 = t2[d2], v2 = r2[d2].paddedRect;
            Ra.copy(m2.data, y2, { x: 0, y: 0 }, { x: v2.x + 1, y: v2.y + 1 }, m2.data);
          }
          for (var g2 in e2) {
            var x2 = e2[g2], b2 = n2[g2].paddedRect, _2 = b2.x + 1, w2 = b2.y + 1, A2 = x2.data.width, S2 = x2.data.height;
            Ra.copy(x2.data, y2, { x: 0, y: 0 }, { x: _2, y: w2 }, x2.data), Ra.copy(x2.data, y2, { x: 0, y: S2 - 1 }, { x: _2, y: w2 - 1 }, { width: A2, height: 1 }), Ra.copy(x2.data, y2, { x: 0, y: 0 }, { x: _2, y: w2 + S2 }, { width: A2, height: 1 }), Ra.copy(x2.data, y2, { x: A2 - 1, y: 0 }, { x: _2 - 1, y: w2 }, { width: 1, height: S2 }), Ra.copy(x2.data, y2, { x: 0, y: 0 }, { x: _2 + A2, y: w2 }, { width: 1, height: S2 });
          }
          this.image = y2, this.iconPositions = r2, this.patternPositions = n2;
        };
        sn("ImagePosition", Us), sn("ImageAtlas", Rs);
        var qs = self.HTMLImageElement, Ns = self.HTMLCanvasElement, Ks = self.HTMLVideoElement, Gs = self.ImageData, Xs = function(t2, e2, r2, n2) {
          this.context = t2, this.format = r2, this.texture = t2.gl.createTexture(), this.update(e2, n2);
        };
        Xs.prototype.update = function(t2, e2) {
          var r2 = t2.width, n2 = t2.height, i2 = !this.size || this.size[0] !== r2 || this.size[1] !== n2, a2 = this.context, o2 = a2.gl;
          this.useMipmap = Boolean(e2 && e2.useMipmap), o2.bindTexture(o2.TEXTURE_2D, this.texture), a2.pixelStoreUnpackFlipY.set(false), a2.pixelStoreUnpack.set(1), a2.pixelStoreUnpackPremultiplyAlpha.set(this.format === o2.RGBA && (!e2 || false !== e2.premultiply)), i2 ? (this.size = [r2, n2], t2 instanceof qs || t2 instanceof Ns || t2 instanceof Ks || t2 instanceof Gs ? o2.texImage2D(o2.TEXTURE_2D, 0, this.format, this.format, o2.UNSIGNED_BYTE, t2) : o2.texImage2D(o2.TEXTURE_2D, 0, this.format, r2, n2, 0, this.format, o2.UNSIGNED_BYTE, t2.data)) : t2 instanceof qs || t2 instanceof Ns || t2 instanceof Ks || t2 instanceof Gs ? o2.texSubImage2D(o2.TEXTURE_2D, 0, 0, 0, o2.RGBA, o2.UNSIGNED_BYTE, t2) : o2.texSubImage2D(o2.TEXTURE_2D, 0, 0, 0, r2, n2, o2.RGBA, o2.UNSIGNED_BYTE, t2.data), this.useMipmap && this.isSizePowerOfTwo() && o2.generateMipmap(o2.TEXTURE_2D);
        }, Xs.prototype.bind = function(t2, e2, r2) {
          var n2 = this.context.gl;
          n2.bindTexture(n2.TEXTURE_2D, this.texture), r2 !== n2.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (r2 = n2.LINEAR), t2 !== this.filter && (n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_MAG_FILTER, t2), n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_MIN_FILTER, r2 || t2), this.filter = t2), e2 !== this.wrap && (n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_WRAP_S, e2), n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_WRAP_T, e2), this.wrap = e2);
        }, Xs.prototype.isSizePowerOfTwo = function() {
          return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;
        }, Xs.prototype.destroy = function() {
          this.context.gl.deleteTexture(this.texture), this.texture = null;
        };
        var Zs = function(t2, e2, r2, n2, i2) {
          var a2, o2, s2 = 8 * i2 - n2 - 1, u2 = (1 << s2) - 1, l2 = u2 >> 1, p2 = -7, c2 = r2 ? i2 - 1 : 0, h2 = r2 ? -1 : 1, f2 = t2[e2 + c2];
          for (c2 += h2, a2 = f2 & (1 << -p2) - 1, f2 >>= -p2, p2 += s2; p2 > 0; a2 = 256 * a2 + t2[e2 + c2], c2 += h2, p2 -= 8)
            ;
          for (o2 = a2 & (1 << -p2) - 1, a2 >>= -p2, p2 += n2; p2 > 0; o2 = 256 * o2 + t2[e2 + c2], c2 += h2, p2 -= 8)
            ;
          if (0 === a2)
            a2 = 1 - l2;
          else {
            if (a2 === u2)
              return o2 ? NaN : 1 / 0 * (f2 ? -1 : 1);
            o2 += Math.pow(2, n2), a2 -= l2;
          }
          return (f2 ? -1 : 1) * o2 * Math.pow(2, a2 - n2);
        }, Hs = function(t2, e2, r2, n2, i2, a2) {
          var o2, s2, u2, l2 = 8 * a2 - i2 - 1, p2 = (1 << l2) - 1, c2 = p2 >> 1, h2 = 23 === i2 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f2 = n2 ? 0 : a2 - 1, y2 = n2 ? 1 : -1, d2 = e2 < 0 || 0 === e2 && 1 / e2 < 0 ? 1 : 0;
          for (e2 = Math.abs(e2), isNaN(e2) || e2 === 1 / 0 ? (s2 = isNaN(e2) ? 1 : 0, o2 = p2) : (o2 = Math.floor(Math.log(e2) / Math.LN2), e2 * (u2 = Math.pow(2, -o2)) < 1 && (o2--, u2 *= 2), (e2 += o2 + c2 >= 1 ? h2 / u2 : h2 * Math.pow(2, 1 - c2)) * u2 >= 2 && (o2++, u2 /= 2), o2 + c2 >= p2 ? (s2 = 0, o2 = p2) : o2 + c2 >= 1 ? (s2 = (e2 * u2 - 1) * Math.pow(2, i2), o2 += c2) : (s2 = e2 * Math.pow(2, c2 - 1) * Math.pow(2, i2), o2 = 0)); i2 >= 8; t2[r2 + f2] = 255 & s2, f2 += y2, s2 /= 256, i2 -= 8)
            ;
          for (o2 = o2 << i2 | s2, l2 += i2; l2 > 0; t2[r2 + f2] = 255 & o2, f2 += y2, o2 /= 256, l2 -= 8)
            ;
          t2[r2 + f2 - y2] |= 128 * d2;
        }, Ys = Js;
        function Js(t2) {
          this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t2) ? t2 : new Uint8Array(t2 || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;
        }
        Js.Varint = 0, Js.Fixed64 = 1, Js.Bytes = 2, Js.Fixed32 = 5;
        function $s(t2) {
          return t2.type === Js.Bytes ? t2.readVarint() + t2.pos : t2.pos + 1;
        }
        function Ws(t2, e2, r2) {
          return r2 ? 4294967296 * e2 + (t2 >>> 0) : 4294967296 * (e2 >>> 0) + (t2 >>> 0);
        }
        function Qs(t2, e2, r2) {
          var n2 = e2 <= 16383 ? 1 : e2 <= 2097151 ? 2 : e2 <= 268435455 ? 3 : Math.ceil(Math.log(e2) / (7 * Math.LN2));
          r2.realloc(n2);
          for (var i2 = r2.pos - 1; i2 >= t2; i2--)
            r2.buf[i2 + n2] = r2.buf[i2];
        }
        function tu(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeVarint(t2[r2]);
        }
        function eu(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeSVarint(t2[r2]);
        }
        function ru(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeFloat(t2[r2]);
        }
        function nu(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeDouble(t2[r2]);
        }
        function iu(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeBoolean(t2[r2]);
        }
        function au(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeFixed32(t2[r2]);
        }
        function ou(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeSFixed32(t2[r2]);
        }
        function su(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeFixed64(t2[r2]);
        }
        function uu(t2, e2) {
          for (var r2 = 0; r2 < t2.length; r2++)
            e2.writeSFixed64(t2[r2]);
        }
        function lu(t2, e2) {
          return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + 16777216 * t2[e2 + 3];
        }
        function pu(t2, e2, r2) {
          t2[r2] = e2, t2[r2 + 1] = e2 >>> 8, t2[r2 + 2] = e2 >>> 16, t2[r2 + 3] = e2 >>> 24;
        }
        function cu(t2, e2) {
          return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + (t2[e2 + 3] << 24);
        }
        Js.prototype = { destroy: function() {
          this.buf = null;
        }, readFields: function(t2, e2, r2) {
          for (r2 = r2 || this.length; this.pos < r2; ) {
            var n2 = this.readVarint(), i2 = n2 >> 3, a2 = this.pos;
            this.type = 7 & n2, t2(i2, e2, this), this.pos === a2 && this.skip(n2);
          }
          return e2;
        }, readMessage: function(t2, e2) {
          return this.readFields(t2, e2, this.readVarint() + this.pos);
        }, readFixed32: function() {
          var t2 = lu(this.buf, this.pos);
          return this.pos += 4, t2;
        }, readSFixed32: function() {
          var t2 = cu(this.buf, this.pos);
          return this.pos += 4, t2;
        }, readFixed64: function() {
          var t2 = lu(this.buf, this.pos) + 4294967296 * lu(this.buf, this.pos + 4);
          return this.pos += 8, t2;
        }, readSFixed64: function() {
          var t2 = lu(this.buf, this.pos) + 4294967296 * cu(this.buf, this.pos + 4);
          return this.pos += 8, t2;
        }, readFloat: function() {
          var t2 = Zs(this.buf, this.pos, true, 23, 4);
          return this.pos += 4, t2;
        }, readDouble: function() {
          var t2 = Zs(this.buf, this.pos, true, 52, 8);
          return this.pos += 8, t2;
        }, readVarint: function(t2) {
          var e2, r2, n2 = this.buf;
          return e2 = 127 & (r2 = n2[this.pos++]), r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 7, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 14, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 21, r2 < 128 ? e2 : function(t3, e3, r3) {
            var n3, i2, a2 = r3.buf;
            if (i2 = a2[r3.pos++], n3 = (112 & i2) >> 4, i2 < 128)
              return Ws(t3, n3, e3);
            if (i2 = a2[r3.pos++], n3 |= (127 & i2) << 3, i2 < 128)
              return Ws(t3, n3, e3);
            if (i2 = a2[r3.pos++], n3 |= (127 & i2) << 10, i2 < 128)
              return Ws(t3, n3, e3);
            if (i2 = a2[r3.pos++], n3 |= (127 & i2) << 17, i2 < 128)
              return Ws(t3, n3, e3);
            if (i2 = a2[r3.pos++], n3 |= (127 & i2) << 24, i2 < 128)
              return Ws(t3, n3, e3);
            if (i2 = a2[r3.pos++], n3 |= (1 & i2) << 31, i2 < 128)
              return Ws(t3, n3, e3);
            throw new Error("Expected varint not more than 10 bytes");
          }(e2 |= (15 & (r2 = n2[this.pos])) << 28, t2, this))));
        }, readVarint64: function() {
          return this.readVarint(true);
        }, readSVarint: function() {
          var t2 = this.readVarint();
          return t2 % 2 == 1 ? (t2 + 1) / -2 : t2 / 2;
        }, readBoolean: function() {
          return Boolean(this.readVarint());
        }, readString: function() {
          var t2 = this.readVarint() + this.pos, e2 = function(t3, e3, r2) {
            var n2 = "", i2 = e3;
            for (; i2 < r2; ) {
              var a2, o2, s2, u2 = t3[i2], l2 = null, p2 = u2 > 239 ? 4 : u2 > 223 ? 3 : u2 > 191 ? 2 : 1;
              if (i2 + p2 > r2)
                break;
              1 === p2 ? u2 < 128 && (l2 = u2) : 2 === p2 ? 128 == (192 & (a2 = t3[i2 + 1])) && (l2 = (31 & u2) << 6 | 63 & a2) <= 127 && (l2 = null) : 3 === p2 ? (a2 = t3[i2 + 1], o2 = t3[i2 + 2], 128 == (192 & a2) && 128 == (192 & o2) && ((l2 = (15 & u2) << 12 | (63 & a2) << 6 | 63 & o2) <= 2047 || l2 >= 55296 && l2 <= 57343) && (l2 = null)) : 4 === p2 && (a2 = t3[i2 + 1], o2 = t3[i2 + 2], s2 = t3[i2 + 3], 128 == (192 & a2) && 128 == (192 & o2) && 128 == (192 & s2) && ((l2 = (15 & u2) << 18 | (63 & a2) << 12 | (63 & o2) << 6 | 63 & s2) <= 65535 || l2 >= 1114112) && (l2 = null)), null === l2 ? (l2 = 65533, p2 = 1) : l2 > 65535 && (l2 -= 65536, n2 += String.fromCharCode(l2 >>> 10 & 1023 | 55296), l2 = 56320 | 1023 & l2), n2 += String.fromCharCode(l2), i2 += p2;
            }
            return n2;
          }(this.buf, this.pos, t2);
          return this.pos = t2, e2;
        }, readBytes: function() {
          var t2 = this.readVarint() + this.pos, e2 = this.buf.subarray(this.pos, t2);
          return this.pos = t2, e2;
        }, readPackedVarint: function(t2, e2) {
          var r2 = $s(this);
          for (t2 = t2 || []; this.pos < r2; )
            t2.push(this.readVarint(e2));
          return t2;
        }, readPackedSVarint: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readSVarint());
          return t2;
        }, readPackedBoolean: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readBoolean());
          return t2;
        }, readPackedFloat: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readFloat());
          return t2;
        }, readPackedDouble: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readDouble());
          return t2;
        }, readPackedFixed32: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readFixed32());
          return t2;
        }, readPackedSFixed32: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readSFixed32());
          return t2;
        }, readPackedFixed64: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readFixed64());
          return t2;
        }, readPackedSFixed64: function(t2) {
          var e2 = $s(this);
          for (t2 = t2 || []; this.pos < e2; )
            t2.push(this.readSFixed64());
          return t2;
        }, skip: function(t2) {
          var e2 = 7 & t2;
          if (e2 === Js.Varint)
            for (; this.buf[this.pos++] > 127; )
              ;
          else if (e2 === Js.Bytes)
            this.pos = this.readVarint() + this.pos;
          else if (e2 === Js.Fixed32)
            this.pos += 4;
          else {
            if (e2 !== Js.Fixed64)
              throw new Error("Unimplemented type: " + e2);
            this.pos += 8;
          }
        }, writeTag: function(t2, e2) {
          this.writeVarint(t2 << 3 | e2);
        }, realloc: function(t2) {
          for (var e2 = this.length || 16; e2 < this.pos + t2; )
            e2 *= 2;
          if (e2 !== this.length) {
            var r2 = new Uint8Array(e2);
            r2.set(this.buf), this.buf = r2, this.length = e2;
          }
        }, finish: function() {
          return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);
        }, writeFixed32: function(t2) {
          this.realloc(4), pu(this.buf, t2, this.pos), this.pos += 4;
        }, writeSFixed32: function(t2) {
          this.realloc(4), pu(this.buf, t2, this.pos), this.pos += 4;
        }, writeFixed64: function(t2) {
          this.realloc(8), pu(this.buf, -1 & t2, this.pos), pu(this.buf, Math.floor(t2 * (1 / 4294967296)), this.pos + 4), this.pos += 8;
        }, writeSFixed64: function(t2) {
          this.realloc(8), pu(this.buf, -1 & t2, this.pos), pu(this.buf, Math.floor(t2 * (1 / 4294967296)), this.pos + 4), this.pos += 8;
        }, writeVarint: function(t2) {
          (t2 = +t2 || 0) > 268435455 || t2 < 0 ? function(t3, e2) {
            var r2, n2;
            t3 >= 0 ? (r2 = t3 % 4294967296 | 0, n2 = t3 / 4294967296 | 0) : (n2 = ~(-t3 / 4294967296), 4294967295 ^ (r2 = ~(-t3 % 4294967296)) ? r2 = r2 + 1 | 0 : (r2 = 0, n2 = n2 + 1 | 0));
            if (t3 >= 18446744073709552e3 || t3 < -18446744073709552e3)
              throw new Error("Given varint doesn't fit into 10 bytes");
            e2.realloc(10), function(t4, e3, r3) {
              r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos] = 127 & t4;
            }(r2, 0, e2), function(t4, e3) {
              var r3 = (7 & t4) << 4;
              if (e3.buf[e3.pos++] |= r3 | ((t4 >>>= 3) ? 128 : 0), !t4)
                return;
              if (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), !t4)
                return;
              if (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), !t4)
                return;
              if (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), !t4)
                return;
              if (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), !t4)
                return;
              e3.buf[e3.pos++] = 127 & t4;
            }(n2, e2);
          }(t2, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t2 | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = t2 >>> 7 & 127))));
        }, writeSVarint: function(t2) {
          this.writeVarint(t2 < 0 ? 2 * -t2 - 1 : 2 * t2);
        }, writeBoolean: function(t2) {
          this.writeVarint(Boolean(t2));
        }, writeString: function(t2) {
          t2 = String(t2), this.realloc(4 * t2.length), this.pos++;
          var e2 = this.pos;
          this.pos = function(t3, e3, r3) {
            for (var n2, i2, a2 = 0; a2 < e3.length; a2++) {
              if ((n2 = e3.charCodeAt(a2)) > 55295 && n2 < 57344) {
                if (!i2) {
                  n2 > 56319 || a2 + 1 === e3.length ? (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189) : i2 = n2;
                  continue;
                }
                if (n2 < 56320) {
                  t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i2 = n2;
                  continue;
                }
                n2 = i2 - 55296 << 10 | n2 - 56320 | 65536, i2 = null;
              } else
                i2 && (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i2 = null);
              n2 < 128 ? t3[r3++] = n2 : (n2 < 2048 ? t3[r3++] = n2 >> 6 | 192 : (n2 < 65536 ? t3[r3++] = n2 >> 12 | 224 : (t3[r3++] = n2 >> 18 | 240, t3[r3++] = n2 >> 12 & 63 | 128), t3[r3++] = n2 >> 6 & 63 | 128), t3[r3++] = 63 & n2 | 128);
            }
            return r3;
          }(this.buf, t2, this.pos);
          var r2 = this.pos - e2;
          r2 >= 128 && Qs(e2, r2, this), this.pos = e2 - 1, this.writeVarint(r2), this.pos += r2;
        }, writeFloat: function(t2) {
          this.realloc(4), Hs(this.buf, t2, this.pos, true, 23, 4), this.pos += 4;
        }, writeDouble: function(t2) {
          this.realloc(8), Hs(this.buf, t2, this.pos, true, 52, 8), this.pos += 8;
        }, writeBytes: function(t2) {
          var e2 = t2.length;
          this.writeVarint(e2), this.realloc(e2);
          for (var r2 = 0; r2 < e2; r2++)
            this.buf[this.pos++] = t2[r2];
        }, writeRawMessage: function(t2, e2) {
          this.pos++;
          var r2 = this.pos;
          t2(e2, this);
          var n2 = this.pos - r2;
          n2 >= 128 && Qs(r2, n2, this), this.pos = r2 - 1, this.writeVarint(n2), this.pos += n2;
        }, writeMessage: function(t2, e2, r2) {
          this.writeTag(t2, Js.Bytes), this.writeRawMessage(e2, r2);
        }, writePackedVarint: function(t2, e2) {
          this.writeMessage(t2, tu, e2);
        }, writePackedSVarint: function(t2, e2) {
          this.writeMessage(t2, eu, e2);
        }, writePackedBoolean: function(t2, e2) {
          this.writeMessage(t2, iu, e2);
        }, writePackedFloat: function(t2, e2) {
          this.writeMessage(t2, ru, e2);
        }, writePackedDouble: function(t2, e2) {
          this.writeMessage(t2, nu, e2);
        }, writePackedFixed32: function(t2, e2) {
          this.writeMessage(t2, au, e2);
        }, writePackedSFixed32: function(t2, e2) {
          this.writeMessage(t2, ou, e2);
        }, writePackedFixed64: function(t2, e2) {
          this.writeMessage(t2, su, e2);
        }, writePackedSFixed64: function(t2, e2) {
          this.writeMessage(t2, uu, e2);
        }, writeBytesField: function(t2, e2) {
          this.writeTag(t2, Js.Bytes), this.writeBytes(e2);
        }, writeFixed32Field: function(t2, e2) {
          this.writeTag(t2, Js.Fixed32), this.writeFixed32(e2);
        }, writeSFixed32Field: function(t2, e2) {
          this.writeTag(t2, Js.Fixed32), this.writeSFixed32(e2);
        }, writeFixed64Field: function(t2, e2) {
          this.writeTag(t2, Js.Fixed64), this.writeFixed64(e2);
        }, writeSFixed64Field: function(t2, e2) {
          this.writeTag(t2, Js.Fixed64), this.writeSFixed64(e2);
        }, writeVarintField: function(t2, e2) {
          this.writeTag(t2, Js.Varint), this.writeVarint(e2);
        }, writeSVarintField: function(t2, e2) {
          this.writeTag(t2, Js.Varint), this.writeSVarint(e2);
        }, writeStringField: function(t2, e2) {
          this.writeTag(t2, Js.Bytes), this.writeString(e2);
        }, writeFloatField: function(t2, e2) {
          this.writeTag(t2, Js.Fixed32), this.writeFloat(e2);
        }, writeDoubleField: function(t2, e2) {
          this.writeTag(t2, Js.Fixed64), this.writeDouble(e2);
        }, writeBooleanField: function(t2, e2) {
          this.writeVarintField(t2, Boolean(e2));
        } };
        var hu = 3;
        function fu(t2, e2, r2) {
          1 === t2 && r2.readMessage(yu, e2);
        }
        function yu(t2, e2, r2) {
          if (3 === t2) {
            var n2 = r2.readMessage(du, {}), i2 = n2.id, a2 = n2.bitmap, o2 = n2.width, s2 = n2.height, u2 = n2.left, l2 = n2.top, p2 = n2.advance;
            e2.push({ id: i2, bitmap: new ja({ width: o2 + 2 * hu, height: s2 + 2 * hu }, a2), metrics: { width: o2, height: s2, left: u2, top: l2, advance: p2 } });
          }
        }
        function du(t2, e2, r2) {
          1 === t2 ? e2.id = r2.readVarint() : 2 === t2 ? e2.bitmap = r2.readBytes() : 3 === t2 ? e2.width = r2.readVarint() : 4 === t2 ? e2.height = r2.readVarint() : 5 === t2 ? e2.left = r2.readSVarint() : 6 === t2 ? e2.top = r2.readSVarint() : 7 === t2 && (e2.advance = r2.readVarint());
        }
        var mu = hu, vu = function(t2, e2, r2) {
          this.target = t2, this.parent = e2, this.mapId = r2, this.callbacks = {}, this.callbackID = 0, m(["receive"], this), this.target.addEventListener("message", this.receive, false);
        };
        function gu(t2, e2, r2) {
          var n2 = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r2);
          return [t2 * n2 - 2 * Math.PI * 6378137 / 2, e2 * n2 - 2 * Math.PI * 6378137 / 2];
        }
        vu.prototype.send = function(t2, e2, r2, n2) {
          var i2 = this, a2 = r2 ? this.mapId + ":" + this.callbackID++ : null;
          r2 && (this.callbacks[a2] = r2);
          var o2 = [];
          if (this.target.postMessage({ targetMapId: n2, sourceMapId: this.mapId, type: t2, id: String(a2), data: ln(e2, o2) }, o2), r2)
            return { cancel: function() {
              return i2.target.postMessage({ targetMapId: n2, sourceMapId: i2.mapId, type: "<cancel>", id: String(a2) });
            } };
        }, vu.prototype.receive = function(t2) {
          var e2, r2 = this, n2 = t2.data, i2 = n2.id;
          if (!n2.targetMapId || this.mapId === n2.targetMapId) {
            var a2 = function(t3, e3) {
              delete r2.callbacks[i2];
              var n3 = [];
              r2.target.postMessage({ sourceMapId: r2.mapId, type: "<response>", id: String(i2), error: t3 ? ln(t3) : null, data: ln(e3, n3) }, n3);
            };
            if ("<response>" === n2.type || "<cancel>" === n2.type)
              e2 = this.callbacks[n2.id], delete this.callbacks[n2.id], e2 && n2.error ? e2(pn(n2.error)) : e2 && e2(null, pn(n2.data));
            else if (void 0 !== n2.id && this.parent[n2.type]) {
              this.callbacks[n2.id] = null;
              var o2 = this.parent[n2.type](n2.sourceMapId, pn(n2.data), a2);
              o2 && null === this.callbacks[n2.id] && (this.callbacks[n2.id] = o2);
            } else if (void 0 !== n2.id && this.parent.getWorkerSource) {
              var s2 = n2.type.split("."), u2 = pn(n2.data);
              this.parent.getWorkerSource(n2.sourceMapId, s2[0], u2.source)[s2[1]](u2, a2);
            } else
              this.parent[n2.type](pn(n2.data));
          }
        }, vu.prototype.remove = function() {
          this.target.removeEventListener("message", this.receive, false);
        };
        var xu = function(t2, e2) {
          t2 && (e2 ? this.setSouthWest(t2).setNorthEast(e2) : 4 === t2.length ? this.setSouthWest([t2[0], t2[1]]).setNorthEast([t2[2], t2[3]]) : this.setSouthWest(t2[0]).setNorthEast(t2[1]));
        };
        xu.prototype.setNorthEast = function(t2) {
          return this._ne = t2 instanceof bu ? new bu(t2.lng, t2.lat) : bu.convert(t2), this;
        }, xu.prototype.setSouthWest = function(t2) {
          return this._sw = t2 instanceof bu ? new bu(t2.lng, t2.lat) : bu.convert(t2), this;
        }, xu.prototype.extend = function(t2) {
          var e2, r2, n2 = this._sw, i2 = this._ne;
          if (t2 instanceof bu)
            e2 = t2, r2 = t2;
          else {
            if (!(t2 instanceof xu))
              return Array.isArray(t2) ? t2.every(Array.isArray) ? this.extend(xu.convert(t2)) : this.extend(bu.convert(t2)) : this;
            if (e2 = t2._sw, r2 = t2._ne, !e2 || !r2)
              return this;
          }
          return n2 || i2 ? (n2.lng = Math.min(e2.lng, n2.lng), n2.lat = Math.min(e2.lat, n2.lat), i2.lng = Math.max(r2.lng, i2.lng), i2.lat = Math.max(r2.lat, i2.lat)) : (this._sw = new bu(e2.lng, e2.lat), this._ne = new bu(r2.lng, r2.lat)), this;
        }, xu.prototype.getCenter = function() {
          return new bu((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);
        }, xu.prototype.getSouthWest = function() {
          return this._sw;
        }, xu.prototype.getNorthEast = function() {
          return this._ne;
        }, xu.prototype.getNorthWest = function() {
          return new bu(this.getWest(), this.getNorth());
        }, xu.prototype.getSouthEast = function() {
          return new bu(this.getEast(), this.getSouth());
        }, xu.prototype.getWest = function() {
          return this._sw.lng;
        }, xu.prototype.getSouth = function() {
          return this._sw.lat;
        }, xu.prototype.getEast = function() {
          return this._ne.lng;
        }, xu.prototype.getNorth = function() {
          return this._ne.lat;
        }, xu.prototype.toArray = function() {
          return [this._sw.toArray(), this._ne.toArray()];
        }, xu.prototype.toString = function() {
          return "LngLatBounds(" + this._sw.toString() + ", " + this._ne.toString() + ")";
        }, xu.prototype.isEmpty = function() {
          return !(this._sw && this._ne);
        }, xu.convert = function(t2) {
          return !t2 || t2 instanceof xu ? t2 : new xu(t2);
        };
        var bu = function(t2, e2) {
          if (isNaN(t2) || isNaN(e2))
            throw new Error("Invalid LngLat object: (" + t2 + ", " + e2 + ")");
          if (this.lng = +t2, this.lat = +e2, this.lat > 90 || this.lat < -90)
            throw new Error("Invalid LngLat latitude value: must be between -90 and 90");
        };
        function _u(t2) {
          return 2 * Math.PI * 6378137 * Math.cos(t2 * Math.PI / 180);
        }
        function wu(t2) {
          return (180 + t2) / 360;
        }
        function Au(t2) {
          return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2 * Math.PI / 360))) / 360;
        }
        function Su(t2, e2) {
          return t2 / _u(e2);
        }
        function ku(t2) {
          var e2 = 180 - 360 * t2;
          return 360 / Math.PI * Math.atan(Math.exp(e2 * Math.PI / 180)) - 90;
        }
        bu.prototype.wrap = function() {
          return new bu(p(this.lng, -180, 180), this.lat);
        }, bu.prototype.toArray = function() {
          return [this.lng, this.lat];
        }, bu.prototype.toString = function() {
          return "LngLat(" + this.lng + ", " + this.lat + ")";
        }, bu.prototype.toBounds = function(t2) {
          void 0 === t2 && (t2 = 0);
          var e2 = 360 * t2 / 40075017, r2 = e2 / Math.cos(Math.PI / 180 * this.lat);
          return new xu(new bu(this.lng - r2, this.lat - e2), new bu(this.lng + r2, this.lat + e2));
        }, bu.convert = function(t2) {
          if (t2 instanceof bu)
            return t2;
          if (Array.isArray(t2) && (2 === t2.length || 3 === t2.length))
            return new bu(Number(t2[0]), Number(t2[1]));
          if (!Array.isArray(t2) && "object" == typeof t2 && null !== t2)
            return new bu(Number("lng" in t2 ? t2.lng : t2.lon), Number(t2.lat));
          throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");
        };
        var zu = function(t2, e2, r2) {
          void 0 === r2 && (r2 = 0), this.x = +t2, this.y = +e2, this.z = +r2;
        };
        zu.fromLngLat = function(t2, e2) {
          void 0 === e2 && (e2 = 0);
          var r2 = bu.convert(t2);
          return new zu(wu(r2.lng), Au(r2.lat), Su(e2, r2.lat));
        }, zu.prototype.toLngLat = function() {
          return new bu(360 * this.x - 180, ku(this.y));
        }, zu.prototype.toAltitude = function() {
          return t2 = this.z, e2 = this.y, t2 * _u(ku(e2));
          var t2, e2;
        };
        var Iu = function(t2, e2, r2) {
          this.z = t2, this.x = e2, this.y = r2, this.key = Pu(0, t2, e2, r2);
        };
        Iu.prototype.equals = function(t2) {
          return this.z === t2.z && this.x === t2.x && this.y === t2.y;
        }, Iu.prototype.url = function(t2, e2) {
          var r2, n2, i2, a2, o2, s2 = (r2 = this.x, n2 = this.y, i2 = this.z, a2 = gu(256 * r2, 256 * (n2 = Math.pow(2, i2) - n2 - 1), i2), o2 = gu(256 * (r2 + 1), 256 * (n2 + 1), i2), a2[0] + "," + a2[1] + "," + o2[0] + "," + o2[1]), u2 = function(t3, e3, r3) {
            for (var n3, i3 = "", a3 = t3; a3 > 0; a3--)
              i3 += (e3 & (n3 = 1 << a3 - 1) ? 1 : 0) + (r3 & n3 ? 2 : 0);
            return i3;
          }(this.z, this.x, this.y);
          return t2[(this.x + this.y) % t2.length].replace("{prefix}", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace("{z}", String(this.z)).replace("{x}", String(this.x)).replace("{y}", String("tms" === e2 ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace("{quadkey}", u2).replace("{bbox-epsg-3857}", s2);
        }, Iu.prototype.getTilePoint = function(t2) {
          var e2 = Math.pow(2, this.z);
          return new i((t2.x * e2 - this.x) * Yi, (t2.y * e2 - this.y) * Yi);
        };
        var Bu = function(t2, e2) {
          this.wrap = t2, this.canonical = e2, this.key = Pu(t2, e2.z, e2.x, e2.y);
        }, Eu = function(t2, e2, r2, n2, i2) {
          this.overscaledZ = t2, this.wrap = e2, this.canonical = new Iu(r2, +n2, +i2), this.key = Pu(e2, t2, n2, i2);
        };
        function Pu(t2, e2, r2, n2) {
          (t2 *= 2) < 0 && (t2 = -1 * t2 - 1);
          var i2 = 1 << e2;
          return 32 * (i2 * i2 * t2 + i2 * n2 + r2) + e2;
        }
        Eu.prototype.equals = function(t2) {
          return this.overscaledZ === t2.overscaledZ && this.wrap === t2.wrap && this.canonical.equals(t2.canonical);
        }, Eu.prototype.scaledTo = function(t2) {
          var e2 = this.canonical.z - t2;
          return t2 > this.canonical.z ? new Eu(t2, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new Eu(t2, this.wrap, t2, this.canonical.x >> e2, this.canonical.y >> e2);
        }, Eu.prototype.isChildOf = function(t2) {
          if (t2.wrap !== this.wrap)
            return false;
          var e2 = this.canonical.z - t2.canonical.z;
          return 0 === t2.overscaledZ || t2.overscaledZ < this.overscaledZ && t2.canonical.x === this.canonical.x >> e2 && t2.canonical.y === this.canonical.y >> e2;
        }, Eu.prototype.children = function(t2) {
          if (this.overscaledZ >= t2)
            return [new Eu(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];
          var e2 = this.canonical.z + 1, r2 = 2 * this.canonical.x, n2 = 2 * this.canonical.y;
          return [new Eu(e2, this.wrap, e2, r2, n2), new Eu(e2, this.wrap, e2, r2 + 1, n2), new Eu(e2, this.wrap, e2, r2, n2 + 1), new Eu(e2, this.wrap, e2, r2 + 1, n2 + 1)];
        }, Eu.prototype.isLessThan = function(t2) {
          return this.wrap < t2.wrap || !(this.wrap > t2.wrap) && (this.overscaledZ < t2.overscaledZ || !(this.overscaledZ > t2.overscaledZ) && (this.canonical.x < t2.canonical.x || !(this.canonical.x > t2.canonical.x) && this.canonical.y < t2.canonical.y));
        }, Eu.prototype.wrapped = function() {
          return new Eu(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);
        }, Eu.prototype.unwrapTo = function(t2) {
          return new Eu(this.overscaledZ, t2, this.canonical.z, this.canonical.x, this.canonical.y);
        }, Eu.prototype.overscaleFactor = function() {
          return Math.pow(2, this.overscaledZ - this.canonical.z);
        }, Eu.prototype.toUnwrapped = function() {
          return new Bu(this.wrap, this.canonical);
        }, Eu.prototype.toString = function() {
          return this.overscaledZ + "/" + this.canonical.x + "/" + this.canonical.y;
        }, Eu.prototype.getTilePoint = function(t2) {
          return this.canonical.getTilePoint(new zu(t2.x - this.wrap, t2.y));
        }, sn("CanonicalTileID", Iu), sn("OverscaledTileID", Eu, { omit: ["posMatrix"] });
        var Vu = function(t2, e2, r2) {
          if (this.uid = t2, e2.height !== e2.width)
            throw new RangeError("DEM tiles must be square");
          if (r2 && "mapbox" !== r2 && "terrarium" !== r2)
            return w('"' + r2 + '" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');
          var n2 = this.dim = e2.height;
          this.stride = this.dim + 2, this.data = new Int32Array(this.stride * this.stride);
          for (var i2 = e2.data, a2 = "terrarium" === r2 ? this._unpackTerrarium : this._unpackMapbox, o2 = 0; o2 < n2; o2++)
            for (var s2 = 0; s2 < n2; s2++) {
              var u2 = 4 * (o2 * n2 + s2);
              this.set(s2, o2, a2(i2[u2], i2[u2 + 1], i2[u2 + 2]));
            }
          for (var l2 = 0; l2 < n2; l2++)
            this.set(-1, l2, this.get(0, l2)), this.set(n2, l2, this.get(n2 - 1, l2)), this.set(l2, -1, this.get(l2, 0)), this.set(l2, n2, this.get(l2, n2 - 1));
          this.set(-1, -1, this.get(0, 0)), this.set(n2, -1, this.get(n2 - 1, 0)), this.set(-1, n2, this.get(0, n2 - 1)), this.set(n2, n2, this.get(n2 - 1, n2 - 1));
        };
        Vu.prototype.set = function(t2, e2, r2) {
          this.data[this._idx(t2, e2)] = r2 + 65536;
        }, Vu.prototype.get = function(t2, e2) {
          return this.data[this._idx(t2, e2)] - 65536;
        }, Vu.prototype._idx = function(t2, e2) {
          if (t2 < -1 || t2 >= this.dim + 1 || e2 < -1 || e2 >= this.dim + 1)
            throw new RangeError("out of range source coordinates for DEM data");
          return (e2 + 1) * this.stride + (t2 + 1);
        }, Vu.prototype._unpackMapbox = function(t2, e2, r2) {
          return (256 * t2 * 256 + 256 * e2 + r2) / 10 - 1e4;
        }, Vu.prototype._unpackTerrarium = function(t2, e2, r2) {
          return 256 * t2 + e2 + r2 / 256 - 32768;
        }, Vu.prototype.getPixels = function() {
          return new Ra({ width: this.stride, height: this.stride }, new Uint8Array(this.data.buffer));
        }, Vu.prototype.backfillBorder = function(t2, e2, r2) {
          if (this.dim !== t2.dim)
            throw new Error("dem dimension mismatch");
          var n2 = e2 * this.dim, i2 = e2 * this.dim + this.dim, a2 = r2 * this.dim, o2 = r2 * this.dim + this.dim;
          switch (e2) {
            case -1:
              n2 = i2 - 1;
              break;
            case 1:
              i2 = n2 + 1;
          }
          switch (r2) {
            case -1:
              a2 = o2 - 1;
              break;
            case 1:
              o2 = a2 + 1;
          }
          for (var s2 = -e2 * this.dim, u2 = -r2 * this.dim, l2 = a2; l2 < o2; l2++)
            for (var p2 = n2; p2 < i2; p2++)
              this.set(p2, l2, t2.get(p2 + s2, l2 + u2));
        }, sn("DEMData", Vu);
        var Cu = Nn([{ name: "a_pos", type: "Int16", components: 2 }, { name: "a_texture_pos", type: "Int16", components: 2 }]);
        var Mu = function(t2) {
          this._stringToNumber = {}, this._numberToString = [];
          for (var e2 = 0; e2 < t2.length; e2++) {
            var r2 = t2[e2];
            this._stringToNumber[r2] = e2, this._numberToString[e2] = r2;
          }
        };
        Mu.prototype.encode = function(t2) {
          return this._stringToNumber[t2];
        }, Mu.prototype.decode = function(t2) {
          return this._numberToString[t2];
        };
        var Tu = function(t2, e2, r2, n2) {
          this.type = "Feature", this._vectorTileFeature = t2, t2._z = e2, t2._x = r2, t2._y = n2, this.properties = t2.properties, null != t2.id && (this.id = t2.id);
        }, Fu = { geometry: { configurable: true } };
        Fu.geometry.get = function() {
          return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;
        }, Fu.geometry.set = function(t2) {
          this._geometry = t2;
        }, Tu.prototype.toJSON = function() {
          var t2 = { geometry: this.geometry };
          for (var e2 in this)
            "_geometry" !== e2 && "_vectorTileFeature" !== e2 && (t2[e2] = this[e2]);
          return t2;
        }, Object.defineProperties(Tu.prototype, Fu);
        var Lu = function() {
          this.state = {}, this.stateChanges = {}, this.deletedStates = {};
        };
        Lu.prototype.updateState = function(t2, e2, r2) {
          var n2 = String(e2);
          if (this.stateChanges[t2] = this.stateChanges[t2] || {}, this.stateChanges[t2][n2] = this.stateChanges[t2][n2] || {}, c(this.stateChanges[t2][n2], r2), null === this.deletedStates[t2])
            for (var i2 in this.deletedStates[t2] = {}, this.state[t2])
              i2 !== n2 && (this.deletedStates[t2][i2] = null);
          else if (this.deletedStates[t2] && null === this.deletedStates[t2][n2])
            for (var a2 in this.deletedStates[t2][n2] = {}, this.state[t2][n2])
              r2[a2] || (this.deletedStates[t2][n2][a2] = null);
          else
            for (var o2 in r2) {
              this.deletedStates[t2] && this.deletedStates[t2][n2] && null === this.deletedStates[t2][n2][o2] && delete this.deletedStates[t2][n2][o2];
            }
        }, Lu.prototype.removeFeatureState = function(t2, e2, r2) {
          if (!(null === this.deletedStates[t2])) {
            var n2 = String(e2);
            if (this.deletedStates[t2] = this.deletedStates[t2] || {}, r2 && e2)
              null !== this.deletedStates[t2][n2] && (this.deletedStates[t2][n2] = this.deletedStates[t2][n2] || {}, this.deletedStates[t2][n2][r2] = null);
            else if (e2) {
              if (this.stateChanges[t2] && this.stateChanges[t2][n2])
                for (r2 in this.deletedStates[t2][n2] = {}, this.stateChanges[t2][n2])
                  this.deletedStates[t2][n2][r2] = null;
              else
                this.deletedStates[t2][n2] = null;
            } else
              this.deletedStates[t2] = null;
          }
        }, Lu.prototype.getState = function(t2, e2) {
          var r2 = String(e2), n2 = this.state[t2] || {}, i2 = this.stateChanges[t2] || {}, a2 = c({}, n2[r2], i2[r2]);
          if (null === this.deletedStates[t2])
            return {};
          if (this.deletedStates[t2]) {
            var o2 = this.deletedStates[t2][e2];
            if (null === o2)
              return {};
            for (var s2 in o2)
              delete a2[s2];
          }
          return a2;
        }, Lu.prototype.initializeTileState = function(t2, e2) {
          t2.setFeatureState(this.state, e2);
        }, Lu.prototype.coalesceChanges = function(t2, e2) {
          var r2 = {};
          for (var n2 in this.stateChanges) {
            this.state[n2] = this.state[n2] || {};
            var i2 = {};
            for (var a2 in this.stateChanges[n2])
              this.state[n2][a2] || (this.state[n2][a2] = {}), c(this.state[n2][a2], this.stateChanges[n2][a2]), i2[a2] = this.state[n2][a2];
            r2[n2] = i2;
          }
          for (var o2 in this.deletedStates) {
            this.state[o2] = this.state[o2] || {};
            var s2 = {};
            if (null === this.deletedStates[o2]) {
              for (var u2 in this.state[o2])
                s2[u2] = {};
              this.state[o2] = {};
            } else
              for (var l2 in this.deletedStates[o2]) {
                if (null === this.deletedStates[o2][l2])
                  this.state[o2][l2] = {};
                else
                  for (var p2 = 0, h2 = Object.keys(this.deletedStates[o2][l2]); p2 < h2.length; p2 += 1) {
                    var f2 = h2[p2];
                    delete this.state[o2][l2][f2];
                  }
                s2[l2] = this.state[o2][l2];
              }
            r2[o2] = r2[o2] || {}, c(r2[o2], s2);
          }
          if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(r2).length)
            for (var y2 in t2) {
              t2[y2].setFeatureState(r2, e2);
            }
        };
        var Ou = function(t2, e2, r2) {
          this.tileID = t2, this.x = t2.canonical.x, this.y = t2.canonical.y, this.z = t2.canonical.z, this.grid = e2 || new en(Yi, 16, 0), this.grid3D = new en(Yi, 16, 0), this.featureIndexArray = r2 || new Ai();
        };
        function Du(t2) {
          for (var e2 = 1 / 0, r2 = 1 / 0, n2 = -1 / 0, i2 = -1 / 0, a2 = 0, o2 = t2; a2 < o2.length; a2 += 1) {
            var s2 = o2[a2];
            e2 = Math.min(e2, s2.x), r2 = Math.min(r2, s2.y), n2 = Math.max(n2, s2.x), i2 = Math.max(i2, s2.y);
          }
          return { minX: e2, minY: r2, maxX: n2, maxY: i2 };
        }
        function Uu(t2, e2) {
          return e2 - t2;
        }
        Ou.prototype.insert = function(t2, e2, r2, n2, i2, a2) {
          var o2 = this.featureIndexArray.length;
          this.featureIndexArray.emplaceBack(r2, n2, i2);
          for (var s2 = a2 ? this.grid3D : this.grid, u2 = 0; u2 < e2.length; u2++) {
            for (var l2 = e2[u2], p2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], c2 = 0; c2 < l2.length; c2++) {
              var h2 = l2[c2];
              p2[0] = Math.min(p2[0], h2.x), p2[1] = Math.min(p2[1], h2.y), p2[2] = Math.max(p2[2], h2.x), p2[3] = Math.max(p2[3], h2.y);
            }
            p2[0] < Yi && p2[1] < Yi && p2[2] >= 0 && p2[3] >= 0 && s2.insert(o2, p2[0], p2[1], p2[2], p2[3]);
          }
        }, Ou.prototype.loadVTLayers = function() {
          return this.vtLayers || (this.vtLayers = new Wo.VectorTile(new Ys(this.rawTileData)).layers, this.sourceLayerCoder = new Mu(this.vtLayers ? Object.keys(this.vtLayers).sort() : ["_geojsonTileLayer"])), this.vtLayers;
        }, Ou.prototype.query = function(t2, e2, r2) {
          var n2 = this;
          this.loadVTLayers();
          for (var a2 = t2.params || {}, o2 = Yi / t2.tileSize / t2.scale, s2 = Er(a2.filter), u2 = t2.queryGeometry, l2 = t2.queryPadding * o2, p2 = Du(u2), c2 = this.grid.query(p2.minX - l2, p2.minY - l2, p2.maxX + l2, p2.maxY + l2), h2 = Du(t2.cameraQueryGeometry), f2 = this.grid3D.query(h2.minX - l2, h2.minY - l2, h2.maxX + l2, h2.maxY + l2, function(e3, r3, n3, a3) {
            return function(t3, e4, r4, n4, a4) {
              for (var o3 = 0, s3 = t3; o3 < s3.length; o3 += 1) {
                var u3 = s3[o3];
                if (e4 <= u3.x && r4 <= u3.y && n4 >= u3.x && a4 >= u3.y)
                  return true;
              }
              var l3 = [new i(e4, r4), new i(e4, a4), new i(n4, a4), new i(n4, r4)];
              if (t3.length > 2) {
                for (var p3 = 0, c3 = l3; p3 < c3.length; p3 += 1)
                  if (pa(t3, c3[p3]))
                    return true;
              }
              for (var h3 = 0; h3 < t3.length - 1; h3++)
                if (ca(t3[h3], t3[h3 + 1], l3))
                  return true;
              return false;
            }(t2.cameraQueryGeometry, e3 - l2, r3 - l2, n3 + l2, a3 + l2);
          }), y2 = 0, d2 = f2; y2 < d2.length; y2 += 1) {
            var m2 = d2[y2];
            c2.push(m2);
          }
          c2.sort(Uu);
          for (var v2, g2 = {}, x2 = function(i2) {
            var l3 = c2[i2];
            if (l3 !== v2) {
              v2 = l3;
              var p3 = n2.featureIndexArray.get(l3), h3 = null;
              n2.loadMatchingFeature(g2, p3.bucketIndex, p3.sourceLayerIndex, p3.featureIndex, s2, a2.layers, e2, function(e3, i3) {
                h3 || (h3 = Wi(e3));
                var a3 = {};
                return e3.id && (a3 = r2.getState(i3.sourceLayer || "_geojsonTileLayer", e3.id)), i3.queryIntersectsFeature(u2, e3, a3, h3, n2.z, t2.transform, o2, t2.pixelPosMatrix);
              });
            }
          }, b2 = 0; b2 < c2.length; b2++)
            x2(b2);
          return g2;
        }, Ou.prototype.loadMatchingFeature = function(t2, e2, r2, n2, i2, a2, o2, s2) {
          var u2 = this.bucketLayerIDs[e2];
          if (!a2 || function(t3, e3) {
            for (var r3 = 0; r3 < t3.length; r3++)
              if (e3.indexOf(t3[r3]) >= 0)
                return true;
            return false;
          }(a2, u2)) {
            var l2 = this.sourceLayerCoder.decode(r2), p2 = this.vtLayers[l2].feature(n2);
            if (i2(new Sn(this.tileID.overscaledZ), p2))
              for (var c2 = 0; c2 < u2.length; c2++) {
                var h2 = u2[c2];
                if (!(a2 && a2.indexOf(h2) < 0)) {
                  var f2 = o2[h2];
                  if (f2) {
                    var y2 = !s2 || s2(p2, f2);
                    if (y2) {
                      var d2 = new Tu(p2, this.z, this.x, this.y);
                      d2.layer = f2.serialize();
                      var m2 = t2[h2];
                      void 0 === m2 && (m2 = t2[h2] = []), m2.push({ featureIndex: n2, feature: d2, intersectionZ: y2 });
                    }
                  }
                }
              }
          }
        }, Ou.prototype.lookupSymbolFeatures = function(t2, e2, r2, n2, i2, a2) {
          var o2 = {};
          this.loadVTLayers();
          for (var s2 = Er(n2), u2 = 0, l2 = t2; u2 < l2.length; u2 += 1) {
            var p2 = l2[u2];
            this.loadMatchingFeature(o2, e2, r2, p2, s2, i2, a2);
          }
          return o2;
        }, Ou.prototype.hasLayer = function(t2) {
          for (var e2 = 0, r2 = this.bucketLayerIDs; e2 < r2.length; e2 += 1)
            for (var n2 = 0, i2 = r2[e2]; n2 < i2.length; n2 += 1) {
              if (t2 === i2[n2])
                return true;
            }
          return false;
        }, sn("FeatureIndex", Ou, { omit: ["rawTileData", "sourceLayerCoder"] });
        var ju = function(t2, e2) {
          this.tileID = t2, this.uid = f(), this.uses = 0, this.tileSize = e2, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = false, this.expiredRequestCount = 0, this.state = "loading";
        };
        ju.prototype.registerFadeDuration = function(t2) {
          var e2 = t2 + this.timeAdded;
          e2 < V.now() || this.fadeEndTime && e2 < this.fadeEndTime || (this.fadeEndTime = e2);
        }, ju.prototype.wasRequested = function() {
          return "errored" === this.state || "loaded" === this.state || "reloading" === this.state;
        }, ju.prototype.loadVectorData = function(t2, e2, r2) {
          if (this.hasData() && this.unloadVectorData(), this.state = "loaded", t2) {
            for (var n2 in t2.featureIndex && (this.latestFeatureIndex = t2.featureIndex, t2.rawTileData ? (this.latestRawTileData = t2.rawTileData, this.latestFeatureIndex.rawTileData = t2.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t2.collisionBoxArray, this.buckets = function(t3, e3) {
              var r3 = {};
              if (!e3)
                return r3;
              for (var n3 = function() {
                var t4 = a3[i3], n4 = t4.layerIds.map(function(t5) {
                  return e3.getLayer(t5);
                }).filter(Boolean);
                if (0 !== n4.length) {
                  t4.layers = n4, t4.stateDependentLayerIds && (t4.stateDependentLayers = t4.stateDependentLayerIds.map(function(t5) {
                    return n4.filter(function(e4) {
                      return e4.id === t5;
                    })[0];
                  }));
                  for (var o3 = 0, s2 = n4; o3 < s2.length; o3 += 1) {
                    var u2 = s2[o3];
                    r3[u2.id] = t4;
                  }
                }
              }, i3 = 0, a3 = t3; i3 < a3.length; i3 += 1)
                n3();
              return r3;
            }(t2.buckets, e2.style), this.hasSymbolBuckets = false, this.buckets) {
              var i2 = this.buckets[n2];
              if (i2 instanceof Bs) {
                if (this.hasSymbolBuckets = true, !r2)
                  break;
                i2.justReloaded = true;
              }
            }
            for (var a2 in this.queryPadding = 0, this.buckets) {
              var o2 = this.buckets[a2];
              this.queryPadding = Math.max(this.queryPadding, e2.style.getLayer(a2).queryRadius(o2));
            }
            t2.imageAtlas && (this.imageAtlas = t2.imageAtlas), t2.glyphAtlasImage && (this.glyphAtlasImage = t2.glyphAtlasImage);
          } else
            this.collisionBoxArray = new fi();
        }, ju.prototype.unloadVectorData = function() {
          for (var t2 in this.buckets)
            this.buckets[t2].destroy();
          this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = "unloaded";
        }, ju.prototype.unloadDEMData = function() {
          this.dem = null, this.neighboringTiles = null, this.state = "unloaded";
        }, ju.prototype.getBucket = function(t2) {
          return this.buckets[t2.id];
        }, ju.prototype.upload = function(t2) {
          for (var e2 in this.buckets) {
            var r2 = this.buckets[e2];
            r2.uploadPending() && r2.upload(t2);
          }
          var n2 = t2.gl;
          this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new Xs(t2, this.imageAtlas.image, n2.RGBA), this.imageAtlas.uploaded = true), this.glyphAtlasImage && (this.glyphAtlasTexture = new Xs(t2, this.glyphAtlasImage, n2.ALPHA), this.glyphAtlasImage = null);
        }, ju.prototype.queryRenderedFeatures = function(t2, e2, r2, n2, i2, a2, o2, s2, u2) {
          return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({ queryGeometry: r2, cameraQueryGeometry: n2, scale: i2, tileSize: this.tileSize, pixelPosMatrix: u2, transform: o2, params: a2, queryPadding: this.queryPadding * s2 }, t2, e2) : {};
        }, ju.prototype.querySourceFeatures = function(t2, e2) {
          if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData) {
            var r2 = this.latestFeatureIndex.loadVTLayers(), n2 = e2 ? e2.sourceLayer : "", i2 = r2._geojsonTileLayer || r2[n2];
            if (i2)
              for (var a2 = Er(e2 && e2.filter), o2 = this.tileID.canonical, s2 = o2.z, u2 = o2.x, l2 = o2.y, p2 = { z: s2, x: u2, y: l2 }, c2 = 0; c2 < i2.length; c2++) {
                var h2 = i2.feature(c2);
                if (a2(new Sn(this.tileID.overscaledZ), h2)) {
                  var f2 = new Tu(h2, s2, u2, l2);
                  f2.tile = p2, t2.push(f2);
                }
              }
          }
        }, ju.prototype.clearMask = function() {
          this.segments && (this.segments.destroy(), delete this.segments), this.maskedBoundsBuffer && (this.maskedBoundsBuffer.destroy(), delete this.maskedBoundsBuffer), this.maskedIndexBuffer && (this.maskedIndexBuffer.destroy(), delete this.maskedIndexBuffer);
        }, ju.prototype.setMask = function(t2, e2) {
          if (!o(this.mask, t2) && (this.mask = t2, this.clearMask(), !o(t2, { 0: true }))) {
            var r2 = new Xn(), n2 = new si();
            this.segments = new zi(), this.segments.prepareSegment(0, r2, n2);
            for (var a2 = Object.keys(t2), s2 = 0; s2 < a2.length; s2++) {
              var u2 = t2[a2[s2]], l2 = Yi >> u2.z, p2 = new i(u2.x * l2, u2.y * l2), c2 = new i(p2.x + l2, p2.y + l2), h2 = this.segments.prepareSegment(4, r2, n2);
              r2.emplaceBack(p2.x, p2.y, p2.x, p2.y), r2.emplaceBack(c2.x, p2.y, c2.x, p2.y), r2.emplaceBack(p2.x, c2.y, p2.x, c2.y), r2.emplaceBack(c2.x, c2.y, c2.x, c2.y);
              var f2 = h2.vertexLength;
              n2.emplaceBack(f2, f2 + 1, f2 + 2), n2.emplaceBack(f2 + 1, f2 + 2, f2 + 3), h2.vertexLength += 4, h2.primitiveLength += 2;
            }
            this.maskedBoundsBuffer = e2.createVertexBuffer(r2, Cu.members), this.maskedIndexBuffer = e2.createIndexBuffer(n2);
          }
        }, ju.prototype.hasData = function() {
          return "loaded" === this.state || "reloading" === this.state || "expired" === this.state;
        }, ju.prototype.patternsLoaded = function() {
          return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;
        }, ju.prototype.setExpiryData = function(t2) {
          var e2 = this.expirationTime;
          if (t2.cacheControl) {
            var r2 = function(t3) {
              var e3 = {};
              if (t3.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, function(t4, r4, n3, i3) {
                var a3 = n3 || i3;
                return e3[r4] = !a3 || a3.toLowerCase(), "";
              }), e3["max-age"]) {
                var r3 = parseInt(e3["max-age"], 10);
                isNaN(r3) ? delete e3["max-age"] : e3["max-age"] = r3;
              }
              return e3;
            }(t2.cacheControl);
            r2["max-age"] && (this.expirationTime = Date.now() + 1e3 * r2["max-age"]);
          } else
            t2.expires && (this.expirationTime = new Date(t2.expires).getTime());
          if (this.expirationTime) {
            var n2 = Date.now(), i2 = false;
            if (this.expirationTime > n2)
              i2 = false;
            else if (e2)
              if (this.expirationTime < e2)
                i2 = true;
              else {
                var a2 = this.expirationTime - e2;
                a2 ? this.expirationTime = n2 + Math.max(a2, 3e4) : i2 = true;
              }
            else
              i2 = true;
            i2 ? (this.expiredRequestCount++, this.state = "expired") : this.expiredRequestCount = 0;
          }
        }, ju.prototype.getExpiryTimeout = function() {
          if (this.expirationTime)
            return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - (/* @__PURE__ */ new Date()).getTime(), Math.pow(2, 31) - 1);
        }, ju.prototype.setFeatureState = function(t2, e2) {
          if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData && 0 !== Object.keys(t2).length) {
            var r2 = this.latestFeatureIndex.loadVTLayers();
            for (var n2 in this.buckets) {
              var i2 = this.buckets[n2], a2 = i2.layers[0].sourceLayer || "_geojsonTileLayer", o2 = r2[a2], s2 = t2[a2];
              o2 && s2 && 0 !== Object.keys(s2).length && (i2.update(s2, o2, this.imageAtlas && this.imageAtlas.patternPositions || {}), e2 && e2.style && (this.queryPadding = Math.max(this.queryPadding, e2.style.getLayer(n2).queryRadius(i2))));
            }
          }
        }, ju.prototype.holdingForFade = function() {
          return void 0 !== this.symbolFadeHoldUntil;
        }, ju.prototype.symbolFadeFinished = function() {
          return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < V.now();
        }, ju.prototype.clearFadeHold = function() {
          this.symbolFadeHoldUntil = void 0;
        }, ju.prototype.setHoldDuration = function(t2) {
          this.symbolFadeHoldUntil = V.now() + t2;
        };
        var Ru = { horizontal: 1, vertical: 2, horizontalOnly: 3 }, qu = function() {
          this.text = "", this.sectionIndex = [], this.sections = [];
        };
        qu.fromFeature = function(t2, e2) {
          for (var r2 = new qu(), n2 = 0; n2 < t2.sections.length; n2++) {
            var i2 = t2.sections[n2];
            r2.sections.push({ scale: i2.scale || 1, fontStack: i2.fontStack || e2 }), r2.text += i2.text;
            for (var a2 = 0; a2 < i2.text.length; a2++)
              r2.sectionIndex.push(n2);
          }
          return r2;
        }, qu.prototype.length = function() {
          return this.text.length;
        }, qu.prototype.getSection = function(t2) {
          return this.sections[this.sectionIndex[t2]];
        }, qu.prototype.getCharCode = function(t2) {
          return this.text.charCodeAt(t2);
        }, qu.prototype.verticalizePunctuation = function() {
          this.text = function(t2) {
            for (var e2 = "", r2 = 0; r2 < t2.length; r2++) {
              var n2 = t2.charCodeAt(r2 + 1) || null, i2 = t2.charCodeAt(r2 - 1) || null;
              n2 && mn(n2) && !gs[t2[r2 + 1]] || i2 && mn(i2) && !gs[t2[r2 - 1]] || !gs[t2[r2]] ? e2 += t2[r2] : e2 += gs[t2[r2]];
            }
            return e2;
          }(this.text);
        }, qu.prototype.trim = function() {
          for (var t2 = 0, e2 = 0; e2 < this.text.length && Nu[this.text.charCodeAt(e2)]; e2++)
            t2++;
          for (var r2 = this.text.length, n2 = this.text.length - 1; n2 >= 0 && n2 >= t2 && Nu[this.text.charCodeAt(n2)]; n2--)
            r2--;
          this.text = this.text.substring(t2, r2), this.sectionIndex = this.sectionIndex.slice(t2, r2);
        }, qu.prototype.substring = function(t2, e2) {
          var r2 = new qu();
          return r2.text = this.text.substring(t2, e2), r2.sectionIndex = this.sectionIndex.slice(t2, e2), r2.sections = this.sections, r2;
        }, qu.prototype.toString = function() {
          return this.text;
        }, qu.prototype.getMaxScale = function() {
          var t2 = this;
          return this.sectionIndex.reduce(function(e2, r2) {
            return Math.max(e2, t2.sections[r2].scale);
          }, 0);
        };
        var Nu = { 9: true, 10: true, 11: true, 12: true, 13: true, 32: true }, Ku = {};
        function Gu(t2, e2, r2, n2) {
          var i2 = Math.pow(t2 - e2, 2);
          return n2 ? t2 < e2 ? i2 / 2 : 2 * i2 : i2 + Math.abs(r2) * r2;
        }
        function Xu(t2, e2) {
          var r2 = 0;
          return 10 === t2 && (r2 -= 1e4), 40 !== t2 && 65288 !== t2 || (r2 += 50), 41 !== e2 && 65289 !== e2 || (r2 += 50), r2;
        }
        function Zu(t2, e2, r2, n2, i2, a2) {
          for (var o2 = null, s2 = Gu(e2, r2, i2, a2), u2 = 0, l2 = n2; u2 < l2.length; u2 += 1) {
            var p2 = l2[u2], c2 = Gu(e2 - p2.x, r2, i2, a2) + p2.badness;
            c2 <= s2 && (o2 = p2, s2 = c2);
          }
          return { index: t2, x: e2, priorBreak: o2, badness: s2 };
        }
        function Hu(t2, e2, r2, n2) {
          if (!r2)
            return [];
          if (!t2)
            return [];
          for (var i2, a2 = [], o2 = function(t3, e3, r3, n3) {
            for (var i3 = 0, a3 = 0; a3 < t3.length(); a3++) {
              var o3 = t3.getSection(a3), s3 = n3[o3.fontStack], u3 = s3 && s3[t3.getCharCode(a3)];
              u3 && (i3 += u3.metrics.advance * o3.scale + e3);
            }
            return i3 / Math.max(1, Math.ceil(i3 / r3));
          }(t2, e2, r2, n2), s2 = 0, u2 = 0; u2 < t2.length(); u2++) {
            var l2 = t2.getSection(u2), p2 = t2.getCharCode(u2), c2 = n2[l2.fontStack], h2 = c2 && c2[p2];
            h2 && !Nu[p2] && (s2 += h2.metrics.advance * l2.scale + e2), u2 < t2.length() - 1 && (Ku[p2] || !((i2 = p2) < 11904) && (hn["Bopomofo Extended"](i2) || hn.Bopomofo(i2) || hn["CJK Compatibility Forms"](i2) || hn["CJK Compatibility Ideographs"](i2) || hn["CJK Compatibility"](i2) || hn["CJK Radicals Supplement"](i2) || hn["CJK Strokes"](i2) || hn["CJK Symbols and Punctuation"](i2) || hn["CJK Unified Ideographs Extension A"](i2) || hn["CJK Unified Ideographs"](i2) || hn["Enclosed CJK Letters and Months"](i2) || hn["Halfwidth and Fullwidth Forms"](i2) || hn.Hiragana(i2) || hn["Ideographic Description Characters"](i2) || hn["Kangxi Radicals"](i2) || hn["Katakana Phonetic Extensions"](i2) || hn.Katakana(i2) || hn["Vertical Forms"](i2) || hn["Yi Radicals"](i2) || hn["Yi Syllables"](i2))) && a2.push(Zu(u2 + 1, s2, o2, a2, Xu(p2, t2.getCharCode(u2 + 1)), false));
          }
          return function t3(e3) {
            return e3 ? t3(e3.priorBreak).concat(e3.index) : [];
          }(Zu(t2.length(), s2, o2, a2, 0, true));
        }
        function Yu(t2) {
          var e2 = 0.5, r2 = 0.5;
          switch (t2) {
            case "right":
            case "top-right":
            case "bottom-right":
              e2 = 1;
              break;
            case "left":
            case "top-left":
            case "bottom-left":
              e2 = 0;
          }
          switch (t2) {
            case "bottom":
            case "bottom-right":
            case "bottom-left":
              r2 = 1;
              break;
            case "top":
            case "top-right":
            case "top-left":
              r2 = 0;
          }
          return { horizontalAlign: e2, verticalAlign: r2 };
        }
        function Ju(t2, e2, r2, n2, i2) {
          if (i2) {
            var a2 = t2[n2], o2 = e2[a2.fontStack], s2 = o2 && o2[a2.glyph];
            if (s2)
              for (var u2 = s2.metrics.advance * a2.scale, l2 = (t2[n2].x + u2) * i2, p2 = r2; p2 <= n2; p2++)
                t2[p2].x -= l2;
          }
        }
        Ku[10] = true, Ku[32] = true, Ku[38] = true, Ku[40] = true, Ku[41] = true, Ku[43] = true, Ku[45] = true, Ku[47] = true, Ku[173] = true, Ku[183] = true, Ku[8203] = true, Ku[8208] = true, Ku[8211] = true, Ku[8231] = true, t.createCommonjsModule = e, t.window = self, t.Point = i, t.browser = V, t.getJSON = function(t2, e2) {
          return at(c(t2, { type: "json" }), e2);
        }, t.normalizeSpriteURL = function(t2, e2, r2, n2) {
          var i2 = X(t2);
          return U(t2) ? (i2.path = "/styles/v1" + i2.path + "/sprite" + e2 + r2, D(i2, n2)) : (i2.path += "" + e2 + r2, Z(i2));
        }, t.ResourceType = et, t.getImage = pt, t.RGBAImage = Ra, t.ImagePosition = Us, t.Texture = Xs, t.potpack = Ds, t.normalizeGlyphsURL = function(t2, e2) {
          if (!U(t2))
            return t2;
          var r2 = X(t2);
          return r2.path = "/fonts/v1" + r2.path, D(r2, e2);
        }, t.getArrayBuffer = ot, t.parseGlyphPBF = function(t2) {
          return new Ys(t2).readFields(fu, []);
        }, t.asyncAll = function(t2, e2, r2) {
          if (!t2.length)
            return r2(null, []);
          var n2 = t2.length, i2 = new Array(t2.length), a2 = null;
          t2.forEach(function(t3, o2) {
            e2(t3, function(t4, e3) {
              t4 && (a2 = t4), i2[o2] = e3, 0 == --n2 && r2(a2, i2);
            });
          });
        }, t.isChar = hn, t.AlphaImage = ja, t.Properties = Dn, t.DataConstantProperty = Mn, t.styleSpec = mt, t.validateLight = $r, t.endsWith = v, t.emitValidationErrors = tn, t.validateStyle = Jr, t.extend = c, t.Evented = dt, t.sphericalToCartesian = function(t2) {
          var e2 = t2[0], r2 = t2[1], n2 = t2[2];
          return r2 += 90, r2 *= Math.PI / 180, n2 *= Math.PI / 180, { x: e2 * Math.cos(r2) * Math.sin(n2), y: e2 * Math.sin(r2) * Math.sin(n2), z: e2 * Math.cos(n2) };
        }, t.number = le, t.Transitionable = In, t.warnOnce = w, t.uniqueId = f, t.Actor = vu, t.normalizeSourceURL = function(t2, e2) {
          if (!U(t2))
            return t2;
          var r2 = X(t2);
          return r2.path = "/v4/" + r2.authority + ".json", r2.params.push("secure"), D(r2, e2);
        }, t.pick = function(t2, e2) {
          for (var r2 = {}, n2 = 0; n2 < e2.length; n2++) {
            var i2 = e2[n2];
            i2 in t2 && (r2[i2] = t2[i2]);
          }
          return r2;
        }, t.canonicalizeTileset = function(t2, e2) {
          if (!U(e2))
            return t2.tiles || [];
          for (var r2 = [], n2 = 0, i2 = t2.tiles; n2 < i2.length; n2 += 1) {
            var a2 = i2[n2], o2 = K(a2);
            r2.push(o2);
          }
          return r2;
        }, t.LngLatBounds = xu, t.mercatorXfromLng = wu, t.mercatorYfromLat = Au, t.Event = ft, t.ErrorEvent = yt, t.postTurnstileEvent = W, t.postMapLoadEvent = tt, t.normalizeTileURL = function(t2, e2, r2) {
          if (!e2 || !U(e2))
            return t2;
          var n2 = X(t2), i2 = V.devicePixelRatio >= 2 || 512 === r2 ? "@2x" : "", a2 = M.supported ? ".webp" : "$1";
          return n2.path = n2.path.replace(q, "" + i2 + a2), n2.path = "/v4" + n2.path, D(n2);
        }, t.OverscaledTileID = Eu, t.EXTENT = Yi, t.MercatorCoordinate = zu, t.CanonicalTileID = Iu, t.StructArrayLayout4i8 = Xn, t.rasterBoundsAttributes = Cu, t.SegmentVector = zi, t.getVideo = function(t2, e2) {
          var r2, n2, i2 = self.document.createElement("video");
          i2.muted = true, i2.onloadstart = function() {
            e2(null, i2);
          };
          for (var a2 = 0; a2 < t2.length; a2++) {
            var o2 = self.document.createElement("source");
            r2 = t2[a2], n2 = void 0, (n2 = self.document.createElement("a")).href = r2, (n2.protocol !== self.document.location.protocol || n2.host !== self.document.location.host) && (i2.crossOrigin = "Anonymous"), o2.src = t2[a2], i2.appendChild(o2);
          }
          return { cancel: function() {
          } };
        }, t.ValidationError = vt, t.bindAll = m, t.multiply = function(t2, e2, r2) {
          var n2 = e2[0], i2 = e2[1], a2 = e2[2], o2 = e2[3], s2 = e2[4], u2 = e2[5], l2 = e2[6], p2 = e2[7], c2 = e2[8], h2 = e2[9], f2 = e2[10], y2 = e2[11], d2 = e2[12], m2 = e2[13], v2 = e2[14], g2 = e2[15], x2 = r2[0], b2 = r2[1], _2 = r2[2], w2 = r2[3];
          return t2[0] = x2 * n2 + b2 * s2 + _2 * c2 + w2 * d2, t2[1] = x2 * i2 + b2 * u2 + _2 * h2 + w2 * m2, t2[2] = x2 * a2 + b2 * l2 + _2 * f2 + w2 * v2, t2[3] = x2 * o2 + b2 * p2 + _2 * y2 + w2 * g2, x2 = r2[4], b2 = r2[5], _2 = r2[6], w2 = r2[7], t2[4] = x2 * n2 + b2 * s2 + _2 * c2 + w2 * d2, t2[5] = x2 * i2 + b2 * u2 + _2 * h2 + w2 * m2, t2[6] = x2 * a2 + b2 * l2 + _2 * f2 + w2 * v2, t2[7] = x2 * o2 + b2 * p2 + _2 * y2 + w2 * g2, x2 = r2[8], b2 = r2[9], _2 = r2[10], w2 = r2[11], t2[8] = x2 * n2 + b2 * s2 + _2 * c2 + w2 * d2, t2[9] = x2 * i2 + b2 * u2 + _2 * h2 + w2 * m2, t2[10] = x2 * a2 + b2 * l2 + _2 * f2 + w2 * v2, t2[11] = x2 * o2 + b2 * p2 + _2 * y2 + w2 * g2, x2 = r2[12], b2 = r2[13], _2 = r2[14], w2 = r2[15], t2[12] = x2 * n2 + b2 * s2 + _2 * c2 + w2 * d2, t2[13] = x2 * i2 + b2 * u2 + _2 * h2 + w2 * m2, t2[14] = x2 * a2 + b2 * l2 + _2 * f2 + w2 * v2, t2[15] = x2 * o2 + b2 * p2 + _2 * y2 + w2 * g2, t2;
        }, t.identity = function(t2) {
          return t2[0] = 1, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = 1, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 1, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, t2;
        }, t.translate = function(t2, e2, r2) {
          var n2, i2, a2, o2, s2, u2, l2, p2, c2, h2, f2, y2, d2 = r2[0], m2 = r2[1], v2 = r2[2];
          return e2 === t2 ? (t2[12] = e2[0] * d2 + e2[4] * m2 + e2[8] * v2 + e2[12], t2[13] = e2[1] * d2 + e2[5] * m2 + e2[9] * v2 + e2[13], t2[14] = e2[2] * d2 + e2[6] * m2 + e2[10] * v2 + e2[14], t2[15] = e2[3] * d2 + e2[7] * m2 + e2[11] * v2 + e2[15]) : (n2 = e2[0], i2 = e2[1], a2 = e2[2], o2 = e2[3], s2 = e2[4], u2 = e2[5], l2 = e2[6], p2 = e2[7], c2 = e2[8], h2 = e2[9], f2 = e2[10], y2 = e2[11], t2[0] = n2, t2[1] = i2, t2[2] = a2, t2[3] = o2, t2[4] = s2, t2[5] = u2, t2[6] = l2, t2[7] = p2, t2[8] = c2, t2[9] = h2, t2[10] = f2, t2[11] = y2, t2[12] = n2 * d2 + s2 * m2 + c2 * v2 + e2[12], t2[13] = i2 * d2 + u2 * m2 + h2 * v2 + e2[13], t2[14] = a2 * d2 + l2 * m2 + f2 * v2 + e2[14], t2[15] = o2 * d2 + p2 * m2 + y2 * v2 + e2[15]), t2;
        }, t.scale = function(t2, e2, r2) {
          var n2 = r2[0], i2 = r2[1], a2 = r2[2];
          return t2[0] = e2[0] * n2, t2[1] = e2[1] * n2, t2[2] = e2[2] * n2, t2[3] = e2[3] * n2, t2[4] = e2[4] * i2, t2[5] = e2[5] * i2, t2[6] = e2[6] * i2, t2[7] = e2[7] * i2, t2[8] = e2[8] * a2, t2[9] = e2[9] * a2, t2[10] = e2[10] * a2, t2[11] = e2[11] * a2, t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15], t2;
        }, t.Color = Dt, t.isEqual = o, t.keysDifference = function(t2, e2) {
          var r2 = [];
          for (var n2 in t2)
            n2 in e2 || r2.push(n2);
          return r2;
        }, t.Tile = ju, t.SourceFeatureState = Lu, t.refProperties = ["type", "source", "source-layer", "minzoom", "maxzoom", "filter", "layout"], t.rotateZ = function(t2, e2, r2) {
          var n2 = Math.sin(r2), i2 = Math.cos(r2), a2 = e2[0], o2 = e2[1], s2 = e2[2], u2 = e2[3], l2 = e2[4], p2 = e2[5], c2 = e2[6], h2 = e2[7];
          return e2 !== t2 && (t2[8] = e2[8], t2[9] = e2[9], t2[10] = e2[10], t2[11] = e2[11], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[0] = a2 * i2 + l2 * n2, t2[1] = o2 * i2 + p2 * n2, t2[2] = s2 * i2 + c2 * n2, t2[3] = u2 * i2 + h2 * n2, t2[4] = l2 * i2 - a2 * n2, t2[5] = p2 * i2 - o2 * n2, t2[6] = c2 * i2 - s2 * n2, t2[7] = h2 * i2 - u2 * n2, t2;
        }, t.evaluateSizeForZoom = function(t2, e2, r2) {
          if ("constant" === t2.functionType)
            return { uSizeT: 0, uSize: t2.layoutSize };
          if ("source" === t2.functionType)
            return { uSizeT: 0, uSize: 0 };
          if ("camera" === t2.functionType) {
            var n2 = t2.propertyValue, i2 = t2.zoomRange, a2 = t2.sizeRange, o2 = l(br(n2, r2.specification).interpolationFactor(e2, i2.min, i2.max), 0, 1);
            return { uSizeT: 0, uSize: a2.min + o2 * (a2.max - a2.min) };
          }
          var s2 = t2.propertyValue, u2 = t2.zoomRange;
          return { uSizeT: l(br(s2, r2.specification).interpolationFactor(e2, u2.min, u2.max), 0, 1), uSize: 0 };
        }, t.WritingMode = Ru, t.transformMat4 = Sa, t.evaluateSizeForFeature = function(t2, e2, r2) {
          var n2 = e2;
          return "source" === t2.functionType ? r2.lowerSize / bs : "composite" === t2.functionType ? le(r2.lowerSize / bs, r2.upperSize / bs, n2.uSizeT) : n2.uSize;
        }, t.addDynamicAttributes = ks, t.properties = Ps, t.polygonIntersectsPolygon = ea, t.isMapboxURL = U, t.normalizeStyleURL = function(t2, e2) {
          if (!U(t2))
            return t2;
          var r2 = X(t2);
          return r2.path = "/styles/v1" + r2.path, D(r2, e2);
        }, t.createStyleLayer = function(t2) {
          return "custom" === t2.type ? new Ls(t2) : new Os[t2.type](t2);
        }, t.clone = b, t.validateCustomStyleLayer = function(t2) {
          var e2 = [], r2 = t2.id;
          return void 0 === r2 && e2.push({ message: "layers." + r2 + ': missing required property "id"' }), void 0 === t2.render && e2.push({ message: "layers." + r2 + ': missing required method "render"' }), t2.renderingMode && "2d" !== t2.renderingMode && "3d" !== t2.renderingMode && e2.push({ message: "layers." + r2 + ': property "renderingMode" must be either "2d" or "3d"' }), e2;
        }, t.filterObject = x, t.mapObject = g, t.evented = wn, t.makeRequest = at, t.registerForPluginAvailability = function(t2) {
          return bn ? t2({ pluginURL: bn, completionCallback: gn }) : wn.once("pluginAvailable", t2), t2;
        }, t.ZoomHistory = cn, t.getReferrer = it, t.createLayout = Nn, t.UniformMatrix4f = Di, t.Uniform3f = Ti, t.Uniform1f = Ci, t.Uniform1i = Vi, t.Uniform2f = Mi, t.Uniform4f = Fi, t.create = ga, t.fromRotation = function(t2, e2) {
          var r2 = Math.sin(e2), n2 = Math.cos(e2);
          return t2[0] = n2, t2[1] = r2, t2[2] = 0, t2[3] = -r2, t2[4] = n2, t2[5] = 0, t2[6] = 0, t2[7] = 0, t2[8] = 1, t2;
        }, t.transformMat3 = function(t2, e2, r2) {
          var n2 = e2[0], i2 = e2[1], a2 = e2[2];
          return t2[0] = n2 * r2[0] + i2 * r2[3] + a2 * r2[6], t2[1] = n2 * r2[1] + i2 * r2[4] + a2 * r2[7], t2[2] = n2 * r2[2] + i2 * r2[5] + a2 * r2[8], t2;
        }, t.create$1 = function() {
          var t2 = new va(16);
          return va != Float32Array && (t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0), t2[0] = 1, t2[5] = 1, t2[10] = 1, t2[15] = 1, t2;
        }, t.ortho = function(t2, e2, r2, n2, i2, a2, o2) {
          var s2 = 1 / (e2 - r2), u2 = 1 / (n2 - i2), l2 = 1 / (a2 - o2);
          return t2[0] = -2 * s2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = -2 * u2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 2 * l2, t2[11] = 0, t2[12] = (e2 + r2) * s2, t2[13] = (i2 + n2) * u2, t2[14] = (o2 + a2) * l2, t2[15] = 1, t2;
        }, t.UniformColor = Li, t.clamp = l, t.StructArrayLayout2i4 = Gn, t.StructArrayLayout2ui4 = ui, t.ProgramConfiguration = Gi, t.StructArrayLayout1ui2 = li, t.StructArrayLayout3ui6 = si, t.wrap = p, t.create$2 = function() {
          var t2 = new va(4);
          return va != Float32Array && (t2[1] = 0, t2[2] = 0), t2[0] = 1, t2[3] = 1, t2;
        }, t.rotate = function(t2, e2, r2) {
          var n2 = e2[0], i2 = e2[1], a2 = e2[2], o2 = e2[3], s2 = Math.sin(r2), u2 = Math.cos(r2);
          return t2[0] = n2 * u2 + a2 * s2, t2[1] = i2 * u2 + o2 * s2, t2[2] = n2 * -s2 + a2 * u2, t2[3] = i2 * -s2 + o2 * u2, t2;
        }, t.LngLat = bu, t.UnwrappedTileID = Bu, t.perspective = function(t2, e2, r2, n2, i2) {
          var a2, o2 = 1 / Math.tan(e2 / 2);
          return t2[0] = o2 / r2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = o2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = -1, t2[12] = 0, t2[13] = 0, t2[15] = 0, null != i2 && i2 !== 1 / 0 ? (a2 = 1 / (n2 - i2), t2[10] = (i2 + n2) * a2, t2[14] = 2 * i2 * n2 * a2) : (t2[10] = -1, t2[14] = -2 * n2), t2;
        }, t.rotateX = function(t2, e2, r2) {
          var n2 = Math.sin(r2), i2 = Math.cos(r2), a2 = e2[4], o2 = e2[5], s2 = e2[6], u2 = e2[7], l2 = e2[8], p2 = e2[9], c2 = e2[10], h2 = e2[11];
          return e2 !== t2 && (t2[0] = e2[0], t2[1] = e2[1], t2[2] = e2[2], t2[3] = e2[3], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[4] = a2 * i2 + l2 * n2, t2[5] = o2 * i2 + p2 * n2, t2[6] = s2 * i2 + c2 * n2, t2[7] = u2 * i2 + h2 * n2, t2[8] = l2 * i2 - a2 * n2, t2[9] = p2 * i2 - o2 * n2, t2[10] = c2 * i2 - s2 * n2, t2[11] = h2 * i2 - u2 * n2, t2;
        }, t.mercatorZfromAltitude = Su, t.invert = function(t2, e2) {
          var r2 = e2[0], n2 = e2[1], i2 = e2[2], a2 = e2[3], o2 = e2[4], s2 = e2[5], u2 = e2[6], l2 = e2[7], p2 = e2[8], c2 = e2[9], h2 = e2[10], f2 = e2[11], y2 = e2[12], d2 = e2[13], m2 = e2[14], v2 = e2[15], g2 = r2 * s2 - n2 * o2, x2 = r2 * u2 - i2 * o2, b2 = r2 * l2 - a2 * o2, _2 = n2 * u2 - i2 * s2, w2 = n2 * l2 - a2 * s2, A2 = i2 * l2 - a2 * u2, S2 = p2 * d2 - c2 * y2, k2 = p2 * m2 - h2 * y2, z2 = p2 * v2 - f2 * y2, I2 = c2 * m2 - h2 * d2, B2 = c2 * v2 - f2 * d2, E2 = h2 * v2 - f2 * m2, P2 = g2 * E2 - x2 * B2 + b2 * I2 + _2 * z2 - w2 * k2 + A2 * S2;
          return P2 ? (P2 = 1 / P2, t2[0] = (s2 * E2 - u2 * B2 + l2 * I2) * P2, t2[1] = (i2 * B2 - n2 * E2 - a2 * I2) * P2, t2[2] = (d2 * A2 - m2 * w2 + v2 * _2) * P2, t2[3] = (h2 * w2 - c2 * A2 - f2 * _2) * P2, t2[4] = (u2 * z2 - o2 * E2 - l2 * k2) * P2, t2[5] = (r2 * E2 - i2 * z2 + a2 * k2) * P2, t2[6] = (m2 * b2 - y2 * A2 - v2 * x2) * P2, t2[7] = (p2 * A2 - h2 * b2 + f2 * x2) * P2, t2[8] = (o2 * B2 - s2 * z2 + l2 * S2) * P2, t2[9] = (n2 * z2 - r2 * B2 - a2 * S2) * P2, t2[10] = (y2 * w2 - d2 * b2 + v2 * g2) * P2, t2[11] = (c2 * b2 - p2 * w2 - f2 * g2) * P2, t2[12] = (s2 * k2 - o2 * I2 - u2 * S2) * P2, t2[13] = (r2 * I2 - n2 * k2 + i2 * S2) * P2, t2[14] = (d2 * x2 - y2 * _2 - m2 * g2) * P2, t2[15] = (p2 * _2 - c2 * x2 + h2 * g2) * P2, t2) : null;
        }, t.ease = u, t.bezier = s, t.config = C, t.webpSupported = M, t.EvaluationParameters = Sn, t.version = "0.53.1", t.setRTLTextPlugin = function(t2, e2) {
          if (xn)
            throw new Error("setRTLTextPlugin cannot be called multiple times.");
          xn = true, bn = V.resolveURL(t2), gn = function(t3) {
            t3 ? (xn = false, bn = null, e2 && e2(t3)) : _n = true;
          }, wn.fire(new ft("pluginAvailable", { pluginURL: bn, completionCallback: gn }));
        }, t.featureFilter = Er, t.values = function(t2) {
          var e2 = [];
          for (var r2 in t2)
            e2.push(t2[r2]);
          return e2;
        }, t.Anchor = xs, t.GLYPH_PBF_BORDER = mu, t.distToSegmentSquared = ua, t.allowsLetterSpacing = function(t2) {
          for (var e2 = 0, r2 = t2; e2 < r2.length; e2 += 1)
            if (!yn(r2[e2].charCodeAt(0)))
              return false;
          return true;
        }, t.shapeText = function(t2, e2, r2, n2, i2, a2, o2, s2, u2, l2, p2) {
          var c2 = qu.fromFeature(t2, r2);
          p2 === Ru.vertical && c2.verticalizePunctuation();
          var h2, f2 = [], y2 = { positionedGlyphs: f2, text: c2, top: u2[1], bottom: u2[1], left: u2[0], right: u2[0], writingMode: p2 }, d2 = An.processBidirectionalText, m2 = An.processStyledBidirectionalText;
          if (d2 && 1 === c2.sections.length) {
            h2 = [];
            for (var v2 = 0, g2 = d2(c2.toString(), Hu(c2, s2, n2, e2)); v2 < g2.length; v2 += 1) {
              var x2 = g2[v2], b2 = new qu();
              b2.text = x2, b2.sections = c2.sections;
              for (var _2 = 0; _2 < x2.length; _2++)
                b2.sectionIndex.push(0);
              h2.push(b2);
            }
          } else if (m2) {
            h2 = [];
            for (var w2 = 0, A2 = m2(c2.text, c2.sectionIndex, Hu(c2, s2, n2, e2)); w2 < A2.length; w2 += 1) {
              var S2 = A2[w2], k2 = new qu();
              k2.text = S2[0], k2.sectionIndex = S2[1], k2.sections = c2.sections, h2.push(k2);
            }
          } else
            h2 = function(t3, e3) {
              for (var r3 = [], n3 = t3.text, i3 = 0, a3 = 0, o3 = e3; a3 < o3.length; a3 += 1) {
                var s3 = o3[a3];
                r3.push(t3.substring(i3, s3)), i3 = s3;
              }
              return i3 < n3.length && r3.push(t3.substring(i3, n3.length)), r3;
            }(c2, Hu(c2, s2, n2, e2));
          return function(t3, e3, r3, n3, i3, a3, o3, s3, u3) {
            for (var l3 = 0, p3 = -17, c3 = 0, h3 = t3.positionedGlyphs, f3 = "right" === a3 ? 1 : "left" === a3 ? 0 : 0.5, y3 = 0, d3 = r3; y3 < d3.length; y3 += 1) {
              var m3 = d3[y3];
              m3.trim();
              var v3 = m3.getMaxScale();
              if (m3.length()) {
                for (var g3 = h3.length, x3 = 0; x3 < m3.length(); x3++) {
                  var b3 = m3.getSection(x3), _3 = m3.getCharCode(x3), w3 = 24 * (v3 - b3.scale), A3 = e3[b3.fontStack], S3 = A3 && A3[_3];
                  S3 && (dn(_3) && o3 !== Ru.horizontal ? (h3.push({ glyph: _3, x: l3, y: w3, vertical: true, scale: b3.scale, fontStack: b3.fontStack }), l3 += u3 * b3.scale + s3) : (h3.push({ glyph: _3, x: l3, y: p3 + w3, vertical: false, scale: b3.scale, fontStack: b3.fontStack }), l3 += S3.metrics.advance * b3.scale + s3));
                }
                if (h3.length !== g3) {
                  var k3 = l3 - s3;
                  c3 = Math.max(k3, c3), Ju(h3, e3, g3, h3.length - 1, f3);
                }
                l3 = 0, p3 += n3 * v3;
              } else
                p3 += n3;
            }
            var z2 = Yu(i3), I2 = z2.horizontalAlign, B2 = z2.verticalAlign;
            !function(t4, e4, r4, n4, i4, a4, o4) {
              for (var s4 = (e4 - r4) * i4, u4 = (-n4 * o4 + 0.5) * a4, l4 = 0; l4 < t4.length; l4++)
                t4[l4].x += s4, t4[l4].y += u4;
            }(h3, f3, I2, B2, c3, n3, r3.length);
            var E2 = p3 - -17;
            t3.top += -B2 * E2, t3.bottom = t3.top + E2, t3.left += -I2 * c3, t3.right = t3.left + c3;
          }(y2, e2, h2, i2, a2, o2, p2, s2, l2), !!f2.length && (y2.text = y2.text.toString(), y2);
        }, t.allowsVerticalWritingMode = fn, t.shapeIcon = function(t2, e2, r2) {
          var n2 = Yu(r2), i2 = n2.horizontalAlign, a2 = n2.verticalAlign, o2 = e2[0], s2 = e2[1], u2 = o2 - t2.displaySize[0] * i2, l2 = u2 + t2.displaySize[0], p2 = s2 - t2.displaySize[1] * a2;
          return { image: t2, top: p2, bottom: p2 + t2.displaySize[1], left: u2, right: l2 };
        }, t.classifyRings = So, t.SIZE_PACK_FACTOR = bs, t.SymbolBucket = Bs, t.register = sn, t.CollisionBoxArray = fi, t.DictionaryCoder = Mu, t.FeatureIndex = Ou, t.ImageAtlas = Rs, t.LineBucket = as, t.FillBucket = Bo, t.FillExtrusionBucket = Fo, t.mvt = Wo, t.Protobuf = Ys, t.DEMData = Vu, t.vectorTile = Wo, t.Point$1 = i, t.pbf = Ys, t.createExpression = dr, t.plugin = An;
      });
      define2(["./shared.js"], function(e) {
        "use strict";
        function t(e2) {
          var r2 = typeof e2;
          if ("number" === r2 || "boolean" === r2 || "string" === r2 || null == e2)
            return JSON.stringify(e2);
          if (Array.isArray(e2)) {
            for (var n2 = "[", o2 = 0, i2 = e2; o2 < i2.length; o2 += 1) {
              n2 += t(i2[o2]) + ",";
            }
            return n2 + "]";
          }
          for (var a2 = Object.keys(e2).sort(), s2 = "{", l2 = 0; l2 < a2.length; l2++)
            s2 += JSON.stringify(a2[l2]) + ":" + t(e2[a2[l2]]) + ",";
          return s2 + "}";
        }
        function r(r2) {
          for (var n2 = "", o2 = 0, i2 = e.refProperties; o2 < i2.length; o2 += 1) {
            n2 += "/" + t(r2[i2[o2]]);
          }
          return n2;
        }
        var n = function(e2) {
          e2 && this.replace(e2);
        };
        function o(e2, t2, r2, n2, o2) {
          if (void 0 === t2.segment)
            return true;
          for (var i2 = t2, a2 = t2.segment + 1, s2 = 0; s2 > -r2 / 2; ) {
            if (--a2 < 0)
              return false;
            s2 -= e2[a2].dist(i2), i2 = e2[a2];
          }
          s2 += e2[a2].dist(e2[a2 + 1]), a2++;
          for (var l2 = [], u2 = 0; s2 < r2 / 2; ) {
            var h2 = e2[a2 - 1], c2 = e2[a2], p2 = e2[a2 + 1];
            if (!p2)
              return false;
            var f2 = h2.angleTo(c2) - c2.angleTo(p2);
            for (f2 = Math.abs((f2 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l2.push({ distance: s2, angleDelta: f2 }), u2 += f2; s2 - l2[0].distance > n2; )
              u2 -= l2.shift().angleDelta;
            if (u2 > o2)
              return false;
            a2++, s2 += c2.dist(p2);
          }
          return true;
        }
        function i(e2) {
          for (var t2 = 0, r2 = 0; r2 < e2.length - 1; r2++)
            t2 += e2[r2].dist(e2[r2 + 1]);
          return t2;
        }
        function a(e2, t2, r2) {
          return e2 ? 0.6 * t2 * r2 : 0;
        }
        function s(e2, t2) {
          return Math.max(e2 ? e2.right - e2.left : 0, t2 ? t2.right - t2.left : 0);
        }
        function l(t2, r2, n2, l2, u2, h2) {
          for (var c2 = a(n2, u2, h2), p2 = s(n2, l2) * h2, f2 = 0, d2 = i(t2) / 2, g2 = 0; g2 < t2.length - 1; g2++) {
            var m2 = t2[g2], v2 = t2[g2 + 1], y2 = m2.dist(v2);
            if (f2 + y2 > d2) {
              var x2 = (d2 - f2) / y2, w2 = e.number(m2.x, v2.x, x2), M2 = e.number(m2.y, v2.y, x2), S2 = new e.Anchor(w2, M2, v2.angleTo(m2), g2);
              return S2._round(), !c2 || o(t2, S2, p2, c2, r2) ? S2 : void 0;
            }
            f2 += y2;
          }
        }
        function u(t2, r2, n2, l2, u2, h2, c2, p2, f2) {
          var d2 = a(l2, h2, c2), g2 = s(l2, u2), m2 = g2 * c2, v2 = 0 === t2[0].x || t2[0].x === f2 || 0 === t2[0].y || t2[0].y === f2;
          return r2 - m2 < r2 / 4 && (r2 = m2 + r2 / 4), function t3(r3, n3, a2, s2, l3, u3, h3, c3, p3) {
            var f3 = u3 / 2;
            var d3 = i(r3);
            var g3 = 0, m3 = n3 - a2;
            var v3 = [];
            for (var y2 = 0; y2 < r3.length - 1; y2++) {
              for (var x2 = r3[y2], w2 = r3[y2 + 1], M2 = x2.dist(w2), S2 = w2.angleTo(x2); m3 + a2 < g3 + M2; ) {
                var _2 = ((m3 += a2) - g3) / M2, P2 = e.number(x2.x, w2.x, _2), b2 = e.number(x2.y, w2.y, _2);
                if (P2 >= 0 && P2 < p3 && b2 >= 0 && b2 < p3 && m3 - f3 >= 0 && m3 + f3 <= d3) {
                  var T2 = new e.Anchor(P2, b2, S2, y2);
                  T2._round(), s2 && !o(r3, T2, u3, s2, l3) || v3.push(T2);
                }
              }
              g3 += M2;
            }
            c3 || v3.length || h3 || (v3 = t3(r3, g3 / 2, a2, s2, l3, u3, h3, true, p3));
            return v3;
          }(t2, v2 ? r2 / 2 * p2 % r2 : (g2 / 2 + 2 * h2) * c2 * p2 % r2, r2, d2, n2, m2, v2, false, f2);
        }
        n.prototype.replace = function(e2) {
          this._layerConfigs = {}, this._layers = {}, this.update(e2, []);
        }, n.prototype.update = function(t2, n2) {
          for (var o2 = this, i2 = 0, a2 = t2; i2 < a2.length; i2 += 1) {
            var s2 = a2[i2];
            this._layerConfigs[s2.id] = s2;
            var l2 = this._layers[s2.id] = e.createStyleLayer(s2);
            l2._featureFilter = e.featureFilter(l2.filter);
          }
          for (var u2 = 0, h2 = n2; u2 < h2.length; u2 += 1) {
            var c2 = h2[u2];
            delete this._layerConfigs[c2], delete this._layers[c2];
          }
          this.familiesBySource = {};
          for (var p2 = 0, f2 = function(e2) {
            for (var t3 = {}, n3 = 0; n3 < e2.length; n3++) {
              var o3 = r(e2[n3]), i3 = t3[o3];
              i3 || (i3 = t3[o3] = []), i3.push(e2[n3]);
            }
            var a3 = [];
            for (var s3 in t3)
              a3.push(t3[s3]);
            return a3;
          }(e.values(this._layerConfigs)); p2 < f2.length; p2 += 1) {
            var d2 = f2[p2].map(function(e2) {
              return o2._layers[e2.id];
            }), g2 = d2[0];
            if ("none" !== g2.visibility) {
              var m2 = g2.source || "", v2 = this.familiesBySource[m2];
              v2 || (v2 = this.familiesBySource[m2] = {});
              var y2 = g2.sourceLayer || "_geojsonTileLayer", x2 = v2[y2];
              x2 || (x2 = v2[y2] = []), x2.push(d2);
            }
          }
        };
        var h = function(t2, r2, n2, o2, i2, a2, s2, l2, u2, h2, c2, p2) {
          var f2 = s2.top * l2 - u2, d2 = s2.bottom * l2 + u2, g2 = s2.left * l2 - u2, m2 = s2.right * l2 + u2;
          if (this.boxStartIndex = t2.length, h2) {
            var v2 = d2 - f2, y2 = m2 - g2;
            v2 > 0 && (v2 = Math.max(10 * l2, v2), this._addLineCollisionCircles(t2, r2, n2, n2.segment, y2, v2, o2, i2, a2, c2));
          } else {
            if (p2) {
              var x2 = new e.Point(g2, f2), w2 = new e.Point(m2, f2), M2 = new e.Point(g2, d2), S2 = new e.Point(m2, d2), _2 = p2 * Math.PI / 180;
              x2._rotate(_2), w2._rotate(_2), M2._rotate(_2), S2._rotate(_2), g2 = Math.min(x2.x, w2.x, M2.x, S2.x), m2 = Math.max(x2.x, w2.x, M2.x, S2.x), f2 = Math.min(x2.y, w2.y, M2.y, S2.y), d2 = Math.max(x2.y, w2.y, M2.y, S2.y);
            }
            t2.emplaceBack(n2.x, n2.y, g2, f2, m2, d2, o2, i2, a2, 0, 0);
          }
          this.boxEndIndex = t2.length;
        };
        h.prototype._addLineCollisionCircles = function(e2, t2, r2, n2, o2, i2, a2, s2, l2, u2) {
          var h2 = i2 / 2, c2 = Math.floor(o2 / h2) || 1, p2 = 1 + 0.4 * Math.log(u2) / Math.LN2, f2 = Math.floor(c2 * p2 / 2), d2 = -i2 / 2, g2 = r2, m2 = n2 + 1, v2 = d2, y2 = -o2 / 2, x2 = y2 - o2 / 4;
          do {
            if (--m2 < 0) {
              if (v2 > y2)
                return;
              m2 = 0;
              break;
            }
            v2 -= t2[m2].dist(g2), g2 = t2[m2];
          } while (v2 > x2);
          for (var w2 = t2[m2].dist(t2[m2 + 1]), M2 = -f2; M2 < c2 + f2; M2++) {
            var S2 = M2 * h2, _2 = y2 + S2;
            if (S2 < 0 && (_2 += S2), S2 > o2 && (_2 += S2 - o2), !(_2 < v2)) {
              for (; v2 + w2 < _2; ) {
                if (v2 += w2, ++m2 + 1 >= t2.length)
                  return;
                w2 = t2[m2].dist(t2[m2 + 1]);
              }
              var P2 = _2 - v2, b2 = t2[m2], T2 = t2[m2 + 1].sub(b2)._unit()._mult(P2)._add(b2)._round(), I2 = Math.abs(_2 - d2) < h2 ? 0 : 0.8 * (_2 - d2);
              e2.emplaceBack(T2.x, T2.y, -i2 / 2, -i2 / 2, i2 / 2, i2 / 2, a2, s2, l2, i2 / 2, I2);
            }
          }
        };
        var c = function(e2, t2) {
          if (void 0 === e2 && (e2 = []), void 0 === t2 && (t2 = p), this.data = e2, this.length = this.data.length, this.compare = t2, this.length > 0)
            for (var r2 = (this.length >> 1) - 1; r2 >= 0; r2--)
              this._down(r2);
        };
        function p(e2, t2) {
          return e2 < t2 ? -1 : e2 > t2 ? 1 : 0;
        }
        function f(t2, r2, n2) {
          void 0 === r2 && (r2 = 1), void 0 === n2 && (n2 = false);
          for (var o2 = 1 / 0, i2 = 1 / 0, a2 = -1 / 0, s2 = -1 / 0, l2 = t2[0], u2 = 0; u2 < l2.length; u2++) {
            var h2 = l2[u2];
            (!u2 || h2.x < o2) && (o2 = h2.x), (!u2 || h2.y < i2) && (i2 = h2.y), (!u2 || h2.x > a2) && (a2 = h2.x), (!u2 || h2.y > s2) && (s2 = h2.y);
          }
          var p2 = a2 - o2, f2 = s2 - i2, m2 = Math.min(p2, f2), v2 = m2 / 2, y2 = new c([], d);
          if (0 === m2)
            return new e.Point(o2, i2);
          for (var x2 = o2; x2 < a2; x2 += m2)
            for (var w2 = i2; w2 < s2; w2 += m2)
              y2.push(new g(x2 + v2, w2 + v2, v2, t2));
          for (var M2 = function(e2) {
            for (var t3 = 0, r3 = 0, n3 = 0, o3 = e2[0], i3 = 0, a3 = o3.length, s3 = a3 - 1; i3 < a3; s3 = i3++) {
              var l3 = o3[i3], u3 = o3[s3], h3 = l3.x * u3.y - u3.x * l3.y;
              r3 += (l3.x + u3.x) * h3, n3 += (l3.y + u3.y) * h3, t3 += 3 * h3;
            }
            return new g(r3 / t3, n3 / t3, 0, e2);
          }(t2), S2 = y2.length; y2.length; ) {
            var _2 = y2.pop();
            (_2.d > M2.d || !M2.d) && (M2 = _2, n2 && console.log("found best %d after %d probes", Math.round(1e4 * _2.d) / 1e4, S2)), _2.max - M2.d <= r2 || (v2 = _2.h / 2, y2.push(new g(_2.p.x - v2, _2.p.y - v2, v2, t2)), y2.push(new g(_2.p.x + v2, _2.p.y - v2, v2, t2)), y2.push(new g(_2.p.x - v2, _2.p.y + v2, v2, t2)), y2.push(new g(_2.p.x + v2, _2.p.y + v2, v2, t2)), S2 += 4);
          }
          return n2 && (console.log("num probes: " + S2), console.log("best distance: " + M2.d)), M2.p;
        }
        function d(e2, t2) {
          return t2.max - e2.max;
        }
        function g(t2, r2, n2, o2) {
          this.p = new e.Point(t2, r2), this.h = n2, this.d = function(t3, r3) {
            for (var n3 = false, o3 = 1 / 0, i2 = 0; i2 < r3.length; i2++)
              for (var a2 = r3[i2], s2 = 0, l2 = a2.length, u2 = l2 - 1; s2 < l2; u2 = s2++) {
                var h2 = a2[s2], c2 = a2[u2];
                h2.y > t3.y != c2.y > t3.y && t3.x < (c2.x - h2.x) * (t3.y - h2.y) / (c2.y - h2.y) + h2.x && (n3 = !n3), o3 = Math.min(o3, e.distToSegmentSquared(t3, h2, c2));
              }
            return (n3 ? 1 : -1) * Math.sqrt(o3);
          }(this.p, o2), this.max = this.d + this.h * Math.SQRT2;
        }
        c.prototype.push = function(e2) {
          this.data.push(e2), this.length++, this._up(this.length - 1);
        }, c.prototype.pop = function() {
          if (0 !== this.length) {
            var e2 = this.data[0];
            return this.length--, this.length > 0 && (this.data[0] = this.data[this.length], this._down(0)), this.data.pop(), e2;
          }
        }, c.prototype.peek = function() {
          return this.data[0];
        }, c.prototype._up = function(e2) {
          for (var t2 = this.data, r2 = this.compare, n2 = t2[e2]; e2 > 0; ) {
            var o2 = e2 - 1 >> 1, i2 = t2[o2];
            if (r2(n2, i2) >= 0)
              break;
            t2[e2] = i2, e2 = o2;
          }
          t2[e2] = n2;
        }, c.prototype._down = function(e2) {
          for (var t2 = this.data, r2 = this.compare, n2 = this.length >> 1, o2 = t2[e2]; e2 < n2; ) {
            var i2 = 1 + (e2 << 1), a2 = t2[i2], s2 = i2 + 1;
            if (s2 < this.length && r2(t2[s2], a2) < 0 && (i2 = s2, a2 = t2[s2]), r2(a2, o2) >= 0)
              break;
            t2[e2] = a2, e2 = i2;
          }
          t2[e2] = o2;
        };
        var m = e.createCommonjsModule(function(e2) {
          e2.exports = function(e3, t2) {
            var r2, n2, o2, i2, a2, s2, l2, u2;
            for (r2 = 3 & e3.length, n2 = e3.length - r2, o2 = t2, a2 = 3432918353, s2 = 461845907, u2 = 0; u2 < n2; )
              l2 = 255 & e3.charCodeAt(u2) | (255 & e3.charCodeAt(++u2)) << 8 | (255 & e3.charCodeAt(++u2)) << 16 | (255 & e3.charCodeAt(++u2)) << 24, ++u2, o2 = 27492 + (65535 & (i2 = 5 * (65535 & (o2 = (o2 ^= l2 = (65535 & (l2 = (l2 = (65535 & l2) * a2 + (((l2 >>> 16) * a2 & 65535) << 16) & 4294967295) << 15 | l2 >>> 17)) * s2 + (((l2 >>> 16) * s2 & 65535) << 16) & 4294967295) << 13 | o2 >>> 19)) + ((5 * (o2 >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (i2 >>> 16) & 65535) << 16);
            switch (l2 = 0, r2) {
              case 3:
                l2 ^= (255 & e3.charCodeAt(u2 + 2)) << 16;
              case 2:
                l2 ^= (255 & e3.charCodeAt(u2 + 1)) << 8;
              case 1:
                o2 ^= l2 = (65535 & (l2 = (l2 = (65535 & (l2 ^= 255 & e3.charCodeAt(u2))) * a2 + (((l2 >>> 16) * a2 & 65535) << 16) & 4294967295) << 15 | l2 >>> 17)) * s2 + (((l2 >>> 16) * s2 & 65535) << 16) & 4294967295;
            }
            return o2 ^= e3.length, o2 = 2246822507 * (65535 & (o2 ^= o2 >>> 16)) + ((2246822507 * (o2 >>> 16) & 65535) << 16) & 4294967295, o2 = 3266489909 * (65535 & (o2 ^= o2 >>> 13)) + ((3266489909 * (o2 >>> 16) & 65535) << 16) & 4294967295, (o2 ^= o2 >>> 16) >>> 0;
          };
        }), v = e.createCommonjsModule(function(e2) {
          e2.exports = function(e3, t2) {
            for (var r2, n2 = e3.length, o2 = t2 ^ n2, i2 = 0; n2 >= 4; )
              r2 = 1540483477 * (65535 & (r2 = 255 & e3.charCodeAt(i2) | (255 & e3.charCodeAt(++i2)) << 8 | (255 & e3.charCodeAt(++i2)) << 16 | (255 & e3.charCodeAt(++i2)) << 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16), o2 = 1540483477 * (65535 & o2) + ((1540483477 * (o2 >>> 16) & 65535) << 16) ^ (r2 = 1540483477 * (65535 & (r2 ^= r2 >>> 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16)), n2 -= 4, ++i2;
            switch (n2) {
              case 3:
                o2 ^= (255 & e3.charCodeAt(i2 + 2)) << 16;
              case 2:
                o2 ^= (255 & e3.charCodeAt(i2 + 1)) << 8;
              case 1:
                o2 = 1540483477 * (65535 & (o2 ^= 255 & e3.charCodeAt(i2))) + ((1540483477 * (o2 >>> 16) & 65535) << 16);
            }
            return o2 = 1540483477 * (65535 & (o2 ^= o2 >>> 13)) + ((1540483477 * (o2 >>> 16) & 65535) << 16), (o2 ^= o2 >>> 15) >>> 0;
          };
        }), y = m, x = m, w = v;
        function M(t2, r2, n2, o2, i2, a2) {
          t2.createArrays();
          var s2 = 512 * t2.overscaling;
          t2.tilePixelRatio = e.EXTENT / s2, t2.compareText = {}, t2.iconsNeedLinear = false;
          var l2 = t2.layers[0].layout, u2 = t2.layers[0]._unevaluatedLayout._values, h2 = {};
          if ("composite" === t2.textSizeData.functionType) {
            var c2 = t2.textSizeData.zoomRange, p2 = c2.min, f2 = c2.max;
            h2.compositeTextSizes = [u2["text-size"].possiblyEvaluate(new e.EvaluationParameters(p2)), u2["text-size"].possiblyEvaluate(new e.EvaluationParameters(f2))];
          }
          if ("composite" === t2.iconSizeData.functionType) {
            var d2 = t2.iconSizeData.zoomRange, g2 = d2.min, m2 = d2.max;
            h2.compositeIconSizes = [u2["icon-size"].possiblyEvaluate(new e.EvaluationParameters(g2)), u2["icon-size"].possiblyEvaluate(new e.EvaluationParameters(m2))];
          }
          h2.layoutTextSize = u2["text-size"].possiblyEvaluate(new e.EvaluationParameters(t2.zoom + 1)), h2.layoutIconSize = u2["icon-size"].possiblyEvaluate(new e.EvaluationParameters(t2.zoom + 1)), h2.textMaxSize = u2["text-size"].possiblyEvaluate(new e.EvaluationParameters(18));
          for (var v2 = 24 * l2.get("text-line-height"), y2 = "map" === l2.get("text-rotation-alignment") && "point" !== l2.get("symbol-placement"), x2 = l2.get("text-keep-upright"), w2 = 0, M2 = t2.features; w2 < M2.length; w2 += 1) {
            var _2 = M2[w2], P2 = l2.get("text-font").evaluate(_2, {}).join(","), b2 = n2, T2 = {}, I2 = _2.text;
            if (I2) {
              var k2 = I2.toString(), z2 = l2.get("text-offset").evaluate(_2, {}).map(function(e2) {
                return 24 * e2;
              }), C2 = 24 * l2.get("text-letter-spacing").evaluate(_2, {}), E2 = e.allowsLetterSpacing(k2) ? C2 : 0, A2 = l2.get("text-anchor").evaluate(_2, {}), L2 = l2.get("text-justify").evaluate(_2, {}), D2 = "point" === l2.get("symbol-placement") ? 24 * l2.get("text-max-width").evaluate(_2, {}) : 0;
              T2.horizontal = e.shapeText(I2, r2, P2, D2, v2, A2, L2, E2, z2, 24, e.WritingMode.horizontal), e.allowsVerticalWritingMode(k2) && y2 && x2 && (T2.vertical = e.shapeText(I2, r2, P2, D2, v2, A2, L2, E2, z2, 24, e.WritingMode.vertical));
            }
            var O2 = void 0;
            if (_2.icon) {
              var N2 = o2[_2.icon];
              N2 && (O2 = e.shapeIcon(i2[_2.icon], l2.get("icon-offset").evaluate(_2, {}), l2.get("icon-anchor").evaluate(_2, {})), void 0 === t2.sdfIcons ? t2.sdfIcons = N2.sdf : t2.sdfIcons !== N2.sdf && e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"), N2.pixelRatio !== t2.pixelRatio ? t2.iconsNeedLinear = true : 0 !== l2.get("icon-rotate").constantOr(1) && (t2.iconsNeedLinear = true));
            }
            (T2.horizontal || O2) && S(t2, _2, T2, O2, b2, h2);
          }
          a2 && t2.generateCollisionDebugBuffers();
        }
        function S(t2, r2, n2, o2, i2, a2) {
          var s2 = a2.layoutTextSize.evaluate(r2, {}), c2 = a2.layoutIconSize.evaluate(r2, {}), p2 = a2.textMaxSize.evaluate(r2, {});
          void 0 === p2 && (p2 = s2);
          var d2 = t2.layers[0].layout, g2 = d2.get("text-offset").evaluate(r2, {}), m2 = d2.get("icon-offset").evaluate(r2, {}), v2 = s2 / 24, x2 = t2.tilePixelRatio * v2, w2 = t2.tilePixelRatio * p2 / 24, M2 = t2.tilePixelRatio * c2, S2 = t2.tilePixelRatio * d2.get("symbol-spacing"), T2 = d2.get("text-padding") * t2.tilePixelRatio, I2 = d2.get("icon-padding") * t2.tilePixelRatio, k2 = d2.get("text-max-angle") / 180 * Math.PI, z2 = "map" === d2.get("text-rotation-alignment") && "point" !== d2.get("symbol-placement"), C2 = "map" === d2.get("icon-rotation-alignment") && "point" !== d2.get("symbol-placement"), E2 = d2.get("symbol-placement"), A2 = S2 / 2, L2 = function(s3, l2) {
            l2.x < 0 || l2.x >= e.EXTENT || l2.y < 0 || l2.y >= e.EXTENT || function(t3, r3, n3, o3, i3, a3, s4, l3, u2, c3, p3, f2, d3, g3, m3, v3, x3, w3, M3, S3, b2) {
              var T3, I3, k3 = t3.addToLineVertexArray(r3, n3), z3 = 0, C3 = 0, E3 = 0, A3 = y(o3.horizontal ? o3.horizontal.text : ""), L3 = [];
              if (o3.horizontal) {
                var D3 = a3.layout.get("text-rotate").evaluate(M3, {});
                T3 = new h(s4, n3, r3, l3, u2, c3, o3.horizontal, p3, f2, d3, t3.overscaling, D3), C3 += P(t3, r3, o3.horizontal, a3, d3, M3, g3, k3, o3.vertical ? e.WritingMode.horizontal : e.WritingMode.horizontalOnly, L3, S3, b2), o3.vertical && (E3 += P(t3, r3, o3.vertical, a3, d3, M3, g3, k3, e.WritingMode.vertical, L3, S3, b2));
              }
              var O3 = T3 ? T3.boxStartIndex : t3.collisionBoxArray.length, N3 = T3 ? T3.boxEndIndex : t3.collisionBoxArray.length;
              if (i3) {
                var R3 = function(t4, r4, n4, o4, i4, a4) {
                  var s5, l4, u3, h2, c4 = r4.image, p4 = n4.layout, f3 = r4.top - 1 / c4.pixelRatio, d4 = r4.left - 1 / c4.pixelRatio, g4 = r4.bottom + 1 / c4.pixelRatio, m4 = r4.right + 1 / c4.pixelRatio;
                  if ("none" !== p4.get("icon-text-fit") && i4) {
                    var v4 = m4 - d4, y2 = g4 - f3, x4 = p4.get("text-size").evaluate(a4, {}) / 24, w4 = i4.left * x4, M4 = i4.right * x4, S4 = i4.top * x4, _2 = M4 - w4, P2 = i4.bottom * x4 - S4, b3 = p4.get("icon-text-fit-padding")[0], T4 = p4.get("icon-text-fit-padding")[1], I4 = p4.get("icon-text-fit-padding")[2], k4 = p4.get("icon-text-fit-padding")[3], z4 = "width" === p4.get("icon-text-fit") ? 0.5 * (P2 - y2) : 0, C4 = "height" === p4.get("icon-text-fit") ? 0.5 * (_2 - v4) : 0, E4 = "width" === p4.get("icon-text-fit") || "both" === p4.get("icon-text-fit") ? _2 : v4, A4 = "height" === p4.get("icon-text-fit") || "both" === p4.get("icon-text-fit") ? P2 : y2;
                    s5 = new e.Point(w4 + C4 - k4, S4 + z4 - b3), l4 = new e.Point(w4 + C4 + T4 + E4, S4 + z4 - b3), u3 = new e.Point(w4 + C4 + T4 + E4, S4 + z4 + I4 + A4), h2 = new e.Point(w4 + C4 - k4, S4 + z4 + I4 + A4);
                  } else
                    s5 = new e.Point(d4, f3), l4 = new e.Point(m4, f3), u3 = new e.Point(m4, g4), h2 = new e.Point(d4, g4);
                  var L4 = n4.layout.get("icon-rotate").evaluate(a4, {}) * Math.PI / 180;
                  if (L4) {
                    var D4 = Math.sin(L4), O4 = Math.cos(L4), N4 = [O4, -D4, D4, O4];
                    s5._matMult(N4), l4._matMult(N4), h2._matMult(N4), u3._matMult(N4);
                  }
                  return [{ tl: s5, tr: l4, bl: h2, br: u3, tex: c4.paddedRect, writingMode: void 0, glyphOffset: [0, 0] }];
                }(0, i3, a3, 0, o3.horizontal, M3), F3 = a3.layout.get("icon-rotate").evaluate(M3, {});
                I3 = new h(s4, n3, r3, l3, u2, c3, i3, m3, v3, false, t3.overscaling, F3), z3 = 4 * R3.length;
                var B3 = t3.iconSizeData, Z3 = null;
                "source" === B3.functionType ? (Z3 = [e.SIZE_PACK_FACTOR * a3.layout.get("icon-size").evaluate(M3, {})])[0] > _ && e.warnOnce(t3.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".') : "composite" === B3.functionType && ((Z3 = [e.SIZE_PACK_FACTOR * b2.compositeIconSizes[0].evaluate(M3, {}), e.SIZE_PACK_FACTOR * b2.compositeIconSizes[1].evaluate(M3, {})])[0] > _ || Z3[1] > _) && e.warnOnce(t3.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".'), t3.addSymbols(t3.icon, R3, Z3, w3, x3, M3, false, r3, k3.lineStartIndex, k3.lineLength);
              }
              var j3 = I3 ? I3.boxStartIndex : t3.collisionBoxArray.length, G3 = I3 ? I3.boxEndIndex : t3.collisionBoxArray.length;
              t3.glyphOffsetArray.length >= e.SymbolBucket.MAX_GLYPHS && e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
              t3.symbolInstances.emplaceBack(r3.x, r3.y, L3.length > 0 ? L3[0] : -1, L3.length > 1 ? L3[1] : -1, A3, O3, N3, j3, G3, l3, C3, E3, z3, 0);
            }(t2, l2, s3, n2, o2, t2.layers[0], t2.collisionBoxArray, r2.index, r2.sourceLayerIndex, t2.index, x2, T2, z2, g2, M2, I2, C2, m2, r2, i2, a2);
          };
          if ("line" === E2)
            for (var D2 = 0, O2 = function(t3, r3, n3, o3, i3) {
              for (var a3 = [], s3 = 0; s3 < t3.length; s3++)
                for (var l2 = t3[s3], u2 = void 0, h2 = 0; h2 < l2.length - 1; h2++) {
                  var c3 = l2[h2], p3 = l2[h2 + 1];
                  c3.x < r3 && p3.x < r3 || (c3.x < r3 ? c3 = new e.Point(r3, c3.y + (p3.y - c3.y) * ((r3 - c3.x) / (p3.x - c3.x)))._round() : p3.x < r3 && (p3 = new e.Point(r3, c3.y + (p3.y - c3.y) * ((r3 - c3.x) / (p3.x - c3.x)))._round()), c3.y < n3 && p3.y < n3 || (c3.y < n3 ? c3 = new e.Point(c3.x + (p3.x - c3.x) * ((n3 - c3.y) / (p3.y - c3.y)), n3)._round() : p3.y < n3 && (p3 = new e.Point(c3.x + (p3.x - c3.x) * ((n3 - c3.y) / (p3.y - c3.y)), n3)._round()), c3.x >= o3 && p3.x >= o3 || (c3.x >= o3 ? c3 = new e.Point(o3, c3.y + (p3.y - c3.y) * ((o3 - c3.x) / (p3.x - c3.x)))._round() : p3.x >= o3 && (p3 = new e.Point(o3, c3.y + (p3.y - c3.y) * ((o3 - c3.x) / (p3.x - c3.x)))._round()), c3.y >= i3 && p3.y >= i3 || (c3.y >= i3 ? c3 = new e.Point(c3.x + (p3.x - c3.x) * ((i3 - c3.y) / (p3.y - c3.y)), i3)._round() : p3.y >= i3 && (p3 = new e.Point(c3.x + (p3.x - c3.x) * ((i3 - c3.y) / (p3.y - c3.y)), i3)._round()), u2 && c3.equals(u2[u2.length - 1]) || (u2 = [c3], a3.push(u2)), u2.push(p3)))));
                }
              return a3;
            }(r2.geometry, 0, 0, e.EXTENT, e.EXTENT); D2 < O2.length; D2 += 1)
              for (var N2 = O2[D2], R2 = 0, F2 = u(N2, S2, k2, n2.vertical || n2.horizontal, o2, 24, w2, t2.overscaling, e.EXTENT); R2 < F2.length; R2 += 1) {
                var B2 = F2[R2], Z2 = n2.horizontal;
                Z2 && b(t2, Z2.text, A2, B2) || L2(N2, B2);
              }
          else if ("line-center" === E2)
            for (var j2 = 0, G2 = r2.geometry; j2 < G2.length; j2 += 1) {
              var J2 = G2[j2];
              if (J2.length > 1) {
                var X2 = l(J2, k2, n2.vertical || n2.horizontal, o2, 24, w2);
                X2 && L2(J2, X2);
              }
            }
          else if ("Polygon" === r2.type)
            for (var V2 = 0, W2 = e.classifyRings(r2.geometry, 0); V2 < W2.length; V2 += 1) {
              var Y2 = W2[V2], q2 = f(Y2, 16);
              L2(Y2[0], new e.Anchor(q2.x, q2.y, 0));
            }
          else if ("LineString" === r2.type)
            for (var U2 = 0, K2 = r2.geometry; U2 < K2.length; U2 += 1) {
              var H2 = K2[U2];
              L2(H2, new e.Anchor(H2[0].x, H2[0].y, 0));
            }
          else if ("Point" === r2.type)
            for (var Q2 = 0, $2 = r2.geometry; Q2 < $2.length; Q2 += 1)
              for (var ee2 = 0, te2 = $2[Q2]; ee2 < te2.length; ee2 += 1) {
                var re2 = te2[ee2];
                L2([re2], new e.Anchor(re2.x, re2.y, 0));
              }
        }
        y.murmur3 = x, y.murmur2 = w;
        var _ = 65535;
        function P(t2, r2, n2, o2, i2, a2, s2, l2, u2, h2, c2, p2) {
          var f2 = function(t3, r3, n3, o3, i3, a3) {
            for (var s3 = n3.layout.get("text-rotate").evaluate(i3, {}) * Math.PI / 180, l3 = n3.layout.get("text-offset").evaluate(i3, {}).map(function(e2) {
              return 24 * e2;
            }), u3 = r3.positionedGlyphs, h3 = [], c3 = 0; c3 < u3.length; c3++) {
              var p3 = u3[c3], f3 = a3[p3.fontStack], d3 = f3 && f3[p3.glyph];
              if (d3) {
                var g3 = d3.rect;
                if (g3) {
                  var m2 = e.GLYPH_PBF_BORDER + 1, v2 = d3.metrics.advance * p3.scale / 2, y2 = o3 ? [p3.x + v2, p3.y] : [0, 0], x2 = o3 ? [0, 0] : [p3.x + v2 + l3[0], p3.y + l3[1]], w2 = (d3.metrics.left - m2) * p3.scale - v2 + x2[0], M2 = (-d3.metrics.top - m2) * p3.scale + x2[1], S2 = w2 + g3.w * p3.scale, _2 = M2 + g3.h * p3.scale, P2 = new e.Point(w2, M2), b2 = new e.Point(S2, M2), T2 = new e.Point(w2, _2), I2 = new e.Point(S2, _2);
                  if (o3 && p3.vertical) {
                    var k2 = new e.Point(-v2, v2), z2 = -Math.PI / 2, C2 = new e.Point(5, 0);
                    P2._rotateAround(z2, k2)._add(C2), b2._rotateAround(z2, k2)._add(C2), T2._rotateAround(z2, k2)._add(C2), I2._rotateAround(z2, k2)._add(C2);
                  }
                  if (s3) {
                    var E2 = Math.sin(s3), A2 = Math.cos(s3), L2 = [A2, -E2, E2, A2];
                    P2._matMult(L2), b2._matMult(L2), T2._matMult(L2), I2._matMult(L2);
                  }
                  h3.push({ tl: P2, tr: b2, bl: T2, br: I2, tex: g3, writingMode: r3.writingMode, glyphOffset: y2 });
                }
              }
            }
            return h3;
          }(0, n2, o2, i2, a2, c2), d2 = t2.textSizeData, g2 = null;
          return "source" === d2.functionType ? (g2 = [e.SIZE_PACK_FACTOR * o2.layout.get("text-size").evaluate(a2, {})])[0] > _ && e.warnOnce(t2.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".') : "composite" === d2.functionType && ((g2 = [e.SIZE_PACK_FACTOR * p2.compositeTextSizes[0].evaluate(a2, {}), e.SIZE_PACK_FACTOR * p2.compositeTextSizes[1].evaluate(a2, {})])[0] > _ || g2[1] > _) && e.warnOnce(t2.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".'), t2.addSymbols(t2.text, f2, g2, s2, i2, a2, u2, r2, l2.lineStartIndex, l2.lineLength), h2.push(t2.text.placedSymbolArray.length - 1), 4 * f2.length;
        }
        function b(e2, t2, r2, n2) {
          var o2 = e2.compareText;
          if (t2 in o2) {
            for (var i2 = o2[t2], a2 = i2.length - 1; a2 >= 0; a2--)
              if (n2.dist(i2[a2]) < r2)
                return true;
          } else
            o2[t2] = [];
          return o2[t2].push(n2), false;
        }
        var T = function(t2) {
          var r2 = {}, n2 = [];
          for (var o2 in t2) {
            var i2 = t2[o2], a2 = r2[o2] = {};
            for (var s2 in i2) {
              var l2 = i2[+s2];
              if (l2 && 0 !== l2.bitmap.width && 0 !== l2.bitmap.height) {
                var u2 = { x: 0, y: 0, w: l2.bitmap.width + 2, h: l2.bitmap.height + 2 };
                n2.push(u2), a2[s2] = { rect: u2, metrics: l2.metrics };
              }
            }
          }
          var h2 = e.potpack(n2), c2 = h2.w, p2 = h2.h, f2 = new e.AlphaImage({ width: c2 || 1, height: p2 || 1 });
          for (var d2 in t2) {
            var g2 = t2[d2];
            for (var m2 in g2) {
              var v2 = g2[+m2];
              if (v2 && 0 !== v2.bitmap.width && 0 !== v2.bitmap.height) {
                var y2 = r2[d2][m2].rect;
                e.AlphaImage.copy(v2.bitmap, f2, { x: 0, y: 0 }, { x: y2.x + 1, y: y2.y + 1 }, v2.bitmap);
              }
            }
          }
          this.image = f2, this.positions = r2;
        };
        e.register("GlyphAtlas", T);
        var I = function(t2) {
          this.tileID = new e.OverscaledTileID(t2.tileID.overscaledZ, t2.tileID.wrap, t2.tileID.canonical.z, t2.tileID.canonical.x, t2.tileID.canonical.y), this.uid = t2.uid, this.zoom = t2.zoom, this.pixelRatio = t2.pixelRatio, this.tileSize = t2.tileSize, this.source = t2.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t2.showCollisionBoxes, this.collectResourceTiming = !!t2.collectResourceTiming, this.returnDependencies = !!t2.returnDependencies;
        };
        function k(t2, r2) {
          for (var n2 = new e.EvaluationParameters(r2), o2 = 0, i2 = t2; o2 < i2.length; o2 += 1) {
            i2[o2].recalculate(n2);
          }
        }
        I.prototype.parse = function(t2, r2, n2, o2) {
          var i2 = this;
          this.status = "parsing", this.data = t2, this.collisionBoxArray = new e.CollisionBoxArray();
          var a2 = new e.DictionaryCoder(Object.keys(t2.layers).sort()), s2 = new e.FeatureIndex(this.tileID);
          s2.bucketLayerIDs = [];
          var l2, u2, h2, c2, p2 = {}, f2 = { featureIndex: s2, iconDependencies: {}, patternDependencies: {}, glyphDependencies: {} }, d2 = r2.familiesBySource[this.source];
          for (var g2 in d2) {
            var m2 = t2.layers[g2];
            if (m2) {
              1 === m2.version && e.warnOnce('Vector tile source "' + this.source + '" layer "' + g2 + '" does not use vector tile spec v2 and therefore may have some rendering errors.');
              for (var v2 = a2.encode(g2), y2 = [], x2 = 0; x2 < m2.length; x2++) {
                var w2 = m2.feature(x2);
                y2.push({ feature: w2, index: x2, sourceLayerIndex: v2 });
              }
              for (var S2 = 0, _2 = d2[g2]; S2 < _2.length; S2 += 1) {
                var P2 = _2[S2], b2 = P2[0];
                if (!(b2.minzoom && this.zoom < Math.floor(b2.minzoom))) {
                  if (!(b2.maxzoom && this.zoom >= b2.maxzoom)) {
                    if ("none" !== b2.visibility)
                      k(P2, this.zoom), (p2[b2.id] = b2.createBucket({ index: s2.bucketLayerIDs.length, layers: P2, zoom: this.zoom, pixelRatio: this.pixelRatio, overscaling: this.overscaling, collisionBoxArray: this.collisionBoxArray, sourceLayerIndex: v2, sourceID: this.source })).populate(y2, f2), s2.bucketLayerIDs.push(P2.map(function(e2) {
                        return e2.id;
                      }));
                  }
                }
              }
            }
          }
          var I2 = e.mapObject(f2.glyphDependencies, function(e2) {
            return Object.keys(e2).map(Number);
          });
          Object.keys(I2).length ? n2.send("getGlyphs", { uid: this.uid, stacks: I2 }, function(e2, t3) {
            l2 || (l2 = e2, u2 = t3, E2.call(i2));
          }) : u2 = {};
          var z2 = Object.keys(f2.iconDependencies);
          z2.length ? n2.send("getImages", { icons: z2 }, function(e2, t3) {
            l2 || (l2 = e2, h2 = t3, E2.call(i2));
          }) : h2 = {};
          var C2 = Object.keys(f2.patternDependencies);
          function E2() {
            if (l2)
              return o2(l2);
            if (u2 && h2 && c2) {
              var t3 = new T(u2), r3 = new e.ImageAtlas(h2, c2);
              for (var n3 in p2) {
                var i3 = p2[n3];
                i3 instanceof e.SymbolBucket ? (k(i3.layers, this.zoom), M(i3, u2, t3.positions, h2, r3.iconPositions, this.showCollisionBoxes)) : i3.hasPattern && (i3 instanceof e.LineBucket || i3 instanceof e.FillBucket || i3 instanceof e.FillExtrusionBucket) && (k(i3.layers, this.zoom), i3.addFeatures(f2, r3.patternPositions));
              }
              this.status = "done", o2(null, { buckets: e.values(p2).filter(function(e2) {
                return !e2.isEmpty();
              }), featureIndex: s2, collisionBoxArray: this.collisionBoxArray, glyphAtlasImage: t3.image, imageAtlas: r3, glyphMap: this.returnDependencies ? u2 : null, iconMap: this.returnDependencies ? h2 : null, glyphPositions: this.returnDependencies ? t3.positions : null });
            }
          }
          C2.length ? n2.send("getImages", { icons: C2 }, function(e2, t3) {
            l2 || (l2 = e2, c2 = t3, E2.call(i2));
          }) : c2 = {}, E2.call(this);
        };
        var z = "undefined" != typeof performance, C = { getEntriesByName: function(e2) {
          return !!(z && performance && performance.getEntriesByName) && performance.getEntriesByName(e2);
        }, mark: function(e2) {
          return !!(z && performance && performance.mark) && performance.mark(e2);
        }, measure: function(e2, t2, r2) {
          return !!(z && performance && performance.measure) && performance.measure(e2, t2, r2);
        }, clearMarks: function(e2) {
          return !!(z && performance && performance.clearMarks) && performance.clearMarks(e2);
        }, clearMeasures: function(e2) {
          return !!(z && performance && performance.clearMeasures) && performance.clearMeasures(e2);
        } }, E = function(e2) {
          this._marks = { start: [e2.url, "start"].join("#"), end: [e2.url, "end"].join("#"), measure: e2.url.toString() }, C.mark(this._marks.start);
        };
        function A(t2, r2) {
          var n2 = e.getArrayBuffer(t2.request, function(t3, n3, o2, i2) {
            t3 ? r2(t3) : n3 && r2(null, { vectorTile: new e.mvt.VectorTile(new e.Protobuf(n3)), rawData: n3, cacheControl: o2, expires: i2 });
          });
          return function() {
            n2.cancel(), r2();
          };
        }
        E.prototype.finish = function() {
          C.mark(this._marks.end);
          var e2 = C.getEntriesByName(this._marks.measure);
          return 0 === e2.length && (C.measure(this._marks.measure, this._marks.start, this._marks.end), e2 = C.getEntriesByName(this._marks.measure), C.clearMarks(this._marks.start), C.clearMarks(this._marks.end), C.clearMeasures(this._marks.measure)), e2;
        }, C.Performance = E;
        var L = function(e2, t2, r2) {
          this.actor = e2, this.layerIndex = t2, this.loadVectorData = r2 || A, this.loading = {}, this.loaded = {};
        };
        L.prototype.loadTile = function(t2, r2) {
          var n2 = this, o2 = t2.uid;
          this.loading || (this.loading = {});
          var i2 = !!(t2 && t2.request && t2.request.collectResourceTiming) && new C.Performance(t2.request), a2 = this.loading[o2] = new I(t2);
          a2.abort = this.loadVectorData(t2, function(t3, s2) {
            if (delete n2.loading[o2], t3 || !s2)
              return a2.status = "done", n2.loaded[o2] = a2, r2(t3);
            var l2 = s2.rawData, u2 = {};
            s2.expires && (u2.expires = s2.expires), s2.cacheControl && (u2.cacheControl = s2.cacheControl);
            var h2 = {};
            if (i2) {
              var c2 = i2.finish();
              c2 && (h2.resourceTiming = JSON.parse(JSON.stringify(c2)));
            }
            a2.vectorTile = s2.vectorTile, a2.parse(s2.vectorTile, n2.layerIndex, n2.actor, function(t4, n3) {
              if (t4 || !n3)
                return r2(t4);
              r2(null, e.extend({ rawTileData: l2.slice(0) }, n3, u2, h2));
            }), n2.loaded = n2.loaded || {}, n2.loaded[o2] = a2;
          });
        }, L.prototype.reloadTile = function(e2, t2) {
          var r2 = this.loaded, n2 = e2.uid, o2 = this;
          if (r2 && r2[n2]) {
            var i2 = r2[n2];
            i2.showCollisionBoxes = e2.showCollisionBoxes;
            var a2 = function(e3, r3) {
              var n3 = i2.reloadCallback;
              n3 && (delete i2.reloadCallback, i2.parse(i2.vectorTile, o2.layerIndex, o2.actor, n3)), t2(e3, r3);
            };
            "parsing" === i2.status ? i2.reloadCallback = a2 : "done" === i2.status && (i2.vectorTile ? i2.parse(i2.vectorTile, this.layerIndex, this.actor, a2) : a2());
          }
        }, L.prototype.abortTile = function(e2, t2) {
          var r2 = this.loading, n2 = e2.uid;
          r2 && r2[n2] && r2[n2].abort && (r2[n2].abort(), delete r2[n2]), t2();
        }, L.prototype.removeTile = function(e2, t2) {
          var r2 = this.loaded, n2 = e2.uid;
          r2 && r2[n2] && delete r2[n2], t2();
        };
        var D = function() {
          this.loaded = {};
        };
        D.prototype.loadTile = function(t2, r2) {
          var n2 = t2.uid, o2 = t2.encoding, i2 = t2.rawImageData, a2 = new e.DEMData(n2, i2, o2);
          this.loaded = this.loaded || {}, this.loaded[n2] = a2, r2(null, a2);
        }, D.prototype.removeTile = function(e2) {
          var t2 = this.loaded, r2 = e2.uid;
          t2 && t2[r2] && delete t2[r2];
        };
        var O = { RADIUS: 6378137, FLATTENING: 1 / 298.257223563, POLAR_RADIUS: 63567523142e-4 };
        function N(e2) {
          var t2 = 0;
          if (e2 && e2.length > 0) {
            t2 += Math.abs(R(e2[0]));
            for (var r2 = 1; r2 < e2.length; r2++)
              t2 -= Math.abs(R(e2[r2]));
          }
          return t2;
        }
        function R(e2) {
          var t2, r2, n2, o2, i2, a2, s2 = 0, l2 = e2.length;
          if (l2 > 2) {
            for (a2 = 0; a2 < l2; a2++)
              a2 === l2 - 2 ? (n2 = l2 - 2, o2 = l2 - 1, i2 = 0) : a2 === l2 - 1 ? (n2 = l2 - 1, o2 = 0, i2 = 1) : (n2 = a2, o2 = a2 + 1, i2 = a2 + 2), t2 = e2[n2], r2 = e2[o2], s2 += (F(e2[i2][0]) - F(t2[0])) * Math.sin(F(r2[1]));
            s2 = s2 * O.RADIUS * O.RADIUS / 2;
          }
          return s2;
        }
        function F(e2) {
          return e2 * Math.PI / 180;
        }
        var B = { geometry: function e2(t2) {
          var r2, n2 = 0;
          switch (t2.type) {
            case "Polygon":
              return N(t2.coordinates);
            case "MultiPolygon":
              for (r2 = 0; r2 < t2.coordinates.length; r2++)
                n2 += N(t2.coordinates[r2]);
              return n2;
            case "Point":
            case "MultiPoint":
            case "LineString":
            case "MultiLineString":
              return 0;
            case "GeometryCollection":
              for (r2 = 0; r2 < t2.geometries.length; r2++)
                n2 += e2(t2.geometries[r2]);
              return n2;
          }
        }, ring: R }, Z = function e2(t2, r2) {
          switch (t2 && t2.type || null) {
            case "FeatureCollection":
              return t2.features = t2.features.map(j(e2, r2)), t2;
            case "GeometryCollection":
              return t2.geometries = t2.geometries.map(j(e2, r2)), t2;
            case "Feature":
              return t2.geometry = e2(t2.geometry, r2), t2;
            case "Polygon":
            case "MultiPolygon":
              return function(e3, t3) {
                "Polygon" === e3.type ? e3.coordinates = G(e3.coordinates, t3) : "MultiPolygon" === e3.type && (e3.coordinates = e3.coordinates.map(j(G, t3)));
                return e3;
              }(t2, r2);
            default:
              return t2;
          }
        };
        function j(e2, t2) {
          return function(r2) {
            return e2(r2, t2);
          };
        }
        function G(e2, t2) {
          t2 = !!t2, e2[0] = J(e2[0], t2);
          for (var r2 = 1; r2 < e2.length; r2++)
            e2[r2] = J(e2[r2], !t2);
          return e2;
        }
        function J(e2, t2) {
          return function(e3) {
            return B.ring(e3) >= 0;
          }(e2) === t2 ? e2 : e2.reverse();
        }
        var X = e.mvt.VectorTileFeature.prototype.toGeoJSON, V = function(t2) {
          this._feature = t2, this.extent = e.EXTENT, this.type = t2.type, this.properties = t2.tags, "id" in t2 && !isNaN(t2.id) && (this.id = parseInt(t2.id, 10));
        };
        V.prototype.loadGeometry = function() {
          if (1 === this._feature.type) {
            for (var t2 = [], r2 = 0, n2 = this._feature.geometry; r2 < n2.length; r2 += 1) {
              var o2 = n2[r2];
              t2.push([new e.Point(o2[0], o2[1])]);
            }
            return t2;
          }
          for (var i2 = [], a2 = 0, s2 = this._feature.geometry; a2 < s2.length; a2 += 1) {
            for (var l2 = [], u2 = 0, h2 = s2[a2]; u2 < h2.length; u2 += 1) {
              var c2 = h2[u2];
              l2.push(new e.Point(c2[0], c2[1]));
            }
            i2.push(l2);
          }
          return i2;
        }, V.prototype.toGeoJSON = function(e2, t2, r2) {
          return X.call(this, e2, t2, r2);
        };
        var W = function(t2) {
          this.layers = { _geojsonTileLayer: this }, this.name = "_geojsonTileLayer", this.extent = e.EXTENT, this.length = t2.length, this._features = t2;
        };
        W.prototype.feature = function(e2) {
          return new V(this._features[e2]);
        };
        var Y = e.vectorTile.VectorTileFeature, q = U;
        function U(e2, t2) {
          this.options = t2 || {}, this.features = e2, this.length = e2.length;
        }
        function K(e2, t2) {
          this.id = "number" == typeof e2.id ? e2.id : void 0, this.type = e2.type, this.rawGeometry = 1 === e2.type ? [e2.geometry] : e2.geometry, this.properties = e2.tags, this.extent = t2 || 4096;
        }
        U.prototype.feature = function(e2) {
          return new K(this.features[e2], this.options.extent);
        }, K.prototype.loadGeometry = function() {
          var t2 = this.rawGeometry;
          this.geometry = [];
          for (var r2 = 0; r2 < t2.length; r2++) {
            for (var n2 = t2[r2], o2 = [], i2 = 0; i2 < n2.length; i2++)
              o2.push(new e.Point$1(n2[i2][0], n2[i2][1]));
            this.geometry.push(o2);
          }
          return this.geometry;
        }, K.prototype.bbox = function() {
          this.geometry || this.loadGeometry();
          for (var e2 = this.geometry, t2 = 1 / 0, r2 = -1 / 0, n2 = 1 / 0, o2 = -1 / 0, i2 = 0; i2 < e2.length; i2++)
            for (var a2 = e2[i2], s2 = 0; s2 < a2.length; s2++) {
              var l2 = a2[s2];
              t2 = Math.min(t2, l2.x), r2 = Math.max(r2, l2.x), n2 = Math.min(n2, l2.y), o2 = Math.max(o2, l2.y);
            }
          return [t2, n2, r2, o2];
        }, K.prototype.toGeoJSON = Y.prototype.toGeoJSON;
        var H = te, Q = te, $ = function(e2, t2) {
          t2 = t2 || {};
          var r2 = {};
          for (var n2 in e2)
            r2[n2] = new q(e2[n2].features, t2), r2[n2].name = n2, r2[n2].version = t2.version, r2[n2].extent = t2.extent;
          return te({ layers: r2 });
        }, ee = q;
        function te(t2) {
          var r2 = new e.pbf();
          return function(e2, t3) {
            for (var r3 in e2.layers)
              t3.writeMessage(3, re, e2.layers[r3]);
          }(t2, r2), r2.finish();
        }
        function re(e2, t2) {
          var r2;
          t2.writeVarintField(15, e2.version || 1), t2.writeStringField(1, e2.name || ""), t2.writeVarintField(5, e2.extent || 4096);
          var n2 = { keys: [], values: [], keycache: {}, valuecache: {} };
          for (r2 = 0; r2 < e2.length; r2++)
            n2.feature = e2.feature(r2), t2.writeMessage(2, ne, n2);
          var o2 = n2.keys;
          for (r2 = 0; r2 < o2.length; r2++)
            t2.writeStringField(3, o2[r2]);
          var i2 = n2.values;
          for (r2 = 0; r2 < i2.length; r2++)
            t2.writeMessage(4, le, i2[r2]);
        }
        function ne(e2, t2) {
          var r2 = e2.feature;
          void 0 !== r2.id && t2.writeVarintField(1, r2.id), t2.writeMessage(2, oe, e2), t2.writeVarintField(3, r2.type), t2.writeMessage(4, se, r2);
        }
        function oe(e2, t2) {
          var r2 = e2.feature, n2 = e2.keys, o2 = e2.values, i2 = e2.keycache, a2 = e2.valuecache;
          for (var s2 in r2.properties) {
            var l2 = i2[s2];
            void 0 === l2 && (n2.push(s2), l2 = n2.length - 1, i2[s2] = l2), t2.writeVarint(l2);
            var u2 = r2.properties[s2], h2 = typeof u2;
            "string" !== h2 && "boolean" !== h2 && "number" !== h2 && (u2 = JSON.stringify(u2));
            var c2 = h2 + ":" + u2, p2 = a2[c2];
            void 0 === p2 && (o2.push(u2), p2 = o2.length - 1, a2[c2] = p2), t2.writeVarint(p2);
          }
        }
        function ie(e2, t2) {
          return (t2 << 3) + (7 & e2);
        }
        function ae(e2) {
          return e2 << 1 ^ e2 >> 31;
        }
        function se(e2, t2) {
          for (var r2 = e2.loadGeometry(), n2 = e2.type, o2 = 0, i2 = 0, a2 = r2.length, s2 = 0; s2 < a2; s2++) {
            var l2 = r2[s2], u2 = 1;
            1 === n2 && (u2 = l2.length), t2.writeVarint(ie(1, u2));
            for (var h2 = 3 === n2 ? l2.length - 1 : l2.length, c2 = 0; c2 < h2; c2++) {
              1 === c2 && 1 !== n2 && t2.writeVarint(ie(2, h2 - 1));
              var p2 = l2[c2].x - o2, f2 = l2[c2].y - i2;
              t2.writeVarint(ae(p2)), t2.writeVarint(ae(f2)), o2 += p2, i2 += f2;
            }
            3 === n2 && t2.writeVarint(ie(7, 1));
          }
        }
        function le(e2, t2) {
          var r2 = typeof e2;
          "string" === r2 ? t2.writeStringField(1, e2) : "boolean" === r2 ? t2.writeBooleanField(7, e2) : "number" === r2 && (e2 % 1 != 0 ? t2.writeDoubleField(3, e2) : e2 < 0 ? t2.writeSVarintField(6, e2) : t2.writeVarintField(5, e2));
        }
        function ue(e2, t2, r2, n2, o2, i2) {
          if (!(o2 - n2 <= r2)) {
            var a2 = n2 + o2 >> 1;
            !function e3(t3, r3, n3, o3, i3, a3) {
              for (; i3 > o3; ) {
                if (i3 - o3 > 600) {
                  var s2 = i3 - o3 + 1, l2 = n3 - o3 + 1, u2 = Math.log(s2), h2 = 0.5 * Math.exp(2 * u2 / 3), c2 = 0.5 * Math.sqrt(u2 * h2 * (s2 - h2) / s2) * (l2 - s2 / 2 < 0 ? -1 : 1), p2 = Math.max(o3, Math.floor(n3 - l2 * h2 / s2 + c2)), f2 = Math.min(i3, Math.floor(n3 + (s2 - l2) * h2 / s2 + c2));
                  e3(t3, r3, n3, p2, f2, a3);
                }
                var d2 = r3[2 * n3 + a3], g2 = o3, m2 = i3;
                for (he(t3, r3, o3, n3), r3[2 * i3 + a3] > d2 && he(t3, r3, o3, i3); g2 < m2; ) {
                  for (he(t3, r3, g2, m2), g2++, m2--; r3[2 * g2 + a3] < d2; )
                    g2++;
                  for (; r3[2 * m2 + a3] > d2; )
                    m2--;
                }
                r3[2 * o3 + a3] === d2 ? he(t3, r3, o3, m2) : he(t3, r3, ++m2, i3), m2 <= n3 && (o3 = m2 + 1), n3 <= m2 && (i3 = m2 - 1);
              }
            }(e2, t2, a2, n2, o2, i2 % 2), ue(e2, t2, r2, n2, a2 - 1, i2 + 1), ue(e2, t2, r2, a2 + 1, o2, i2 + 1);
          }
        }
        function he(e2, t2, r2, n2) {
          ce(e2, r2, n2), ce(t2, 2 * r2, 2 * n2), ce(t2, 2 * r2 + 1, 2 * n2 + 1);
        }
        function ce(e2, t2, r2) {
          var n2 = e2[t2];
          e2[t2] = e2[r2], e2[r2] = n2;
        }
        function pe(e2, t2, r2, n2) {
          var o2 = e2 - r2, i2 = t2 - n2;
          return o2 * o2 + i2 * i2;
        }
        H.fromVectorTileJs = Q, H.fromGeojsonVt = $, H.GeoJSONWrapper = ee;
        var fe = function(e2) {
          return e2[0];
        }, de = function(e2) {
          return e2[1];
        }, ge = function(e2, t2, r2, n2, o2) {
          void 0 === t2 && (t2 = fe), void 0 === r2 && (r2 = de), void 0 === n2 && (n2 = 64), void 0 === o2 && (o2 = Float64Array), this.nodeSize = n2, this.points = e2;
          for (var i2 = e2.length < 65536 ? Uint16Array : Uint32Array, a2 = this.ids = new i2(e2.length), s2 = this.coords = new o2(2 * e2.length), l2 = 0; l2 < e2.length; l2++)
            a2[l2] = l2, s2[2 * l2] = t2(e2[l2]), s2[2 * l2 + 1] = r2(e2[l2]);
          ue(a2, s2, n2, 0, a2.length - 1, 0);
        };
        ge.prototype.range = function(e2, t2, r2, n2) {
          return function(e3, t3, r3, n3, o2, i2, a2) {
            for (var s2, l2, u2 = [0, e3.length - 1, 0], h2 = []; u2.length; ) {
              var c2 = u2.pop(), p2 = u2.pop(), f2 = u2.pop();
              if (p2 - f2 <= a2)
                for (var d2 = f2; d2 <= p2; d2++)
                  s2 = t3[2 * d2], l2 = t3[2 * d2 + 1], s2 >= r3 && s2 <= o2 && l2 >= n3 && l2 <= i2 && h2.push(e3[d2]);
              else {
                var g2 = Math.floor((f2 + p2) / 2);
                s2 = t3[2 * g2], l2 = t3[2 * g2 + 1], s2 >= r3 && s2 <= o2 && l2 >= n3 && l2 <= i2 && h2.push(e3[g2]);
                var m2 = (c2 + 1) % 2;
                (0 === c2 ? r3 <= s2 : n3 <= l2) && (u2.push(f2), u2.push(g2 - 1), u2.push(m2)), (0 === c2 ? o2 >= s2 : i2 >= l2) && (u2.push(g2 + 1), u2.push(p2), u2.push(m2));
              }
            }
            return h2;
          }(this.ids, this.coords, e2, t2, r2, n2, this.nodeSize);
        }, ge.prototype.within = function(e2, t2, r2) {
          return function(e3, t3, r3, n2, o2, i2) {
            for (var a2 = [0, e3.length - 1, 0], s2 = [], l2 = o2 * o2; a2.length; ) {
              var u2 = a2.pop(), h2 = a2.pop(), c2 = a2.pop();
              if (h2 - c2 <= i2)
                for (var p2 = c2; p2 <= h2; p2++)
                  pe(t3[2 * p2], t3[2 * p2 + 1], r3, n2) <= l2 && s2.push(e3[p2]);
              else {
                var f2 = Math.floor((c2 + h2) / 2), d2 = t3[2 * f2], g2 = t3[2 * f2 + 1];
                pe(d2, g2, r3, n2) <= l2 && s2.push(e3[f2]);
                var m2 = (u2 + 1) % 2;
                (0 === u2 ? r3 - o2 <= d2 : n2 - o2 <= g2) && (a2.push(c2), a2.push(f2 - 1), a2.push(m2)), (0 === u2 ? r3 + o2 >= d2 : n2 + o2 >= g2) && (a2.push(f2 + 1), a2.push(h2), a2.push(m2));
              }
            }
            return s2;
          }(this.ids, this.coords, e2, t2, r2, this.nodeSize);
        };
        var me = { minZoom: 0, maxZoom: 16, radius: 40, extent: 512, nodeSize: 64, log: false, reduce: null, map: function(e2) {
          return e2;
        } }, ve = function(e2) {
          this.options = Pe(Object.create(me), e2), this.trees = new Array(this.options.maxZoom + 1);
        };
        function ye(e2, t2, r2, n2, o2) {
          return { x: e2, y: t2, zoom: 1 / 0, id: r2, parentId: -1, numPoints: n2, properties: o2 };
        }
        function xe(e2, t2) {
          var r2 = e2.geometry.coordinates, n2 = r2[0], o2 = r2[1];
          return { x: Se(n2), y: _e(o2), zoom: 1 / 0, index: t2, parentId: -1 };
        }
        function we(e2) {
          return { type: "Feature", id: e2.id, properties: Me(e2), geometry: { type: "Point", coordinates: [(n2 = e2.x, 360 * (n2 - 0.5)), (t2 = e2.y, r2 = (180 - 360 * t2) * Math.PI / 180, 360 * Math.atan(Math.exp(r2)) / Math.PI - 90)] } };
          var t2, r2, n2;
        }
        function Me(e2) {
          var t2 = e2.numPoints, r2 = t2 >= 1e4 ? Math.round(t2 / 1e3) + "k" : t2 >= 1e3 ? Math.round(t2 / 100) / 10 + "k" : t2;
          return Pe(Pe({}, e2.properties), { cluster: true, cluster_id: e2.id, point_count: t2, point_count_abbreviated: r2 });
        }
        function Se(e2) {
          return e2 / 360 + 0.5;
        }
        function _e(e2) {
          var t2 = Math.sin(e2 * Math.PI / 180), r2 = 0.5 - 0.25 * Math.log((1 + t2) / (1 - t2)) / Math.PI;
          return r2 < 0 ? 0 : r2 > 1 ? 1 : r2;
        }
        function Pe(e2, t2) {
          for (var r2 in t2)
            e2[r2] = t2[r2];
          return e2;
        }
        function be(e2) {
          return e2.x;
        }
        function Te(e2) {
          return e2.y;
        }
        function Ie(e2, t2, r2, n2, o2, i2) {
          var a2 = o2 - r2, s2 = i2 - n2;
          if (0 !== a2 || 0 !== s2) {
            var l2 = ((e2 - r2) * a2 + (t2 - n2) * s2) / (a2 * a2 + s2 * s2);
            l2 > 1 ? (r2 = o2, n2 = i2) : l2 > 0 && (r2 += a2 * l2, n2 += s2 * l2);
          }
          return (a2 = e2 - r2) * a2 + (s2 = t2 - n2) * s2;
        }
        function ke(e2, t2, r2, n2) {
          var o2 = { id: void 0 === e2 ? null : e2, type: t2, geometry: r2, tags: n2, minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 };
          return function(e3) {
            var t3 = e3.geometry, r3 = e3.type;
            if ("Point" === r3 || "MultiPoint" === r3 || "LineString" === r3)
              ze(e3, t3);
            else if ("Polygon" === r3 || "MultiLineString" === r3)
              for (var n3 = 0; n3 < t3.length; n3++)
                ze(e3, t3[n3]);
            else if ("MultiPolygon" === r3)
              for (n3 = 0; n3 < t3.length; n3++)
                for (var o3 = 0; o3 < t3[n3].length; o3++)
                  ze(e3, t3[n3][o3]);
          }(o2), o2;
        }
        function ze(e2, t2) {
          for (var r2 = 0; r2 < t2.length; r2 += 3)
            e2.minX = Math.min(e2.minX, t2[r2]), e2.minY = Math.min(e2.minY, t2[r2 + 1]), e2.maxX = Math.max(e2.maxX, t2[r2]), e2.maxY = Math.max(e2.maxY, t2[r2 + 1]);
        }
        function Ce(e2, t2, r2, n2) {
          if (t2.geometry) {
            var o2 = t2.geometry.coordinates, i2 = t2.geometry.type, a2 = Math.pow(r2.tolerance / ((1 << r2.maxZoom) * r2.extent), 2), s2 = [], l2 = t2.id;
            if (r2.promoteId ? l2 = t2.properties[r2.promoteId] : r2.generateId && (l2 = n2 || 0), "Point" === i2)
              Ee(o2, s2);
            else if ("MultiPoint" === i2)
              for (var u2 = 0; u2 < o2.length; u2++)
                Ee(o2[u2], s2);
            else if ("LineString" === i2)
              Ae(o2, s2, a2, false);
            else if ("MultiLineString" === i2) {
              if (r2.lineMetrics) {
                for (u2 = 0; u2 < o2.length; u2++)
                  s2 = [], Ae(o2[u2], s2, a2, false), e2.push(ke(l2, "LineString", s2, t2.properties));
                return;
              }
              Le(o2, s2, a2, false);
            } else if ("Polygon" === i2)
              Le(o2, s2, a2, true);
            else {
              if ("MultiPolygon" !== i2) {
                if ("GeometryCollection" === i2) {
                  for (u2 = 0; u2 < t2.geometry.geometries.length; u2++)
                    Ce(e2, { id: l2, geometry: t2.geometry.geometries[u2], properties: t2.properties }, r2, n2);
                  return;
                }
                throw new Error("Input data is not a valid GeoJSON object.");
              }
              for (u2 = 0; u2 < o2.length; u2++) {
                var h2 = [];
                Le(o2[u2], h2, a2, true), s2.push(h2);
              }
            }
            e2.push(ke(l2, i2, s2, t2.properties));
          }
        }
        function Ee(e2, t2) {
          t2.push(De(e2[0])), t2.push(Oe(e2[1])), t2.push(0);
        }
        function Ae(e2, t2, r2, n2) {
          for (var o2, i2, a2 = 0, s2 = 0; s2 < e2.length; s2++) {
            var l2 = De(e2[s2][0]), u2 = Oe(e2[s2][1]);
            t2.push(l2), t2.push(u2), t2.push(0), s2 > 0 && (a2 += n2 ? (o2 * u2 - l2 * i2) / 2 : Math.sqrt(Math.pow(l2 - o2, 2) + Math.pow(u2 - i2, 2))), o2 = l2, i2 = u2;
          }
          var h2 = t2.length - 3;
          t2[2] = 1, function e3(t3, r3, n3, o3) {
            for (var i3, a3 = o3, s3 = n3 - r3 >> 1, l3 = n3 - r3, u3 = t3[r3], h3 = t3[r3 + 1], c2 = t3[n3], p2 = t3[n3 + 1], f2 = r3 + 3; f2 < n3; f2 += 3) {
              var d2 = Ie(t3[f2], t3[f2 + 1], u3, h3, c2, p2);
              if (d2 > a3)
                i3 = f2, a3 = d2;
              else if (d2 === a3) {
                var g2 = Math.abs(f2 - s3);
                g2 < l3 && (i3 = f2, l3 = g2);
              }
            }
            a3 > o3 && (i3 - r3 > 3 && e3(t3, r3, i3, o3), t3[i3 + 2] = a3, n3 - i3 > 3 && e3(t3, i3, n3, o3));
          }(t2, 0, h2, r2), t2[h2 + 2] = 1, t2.size = Math.abs(a2), t2.start = 0, t2.end = t2.size;
        }
        function Le(e2, t2, r2, n2) {
          for (var o2 = 0; o2 < e2.length; o2++) {
            var i2 = [];
            Ae(e2[o2], i2, r2, n2), t2.push(i2);
          }
        }
        function De(e2) {
          return e2 / 360 + 0.5;
        }
        function Oe(e2) {
          var t2 = Math.sin(e2 * Math.PI / 180), r2 = 0.5 - 0.25 * Math.log((1 + t2) / (1 - t2)) / Math.PI;
          return r2 < 0 ? 0 : r2 > 1 ? 1 : r2;
        }
        function Ne(e2, t2, r2, n2, o2, i2, a2, s2) {
          if (n2 /= t2, i2 >= (r2 /= t2) && a2 < n2)
            return e2;
          if (a2 < r2 || i2 >= n2)
            return null;
          for (var l2 = [], u2 = 0; u2 < e2.length; u2++) {
            var h2 = e2[u2], c2 = h2.geometry, p2 = h2.type, f2 = 0 === o2 ? h2.minX : h2.minY, d2 = 0 === o2 ? h2.maxX : h2.maxY;
            if (f2 >= r2 && d2 < n2)
              l2.push(h2);
            else if (!(d2 < r2 || f2 >= n2)) {
              var g2 = [];
              if ("Point" === p2 || "MultiPoint" === p2)
                Re(c2, g2, r2, n2, o2);
              else if ("LineString" === p2)
                Fe(c2, g2, r2, n2, o2, false, s2.lineMetrics);
              else if ("MultiLineString" === p2)
                Ze(c2, g2, r2, n2, o2, false);
              else if ("Polygon" === p2)
                Ze(c2, g2, r2, n2, o2, true);
              else if ("MultiPolygon" === p2)
                for (var m2 = 0; m2 < c2.length; m2++) {
                  var v2 = [];
                  Ze(c2[m2], v2, r2, n2, o2, true), v2.length && g2.push(v2);
                }
              if (g2.length) {
                if (s2.lineMetrics && "LineString" === p2) {
                  for (m2 = 0; m2 < g2.length; m2++)
                    l2.push(ke(h2.id, p2, g2[m2], h2.tags));
                  continue;
                }
                "LineString" !== p2 && "MultiLineString" !== p2 || (1 === g2.length ? (p2 = "LineString", g2 = g2[0]) : p2 = "MultiLineString"), "Point" !== p2 && "MultiPoint" !== p2 || (p2 = 3 === g2.length ? "Point" : "MultiPoint"), l2.push(ke(h2.id, p2, g2, h2.tags));
              }
            }
          }
          return l2.length ? l2 : null;
        }
        function Re(e2, t2, r2, n2, o2) {
          for (var i2 = 0; i2 < e2.length; i2 += 3) {
            var a2 = e2[i2 + o2];
            a2 >= r2 && a2 <= n2 && (t2.push(e2[i2]), t2.push(e2[i2 + 1]), t2.push(e2[i2 + 2]));
          }
        }
        function Fe(e2, t2, r2, n2, o2, i2, a2) {
          for (var s2, l2, u2 = Be(e2), h2 = 0 === o2 ? Ge : Je, c2 = e2.start, p2 = 0; p2 < e2.length - 3; p2 += 3) {
            var f2 = e2[p2], d2 = e2[p2 + 1], g2 = e2[p2 + 2], m2 = e2[p2 + 3], v2 = e2[p2 + 4], y2 = 0 === o2 ? f2 : d2, x2 = 0 === o2 ? m2 : v2, w2 = false;
            a2 && (s2 = Math.sqrt(Math.pow(f2 - m2, 2) + Math.pow(d2 - v2, 2))), y2 < r2 ? x2 > r2 && (l2 = h2(u2, f2, d2, m2, v2, r2), a2 && (u2.start = c2 + s2 * l2)) : y2 > n2 ? x2 < n2 && (l2 = h2(u2, f2, d2, m2, v2, n2), a2 && (u2.start = c2 + s2 * l2)) : je(u2, f2, d2, g2), x2 < r2 && y2 >= r2 && (l2 = h2(u2, f2, d2, m2, v2, r2), w2 = true), x2 > n2 && y2 <= n2 && (l2 = h2(u2, f2, d2, m2, v2, n2), w2 = true), !i2 && w2 && (a2 && (u2.end = c2 + s2 * l2), t2.push(u2), u2 = Be(e2)), a2 && (c2 += s2);
          }
          var M2 = e2.length - 3;
          f2 = e2[M2], d2 = e2[M2 + 1], g2 = e2[M2 + 2], (y2 = 0 === o2 ? f2 : d2) >= r2 && y2 <= n2 && je(u2, f2, d2, g2), M2 = u2.length - 3, i2 && M2 >= 3 && (u2[M2] !== u2[0] || u2[M2 + 1] !== u2[1]) && je(u2, u2[0], u2[1], u2[2]), u2.length && t2.push(u2);
        }
        function Be(e2) {
          var t2 = [];
          return t2.size = e2.size, t2.start = e2.start, t2.end = e2.end, t2;
        }
        function Ze(e2, t2, r2, n2, o2, i2) {
          for (var a2 = 0; a2 < e2.length; a2++)
            Fe(e2[a2], t2, r2, n2, o2, i2, false);
        }
        function je(e2, t2, r2, n2) {
          e2.push(t2), e2.push(r2), e2.push(n2);
        }
        function Ge(e2, t2, r2, n2, o2, i2) {
          var a2 = (i2 - t2) / (n2 - t2);
          return e2.push(i2), e2.push(r2 + (o2 - r2) * a2), e2.push(1), a2;
        }
        function Je(e2, t2, r2, n2, o2, i2) {
          var a2 = (i2 - r2) / (o2 - r2);
          return e2.push(t2 + (n2 - t2) * a2), e2.push(i2), e2.push(1), a2;
        }
        function Xe(e2, t2) {
          for (var r2 = [], n2 = 0; n2 < e2.length; n2++) {
            var o2, i2 = e2[n2], a2 = i2.type;
            if ("Point" === a2 || "MultiPoint" === a2 || "LineString" === a2)
              o2 = Ve(i2.geometry, t2);
            else if ("MultiLineString" === a2 || "Polygon" === a2) {
              o2 = [];
              for (var s2 = 0; s2 < i2.geometry.length; s2++)
                o2.push(Ve(i2.geometry[s2], t2));
            } else if ("MultiPolygon" === a2)
              for (o2 = [], s2 = 0; s2 < i2.geometry.length; s2++) {
                for (var l2 = [], u2 = 0; u2 < i2.geometry[s2].length; u2++)
                  l2.push(Ve(i2.geometry[s2][u2], t2));
                o2.push(l2);
              }
            r2.push(ke(i2.id, a2, o2, i2.tags));
          }
          return r2;
        }
        function Ve(e2, t2) {
          var r2 = [];
          r2.size = e2.size, void 0 !== e2.start && (r2.start = e2.start, r2.end = e2.end);
          for (var n2 = 0; n2 < e2.length; n2 += 3)
            r2.push(e2[n2] + t2, e2[n2 + 1], e2[n2 + 2]);
          return r2;
        }
        function We(e2, t2) {
          if (e2.transformed)
            return e2;
          var r2, n2, o2, i2 = 1 << e2.z, a2 = e2.x, s2 = e2.y;
          for (r2 = 0; r2 < e2.features.length; r2++) {
            var l2 = e2.features[r2], u2 = l2.geometry, h2 = l2.type;
            if (l2.geometry = [], 1 === h2)
              for (n2 = 0; n2 < u2.length; n2 += 2)
                l2.geometry.push(Ye(u2[n2], u2[n2 + 1], t2, i2, a2, s2));
            else
              for (n2 = 0; n2 < u2.length; n2++) {
                var c2 = [];
                for (o2 = 0; o2 < u2[n2].length; o2 += 2)
                  c2.push(Ye(u2[n2][o2], u2[n2][o2 + 1], t2, i2, a2, s2));
                l2.geometry.push(c2);
              }
          }
          return e2.transformed = true, e2;
        }
        function Ye(e2, t2, r2, n2, o2, i2) {
          return [Math.round(r2 * (e2 * n2 - o2)), Math.round(r2 * (t2 * n2 - i2))];
        }
        function qe(e2, t2, r2, n2, o2) {
          for (var i2 = t2 === o2.maxZoom ? 0 : o2.tolerance / ((1 << t2) * o2.extent), a2 = { features: [], numPoints: 0, numSimplified: 0, numFeatures: 0, source: null, x: r2, y: n2, z: t2, transformed: false, minX: 2, minY: 1, maxX: -1, maxY: 0 }, s2 = 0; s2 < e2.length; s2++) {
            a2.numFeatures++, Ue(a2, e2[s2], i2, o2);
            var l2 = e2[s2].minX, u2 = e2[s2].minY, h2 = e2[s2].maxX, c2 = e2[s2].maxY;
            l2 < a2.minX && (a2.minX = l2), u2 < a2.minY && (a2.minY = u2), h2 > a2.maxX && (a2.maxX = h2), c2 > a2.maxY && (a2.maxY = c2);
          }
          return a2;
        }
        function Ue(e2, t2, r2, n2) {
          var o2 = t2.geometry, i2 = t2.type, a2 = [];
          if ("Point" === i2 || "MultiPoint" === i2)
            for (var s2 = 0; s2 < o2.length; s2 += 3)
              a2.push(o2[s2]), a2.push(o2[s2 + 1]), e2.numPoints++, e2.numSimplified++;
          else if ("LineString" === i2)
            Ke(a2, o2, e2, r2, false, false);
          else if ("MultiLineString" === i2 || "Polygon" === i2)
            for (s2 = 0; s2 < o2.length; s2++)
              Ke(a2, o2[s2], e2, r2, "Polygon" === i2, 0 === s2);
          else if ("MultiPolygon" === i2)
            for (var l2 = 0; l2 < o2.length; l2++) {
              var u2 = o2[l2];
              for (s2 = 0; s2 < u2.length; s2++)
                Ke(a2, u2[s2], e2, r2, true, 0 === s2);
            }
          if (a2.length) {
            var h2 = t2.tags || null;
            if ("LineString" === i2 && n2.lineMetrics) {
              for (var c2 in h2 = {}, t2.tags)
                h2[c2] = t2.tags[c2];
              h2.mapbox_clip_start = o2.start / o2.size, h2.mapbox_clip_end = o2.end / o2.size;
            }
            var p2 = { geometry: a2, type: "Polygon" === i2 || "MultiPolygon" === i2 ? 3 : "LineString" === i2 || "MultiLineString" === i2 ? 2 : 1, tags: h2 };
            null !== t2.id && (p2.id = t2.id), e2.features.push(p2);
          }
        }
        function Ke(e2, t2, r2, n2, o2, i2) {
          var a2 = n2 * n2;
          if (n2 > 0 && t2.size < (o2 ? a2 : n2))
            r2.numPoints += t2.length / 3;
          else {
            for (var s2 = [], l2 = 0; l2 < t2.length; l2 += 3)
              (0 === n2 || t2[l2 + 2] > a2) && (r2.numSimplified++, s2.push(t2[l2]), s2.push(t2[l2 + 1])), r2.numPoints++;
            o2 && function(e3, t3) {
              for (var r3 = 0, n3 = 0, o3 = e3.length, i3 = o3 - 2; n3 < o3; i3 = n3, n3 += 2)
                r3 += (e3[n3] - e3[i3]) * (e3[n3 + 1] + e3[i3 + 1]);
              if (r3 > 0 === t3)
                for (n3 = 0, o3 = e3.length; n3 < o3 / 2; n3 += 2) {
                  var a3 = e3[n3], s3 = e3[n3 + 1];
                  e3[n3] = e3[o3 - 2 - n3], e3[n3 + 1] = e3[o3 - 1 - n3], e3[o3 - 2 - n3] = a3, e3[o3 - 1 - n3] = s3;
                }
            }(s2, i2), e2.push(s2);
          }
        }
        function He(e2, t2) {
          var r2 = (t2 = this.options = function(e3, t3) {
            for (var r3 in t3)
              e3[r3] = t3[r3];
            return e3;
          }(Object.create(this.options), t2)).debug;
          if (r2 && console.time("preprocess data"), t2.maxZoom < 0 || t2.maxZoom > 24)
            throw new Error("maxZoom should be in the 0-24 range");
          if (t2.promoteId && t2.generateId)
            throw new Error("promoteId and generateId cannot be used together.");
          var n2 = function(e3, t3) {
            var r3 = [];
            if ("FeatureCollection" === e3.type)
              for (var n3 = 0; n3 < e3.features.length; n3++)
                Ce(r3, e3.features[n3], t3, n3);
            else
              "Feature" === e3.type ? Ce(r3, e3, t3) : Ce(r3, { geometry: e3 }, t3);
            return r3;
          }(e2, t2);
          this.tiles = {}, this.tileCoords = [], r2 && (console.timeEnd("preprocess data"), console.log("index: maxZoom: %d, maxPoints: %d", t2.indexMaxZoom, t2.indexMaxPoints), console.time("generate tiles"), this.stats = {}, this.total = 0), (n2 = function(e3, t3) {
            var r3 = t3.buffer / t3.extent, n3 = e3, o2 = Ne(e3, 1, -1 - r3, r3, 0, -1, 2, t3), i2 = Ne(e3, 1, 1 - r3, 2 + r3, 0, -1, 2, t3);
            return (o2 || i2) && (n3 = Ne(e3, 1, -r3, 1 + r3, 0, -1, 2, t3) || [], o2 && (n3 = Xe(o2, 1).concat(n3)), i2 && (n3 = n3.concat(Xe(i2, -1)))), n3;
          }(n2, t2)).length && this.splitTile(n2, 0, 0, 0), r2 && (n2.length && console.log("features: %d, points: %d", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd("generate tiles"), console.log("tiles generated:", this.total, JSON.stringify(this.stats)));
        }
        function Qe(e2, t2, r2) {
          return 32 * ((1 << e2) * r2 + t2) + e2;
        }
        function $e(e2, t2) {
          var r2 = e2.tileID.canonical;
          if (!this._geoJSONIndex)
            return t2(null, null);
          var n2 = this._geoJSONIndex.getTile(r2.z, r2.x, r2.y);
          if (!n2)
            return t2(null, null);
          var o2 = new W(n2.features), i2 = H(o2);
          0 === i2.byteOffset && i2.byteLength === i2.buffer.byteLength || (i2 = new Uint8Array(i2)), t2(null, { vectorTile: o2, rawData: i2.buffer });
        }
        ve.prototype.load = function(e2) {
          var t2 = this.options, r2 = t2.log, n2 = t2.minZoom, o2 = t2.maxZoom, i2 = t2.nodeSize;
          r2 && console.time("total time");
          var a2 = "prepare " + e2.length + " points";
          r2 && console.time(a2), this.points = e2;
          for (var s2 = [], l2 = 0; l2 < e2.length; l2++)
            e2[l2].geometry && s2.push(xe(e2[l2], l2));
          this.trees[o2 + 1] = new ge(s2, be, Te, i2, Float32Array), r2 && console.timeEnd(a2);
          for (var u2 = o2; u2 >= n2; u2--) {
            var h2 = +Date.now();
            s2 = this._cluster(s2, u2), this.trees[u2] = new ge(s2, be, Te, i2, Float32Array), r2 && console.log("z%d: %d clusters in %dms", u2, s2.length, +Date.now() - h2);
          }
          return r2 && console.timeEnd("total time"), this;
        }, ve.prototype.getClusters = function(e2, t2) {
          var r2 = ((e2[0] + 180) % 360 + 360) % 360 - 180, n2 = Math.max(-90, Math.min(90, e2[1])), o2 = 180 === e2[2] ? 180 : ((e2[2] + 180) % 360 + 360) % 360 - 180, i2 = Math.max(-90, Math.min(90, e2[3]));
          if (e2[2] - e2[0] >= 360)
            r2 = -180, o2 = 180;
          else if (r2 > o2) {
            var a2 = this.getClusters([r2, n2, 180, i2], t2), s2 = this.getClusters([-180, n2, o2, i2], t2);
            return a2.concat(s2);
          }
          for (var l2 = this.trees[this._limitZoom(t2)], u2 = [], h2 = 0, c2 = l2.range(Se(r2), _e(i2), Se(o2), _e(n2)); h2 < c2.length; h2 += 1) {
            var p2 = c2[h2], f2 = l2.points[p2];
            u2.push(f2.numPoints ? we(f2) : this.points[f2.index]);
          }
          return u2;
        }, ve.prototype.getChildren = function(e2) {
          var t2 = e2 >> 5, r2 = e2 % 32, n2 = "No cluster with the specified id.", o2 = this.trees[r2];
          if (!o2)
            throw new Error(n2);
          var i2 = o2.points[t2];
          if (!i2)
            throw new Error(n2);
          for (var a2 = this.options.radius / (this.options.extent * Math.pow(2, r2 - 1)), s2 = [], l2 = 0, u2 = o2.within(i2.x, i2.y, a2); l2 < u2.length; l2 += 1) {
            var h2 = u2[l2], c2 = o2.points[h2];
            c2.parentId === e2 && s2.push(c2.numPoints ? we(c2) : this.points[c2.index]);
          }
          if (0 === s2.length)
            throw new Error(n2);
          return s2;
        }, ve.prototype.getLeaves = function(e2, t2, r2) {
          t2 = t2 || 10, r2 = r2 || 0;
          var n2 = [];
          return this._appendLeaves(n2, e2, t2, r2, 0), n2;
        }, ve.prototype.getTile = function(e2, t2, r2) {
          var n2 = this.trees[this._limitZoom(e2)], o2 = Math.pow(2, e2), i2 = this.options, a2 = i2.extent, s2 = i2.radius / a2, l2 = (r2 - s2) / o2, u2 = (r2 + 1 + s2) / o2, h2 = { features: [] };
          return this._addTileFeatures(n2.range((t2 - s2) / o2, l2, (t2 + 1 + s2) / o2, u2), n2.points, t2, r2, o2, h2), 0 === t2 && this._addTileFeatures(n2.range(1 - s2 / o2, l2, 1, u2), n2.points, o2, r2, o2, h2), t2 === o2 - 1 && this._addTileFeatures(n2.range(0, l2, s2 / o2, u2), n2.points, -1, r2, o2, h2), h2.features.length ? h2 : null;
        }, ve.prototype.getClusterExpansionZoom = function(e2) {
          for (var t2 = e2 % 32 - 1; t2 <= this.options.maxZoom; ) {
            var r2 = this.getChildren(e2);
            if (t2++, 1 !== r2.length)
              break;
            e2 = r2[0].properties.cluster_id;
          }
          return t2;
        }, ve.prototype._appendLeaves = function(e2, t2, r2, n2, o2) {
          for (var i2 = 0, a2 = this.getChildren(t2); i2 < a2.length; i2 += 1) {
            var s2 = a2[i2], l2 = s2.properties;
            if (l2 && l2.cluster ? o2 + l2.point_count <= n2 ? o2 += l2.point_count : o2 = this._appendLeaves(e2, l2.cluster_id, r2, n2, o2) : o2 < n2 ? o2++ : e2.push(s2), e2.length === r2)
              break;
          }
          return o2;
        }, ve.prototype._addTileFeatures = function(e2, t2, r2, n2, o2, i2) {
          for (var a2 = 0, s2 = e2; a2 < s2.length; a2 += 1) {
            var l2 = t2[s2[a2]], u2 = { type: 1, geometry: [[Math.round(this.options.extent * (l2.x * o2 - r2)), Math.round(this.options.extent * (l2.y * o2 - n2))]], tags: l2.numPoints ? Me(l2) : this.points[l2.index].properties }, h2 = l2.numPoints ? l2.id : this.points[l2.index].id;
            void 0 !== h2 && (u2.id = h2), i2.features.push(u2);
          }
        }, ve.prototype._limitZoom = function(e2) {
          return Math.max(this.options.minZoom, Math.min(e2, this.options.maxZoom + 1));
        }, ve.prototype._cluster = function(e2, t2) {
          for (var r2 = [], n2 = this.options, o2 = n2.radius, i2 = n2.extent, a2 = n2.reduce, s2 = o2 / (i2 * Math.pow(2, t2)), l2 = 0; l2 < e2.length; l2++) {
            var u2 = e2[l2];
            if (!(u2.zoom <= t2)) {
              u2.zoom = t2;
              for (var h2 = this.trees[t2 + 1], c2 = h2.within(u2.x, u2.y, s2), p2 = u2.numPoints || 1, f2 = u2.x * p2, d2 = u2.y * p2, g2 = a2 ? this._map(u2, true) : null, m2 = (l2 << 5) + (t2 + 1), v2 = 0, y2 = c2; v2 < y2.length; v2 += 1) {
                var x2 = y2[v2], w2 = h2.points[x2];
                if (!(w2.zoom <= t2)) {
                  w2.zoom = t2;
                  var M2 = w2.numPoints || 1;
                  f2 += w2.x * M2, d2 += w2.y * M2, p2 += M2, w2.parentId = m2, a2 && a2(g2, this._map(w2));
                }
              }
              1 === p2 ? r2.push(u2) : (u2.parentId = m2, r2.push(ye(f2 / p2, d2 / p2, m2, p2, g2)));
            }
          }
          return r2;
        }, ve.prototype._map = function(e2, t2) {
          if (e2.numPoints)
            return t2 ? Pe({}, e2.properties) : e2.properties;
          var r2 = this.points[e2.index].properties, n2 = this.options.map(r2);
          return t2 && n2 === r2 ? Pe({}, n2) : n2;
        }, He.prototype.options = { maxZoom: 14, indexMaxZoom: 5, indexMaxPoints: 1e5, tolerance: 3, extent: 4096, buffer: 64, lineMetrics: false, promoteId: null, generateId: false, debug: 0 }, He.prototype.splitTile = function(e2, t2, r2, n2, o2, i2, a2) {
          for (var s2 = [e2, t2, r2, n2], l2 = this.options, u2 = l2.debug; s2.length; ) {
            n2 = s2.pop(), r2 = s2.pop(), t2 = s2.pop(), e2 = s2.pop();
            var h2 = 1 << t2, c2 = Qe(t2, r2, n2), p2 = this.tiles[c2];
            if (!p2 && (u2 > 1 && console.time("creation"), p2 = this.tiles[c2] = qe(e2, t2, r2, n2, l2), this.tileCoords.push({ z: t2, x: r2, y: n2 }), u2)) {
              u2 > 1 && (console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)", t2, r2, n2, p2.numFeatures, p2.numPoints, p2.numSimplified), console.timeEnd("creation"));
              var f2 = "z" + t2;
              this.stats[f2] = (this.stats[f2] || 0) + 1, this.total++;
            }
            if (p2.source = e2, o2) {
              if (t2 === l2.maxZoom || t2 === o2)
                continue;
              var d2 = 1 << o2 - t2;
              if (r2 !== Math.floor(i2 / d2) || n2 !== Math.floor(a2 / d2))
                continue;
            } else if (t2 === l2.indexMaxZoom || p2.numPoints <= l2.indexMaxPoints)
              continue;
            if (p2.source = null, 0 !== e2.length) {
              u2 > 1 && console.time("clipping");
              var g2, m2, v2, y2, x2, w2, M2 = 0.5 * l2.buffer / l2.extent, S2 = 0.5 - M2, _2 = 0.5 + M2, P2 = 1 + M2;
              g2 = m2 = v2 = y2 = null, x2 = Ne(e2, h2, r2 - M2, r2 + _2, 0, p2.minX, p2.maxX, l2), w2 = Ne(e2, h2, r2 + S2, r2 + P2, 0, p2.minX, p2.maxX, l2), e2 = null, x2 && (g2 = Ne(x2, h2, n2 - M2, n2 + _2, 1, p2.minY, p2.maxY, l2), m2 = Ne(x2, h2, n2 + S2, n2 + P2, 1, p2.minY, p2.maxY, l2), x2 = null), w2 && (v2 = Ne(w2, h2, n2 - M2, n2 + _2, 1, p2.minY, p2.maxY, l2), y2 = Ne(w2, h2, n2 + S2, n2 + P2, 1, p2.minY, p2.maxY, l2), w2 = null), u2 > 1 && console.timeEnd("clipping"), s2.push(g2 || [], t2 + 1, 2 * r2, 2 * n2), s2.push(m2 || [], t2 + 1, 2 * r2, 2 * n2 + 1), s2.push(v2 || [], t2 + 1, 2 * r2 + 1, 2 * n2), s2.push(y2 || [], t2 + 1, 2 * r2 + 1, 2 * n2 + 1);
            }
          }
        }, He.prototype.getTile = function(e2, t2, r2) {
          var n2 = this.options, o2 = n2.extent, i2 = n2.debug;
          if (e2 < 0 || e2 > 24)
            return null;
          var a2 = 1 << e2, s2 = Qe(e2, t2 = (t2 % a2 + a2) % a2, r2);
          if (this.tiles[s2])
            return We(this.tiles[s2], o2);
          i2 > 1 && console.log("drilling down to z%d-%d-%d", e2, t2, r2);
          for (var l2, u2 = e2, h2 = t2, c2 = r2; !l2 && u2 > 0; )
            u2--, h2 = Math.floor(h2 / 2), c2 = Math.floor(c2 / 2), l2 = this.tiles[Qe(u2, h2, c2)];
          return l2 && l2.source ? (i2 > 1 && console.log("found parent tile z%d-%d-%d", u2, h2, c2), i2 > 1 && console.time("drilling down"), this.splitTile(l2.source, u2, h2, c2, e2, t2, r2), i2 > 1 && console.timeEnd("drilling down"), this.tiles[s2] ? We(this.tiles[s2], o2) : null) : null;
        };
        var et = function(t2) {
          function r2(e2, r3, n2) {
            t2.call(this, e2, r3, $e), n2 && (this.loadGeoJSON = n2);
          }
          return t2 && (r2.__proto__ = t2), r2.prototype = Object.create(t2 && t2.prototype), r2.prototype.constructor = r2, r2.prototype.loadData = function(e2, t3) {
            this._pendingCallback && this._pendingCallback(null, { abandoned: true }), this._pendingCallback = t3, this._pendingLoadDataParams = e2, this._state && "Idle" !== this._state ? this._state = "NeedsLoadData" : (this._state = "Coalescing", this._loadData());
          }, r2.prototype._loadData = function() {
            var t3 = this;
            if (this._pendingCallback && this._pendingLoadDataParams) {
              var r3 = this._pendingCallback, n2 = this._pendingLoadDataParams;
              delete this._pendingCallback, delete this._pendingLoadDataParams;
              var o2 = !!(n2 && n2.request && n2.request.collectResourceTiming) && new C.Performance(n2.request);
              this.loadGeoJSON(n2, function(i2, a2) {
                if (i2 || !a2)
                  return r3(i2);
                if ("object" != typeof a2)
                  return r3(new Error("Input data is not a valid GeoJSON object."));
                Z(a2, true);
                try {
                  t3._geoJSONIndex = n2.cluster ? new ve(function(t4) {
                    var r4 = t4.superclusterOptions, n3 = t4.clusterProperties;
                    if (!n3 || !r4)
                      return r4;
                    for (var o3 = {}, i3 = {}, a3 = { accumulated: null, zoom: 0 }, s3 = { properties: null }, l3 = Object.keys(n3), u2 = 0, h2 = l3; u2 < h2.length; u2 += 1) {
                      var c2 = h2[u2], p2 = n3[c2], f2 = p2[0], d2 = p2[1], g2 = e.createExpression(d2), m2 = e.createExpression("string" == typeof f2 ? [f2, ["accumulated"], ["get", c2]] : f2);
                      o3[c2] = g2.value, i3[c2] = m2.value;
                    }
                    return r4.map = function(e2) {
                      s3.properties = e2;
                      for (var t5 = {}, r5 = 0, n4 = l3; r5 < n4.length; r5 += 1) {
                        var i4 = n4[r5];
                        t5[i4] = o3[i4].evaluate(a3, s3);
                      }
                      return t5;
                    }, r4.reduce = function(e2, t5) {
                      s3.properties = t5;
                      for (var r5 = 0, n4 = l3; r5 < n4.length; r5 += 1) {
                        var o4 = n4[r5];
                        a3.accumulated = e2[o4], e2[o4] = i3[o4].evaluate(a3, s3);
                      }
                    }, r4;
                  }(n2)).load(a2.features) : function(e2, t4) {
                    return new He(e2, t4);
                  }(a2, n2.geojsonVtOptions);
                } catch (i3) {
                  return r3(i3);
                }
                t3.loaded = {};
                var s2 = {};
                if (o2) {
                  var l2 = o2.finish();
                  l2 && (s2.resourceTiming = {}, s2.resourceTiming[n2.source] = JSON.parse(JSON.stringify(l2)));
                }
                r3(null, s2);
              });
            }
          }, r2.prototype.coalesce = function() {
            "Coalescing" === this._state ? this._state = "Idle" : "NeedsLoadData" === this._state && (this._state = "Coalescing", this._loadData());
          }, r2.prototype.reloadTile = function(e2, r3) {
            var n2 = this.loaded, o2 = e2.uid;
            return n2 && n2[o2] ? t2.prototype.reloadTile.call(this, e2, r3) : this.loadTile(e2, r3);
          }, r2.prototype.loadGeoJSON = function(t3, r3) {
            if (t3.request)
              e.getJSON(t3.request, r3);
            else {
              if ("string" != typeof t3.data)
                return r3(new Error("Input data is not a valid GeoJSON object."));
              try {
                return r3(null, JSON.parse(t3.data));
              } catch (e2) {
                return r3(new Error("Input data is not a valid GeoJSON object."));
              }
            }
          }, r2.prototype.removeSource = function(e2, t3) {
            this._pendingCallback && this._pendingCallback(null, { abandoned: true }), t3();
          }, r2.prototype.getClusterExpansionZoom = function(e2, t3) {
            t3(null, this._geoJSONIndex.getClusterExpansionZoom(e2.clusterId));
          }, r2.prototype.getClusterChildren = function(e2, t3) {
            t3(null, this._geoJSONIndex.getChildren(e2.clusterId));
          }, r2.prototype.getClusterLeaves = function(e2, t3) {
            t3(null, this._geoJSONIndex.getLeaves(e2.clusterId, e2.limit, e2.offset));
          }, r2;
        }(L);
        var tt = function(t2) {
          var r2 = this;
          this.self = t2, this.actor = new e.Actor(t2, this), this.layerIndexes = {}, this.workerSourceTypes = { vector: L, geojson: et }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function(e2, t3) {
            if (r2.workerSourceTypes[e2])
              throw new Error('Worker source with name "' + e2 + '" already registered.');
            r2.workerSourceTypes[e2] = t3;
          }, this.self.registerRTLTextPlugin = function(t3) {
            if (e.plugin.isLoaded())
              throw new Error("RTL text plugin already registered.");
            e.plugin.applyArabicShaping = t3.applyArabicShaping, e.plugin.processBidirectionalText = t3.processBidirectionalText, e.plugin.processStyledBidirectionalText = t3.processStyledBidirectionalText;
          };
        };
        return tt.prototype.setReferrer = function(e2, t2) {
          this.referrer = t2;
        }, tt.prototype.setLayers = function(e2, t2, r2) {
          this.getLayerIndex(e2).replace(t2), r2();
        }, tt.prototype.updateLayers = function(e2, t2, r2) {
          this.getLayerIndex(e2).update(t2.layers, t2.removedIds), r2();
        }, tt.prototype.loadTile = function(e2, t2, r2) {
          this.getWorkerSource(e2, t2.type, t2.source).loadTile(t2, r2);
        }, tt.prototype.loadDEMTile = function(e2, t2, r2) {
          this.getDEMWorkerSource(e2, t2.source).loadTile(t2, r2);
        }, tt.prototype.reloadTile = function(e2, t2, r2) {
          this.getWorkerSource(e2, t2.type, t2.source).reloadTile(t2, r2);
        }, tt.prototype.abortTile = function(e2, t2, r2) {
          this.getWorkerSource(e2, t2.type, t2.source).abortTile(t2, r2);
        }, tt.prototype.removeTile = function(e2, t2, r2) {
          this.getWorkerSource(e2, t2.type, t2.source).removeTile(t2, r2);
        }, tt.prototype.removeDEMTile = function(e2, t2) {
          this.getDEMWorkerSource(e2, t2.source).removeTile(t2);
        }, tt.prototype.removeSource = function(e2, t2, r2) {
          if (this.workerSources[e2] && this.workerSources[e2][t2.type] && this.workerSources[e2][t2.type][t2.source]) {
            var n2 = this.workerSources[e2][t2.type][t2.source];
            delete this.workerSources[e2][t2.type][t2.source], void 0 !== n2.removeSource ? n2.removeSource(t2, r2) : r2();
          }
        }, tt.prototype.loadWorkerSource = function(e2, t2, r2) {
          try {
            this.self.importScripts(t2.url), r2();
          } catch (e3) {
            r2(e3.toString());
          }
        }, tt.prototype.loadRTLTextPlugin = function(t2, r2, n2) {
          try {
            e.plugin.isLoaded() || (this.self.importScripts(r2), n2(e.plugin.isLoaded() ? null : new Error("RTL Text Plugin failed to import scripts from " + r2)));
          } catch (e2) {
            n2(e2.toString());
          }
        }, tt.prototype.getLayerIndex = function(e2) {
          var t2 = this.layerIndexes[e2];
          return t2 || (t2 = this.layerIndexes[e2] = new n()), t2;
        }, tt.prototype.getWorkerSource = function(e2, t2, r2) {
          var n2 = this;
          if (this.workerSources[e2] || (this.workerSources[e2] = {}), this.workerSources[e2][t2] || (this.workerSources[e2][t2] = {}), !this.workerSources[e2][t2][r2]) {
            var o2 = { send: function(t3, r3, o3) {
              n2.actor.send(t3, r3, o3, e2);
            } };
            this.workerSources[e2][t2][r2] = new this.workerSourceTypes[t2](o2, this.getLayerIndex(e2));
          }
          return this.workerSources[e2][t2][r2];
        }, tt.prototype.getDEMWorkerSource = function(e2, t2) {
          return this.demWorkerSources[e2] || (this.demWorkerSources[e2] = {}), this.demWorkerSources[e2][t2] || (this.demWorkerSources[e2][t2] = new D()), this.demWorkerSources[e2][t2];
        }, "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope && (self.worker = new tt(self)), tt;
      });
      define2(["./shared.js"], function(t) {
        "use strict";
        var e = t.createCommonjsModule(function(t2) {
          function e2(t3) {
            return !!("undefined" != typeof window && "undefined" != typeof document && Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray && Function.prototype && Function.prototype.bind && Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions && "JSON" in window && "parse" in JSON && "stringify" in JSON && function() {
              if (!("Worker" in window && "Blob" in window && "URL" in window))
                return false;
              var t4, e3, i3 = new Blob([""], { type: "text/javascript" }), o2 = URL.createObjectURL(i3);
              try {
                e3 = new Worker(o2), t4 = true;
              } catch (e4) {
                t4 = false;
              }
              e3 && e3.terminate();
              return URL.revokeObjectURL(o2), t4;
            }() && "Uint8ClampedArray" in window && ArrayBuffer.isView && function(t4) {
              void 0 === i2[t4] && (i2[t4] = function(t5) {
                var i3 = document.createElement("canvas"), o2 = Object.create(e2.webGLContextAttributes);
                return o2.failIfMajorPerformanceCaveat = t5, i3.probablySupportsContext ? i3.probablySupportsContext("webgl", o2) || i3.probablySupportsContext("experimental-webgl", o2) : i3.supportsContext ? i3.supportsContext("webgl", o2) || i3.supportsContext("experimental-webgl", o2) : i3.getContext("webgl", o2) || i3.getContext("experimental-webgl", o2);
              }(t4));
              return i2[t4];
            }(t3 && t3.failIfMajorPerformanceCaveat));
          }
          t2.exports ? t2.exports = e2 : window && (window.mapboxgl = window.mapboxgl || {}, window.mapboxgl.supported = e2);
          var i2 = {};
          e2.webGLContextAttributes = { antialias: false, alpha: true, stencil: true, depth: true };
        }), i = { create: function(e2, i2, o2) {
          var r2 = t.window.document.createElement(e2);
          return i2 && (r2.className = i2), o2 && o2.appendChild(r2), r2;
        }, createNS: function(e2, i2) {
          return t.window.document.createElementNS(e2, i2);
        } }, o = t.window.document ? t.window.document.documentElement.style : null;
        function r(t2) {
          if (!o)
            return null;
          for (var e2 = 0; e2 < t2.length; e2++)
            if (t2[e2] in o)
              return t2[e2];
          return t2[0];
        }
        var a, n = r(["userSelect", "MozUserSelect", "WebkitUserSelect", "msUserSelect"]);
        i.disableDrag = function() {
          o && n && (a = o[n], o[n] = "none");
        }, i.enableDrag = function() {
          o && n && (o[n] = a);
        };
        var s = r(["transform", "WebkitTransform"]);
        i.setTransform = function(t2, e2) {
          t2.style[s] = e2;
        };
        var l = false;
        try {
          var c = Object.defineProperty({}, "passive", { get: function() {
            l = true;
          } });
          t.window.addEventListener("test", c, c), t.window.removeEventListener("test", c, c);
        } catch (t2) {
          l = false;
        }
        i.addEventListener = function(t2, e2, i2, o2) {
          void 0 === o2 && (o2 = {}), "passive" in o2 && l ? t2.addEventListener(e2, i2, o2) : t2.addEventListener(e2, i2, o2.capture);
        }, i.removeEventListener = function(t2, e2, i2, o2) {
          void 0 === o2 && (o2 = {}), "passive" in o2 && l ? t2.removeEventListener(e2, i2, o2) : t2.removeEventListener(e2, i2, o2.capture);
        };
        var u = function(e2) {
          e2.preventDefault(), e2.stopPropagation(), t.window.removeEventListener("click", u, true);
        };
        i.suppressClick = function() {
          t.window.addEventListener("click", u, true), t.window.setTimeout(function() {
            t.window.removeEventListener("click", u, true);
          }, 0);
        }, i.mousePos = function(e2, i2) {
          var o2 = e2.getBoundingClientRect();
          return i2 = i2.touches ? i2.touches[0] : i2, new t.Point(i2.clientX - o2.left - e2.clientLeft, i2.clientY - o2.top - e2.clientTop);
        }, i.touchPos = function(e2, i2) {
          for (var o2 = e2.getBoundingClientRect(), r2 = [], a2 = "touchend" === i2.type ? i2.changedTouches : i2.touches, n2 = 0; n2 < a2.length; n2++)
            r2.push(new t.Point(a2[n2].clientX - o2.left - e2.clientLeft, a2[n2].clientY - o2.top - e2.clientTop));
          return r2;
        }, i.mouseButton = function(e2) {
          return void 0 !== t.window.InstallTrigger && 2 === e2.button && e2.ctrlKey && t.window.navigator.platform.toUpperCase().indexOf("MAC") >= 0 ? 0 : e2.button;
        }, i.remove = function(t2) {
          t2.parentNode && t2.parentNode.removeChild(t2);
        };
        var h = function() {
          this.images = {}, this.loaded = false, this.requestors = [], this.patterns = {}, this.atlasImage = new t.RGBAImage({ width: 1, height: 1 }), this.dirty = true;
        };
        h.prototype.isLoaded = function() {
          return this.loaded;
        }, h.prototype.setLoaded = function(t2) {
          if (this.loaded !== t2 && (this.loaded = t2, t2)) {
            for (var e2 = 0, i2 = this.requestors; e2 < i2.length; e2 += 1) {
              var o2 = i2[e2], r2 = o2.ids, a2 = o2.callback;
              this._notify(r2, a2);
            }
            this.requestors = [];
          }
        }, h.prototype.getImage = function(t2) {
          return this.images[t2];
        }, h.prototype.addImage = function(t2, e2) {
          this.images[t2] = e2;
        }, h.prototype.removeImage = function(t2) {
          delete this.images[t2], delete this.patterns[t2];
        }, h.prototype.listImages = function() {
          return Object.keys(this.images);
        }, h.prototype.getImages = function(t2, e2) {
          var i2 = true;
          if (!this.isLoaded())
            for (var o2 = 0, r2 = t2; o2 < r2.length; o2 += 1) {
              var a2 = r2[o2];
              this.images[a2] || (i2 = false);
            }
          this.isLoaded() || i2 ? this._notify(t2, e2) : this.requestors.push({ ids: t2, callback: e2 });
        }, h.prototype._notify = function(t2, e2) {
          for (var i2 = {}, o2 = 0, r2 = t2; o2 < r2.length; o2 += 1) {
            var a2 = r2[o2], n2 = this.images[a2];
            n2 && (i2[a2] = { data: n2.data.clone(), pixelRatio: n2.pixelRatio, sdf: n2.sdf });
          }
          e2(null, i2);
        }, h.prototype.getPixelSize = function() {
          var t2 = this.atlasImage;
          return { width: t2.width, height: t2.height };
        }, h.prototype.getPattern = function(e2) {
          var i2 = this.patterns[e2];
          if (i2)
            return i2.position;
          var o2 = this.getImage(e2);
          if (!o2)
            return null;
          var r2 = { w: o2.data.width + 2, h: o2.data.height + 2, x: 0, y: 0 }, a2 = new t.ImagePosition(r2, o2);
          return this.patterns[e2] = { bin: r2, position: a2 }, this._updatePatternAtlas(), a2;
        }, h.prototype.bind = function(e2) {
          var i2 = e2.gl;
          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = false) : this.atlasTexture = new t.Texture(e2, this.atlasImage, i2.RGBA), this.atlasTexture.bind(i2.LINEAR, i2.CLAMP_TO_EDGE);
        }, h.prototype._updatePatternAtlas = function() {
          var e2 = [];
          for (var i2 in this.patterns)
            e2.push(this.patterns[i2].bin);
          var o2 = t.potpack(e2), r2 = o2.w, a2 = o2.h, n2 = this.atlasImage;
          for (var s2 in n2.resize({ width: r2 || 1, height: a2 || 1 }), this.patterns) {
            var l2 = this.patterns[s2].bin, c2 = l2.x + 1, u2 = l2.y + 1, h2 = this.images[s2].data, p2 = h2.width, d2 = h2.height;
            t.RGBAImage.copy(h2, n2, { x: 0, y: 0 }, { x: c2, y: u2 }, { width: p2, height: d2 }), t.RGBAImage.copy(h2, n2, { x: 0, y: d2 - 1 }, { x: c2, y: u2 - 1 }, { width: p2, height: 1 }), t.RGBAImage.copy(h2, n2, { x: 0, y: 0 }, { x: c2, y: u2 + d2 }, { width: p2, height: 1 }), t.RGBAImage.copy(h2, n2, { x: p2 - 1, y: 0 }, { x: c2 - 1, y: u2 }, { width: 1, height: d2 }), t.RGBAImage.copy(h2, n2, { x: 0, y: 0 }, { x: c2 + p2, y: u2 }, { width: 1, height: d2 });
          }
          this.dirty = true;
        };
        var p = _, d = 1e20;
        function _(t2, e2, i2, o2, r2, a2) {
          this.fontSize = t2 || 24, this.buffer = void 0 === e2 ? 3 : e2, this.cutoff = o2 || 0.25, this.fontFamily = r2 || "sans-serif", this.fontWeight = a2 || "normal", this.radius = i2 || 8;
          var n2 = this.size = this.fontSize + 2 * this.buffer;
          this.canvas = document.createElement("canvas"), this.canvas.width = this.canvas.height = n2, this.ctx = this.canvas.getContext("2d"), this.ctx.font = this.fontWeight + " " + this.fontSize + "px " + this.fontFamily, this.ctx.textBaseline = "middle", this.ctx.fillStyle = "black", this.gridOuter = new Float64Array(n2 * n2), this.gridInner = new Float64Array(n2 * n2), this.f = new Float64Array(n2), this.d = new Float64Array(n2), this.z = new Float64Array(n2 + 1), this.v = new Int16Array(n2), this.middle = Math.round(n2 / 2 * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1));
        }
        function f(t2, e2, i2, o2, r2, a2, n2) {
          for (var s2 = 0; s2 < e2; s2++) {
            for (var l2 = 0; l2 < i2; l2++)
              o2[l2] = t2[l2 * e2 + s2];
            for (m(o2, r2, a2, n2, i2), l2 = 0; l2 < i2; l2++)
              t2[l2 * e2 + s2] = r2[l2];
          }
          for (l2 = 0; l2 < i2; l2++) {
            for (s2 = 0; s2 < e2; s2++)
              o2[s2] = t2[l2 * e2 + s2];
            for (m(o2, r2, a2, n2, e2), s2 = 0; s2 < e2; s2++)
              t2[l2 * e2 + s2] = Math.sqrt(r2[s2]);
          }
        }
        function m(t2, e2, i2, o2, r2) {
          i2[0] = 0, o2[0] = -d, o2[1] = +d;
          for (var a2 = 1, n2 = 0; a2 < r2; a2++) {
            for (var s2 = (t2[a2] + a2 * a2 - (t2[i2[n2]] + i2[n2] * i2[n2])) / (2 * a2 - 2 * i2[n2]); s2 <= o2[n2]; )
              n2--, s2 = (t2[a2] + a2 * a2 - (t2[i2[n2]] + i2[n2] * i2[n2])) / (2 * a2 - 2 * i2[n2]);
            i2[++n2] = a2, o2[n2] = s2, o2[n2 + 1] = +d;
          }
          for (a2 = 0, n2 = 0; a2 < r2; a2++) {
            for (; o2[n2 + 1] < a2; )
              n2++;
            e2[a2] = (a2 - i2[n2]) * (a2 - i2[n2]) + t2[i2[n2]];
          }
        }
        _.prototype.draw = function(t2) {
          this.ctx.clearRect(0, 0, this.size, this.size), this.ctx.fillText(t2, this.buffer, this.middle);
          for (var e2 = this.ctx.getImageData(0, 0, this.size, this.size), i2 = new Uint8ClampedArray(this.size * this.size), o2 = 0; o2 < this.size * this.size; o2++) {
            var r2 = e2.data[4 * o2 + 3] / 255;
            this.gridOuter[o2] = 1 === r2 ? 0 : 0 === r2 ? d : Math.pow(Math.max(0, 0.5 - r2), 2), this.gridInner[o2] = 1 === r2 ? d : 0 === r2 ? 0 : Math.pow(Math.max(0, r2 - 0.5), 2);
          }
          for (f(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z), f(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z), o2 = 0; o2 < this.size * this.size; o2++) {
            var a2 = this.gridOuter[o2] - this.gridInner[o2];
            i2[o2] = Math.max(0, Math.min(255, Math.round(255 - 255 * (a2 / this.radius + this.cutoff))));
          }
          return i2;
        };
        var g = function(t2, e2) {
          this.requestTransform = t2, this.localIdeographFontFamily = e2, this.entries = {};
        };
        g.prototype.setURL = function(t2) {
          this.url = t2;
        }, g.prototype.getGlyphs = function(e2, i2) {
          var o2 = this, r2 = [];
          for (var a2 in e2)
            for (var n2 = 0, s2 = e2[a2]; n2 < s2.length; n2 += 1) {
              var l2 = s2[n2];
              r2.push({ stack: a2, id: l2 });
            }
          t.asyncAll(r2, function(t2, e3) {
            var i3 = t2.stack, r3 = t2.id, a3 = o2.entries[i3];
            a3 || (a3 = o2.entries[i3] = { glyphs: {}, requests: {} });
            var n3 = a3.glyphs[r3];
            if (void 0 === n3)
              if (n3 = o2._tinySDF(a3, i3, r3))
                e3(null, { stack: i3, id: r3, glyph: n3 });
              else {
                var s3 = Math.floor(r3 / 256);
                if (256 * s3 > 65535)
                  e3(new Error("glyphs > 65535 not supported"));
                else {
                  var l3 = a3.requests[s3];
                  l3 || (l3 = a3.requests[s3] = [], g.loadGlyphRange(i3, s3, o2.url, o2.requestTransform, function(t3, e4) {
                    if (e4)
                      for (var i4 in e4)
                        a3.glyphs[+i4] = e4[+i4];
                    for (var o3 = 0, r4 = l3; o3 < r4.length; o3 += 1) {
                      (0, r4[o3])(t3, e4);
                    }
                    delete a3.requests[s3];
                  })), l3.push(function(t3, o3) {
                    t3 ? e3(t3) : o3 && e3(null, { stack: i3, id: r3, glyph: o3[r3] || null });
                  });
                }
              }
            else
              e3(null, { stack: i3, id: r3, glyph: n3 });
          }, function(t2, e3) {
            if (t2)
              i2(t2);
            else if (e3) {
              for (var o3 = {}, r3 = 0, a3 = e3; r3 < a3.length; r3 += 1) {
                var n3 = a3[r3], s3 = n3.stack, l3 = n3.id, c2 = n3.glyph;
                (o3[s3] || (o3[s3] = {}))[l3] = c2 && { id: c2.id, bitmap: c2.bitmap.clone(), metrics: c2.metrics };
              }
              i2(null, o3);
            }
          });
        }, g.prototype._tinySDF = function(e2, i2, o2) {
          var r2 = this.localIdeographFontFamily;
          if (r2 && (t.isChar["CJK Unified Ideographs"](o2) || t.isChar["Hangul Syllables"](o2))) {
            var a2 = e2.tinySDF;
            if (!a2) {
              var n2 = "400";
              /bold/i.test(i2) ? n2 = "900" : /medium/i.test(i2) ? n2 = "500" : /light/i.test(i2) && (n2 = "200"), a2 = e2.tinySDF = new g.TinySDF(24, 3, 8, 0.25, r2, n2);
            }
            return { id: o2, bitmap: new t.AlphaImage({ width: 30, height: 30 }, a2.draw(String.fromCharCode(o2))), metrics: { width: 24, height: 24, left: 0, top: -8, advance: 24 } };
          }
        }, g.loadGlyphRange = function(e2, i2, o2, r2, a2) {
          var n2 = 256 * i2, s2 = n2 + 255, l2 = r2(t.normalizeGlyphsURL(o2).replace("{fontstack}", e2).replace("{range}", n2 + "-" + s2), t.ResourceType.Glyphs);
          t.getArrayBuffer(l2, function(e3, i3) {
            if (e3)
              a2(e3);
            else if (i3) {
              for (var o3 = {}, r3 = 0, n3 = t.parseGlyphPBF(i3); r3 < n3.length; r3 += 1) {
                var s3 = n3[r3];
                o3[s3.id] = s3;
              }
              a2(null, o3);
            }
          });
        }, g.TinySDF = p;
        var v = function() {
          this.specification = t.styleSpec.light.position;
        };
        v.prototype.possiblyEvaluate = function(e2, i2) {
          return t.sphericalToCartesian(e2.expression.evaluate(i2));
        }, v.prototype.interpolate = function(e2, i2, o2) {
          return { x: t.number(e2.x, i2.x, o2), y: t.number(e2.y, i2.y, o2), z: t.number(e2.z, i2.z, o2) };
        };
        var y = new t.Properties({ anchor: new t.DataConstantProperty(t.styleSpec.light.anchor), position: new v(), color: new t.DataConstantProperty(t.styleSpec.light.color), intensity: new t.DataConstantProperty(t.styleSpec.light.intensity) }), x = function(e2) {
          function i2(i3) {
            e2.call(this), this._transitionable = new t.Transitionable(y), this.setLight(i3), this._transitioning = this._transitionable.untransitioned();
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.getLight = function() {
            return this._transitionable.serialize();
          }, i2.prototype.setLight = function(e3, i3) {
            if (void 0 === i3 && (i3 = {}), !this._validate(t.validateLight, e3, i3))
              for (var o2 in e3) {
                var r2 = e3[o2];
                t.endsWith(o2, "-transition") ? this._transitionable.setTransition(o2.slice(0, -"-transition".length), r2) : this._transitionable.setValue(o2, r2);
              }
          }, i2.prototype.updateTransitions = function(t2) {
            this._transitioning = this._transitionable.transitioned(t2, this._transitioning);
          }, i2.prototype.hasTransition = function() {
            return this._transitioning.hasTransition();
          }, i2.prototype.recalculate = function(t2) {
            this.properties = this._transitioning.possiblyEvaluate(t2);
          }, i2.prototype._validate = function(e3, i3, o2) {
            return (!o2 || false !== o2.validate) && t.emitValidationErrors(this, e3.call(t.validateStyle, t.extend({ value: i3, style: { glyphs: true, sprite: true }, styleSpec: t.styleSpec })));
          }, i2;
        }(t.Evented), b = function(t2, e2) {
          this.width = t2, this.height = e2, this.nextRow = 0, this.bytes = 4, this.data = new Uint8Array(this.width * this.height * this.bytes), this.positions = {};
        };
        b.prototype.getDash = function(t2, e2) {
          var i2 = t2.join(",") + String(e2);
          return this.positions[i2] || (this.positions[i2] = this.addDash(t2, e2)), this.positions[i2];
        }, b.prototype.addDash = function(e2, i2) {
          var o2 = i2 ? 7 : 0, r2 = 2 * o2 + 1;
          if (this.nextRow + r2 > this.height)
            return t.warnOnce("LineAtlas out of space"), null;
          for (var a2 = 0, n2 = 0; n2 < e2.length; n2++)
            a2 += e2[n2];
          for (var s2 = this.width / a2, l2 = s2 / 2, c2 = e2.length % 2 == 1, u2 = -o2; u2 <= o2; u2++)
            for (var h2 = this.nextRow + o2 + u2, p2 = this.width * h2, d2 = c2 ? -e2[e2.length - 1] : 0, _2 = e2[0], f2 = 1, m2 = 0; m2 < this.width; m2++) {
              for (; _2 < m2 / s2; )
                d2 = _2, _2 += e2[f2], c2 && f2 === e2.length - 1 && (_2 += e2[0]), f2++;
              var g2 = Math.abs(m2 - d2 * s2), v2 = Math.abs(m2 - _2 * s2), y2 = Math.min(g2, v2), x2 = f2 % 2 == 1, b2 = void 0;
              if (i2) {
                var w2 = o2 ? u2 / o2 * (l2 + 1) : 0;
                if (x2) {
                  var E2 = l2 - Math.abs(w2);
                  b2 = Math.sqrt(y2 * y2 + E2 * E2);
                } else
                  b2 = l2 - Math.sqrt(y2 * y2 + w2 * w2);
              } else
                b2 = (x2 ? 1 : -1) * y2;
              this.data[3 + 4 * (p2 + m2)] = Math.max(0, Math.min(255, b2 + 128));
            }
          var T2 = { y: (this.nextRow + o2 + 0.5) / this.height, height: 2 * o2 / this.height, width: a2 };
          return this.nextRow += r2, this.dirty = true, T2;
        }, b.prototype.bind = function(t2) {
          var e2 = t2.gl;
          this.texture ? (e2.bindTexture(e2.TEXTURE_2D, this.texture), this.dirty && (this.dirty = false, e2.texSubImage2D(e2.TEXTURE_2D, 0, 0, 0, this.width, this.height, e2.RGBA, e2.UNSIGNED_BYTE, this.data))) : (this.texture = e2.createTexture(), e2.bindTexture(e2.TEXTURE_2D, this.texture), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_WRAP_S, e2.REPEAT), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_WRAP_T, e2.REPEAT), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_MIN_FILTER, e2.LINEAR), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_MAG_FILTER, e2.LINEAR), e2.texImage2D(e2.TEXTURE_2D, 0, e2.RGBA, this.width, this.height, 0, e2.RGBA, e2.UNSIGNED_BYTE, this.data));
        };
        var w = function e2(i2, o2) {
          this.workerPool = i2, this.actors = [], this.currentActor = 0, this.id = t.uniqueId();
          for (var r2 = this.workerPool.acquire(this.id), a2 = 0; a2 < r2.length; a2++) {
            var n2 = r2[a2], s2 = new e2.Actor(n2, o2, this.id);
            s2.name = "Worker " + a2, this.actors.push(s2);
          }
        };
        function E(e2, i2, o2) {
          var r2 = function(i3, r3) {
            if (i3)
              return o2(i3);
            if (r3) {
              var a2 = t.pick(r3, ["tiles", "minzoom", "maxzoom", "attribution", "mapbox_logo", "bounds"]);
              r3.vector_layers && (a2.vectorLayers = r3.vector_layers, a2.vectorLayerIds = a2.vectorLayers.map(function(t2) {
                return t2.id;
              })), e2.url && (a2.tiles = t.canonicalizeTileset(a2, e2.url)), o2(null, a2);
            }
          };
          return e2.url ? t.getJSON(i2(t.normalizeSourceURL(e2.url), t.ResourceType.Source), r2) : t.browser.frame(function() {
            return r2(null, e2);
          });
        }
        w.prototype.broadcast = function(e2, i2, o2) {
          o2 = o2 || function() {
          }, t.asyncAll(this.actors, function(t2, o3) {
            t2.send(e2, i2, o3);
          }, o2);
        }, w.prototype.send = function(t2, e2, i2, o2) {
          return ("number" != typeof o2 || isNaN(o2)) && (o2 = this.currentActor = (this.currentActor + 1) % this.actors.length), this.actors[o2].send(t2, e2, i2), o2;
        }, w.prototype.remove = function() {
          this.actors.forEach(function(t2) {
            t2.remove();
          }), this.actors = [], this.workerPool.release(this.id);
        }, w.Actor = t.Actor;
        var T = function(e2, i2, o2) {
          this.bounds = t.LngLatBounds.convert(this.validateBounds(e2)), this.minzoom = i2 || 0, this.maxzoom = o2 || 24;
        };
        T.prototype.validateBounds = function(t2) {
          return Array.isArray(t2) && 4 === t2.length ? [Math.max(-180, t2[0]), Math.max(-90, t2[1]), Math.min(180, t2[2]), Math.min(90, t2[3])] : [-180, -90, 180, 90];
        }, T.prototype.contains = function(e2) {
          var i2 = Math.pow(2, e2.z), o2 = Math.floor(t.mercatorXfromLng(this.bounds.getWest()) * i2), r2 = Math.floor(t.mercatorYfromLat(this.bounds.getNorth()) * i2), a2 = Math.ceil(t.mercatorXfromLng(this.bounds.getEast()) * i2), n2 = Math.ceil(t.mercatorYfromLat(this.bounds.getSouth()) * i2);
          return e2.x >= o2 && e2.x < a2 && e2.y >= r2 && e2.y < n2;
        };
        var I = function(e2) {
          function i2(i3, o2, r2, a2) {
            if (e2.call(this), this.id = i3, this.dispatcher = r2, this.type = "vector", this.minzoom = 0, this.maxzoom = 22, this.scheme = "xyz", this.tileSize = 512, this.reparseOverscaled = true, this.isTileClipped = true, t.extend(this, t.pick(o2, ["url", "scheme", "tileSize"])), this._options = t.extend({ type: "vector" }, o2), this._collectResourceTiming = o2.collectResourceTiming, 512 !== this.tileSize)
              throw new Error("vector tile sources must have a tileSize of 512");
            this.setEventedParent(a2);
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function() {
            var e3 = this;
            this.fire(new t.Event("dataloading", { dataType: "source" })), this._tileJSONRequest = E(this._options, this.map._transformRequest, function(i3, o2) {
              e3._tileJSONRequest = null, i3 ? e3.fire(new t.ErrorEvent(i3)) : o2 && (t.extend(e3, o2), o2.bounds && (e3.tileBounds = new T(o2.bounds, e3.minzoom, e3.maxzoom)), t.postTurnstileEvent(o2.tiles), t.postMapLoadEvent(o2.tiles, e3.map._getMapId()), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })));
            });
          }, i2.prototype.hasTile = function(t2) {
            return !this.tileBounds || this.tileBounds.contains(t2.canonical);
          }, i2.prototype.onAdd = function(t2) {
            this.map = t2, this.load();
          }, i2.prototype.onRemove = function() {
            this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
          }, i2.prototype.serialize = function() {
            return t.extend({}, this._options);
          }, i2.prototype.loadTile = function(e3, i3) {
            var o2 = t.normalizeTileURL(e3.tileID.canonical.url(this.tiles, this.scheme), this.url), r2 = { request: this.map._transformRequest(o2, t.ResourceType.Tile), uid: e3.uid, tileID: e3.tileID, zoom: e3.tileID.overscaledZ, tileSize: this.tileSize * e3.tileID.overscaleFactor(), type: this.type, source: this.id, pixelRatio: t.browser.devicePixelRatio, showCollisionBoxes: this.map.showCollisionBoxes };
            function a2(t2, o3) {
              return e3.aborted ? i3(null) : t2 && 404 !== t2.status ? i3(t2) : (o3 && o3.resourceTiming && (e3.resourceTiming = o3.resourceTiming), this.map._refreshExpiredTiles && o3 && e3.setExpiryData(o3), e3.loadVectorData(o3, this.map.painter), i3(null), void (e3.reloadCallback && (this.loadTile(e3, e3.reloadCallback), e3.reloadCallback = null)));
            }
            r2.request.collectResourceTiming = this._collectResourceTiming, void 0 === e3.workerID || "expired" === e3.state ? e3.workerID = this.dispatcher.send("loadTile", r2, a2.bind(this)) : "loading" === e3.state ? e3.reloadCallback = i3 : this.dispatcher.send("reloadTile", r2, a2.bind(this), e3.workerID);
          }, i2.prototype.abortTile = function(t2) {
            this.dispatcher.send("abortTile", { uid: t2.uid, type: this.type, source: this.id }, void 0, t2.workerID);
          }, i2.prototype.unloadTile = function(t2) {
            t2.unloadVectorData(), this.dispatcher.send("removeTile", { uid: t2.uid, type: this.type, source: this.id }, void 0, t2.workerID);
          }, i2.prototype.hasTransition = function() {
            return false;
          }, i2;
        }(t.Evented), C = function(e2) {
          function i2(i3, o2, r2, a2) {
            e2.call(this), this.id = i3, this.dispatcher = r2, this.setEventedParent(a2), this.type = "raster", this.minzoom = 0, this.maxzoom = 22, this.roundZoom = true, this.scheme = "xyz", this.tileSize = 512, this._loaded = false, this._options = t.extend({}, o2), t.extend(this, t.pick(o2, ["url", "scheme", "tileSize"]));
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function() {
            var e3 = this;
            this.fire(new t.Event("dataloading", { dataType: "source" })), this._tileJSONRequest = E(this._options, this.map._transformRequest, function(i3, o2) {
              e3._tileJSONRequest = null, i3 ? e3.fire(new t.ErrorEvent(i3)) : o2 && (t.extend(e3, o2), o2.bounds && (e3.tileBounds = new T(o2.bounds, e3.minzoom, e3.maxzoom)), t.postTurnstileEvent(o2.tiles), t.postMapLoadEvent(o2.tiles, e3.map._getMapId()), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })));
            });
          }, i2.prototype.onAdd = function(t2) {
            this.map = t2, this.load();
          }, i2.prototype.onRemove = function() {
            this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
          }, i2.prototype.serialize = function() {
            return t.extend({}, this._options);
          }, i2.prototype.hasTile = function(t2) {
            return !this.tileBounds || this.tileBounds.contains(t2.canonical);
          }, i2.prototype.loadTile = function(e3, i3) {
            var o2 = this, r2 = t.normalizeTileURL(e3.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
            e3.request = t.getImage(this.map._transformRequest(r2, t.ResourceType.Tile), function(r3, a2) {
              if (delete e3.request, e3.aborted)
                e3.state = "unloaded", i3(null);
              else if (r3)
                e3.state = "errored", i3(r3);
              else if (a2) {
                o2.map._refreshExpiredTiles && e3.setExpiryData(a2), delete a2.cacheControl, delete a2.expires;
                var n2 = o2.map.painter.context, s2 = n2.gl;
                e3.texture = o2.map.painter.getTileTexture(a2.width), e3.texture ? e3.texture.update(a2, { useMipmap: true }) : (e3.texture = new t.Texture(n2, a2, s2.RGBA, { useMipmap: true }), e3.texture.bind(s2.LINEAR, s2.CLAMP_TO_EDGE, s2.LINEAR_MIPMAP_NEAREST), n2.extTextureFilterAnisotropic && s2.texParameterf(s2.TEXTURE_2D, n2.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, n2.extTextureFilterAnisotropicMax)), e3.state = "loaded", i3(null);
              }
            });
          }, i2.prototype.abortTile = function(t2, e3) {
            t2.request && (t2.request.cancel(), delete t2.request), e3();
          }, i2.prototype.unloadTile = function(t2, e3) {
            t2.texture && this.map.painter.saveTileTexture(t2.texture), e3();
          }, i2.prototype.hasTransition = function() {
            return false;
          }, i2;
        }(t.Evented), S = function(e2) {
          function i2(i3, o2, r2, a2) {
            e2.call(this, i3, o2, r2, a2), this.type = "raster-dem", this.maxzoom = 22, this._options = t.extend({}, o2), this.encoding = o2.encoding || "mapbox";
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.serialize = function() {
            return { type: "raster-dem", url: this.url, tileSize: this.tileSize, tiles: this.tiles, bounds: this.bounds, encoding: this.encoding };
          }, i2.prototype.loadTile = function(e3, i3) {
            var o2 = t.normalizeTileURL(e3.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
            e3.request = t.getImage(this.map._transformRequest(o2, t.ResourceType.Tile), (function(o3, r2) {
              if (delete e3.request, e3.aborted)
                e3.state = "unloaded", i3(null);
              else if (o3)
                e3.state = "errored", i3(o3);
              else if (r2) {
                this.map._refreshExpiredTiles && e3.setExpiryData(r2), delete r2.cacheControl, delete r2.expires;
                var a2 = t.browser.getImageData(r2), n2 = { uid: e3.uid, coord: e3.tileID, source: this.id, rawImageData: a2, encoding: this.encoding };
                e3.workerID && "expired" !== e3.state || (e3.workerID = this.dispatcher.send("loadDEMTile", n2, (function(t2, o4) {
                  t2 && (e3.state = "errored", i3(t2));
                  o4 && (e3.dem = o4, e3.needsHillshadePrepare = true, e3.state = "loaded", i3(null));
                }).bind(this)));
              }
            }).bind(this)), e3.neighboringTiles = this._getNeighboringTiles(e3.tileID);
          }, i2.prototype._getNeighboringTiles = function(e3) {
            var i3 = e3.canonical, o2 = Math.pow(2, i3.z), r2 = (i3.x - 1 + o2) % o2, a2 = 0 === i3.x ? e3.wrap - 1 : e3.wrap, n2 = (i3.x + 1 + o2) % o2, s2 = i3.x + 1 === o2 ? e3.wrap + 1 : e3.wrap, l2 = {};
            return l2[new t.OverscaledTileID(e3.overscaledZ, a2, i3.z, r2, i3.y).key] = { backfilled: false }, l2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, n2, i3.y).key] = { backfilled: false }, i3.y > 0 && (l2[new t.OverscaledTileID(e3.overscaledZ, a2, i3.z, r2, i3.y - 1).key] = { backfilled: false }, l2[new t.OverscaledTileID(e3.overscaledZ, e3.wrap, i3.z, i3.x, i3.y - 1).key] = { backfilled: false }, l2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, n2, i3.y - 1).key] = { backfilled: false }), i3.y + 1 < o2 && (l2[new t.OverscaledTileID(e3.overscaledZ, a2, i3.z, r2, i3.y + 1).key] = { backfilled: false }, l2[new t.OverscaledTileID(e3.overscaledZ, e3.wrap, i3.z, i3.x, i3.y + 1).key] = { backfilled: false }, l2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, n2, i3.y + 1).key] = { backfilled: false }), l2;
          }, i2.prototype.unloadTile = function(t2) {
            t2.demTexture && this.map.painter.saveTileTexture(t2.demTexture), t2.fbo && (t2.fbo.destroy(), delete t2.fbo), t2.dem && delete t2.dem, delete t2.neighboringTiles, t2.state = "unloaded", this.dispatcher.send("removeDEMTile", { uid: t2.uid, source: this.id }, void 0, t2.workerID);
          }, i2;
        }(C), z = function(e2) {
          function i2(i3, o2, r2, a2) {
            e2.call(this), this.id = i3, this.type = "geojson", this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = true, this.reparseOverscaled = true, this._removed = false, this.dispatcher = r2, this.setEventedParent(a2), this._data = o2.data, this._options = t.extend({}, o2), this._collectResourceTiming = o2.collectResourceTiming, this._resourceTiming = [], void 0 !== o2.maxzoom && (this.maxzoom = o2.maxzoom), o2.type && (this.type = o2.type), o2.attribution && (this.attribution = o2.attribution);
            var n2 = t.EXTENT / this.tileSize;
            this.workerOptions = t.extend({ source: this.id, cluster: o2.cluster || false, geojsonVtOptions: { buffer: (void 0 !== o2.buffer ? o2.buffer : 128) * n2, tolerance: (void 0 !== o2.tolerance ? o2.tolerance : 0.375) * n2, extent: t.EXTENT, maxZoom: this.maxzoom, lineMetrics: o2.lineMetrics || false, generateId: o2.generateId || false }, superclusterOptions: { maxZoom: void 0 !== o2.clusterMaxZoom ? Math.min(o2.clusterMaxZoom, this.maxzoom - 1) : this.maxzoom - 1, extent: t.EXTENT, radius: (o2.clusterRadius || 50) * n2, log: false }, clusterProperties: o2.clusterProperties }, o2.workerOptions);
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function() {
            var e3 = this;
            this.fire(new t.Event("dataloading", { dataType: "source" })), this._updateWorkerData(function(i3) {
              if (i3)
                e3.fire(new t.ErrorEvent(i3));
              else {
                var o2 = { dataType: "source", sourceDataType: "metadata" };
                e3._collectResourceTiming && e3._resourceTiming && e3._resourceTiming.length > 0 && (o2.resourceTiming = e3._resourceTiming, e3._resourceTiming = []), e3.fire(new t.Event("data", o2));
              }
            });
          }, i2.prototype.onAdd = function(t2) {
            this.map = t2, this.load();
          }, i2.prototype.setData = function(e3) {
            var i3 = this;
            return this._data = e3, this.fire(new t.Event("dataloading", { dataType: "source" })), this._updateWorkerData(function(e4) {
              if (e4)
                i3.fire(new t.ErrorEvent(e4));
              else {
                var o2 = { dataType: "source", sourceDataType: "content" };
                i3._collectResourceTiming && i3._resourceTiming && i3._resourceTiming.length > 0 && (o2.resourceTiming = i3._resourceTiming, i3._resourceTiming = []), i3.fire(new t.Event("data", o2));
              }
            }), this;
          }, i2.prototype.getClusterExpansionZoom = function(t2, e3) {
            return this.dispatcher.send("geojson.getClusterExpansionZoom", { clusterId: t2, source: this.id }, e3, this.workerID), this;
          }, i2.prototype.getClusterChildren = function(t2, e3) {
            return this.dispatcher.send("geojson.getClusterChildren", { clusterId: t2, source: this.id }, e3, this.workerID), this;
          }, i2.prototype.getClusterLeaves = function(t2, e3, i3, o2) {
            return this.dispatcher.send("geojson.getClusterLeaves", { source: this.id, clusterId: t2, limit: e3, offset: i3 }, o2, this.workerID), this;
          }, i2.prototype._updateWorkerData = function(e3) {
            var i3 = this, o2 = t.extend({}, this.workerOptions), r2 = this._data;
            "string" == typeof r2 ? (o2.request = this.map._transformRequest(t.browser.resolveURL(r2), t.ResourceType.Source), o2.request.collectResourceTiming = this._collectResourceTiming) : o2.data = JSON.stringify(r2), this.workerID = this.dispatcher.send(this.type + ".loadData", o2, function(t2, r3) {
              i3._removed || r3 && r3.abandoned || (i3._loaded = true, r3 && r3.resourceTiming && r3.resourceTiming[i3.id] && (i3._resourceTiming = r3.resourceTiming[i3.id].slice(0)), i3.dispatcher.send(i3.type + ".coalesce", { source: o2.source }, null, i3.workerID), e3(t2));
            }, this.workerID);
          }, i2.prototype.loadTile = function(e3, i3) {
            var o2 = this, r2 = void 0 === e3.workerID ? "loadTile" : "reloadTile", a2 = { type: this.type, uid: e3.uid, tileID: e3.tileID, zoom: e3.tileID.overscaledZ, maxZoom: this.maxzoom, tileSize: this.tileSize, source: this.id, pixelRatio: t.browser.devicePixelRatio, showCollisionBoxes: this.map.showCollisionBoxes };
            e3.workerID = this.dispatcher.send(r2, a2, function(t2, a3) {
              return e3.unloadVectorData(), e3.aborted ? i3(null) : t2 ? i3(t2) : (e3.loadVectorData(a3, o2.map.painter, "reloadTile" === r2), i3(null));
            }, this.workerID);
          }, i2.prototype.abortTile = function(t2) {
            t2.aborted = true;
          }, i2.prototype.unloadTile = function(t2) {
            t2.unloadVectorData(), this.dispatcher.send("removeTile", { uid: t2.uid, type: this.type, source: this.id }, null, t2.workerID);
          }, i2.prototype.onRemove = function() {
            this._removed = true, this.dispatcher.send("removeSource", { type: this.type, source: this.id }, null, this.workerID);
          }, i2.prototype.serialize = function() {
            return t.extend({}, this._options, { type: this.type, data: this._data });
          }, i2.prototype.hasTransition = function() {
            return false;
          }, i2;
        }(t.Evented), L = function(e2) {
          function i2(t2, i3, o2, r2) {
            e2.call(this), this.id = t2, this.dispatcher = o2, this.coordinates = i3.coordinates, this.type = "image", this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this.setEventedParent(r2), this.options = i3;
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function(e3, i3) {
            var o2 = this;
            this.fire(new t.Event("dataloading", { dataType: "source" })), this.url = this.options.url, t.getImage(this.map._transformRequest(this.url, t.ResourceType.Image), function(r2, a2) {
              r2 ? o2.fire(new t.ErrorEvent(r2)) : a2 && (o2.image = a2, e3 && (o2.coordinates = e3), i3 && i3(), o2._finishLoading());
            });
          }, i2.prototype.updateImage = function(t2) {
            var e3 = this;
            return this.image && t2.url ? (this.options.url = t2.url, this.load(t2.coordinates, function() {
              e3.texture = null;
            }), this) : this;
          }, i2.prototype._finishLoading = function() {
            this.map && (this.setCoordinates(this.coordinates), this.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })));
          }, i2.prototype.onAdd = function(t2) {
            this.map = t2, this.load();
          }, i2.prototype.setCoordinates = function(e3) {
            var i3 = this;
            this.coordinates = e3;
            var o2 = e3.map(t.MercatorCoordinate.fromLngLat);
            this.tileID = function(e4) {
              for (var i4 = 1 / 0, o3 = 1 / 0, r3 = -1 / 0, a2 = -1 / 0, n2 = 0, s2 = e4; n2 < s2.length; n2 += 1) {
                var l2 = s2[n2];
                i4 = Math.min(i4, l2.x), o3 = Math.min(o3, l2.y), r3 = Math.max(r3, l2.x), a2 = Math.max(a2, l2.y);
              }
              var c2 = r3 - i4, u2 = a2 - o3, h2 = Math.max(c2, u2), p2 = Math.max(0, Math.floor(-Math.log(h2) / Math.LN2)), d2 = Math.pow(2, p2);
              return new t.CanonicalTileID(p2, Math.floor((i4 + r3) / 2 * d2), Math.floor((o3 + a2) / 2 * d2));
            }(o2), this.minzoom = this.maxzoom = this.tileID.z;
            var r2 = o2.map(function(t2) {
              return i3.tileID.getTilePoint(t2)._round();
            });
            return this._boundsArray = new t.StructArrayLayout4i8(), this._boundsArray.emplaceBack(r2[0].x, r2[0].y, 0, 0), this._boundsArray.emplaceBack(r2[1].x, r2[1].y, t.EXTENT, 0), this._boundsArray.emplaceBack(r2[3].x, r2[3].y, 0, t.EXTENT), this._boundsArray.emplaceBack(r2[2].x, r2[2].y, t.EXTENT, t.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })), this;
          }, i2.prototype.prepare = function() {
            if (0 !== Object.keys(this.tiles).length && this.image) {
              var e3 = this.map.painter.context, i3 = e3.gl;
              for (var o2 in this.boundsBuffer || (this.boundsBuffer = e3.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new t.Texture(e3, this.image, i3.RGBA), this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE)), this.tiles) {
                var r2 = this.tiles[o2];
                "loaded" !== r2.state && (r2.state = "loaded", r2.texture = this.texture);
              }
            }
          }, i2.prototype.loadTile = function(t2, e3) {
            this.tileID && this.tileID.equals(t2.tileID.canonical) ? (this.tiles[String(t2.tileID.wrap)] = t2, t2.buckets = {}, e3(null)) : (t2.state = "errored", e3(null));
          }, i2.prototype.serialize = function() {
            return { type: "image", url: this.options.url, coordinates: this.coordinates };
          }, i2.prototype.hasTransition = function() {
            return false;
          }, i2;
        }(t.Evented);
        var P = { vector: I, raster: C, "raster-dem": S, geojson: z, video: function(e2) {
          function i2(t2, i3, o2, r2) {
            e2.call(this, t2, i3, o2, r2), this.roundZoom = true, this.type = "video", this.options = i3;
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function() {
            var e3 = this, i3 = this.options;
            this.urls = [];
            for (var o2 = 0, r2 = i3.urls; o2 < r2.length; o2 += 1) {
              var a2 = r2[o2];
              this.urls.push(this.map._transformRequest(a2, t.ResourceType.Source).url);
            }
            t.getVideo(this.urls, function(i4, o3) {
              i4 ? e3.fire(new t.ErrorEvent(i4)) : o3 && (e3.video = o3, e3.video.loop = true, e3.video.addEventListener("playing", function() {
                e3.map.triggerRepaint();
              }), e3.map && e3.video.play(), e3._finishLoading());
            });
          }, i2.prototype.getVideo = function() {
            return this.video;
          }, i2.prototype.onAdd = function(t2) {
            this.map || (this.map = t2, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));
          }, i2.prototype.prepare = function() {
            if (!(0 === Object.keys(this.tiles).length || this.video.readyState < 2)) {
              var e3 = this.map.painter.context, i3 = e3.gl;
              for (var o2 in this.boundsBuffer || (this.boundsBuffer = e3.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE), i3.texSubImage2D(i3.TEXTURE_2D, 0, 0, 0, i3.RGBA, i3.UNSIGNED_BYTE, this.video)) : (this.texture = new t.Texture(e3, this.video, i3.RGBA), this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE)), this.tiles) {
                var r2 = this.tiles[o2];
                "loaded" !== r2.state && (r2.state = "loaded", r2.texture = this.texture);
              }
            }
          }, i2.prototype.serialize = function() {
            return { type: "video", urls: this.urls, coordinates: this.coordinates };
          }, i2.prototype.hasTransition = function() {
            return this.video && !this.video.paused;
          }, i2;
        }(L), image: L, canvas: function(e2) {
          function i2(i3, o2, r2, a2) {
            e2.call(this, i3, o2, r2, a2), o2.coordinates ? Array.isArray(o2.coordinates) && 4 === o2.coordinates.length && !o2.coordinates.some(function(t2) {
              return !Array.isArray(t2) || 2 !== t2.length || t2.some(function(t3) {
                return "number" != typeof t3;
              });
            }) || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, '"coordinates" property must be an array of 4 longitude/latitude array pairs'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'missing required property "coordinates"'))), o2.animate && "boolean" != typeof o2.animate && this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'optional "animate" property must be a boolean value'))), o2.canvas ? "string" == typeof o2.canvas || o2.canvas instanceof t.window.HTMLCanvasElement || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'missing required property "canvas"'))), this.options = o2, this.animate = void 0 === o2.animate || o2.animate;
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.load = function() {
            this.canvas || (this.canvas = this.options.canvas instanceof t.window.HTMLCanvasElement ? this.options.canvas : t.window.document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))) : (this.play = function() {
              this._playing = true, this.map.triggerRepaint();
            }, this.pause = function() {
              this._playing = false;
            }, this._finishLoading());
          }, i2.prototype.getCanvas = function() {
            return this.canvas;
          }, i2.prototype.onAdd = function(t2) {
            this.map = t2, this.load(), this.canvas && this.animate && this.play();
          }, i2.prototype.onRemove = function() {
            this.pause();
          }, i2.prototype.prepare = function() {
            var e3 = false;
            if (this.canvas.width !== this.width && (this.width = this.canvas.width, e3 = true), this.canvas.height !== this.height && (this.height = this.canvas.height, e3 = true), !this._hasInvalidDimensions() && 0 !== Object.keys(this.tiles).length) {
              var i3 = this.map.painter.context, o2 = i3.gl;
              for (var r2 in this.boundsBuffer || (this.boundsBuffer = i3.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (e3 || this._playing) && this.texture.update(this.canvas, { premultiply: true }) : this.texture = new t.Texture(i3, this.canvas, o2.RGBA, { premultiply: true }), this.tiles) {
                var a2 = this.tiles[r2];
                "loaded" !== a2.state && (a2.state = "loaded", a2.texture = this.texture);
              }
            }
          }, i2.prototype.serialize = function() {
            return { type: "canvas", coordinates: this.coordinates };
          }, i2.prototype.hasTransition = function() {
            return this._playing;
          }, i2.prototype._hasInvalidDimensions = function() {
            for (var t2 = 0, e3 = [this.canvas.width, this.canvas.height]; t2 < e3.length; t2 += 1) {
              var i3 = e3[t2];
              if (isNaN(i3) || i3 <= 0)
                return true;
            }
            return false;
          }, i2;
        }(L) }, D = function(e2, i2, o2, r2) {
          var a2 = new P[i2.type](e2, i2, o2, r2);
          if (a2.id !== e2)
            throw new Error("Expected Source id to be " + e2 + " instead of " + a2.id);
          return t.bindAll(["load", "abort", "unload", "serialize", "prepare"], a2), a2;
        };
        function R(e2, i2) {
          var o2 = t.identity([]);
          return t.translate(o2, o2, [1, 1, 0]), t.scale(o2, o2, [0.5 * e2.width, 0.5 * e2.height, 1]), t.multiply(o2, o2, e2.calculatePosMatrix(i2.toUnwrapped()));
        }
        function M(t2, e2, i2, o2, r2) {
          var a2 = function(t3, e3, i3) {
            if (t3)
              for (var o3 = 0, r3 = t3; o3 < r3.length; o3 += 1) {
                var a3 = e3[r3[o3]];
                if (a3 && a3.source === i3 && "fill-extrusion" === a3.type)
                  return true;
              }
            else
              for (var n3 in e3) {
                var s3 = e3[n3];
                if (s3.source === i3 && "fill-extrusion" === s3.type)
                  return true;
              }
            return false;
          }(o2 && o2.layers, e2, t2.id), n2 = r2.maxPitchScaleFactor(), s2 = t2.tilesIn(i2, n2, a2);
          s2.sort(A);
          for (var l2 = [], c2 = 0, u2 = s2; c2 < u2.length; c2 += 1) {
            var h2 = u2[c2];
            l2.push({ wrappedTileID: h2.tileID.wrapped().key, queryResults: h2.tile.queryRenderedFeatures(e2, t2._state, h2.queryGeometry, h2.cameraQueryGeometry, h2.scale, o2, r2, n2, R(t2.transform, h2.tileID)) });
          }
          var p2 = function(t3) {
            for (var e3 = {}, i3 = {}, o3 = 0, r3 = t3; o3 < r3.length; o3 += 1) {
              var a3 = r3[o3], n3 = a3.queryResults, s3 = a3.wrappedTileID, l3 = i3[s3] = i3[s3] || {};
              for (var c3 in n3)
                for (var u3 = n3[c3], h3 = l3[c3] = l3[c3] || {}, p3 = e3[c3] = e3[c3] || [], d3 = 0, _2 = u3; d3 < _2.length; d3 += 1) {
                  var f2 = _2[d3];
                  h3[f2.featureIndex] || (h3[f2.featureIndex] = true, p3.push(f2));
                }
            }
            return e3;
          }(l2);
          for (var d2 in p2)
            p2[d2].forEach(function(e3) {
              var i3 = e3.feature, o3 = t2.getFeatureState(i3.layer["source-layer"], i3.id);
              i3.source = i3.layer.source, i3.layer["source-layer"] && (i3.sourceLayer = i3.layer["source-layer"]), i3.state = o3;
            });
          return p2;
        }
        function A(t2, e2) {
          var i2 = t2.tileID, o2 = e2.tileID;
          return i2.overscaledZ - o2.overscaledZ || i2.canonical.y - o2.canonical.y || i2.wrap - o2.wrap || i2.canonical.x - o2.canonical.x;
        }
        var k = function(t2, e2) {
          this.max = t2, this.onRemove = e2, this.reset();
        };
        k.prototype.reset = function() {
          for (var t2 in this.data)
            for (var e2 = 0, i2 = this.data[t2]; e2 < i2.length; e2 += 1) {
              var o2 = i2[e2];
              o2.timeout && clearTimeout(o2.timeout), this.onRemove(o2.value);
            }
          return this.data = {}, this.order = [], this;
        }, k.prototype.add = function(t2, e2, i2) {
          var o2 = this, r2 = t2.wrapped().key;
          void 0 === this.data[r2] && (this.data[r2] = []);
          var a2 = { value: e2, timeout: void 0 };
          if (void 0 !== i2 && (a2.timeout = setTimeout(function() {
            o2.remove(t2, a2);
          }, i2)), this.data[r2].push(a2), this.order.push(r2), this.order.length > this.max) {
            var n2 = this._getAndRemoveByKey(this.order[0]);
            n2 && this.onRemove(n2);
          }
          return this;
        }, k.prototype.has = function(t2) {
          return t2.wrapped().key in this.data;
        }, k.prototype.getAndRemove = function(t2) {
          return this.has(t2) ? this._getAndRemoveByKey(t2.wrapped().key) : null;
        }, k.prototype._getAndRemoveByKey = function(t2) {
          var e2 = this.data[t2].shift();
          return e2.timeout && clearTimeout(e2.timeout), 0 === this.data[t2].length && delete this.data[t2], this.order.splice(this.order.indexOf(t2), 1), e2.value;
        }, k.prototype.get = function(t2) {
          return this.has(t2) ? this.data[t2.wrapped().key][0].value : null;
        }, k.prototype.remove = function(t2, e2) {
          if (!this.has(t2))
            return this;
          var i2 = t2.wrapped().key, o2 = void 0 === e2 ? 0 : this.data[i2].indexOf(e2), r2 = this.data[i2][o2];
          return this.data[i2].splice(o2, 1), r2.timeout && clearTimeout(r2.timeout), 0 === this.data[i2].length && delete this.data[i2], this.onRemove(r2.value), this.order.splice(this.order.indexOf(i2), 1), this;
        }, k.prototype.setMaxSize = function(t2) {
          for (this.max = t2; this.order.length > this.max; ) {
            var e2 = this._getAndRemoveByKey(this.order[0]);
            e2 && this.onRemove(e2);
          }
          return this;
        };
        var B = function(t2, e2, i2) {
          this.context = t2;
          var o2 = t2.gl;
          this.buffer = o2.createBuffer(), this.dynamicDraw = Boolean(i2), this.context.unbindVAO(), t2.bindElementBuffer.set(this.buffer), o2.bufferData(o2.ELEMENT_ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? o2.DYNAMIC_DRAW : o2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
        };
        B.prototype.bind = function() {
          this.context.bindElementBuffer.set(this.buffer);
        }, B.prototype.updateData = function(t2) {
          var e2 = this.context.gl;
          this.context.unbindVAO(), this.bind(), e2.bufferSubData(e2.ELEMENT_ARRAY_BUFFER, 0, t2.arrayBuffer);
        }, B.prototype.destroy = function() {
          var t2 = this.context.gl;
          this.buffer && (t2.deleteBuffer(this.buffer), delete this.buffer);
        };
        var O = { Int8: "BYTE", Uint8: "UNSIGNED_BYTE", Int16: "SHORT", Uint16: "UNSIGNED_SHORT", Int32: "INT", Uint32: "UNSIGNED_INT", Float32: "FLOAT" }, F = function(t2, e2, i2, o2) {
          this.length = e2.length, this.attributes = i2, this.itemSize = e2.bytesPerElement, this.dynamicDraw = o2, this.context = t2;
          var r2 = t2.gl;
          this.buffer = r2.createBuffer(), t2.bindVertexBuffer.set(this.buffer), r2.bufferData(r2.ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? r2.DYNAMIC_DRAW : r2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
        };
        F.prototype.bind = function() {
          this.context.bindVertexBuffer.set(this.buffer);
        }, F.prototype.updateData = function(t2) {
          var e2 = this.context.gl;
          this.bind(), e2.bufferSubData(e2.ARRAY_BUFFER, 0, t2.arrayBuffer);
        }, F.prototype.enableAttributes = function(t2, e2) {
          for (var i2 = 0; i2 < this.attributes.length; i2++) {
            var o2 = this.attributes[i2], r2 = e2.attributes[o2.name];
            void 0 !== r2 && t2.enableVertexAttribArray(r2);
          }
        }, F.prototype.setVertexAttribPointers = function(t2, e2, i2) {
          for (var o2 = 0; o2 < this.attributes.length; o2++) {
            var r2 = this.attributes[o2], a2 = e2.attributes[r2.name];
            void 0 !== a2 && t2.vertexAttribPointer(a2, r2.components, t2[O[r2.type]], false, this.itemSize, r2.offset + this.itemSize * (i2 || 0));
          }
        }, F.prototype.destroy = function() {
          var t2 = this.context.gl;
          this.buffer && (t2.deleteBuffer(this.buffer), delete this.buffer);
        };
        var U = function(t2) {
          this.gl = t2.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = false;
        };
        U.prototype.get = function() {
          return this.current;
        }, U.prototype.set = function(t2) {
        }, U.prototype.getDefault = function() {
          return this.default;
        }, U.prototype.setDefault = function() {
          this.set(this.default);
        };
        var N = function(e2) {
          function i2() {
            e2.apply(this, arguments);
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.getDefault = function() {
            return t.Color.transparent;
          }, i2.prototype.set = function(t2) {
            var e3 = this.current;
            (t2.r !== e3.r || t2.g !== e3.g || t2.b !== e3.b || t2.a !== e3.a || this.dirty) && (this.gl.clearColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
          }, i2;
        }(U), Z = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return 1;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.clearDepth(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), j = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return 0;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.clearStencil(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), V = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return [true, true, true, true];
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || t3[3] !== e3[3] || this.dirty) && (this.gl.colorMask(t3[0], t3[1], t3[2], t3[3]), this.current = t3, this.dirty = false);
          }, e2;
        }(U), q = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return true;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.depthMask(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), G = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return 255;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.stencilMask(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), W = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return { func: this.gl.ALWAYS, ref: 0, mask: 255 };
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3.func !== e3.func || t3.ref !== e3.ref || t3.mask !== e3.mask || this.dirty) && (this.gl.stencilFunc(t3.func, t3.ref, t3.mask), this.current = t3, this.dirty = false);
          }, e2;
        }(U), X = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            var t3 = this.gl;
            return [t3.KEEP, t3.KEEP, t3.KEEP];
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || this.dirty) && (this.gl.stencilOp(t3[0], t3[1], t3[2]), this.current = t3, this.dirty = false);
          }, e2;
        }(U), H = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              t3 ? e3.enable(e3.STENCIL_TEST) : e3.disable(e3.STENCIL_TEST), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), K = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return [0, 1];
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3[0] !== e3[0] || t3[1] !== e3[1] || this.dirty) && (this.gl.depthRange(t3[0], t3[1]), this.current = t3, this.dirty = false);
          }, e2;
        }(U), Y = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              t3 ? e3.enable(e3.DEPTH_TEST) : e3.disable(e3.DEPTH_TEST), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), J = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return this.gl.LESS;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.depthFunc(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), Q = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              t3 ? e3.enable(e3.BLEND) : e3.disable(e3.BLEND), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), $ = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            var t3 = this.gl;
            return [t3.ONE, t3.ZERO];
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3[0] !== e3[0] || t3[1] !== e3[1] || this.dirty) && (this.gl.blendFunc(t3[0], t3[1]), this.current = t3, this.dirty = false);
          }, e2;
        }(U), tt = function(e2) {
          function i2() {
            e2.apply(this, arguments);
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.getDefault = function() {
            return t.Color.transparent;
          }, i2.prototype.set = function(t2) {
            var e3 = this.current;
            (t2.r !== e3.r || t2.g !== e3.g || t2.b !== e3.b || t2.a !== e3.a || this.dirty) && (this.gl.blendColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
          }, i2;
        }(U), et = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return this.gl.FUNC_ADD;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.blendEquation(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), it = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              t3 ? e3.enable(e3.CULL_FACE) : e3.disable(e3.CULL_FACE), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), ot = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return this.gl.BACK;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.cullFace(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), rt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return this.gl.CCW;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.frontFace(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), at = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.useProgram(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), nt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return this.gl.TEXTURE0;
          }, e2.prototype.set = function(t3) {
            (t3 !== this.current || this.dirty) && (this.gl.activeTexture(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), st = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            var t3 = this.gl;
            return [0, 0, t3.drawingBufferWidth, t3.drawingBufferHeight];
          }, e2.prototype.set = function(t3) {
            var e3 = this.current;
            (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || t3[3] !== e3[3] || this.dirty) && (this.gl.viewport(t3[0], t3[1], t3[2], t3[3]), this.current = t3, this.dirty = false);
          }, e2;
        }(U), lt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.bindFramebuffer(e3.FRAMEBUFFER, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), ct = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.bindRenderbuffer(e3.RENDERBUFFER, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), ut = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.bindTexture(e3.TEXTURE_2D, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), ht = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.bindBuffer(e3.ARRAY_BUFFER, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), pt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            var e3 = this.gl;
            e3.bindBuffer(e3.ELEMENT_ARRAY_BUFFER, t3), this.current = t3, this.dirty = false;
          }, e2;
        }(U), dt = function(t2) {
          function e2(e3) {
            t2.call(this, e3), this.vao = e3.extVertexArrayObject;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2.prototype.set = function(t3) {
            this.vao && (t3 !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t3), this.current = t3, this.dirty = false);
          }, e2;
        }(U), _t = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return 4;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.pixelStorei(e3.UNPACK_ALIGNMENT, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), ft = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.pixelStorei(e3.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), mt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return false;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              var e3 = this.gl;
              e3.pixelStorei(e3.UNPACK_FLIP_Y_WEBGL, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(U), gt = function(t2) {
          function e2(e3, i2) {
            t2.call(this, e3), this.context = e3, this.parent = i2;
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.getDefault = function() {
            return null;
          }, e2;
        }(U), vt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.setDirty = function() {
            this.dirty = true;
          }, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              this.context.bindFramebuffer.set(this.parent);
              var e3 = this.gl;
              e3.framebufferTexture2D(e3.FRAMEBUFFER, e3.COLOR_ATTACHMENT0, e3.TEXTURE_2D, t3, 0), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(gt), yt = function(t2) {
          function e2() {
            t2.apply(this, arguments);
          }
          return t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2, e2.prototype.set = function(t3) {
            if (t3 !== this.current || this.dirty) {
              this.context.bindFramebuffer.set(this.parent);
              var e3 = this.gl;
              e3.framebufferRenderbuffer(e3.FRAMEBUFFER, e3.DEPTH_ATTACHMENT, e3.RENDERBUFFER, t3), this.current = t3, this.dirty = false;
            }
          }, e2;
        }(gt), xt = function(t2, e2, i2) {
          this.context = t2, this.width = e2, this.height = i2;
          var o2 = t2.gl, r2 = this.framebuffer = o2.createFramebuffer();
          this.colorAttachment = new vt(t2, r2), this.depthAttachment = new yt(t2, r2);
        };
        xt.prototype.destroy = function() {
          var t2 = this.context.gl, e2 = this.colorAttachment.get();
          e2 && t2.deleteTexture(e2);
          var i2 = this.depthAttachment.get();
          i2 && t2.deleteRenderbuffer(i2), t2.deleteFramebuffer(this.framebuffer);
        };
        var bt = function(t2, e2, i2) {
          this.func = t2, this.mask = e2, this.range = i2;
        };
        bt.ReadOnly = false, bt.ReadWrite = true, bt.disabled = new bt(519, bt.ReadOnly, [0, 1]);
        var wt = function(t2, e2, i2, o2, r2, a2) {
          this.test = t2, this.ref = e2, this.mask = i2, this.fail = o2, this.depthFail = r2, this.pass = a2;
        };
        wt.disabled = new wt({ func: 519, mask: 0 }, 0, 0, 7680, 7680, 7680);
        var Et = function(t2, e2, i2) {
          this.blendFunction = t2, this.blendColor = e2, this.mask = i2;
        };
        Et.Replace = [1, 0], Et.disabled = new Et(Et.Replace, t.Color.transparent, [false, false, false, false]), Et.unblended = new Et(Et.Replace, t.Color.transparent, [true, true, true, true]), Et.alphaBlended = new Et([1, 771], t.Color.transparent, [true, true, true, true]);
        var Tt = function(t2, e2, i2) {
          this.enable = t2, this.mode = e2, this.frontFace = i2;
        };
        Tt.disabled = new Tt(false, 1029, 2305), Tt.backCCW = new Tt(true, 1029, 2305);
        var It = function(t2) {
          this.gl = t2, this.extVertexArrayObject = this.gl.getExtension("OES_vertex_array_object"), this.clearColor = new N(this), this.clearDepth = new Z(this), this.clearStencil = new j(this), this.colorMask = new V(this), this.depthMask = new q(this), this.stencilMask = new G(this), this.stencilFunc = new W(this), this.stencilOp = new X(this), this.stencilTest = new H(this), this.depthRange = new K(this), this.depthTest = new Y(this), this.depthFunc = new J(this), this.blend = new Q(this), this.blendFunc = new $(this), this.blendColor = new tt(this), this.blendEquation = new et(this), this.cullFace = new it(this), this.cullFaceSide = new ot(this), this.frontFace = new rt(this), this.program = new at(this), this.activeTexture = new nt(this), this.viewport = new st(this), this.bindFramebuffer = new lt(this), this.bindRenderbuffer = new ct(this), this.bindTexture = new ut(this), this.bindVertexBuffer = new ht(this), this.bindElementBuffer = new pt(this), this.bindVertexArrayOES = this.extVertexArrayObject && new dt(this), this.pixelStoreUnpack = new _t(this), this.pixelStoreUnpackPremultiplyAlpha = new ft(this), this.pixelStoreUnpackFlipY = new mt(this), this.extTextureFilterAnisotropic = t2.getExtension("EXT_texture_filter_anisotropic") || t2.getExtension("MOZ_EXT_texture_filter_anisotropic") || t2.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t2.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = t2.getExtension("OES_texture_half_float"), this.extTextureHalfFloat && t2.getExtension("OES_texture_half_float_linear");
        };
        It.prototype.setDirty = function() {
          this.clearColor.dirty = true, this.clearDepth.dirty = true, this.clearStencil.dirty = true, this.colorMask.dirty = true, this.depthMask.dirty = true, this.stencilMask.dirty = true, this.stencilFunc.dirty = true, this.stencilOp.dirty = true, this.stencilTest.dirty = true, this.depthRange.dirty = true, this.depthTest.dirty = true, this.depthFunc.dirty = true, this.blend.dirty = true, this.blendFunc.dirty = true, this.blendColor.dirty = true, this.blendEquation.dirty = true, this.cullFace.dirty = true, this.cullFaceSide.dirty = true, this.frontFace.dirty = true, this.program.dirty = true, this.activeTexture.dirty = true, this.viewport.dirty = true, this.bindFramebuffer.dirty = true, this.bindRenderbuffer.dirty = true, this.bindTexture.dirty = true, this.bindVertexBuffer.dirty = true, this.bindElementBuffer.dirty = true, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = true), this.pixelStoreUnpack.dirty = true, this.pixelStoreUnpackPremultiplyAlpha.dirty = true, this.pixelStoreUnpackFlipY.dirty = true;
        }, It.prototype.createIndexBuffer = function(t2, e2) {
          return new B(this, t2, e2);
        }, It.prototype.createVertexBuffer = function(t2, e2, i2) {
          return new F(this, t2, e2, i2);
        }, It.prototype.createRenderbuffer = function(t2, e2, i2) {
          var o2 = this.gl, r2 = o2.createRenderbuffer();
          return this.bindRenderbuffer.set(r2), o2.renderbufferStorage(o2.RENDERBUFFER, t2, e2, i2), this.bindRenderbuffer.set(null), r2;
        }, It.prototype.createFramebuffer = function(t2, e2) {
          return new xt(this, t2, e2);
        }, It.prototype.clear = function(t2) {
          var e2 = t2.color, i2 = t2.depth, o2 = this.gl, r2 = 0;
          e2 && (r2 |= o2.COLOR_BUFFER_BIT, this.clearColor.set(e2), this.colorMask.set([true, true, true, true])), void 0 !== i2 && (r2 |= o2.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(i2), this.depthMask.set(true)), o2.clear(r2);
        }, It.prototype.setCullFace = function(t2) {
          false === t2.enable ? this.cullFace.set(false) : (this.cullFace.set(true), this.cullFaceSide.set(t2.mode), this.frontFace.set(t2.frontFace));
        }, It.prototype.setDepthMode = function(t2) {
          t2.func !== this.gl.ALWAYS || t2.mask ? (this.depthTest.set(true), this.depthFunc.set(t2.func), this.depthMask.set(t2.mask), this.depthRange.set(t2.range)) : this.depthTest.set(false);
        }, It.prototype.setStencilMode = function(t2) {
          t2.test.func !== this.gl.ALWAYS || t2.mask ? (this.stencilTest.set(true), this.stencilMask.set(t2.mask), this.stencilOp.set([t2.fail, t2.depthFail, t2.pass]), this.stencilFunc.set({ func: t2.test.func, ref: t2.ref, mask: t2.test.mask })) : this.stencilTest.set(false);
        }, It.prototype.setColorMode = function(e2) {
          t.isEqual(e2.blendFunction, Et.Replace) ? this.blend.set(false) : (this.blend.set(true), this.blendFunc.set(e2.blendFunction), this.blendColor.set(e2.blendColor)), this.colorMask.set(e2.mask);
        }, It.prototype.unbindVAO = function() {
          this.extVertexArrayObject && this.bindVertexArrayOES.set(null);
        };
        var Ct = function(e2) {
          function i2(i3, o2, r2) {
            var a2 = this;
            e2.call(this), this.id = i3, this.dispatcher = r2, this.on("data", function(t2) {
              "source" === t2.dataType && "metadata" === t2.sourceDataType && (a2._sourceLoaded = true), a2._sourceLoaded && !a2._paused && "source" === t2.dataType && "content" === t2.sourceDataType && (a2.reload(), a2.transform && a2.update(a2.transform));
            }), this.on("error", function() {
              a2._sourceErrored = true;
            }), this._source = D(i3, o2, r2, this), this._tiles = {}, this._cache = new k(0, this._unloadTile.bind(this)), this._timers = {}, this._cacheTimers = {}, this._maxTileCacheSize = null, this._coveredTiles = {}, this._state = new t.SourceFeatureState();
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.onAdd = function(t2) {
            this.map = t2, this._maxTileCacheSize = t2 ? t2._maxTileCacheSize : null, this._source && this._source.onAdd && this._source.onAdd(t2);
          }, i2.prototype.onRemove = function(t2) {
            this._source && this._source.onRemove && this._source.onRemove(t2);
          }, i2.prototype.loaded = function() {
            if (this._sourceErrored)
              return true;
            if (!this._sourceLoaded)
              return false;
            for (var t2 in this._tiles) {
              var e3 = this._tiles[t2];
              if ("loaded" !== e3.state && "errored" !== e3.state)
                return false;
            }
            return true;
          }, i2.prototype.getSource = function() {
            return this._source;
          }, i2.prototype.pause = function() {
            this._paused = true;
          }, i2.prototype.resume = function() {
            if (this._paused) {
              var t2 = this._shouldReloadOnResume;
              this._paused = false, this._shouldReloadOnResume = false, t2 && this.reload(), this.transform && this.update(this.transform);
            }
          }, i2.prototype._loadTile = function(t2, e3) {
            return this._source.loadTile(t2, e3);
          }, i2.prototype._unloadTile = function(t2) {
            if (this._source.unloadTile)
              return this._source.unloadTile(t2, function() {
              });
          }, i2.prototype._abortTile = function(t2) {
            if (this._source.abortTile)
              return this._source.abortTile(t2, function() {
              });
          }, i2.prototype.serialize = function() {
            return this._source.serialize();
          }, i2.prototype.prepare = function(t2) {
            for (var e3 in this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null), this._tiles)
              this._tiles[e3].upload(t2);
          }, i2.prototype.getIds = function() {
            return Object.keys(this._tiles).map(Number).sort(St);
          }, i2.prototype.getRenderableIds = function(e3) {
            var i3 = this, o2 = [];
            for (var r2 in this._tiles)
              this._isIdRenderable(+r2, e3) && o2.push(+r2);
            return e3 ? o2.sort(function(e4, o3) {
              var r3 = i3._tiles[e4].tileID, a2 = i3._tiles[o3].tileID, n2 = new t.Point(r3.canonical.x, r3.canonical.y)._rotate(i3.transform.angle), s2 = new t.Point(a2.canonical.x, a2.canonical.y)._rotate(i3.transform.angle);
              return r3.overscaledZ - a2.overscaledZ || s2.y - n2.y || s2.x - n2.x;
            }) : o2.sort(St);
          }, i2.prototype.hasRenderableParent = function(t2) {
            var e3 = this.findLoadedParent(t2, 0);
            return !!e3 && this._isIdRenderable(e3.tileID.key);
          }, i2.prototype._isIdRenderable = function(t2, e3) {
            return this._tiles[t2] && this._tiles[t2].hasData() && !this._coveredTiles[t2] && (e3 || !this._tiles[t2].holdingForFade());
          }, i2.prototype.reload = function() {
            if (this._paused)
              this._shouldReloadOnResume = true;
            else
              for (var t2 in this._cache.reset(), this._tiles)
                "errored" !== this._tiles[t2].state && this._reloadTile(t2, "reloading");
          }, i2.prototype._reloadTile = function(t2, e3) {
            var i3 = this._tiles[t2];
            i3 && ("loading" !== i3.state && (i3.state = e3), this._loadTile(i3, this._tileLoaded.bind(this, i3, t2, e3)));
          }, i2.prototype._tileLoaded = function(e3, i3, o2, r2) {
            if (r2)
              return e3.state = "errored", void (404 !== r2.status ? this._source.fire(new t.ErrorEvent(r2, { tile: e3 })) : this.update(this.transform));
            e3.timeAdded = t.browser.now(), "expired" === o2 && (e3.refreshedUponExpiration = true), this._setTileReloadTimer(i3, e3), "raster-dem" === this.getSource().type && e3.dem && this._backfillDEM(e3), this._state.initializeTileState(e3, this.map ? this.map.painter : null), this._source.fire(new t.Event("data", { dataType: "source", tile: e3, coord: e3.tileID }));
          }, i2.prototype._backfillDEM = function(t2) {
            for (var e3 = this.getRenderableIds(), i3 = 0; i3 < e3.length; i3++) {
              var o2 = e3[i3];
              if (t2.neighboringTiles && t2.neighboringTiles[o2]) {
                var r2 = this.getTileByID(o2);
                a2(t2, r2), a2(r2, t2);
              }
            }
            function a2(t3, e4) {
              t3.needsHillshadePrepare = true;
              var i4 = e4.tileID.canonical.x - t3.tileID.canonical.x, o3 = e4.tileID.canonical.y - t3.tileID.canonical.y, r3 = Math.pow(2, t3.tileID.canonical.z), a3 = e4.tileID.key;
              0 === i4 && 0 === o3 || Math.abs(o3) > 1 || (Math.abs(i4) > 1 && (1 === Math.abs(i4 + r3) ? i4 += r3 : 1 === Math.abs(i4 - r3) && (i4 -= r3)), e4.dem && t3.dem && (t3.dem.backfillBorder(e4.dem, i4, o3), t3.neighboringTiles && t3.neighboringTiles[a3] && (t3.neighboringTiles[a3].backfilled = true)));
            }
          }, i2.prototype.getTile = function(t2) {
            return this.getTileByID(t2.key);
          }, i2.prototype.getTileByID = function(t2) {
            return this._tiles[t2];
          }, i2.prototype.getZoom = function(t2) {
            return t2.zoom + t2.scaleZoom(t2.tileSize / this._source.tileSize);
          }, i2.prototype._retainLoadedChildren = function(t2, e3, i3, o2) {
            for (var r2 in this._tiles) {
              var a2 = this._tiles[r2];
              if (!(o2[r2] || !a2.hasData() || a2.tileID.overscaledZ <= e3 || a2.tileID.overscaledZ > i3)) {
                for (var n2 = a2.tileID; a2 && a2.tileID.overscaledZ > e3 + 1; ) {
                  var s2 = a2.tileID.scaledTo(a2.tileID.overscaledZ - 1);
                  (a2 = this._tiles[s2.key]) && a2.hasData() && (n2 = s2);
                }
                for (var l2 = n2; l2.overscaledZ > e3; )
                  if (t2[(l2 = l2.scaledTo(l2.overscaledZ - 1)).key]) {
                    o2[n2.key] = n2;
                    break;
                  }
              }
            }
          }, i2.prototype.findLoadedParent = function(t2, e3) {
            for (var i3 = t2.overscaledZ - 1; i3 >= e3; i3--) {
              var o2 = t2.scaledTo(i3);
              if (!o2)
                return;
              var r2 = String(o2.key), a2 = this._tiles[r2];
              if (a2 && a2.hasData())
                return a2;
              if (this._cache.has(o2))
                return this._cache.get(o2);
            }
          }, i2.prototype.updateCacheSize = function(t2) {
            var e3 = (Math.ceil(t2.width / this._source.tileSize) + 1) * (Math.ceil(t2.height / this._source.tileSize) + 1), i3 = Math.floor(5 * e3), o2 = "number" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, i3) : i3;
            this._cache.setMaxSize(o2);
          }, i2.prototype.handleWrapJump = function(t2) {
            var e3 = (t2 - (void 0 === this._prevLng ? t2 : this._prevLng)) / 360, i3 = Math.round(e3);
            if (this._prevLng = t2, i3) {
              var o2 = {};
              for (var r2 in this._tiles) {
                var a2 = this._tiles[r2];
                a2.tileID = a2.tileID.unwrapTo(a2.tileID.wrap + i3), o2[a2.tileID.key] = a2;
              }
              for (var n2 in this._tiles = o2, this._timers)
                clearTimeout(this._timers[n2]), delete this._timers[n2];
              for (var s2 in this._tiles) {
                var l2 = this._tiles[s2];
                this._setTileReloadTimer(s2, l2);
              }
            }
          }, i2.prototype.update = function(e3) {
            var o2 = this;
            if (this.transform = e3, this._sourceLoaded && !this._paused) {
              var r2;
              this.updateCacheSize(e3), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used ? this._source.tileID ? r2 = e3.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e4) {
                return new t.OverscaledTileID(e4.canonical.z, e4.wrap, e4.canonical.z, e4.canonical.x, e4.canonical.y);
              }) : (r2 = e3.coveringTiles({ tileSize: this._source.tileSize, minzoom: this._source.minzoom, maxzoom: this._source.maxzoom, roundZoom: this._source.roundZoom, reparseOverscaled: this._source.reparseOverscaled }), this._source.hasTile && (r2 = r2.filter(function(t2) {
                return o2._source.hasTile(t2);
              }))) : r2 = [];
              var a2 = (this._source.roundZoom ? Math.round : Math.floor)(this.getZoom(e3)), n2 = Math.max(a2 - i2.maxOverzooming, this._source.minzoom), s2 = Math.max(a2 + i2.maxUnderzooming, this._source.minzoom), l2 = this._updateRetainedTiles(r2, a2);
              if (zt(this._source.type)) {
                for (var c2 = {}, u2 = {}, h2 = 0, p2 = Object.keys(l2); h2 < p2.length; h2 += 1) {
                  var d2 = p2[h2], _2 = l2[d2], f2 = this._tiles[d2];
                  if (f2 && !(f2.fadeEndTime && f2.fadeEndTime <= t.browser.now())) {
                    var m2 = this.findLoadedParent(_2, n2);
                    m2 && (this._addTile(m2.tileID), c2[m2.tileID.key] = m2.tileID), u2[d2] = _2;
                  }
                }
                for (var g2 in this._retainLoadedChildren(u2, a2, s2, l2), c2)
                  l2[g2] || (this._coveredTiles[g2] = true, l2[g2] = c2[g2]);
              }
              for (var v2 in l2)
                this._tiles[v2].clearFadeHold();
              for (var y2 = 0, x2 = t.keysDifference(this._tiles, l2); y2 < x2.length; y2 += 1) {
                var b2 = x2[y2], w2 = this._tiles[b2];
                w2.hasSymbolBuckets && !w2.holdingForFade() ? w2.setHoldDuration(this.map._fadeDuration) : w2.hasSymbolBuckets && !w2.symbolFadeFinished() || this._removeTile(b2);
              }
            }
          }, i2.prototype.releaseSymbolFadeTiles = function() {
            for (var t2 in this._tiles)
              this._tiles[t2].holdingForFade() && this._removeTile(t2);
          }, i2.prototype._updateRetainedTiles = function(t2, e3) {
            for (var o2 = {}, r2 = {}, a2 = Math.max(e3 - i2.maxOverzooming, this._source.minzoom), n2 = Math.max(e3 + i2.maxUnderzooming, this._source.minzoom), s2 = {}, l2 = 0, c2 = t2; l2 < c2.length; l2 += 1) {
              var u2 = c2[l2], h2 = this._addTile(u2);
              o2[u2.key] = u2, h2.hasData() || e3 < this._source.maxzoom && (s2[u2.key] = u2);
            }
            this._retainLoadedChildren(s2, e3, n2, o2);
            for (var p2 = 0, d2 = t2; p2 < d2.length; p2 += 1) {
              var _2 = d2[p2], f2 = this._tiles[_2.key];
              if (!f2.hasData()) {
                if (e3 + 1 > this._source.maxzoom) {
                  var m2 = _2.children(this._source.maxzoom)[0], g2 = this.getTile(m2);
                  if (g2 && g2.hasData()) {
                    o2[m2.key] = m2;
                    continue;
                  }
                } else {
                  var v2 = _2.children(this._source.maxzoom);
                  if (o2[v2[0].key] && o2[v2[1].key] && o2[v2[2].key] && o2[v2[3].key])
                    continue;
                }
                for (var y2 = f2.wasRequested(), x2 = _2.overscaledZ - 1; x2 >= a2; --x2) {
                  var b2 = _2.scaledTo(x2);
                  if (r2[b2.key])
                    break;
                  if (r2[b2.key] = true, !(f2 = this.getTile(b2)) && y2 && (f2 = this._addTile(b2)), f2 && (o2[b2.key] = b2, y2 = f2.wasRequested(), f2.hasData()))
                    break;
                }
              }
            }
            return o2;
          }, i2.prototype._addTile = function(e3) {
            var i3 = this._tiles[e3.key];
            if (i3)
              return i3;
            (i3 = this._cache.getAndRemove(e3)) && (this._setTileReloadTimer(e3.key, i3), i3.tileID = e3, this._state.initializeTileState(i3, this.map ? this.map.painter : null), this._cacheTimers[e3.key] && (clearTimeout(this._cacheTimers[e3.key]), delete this._cacheTimers[e3.key], this._setTileReloadTimer(e3.key, i3)));
            var o2 = Boolean(i3);
            return o2 || (i3 = new t.Tile(e3, this._source.tileSize * e3.overscaleFactor()), this._loadTile(i3, this._tileLoaded.bind(this, i3, e3.key, i3.state))), i3 ? (i3.uses++, this._tiles[e3.key] = i3, o2 || this._source.fire(new t.Event("dataloading", { tile: i3, coord: i3.tileID, dataType: "source" })), i3) : null;
          }, i2.prototype._setTileReloadTimer = function(t2, e3) {
            var i3 = this;
            t2 in this._timers && (clearTimeout(this._timers[t2]), delete this._timers[t2]);
            var o2 = e3.getExpiryTimeout();
            o2 && (this._timers[t2] = setTimeout(function() {
              i3._reloadTile(t2, "expired"), delete i3._timers[t2];
            }, o2));
          }, i2.prototype._removeTile = function(t2) {
            var e3 = this._tiles[t2];
            e3 && (e3.uses--, delete this._tiles[t2], this._timers[t2] && (clearTimeout(this._timers[t2]), delete this._timers[t2]), e3.uses > 0 || (e3.hasData() ? this._cache.add(e3.tileID, e3, e3.getExpiryTimeout()) : (e3.aborted = true, this._abortTile(e3), this._unloadTile(e3))));
          }, i2.prototype.clearTiles = function() {
            for (var t2 in this._shouldReloadOnResume = false, this._paused = false, this._tiles)
              this._removeTile(t2);
            this._cache.reset();
          }, i2.prototype.tilesIn = function(e3, i3, o2) {
            var r2 = this, a2 = [], n2 = this.transform;
            if (!n2)
              return a2;
            for (var s2 = o2 ? n2.getCameraQueryGeometry(e3) : e3, l2 = e3.map(function(t2) {
              return n2.pointCoordinate(t2);
            }), c2 = s2.map(function(t2) {
              return n2.pointCoordinate(t2);
            }), u2 = this.getIds(), h2 = 1 / 0, p2 = 1 / 0, d2 = -1 / 0, _2 = -1 / 0, f2 = 0, m2 = c2; f2 < m2.length; f2 += 1) {
              var g2 = m2[f2];
              h2 = Math.min(h2, g2.x), p2 = Math.min(p2, g2.y), d2 = Math.max(d2, g2.x), _2 = Math.max(_2, g2.y);
            }
            for (var v2 = function(e4) {
              var o3 = r2._tiles[u2[e4]];
              if (!o3.holdingForFade()) {
                var s3 = o3.tileID, f3 = Math.pow(2, n2.zoom - o3.tileID.overscaledZ), m3 = i3 * o3.queryPadding * t.EXTENT / o3.tileSize / f3, g3 = [s3.getTilePoint(new t.MercatorCoordinate(h2, p2)), s3.getTilePoint(new t.MercatorCoordinate(d2, _2))];
                if (g3[0].x - m3 < t.EXTENT && g3[0].y - m3 < t.EXTENT && g3[1].x + m3 >= 0 && g3[1].y + m3 >= 0) {
                  var v3 = l2.map(function(t2) {
                    return s3.getTilePoint(t2);
                  }), y3 = c2.map(function(t2) {
                    return s3.getTilePoint(t2);
                  });
                  a2.push({ tile: o3, tileID: s3, queryGeometry: v3, cameraQueryGeometry: y3, scale: f3 });
                }
              }
            }, y2 = 0; y2 < u2.length; y2++)
              v2(y2);
            return a2;
          }, i2.prototype.getVisibleCoordinates = function(t2) {
            for (var e3 = this, i3 = this.getRenderableIds(t2).map(function(t3) {
              return e3._tiles[t3].tileID;
            }), o2 = 0, r2 = i3; o2 < r2.length; o2 += 1) {
              var a2 = r2[o2];
              a2.posMatrix = this.transform.calculatePosMatrix(a2.toUnwrapped());
            }
            return i3;
          }, i2.prototype.hasTransition = function() {
            if (this._source.hasTransition())
              return true;
            if (zt(this._source.type))
              for (var e3 in this._tiles) {
                var i3 = this._tiles[e3];
                if (void 0 !== i3.fadeEndTime && i3.fadeEndTime >= t.browser.now())
                  return true;
              }
            return false;
          }, i2.prototype.setFeatureState = function(t2, e3, i3) {
            t2 = t2 || "_geojsonTileLayer", this._state.updateState(t2, e3, i3);
          }, i2.prototype.removeFeatureState = function(t2, e3, i3) {
            t2 = t2 || "_geojsonTileLayer", this._state.removeFeatureState(t2, e3, i3);
          }, i2.prototype.getFeatureState = function(t2, e3) {
            return t2 = t2 || "_geojsonTileLayer", this._state.getState(t2, e3);
          }, i2;
        }(t.Evented);
        function St(t2, e2) {
          return t2 % 32 - e2 % 32 || e2 - t2;
        }
        function zt(t2) {
          return "raster" === t2 || "image" === t2 || "video" === t2;
        }
        function Lt() {
          return new t.window.Worker(Qo.workerUrl);
        }
        Ct.maxOverzooming = 10, Ct.maxUnderzooming = 3;
        var Pt = function() {
          this.active = {};
        };
        Pt.prototype.acquire = function(t2) {
          if (!this.workers)
            for (this.workers = []; this.workers.length < Pt.workerCount; )
              this.workers.push(new Lt());
          return this.active[t2] = true, this.workers.slice();
        }, Pt.prototype.release = function(t2) {
          delete this.active[t2], 0 === Object.keys(this.active).length && (this.workers.forEach(function(t3) {
            t3.terminate();
          }), this.workers = null);
        };
        var Dt, Rt = Math.floor(t.browser.hardwareConcurrency / 2);
        function Mt(e2, i2) {
          var o2 = {};
          for (var r2 in e2)
            "ref" !== r2 && (o2[r2] = e2[r2]);
          return t.refProperties.forEach(function(t2) {
            t2 in i2 && (o2[t2] = i2[t2]);
          }), o2;
        }
        function At(t2) {
          t2 = t2.slice();
          for (var e2 = /* @__PURE__ */ Object.create(null), i2 = 0; i2 < t2.length; i2++)
            e2[t2[i2].id] = t2[i2];
          for (var o2 = 0; o2 < t2.length; o2++)
            "ref" in t2[o2] && (t2[o2] = Mt(t2[o2], e2[t2[o2].ref]));
          return t2;
        }
        Pt.workerCount = Math.max(Math.min(Rt, 6), 1);
        var kt = { setStyle: "setStyle", addLayer: "addLayer", removeLayer: "removeLayer", setPaintProperty: "setPaintProperty", setLayoutProperty: "setLayoutProperty", setFilter: "setFilter", addSource: "addSource", removeSource: "removeSource", setGeoJSONSourceData: "setGeoJSONSourceData", setLayerZoomRange: "setLayerZoomRange", setLayerProperty: "setLayerProperty", setCenter: "setCenter", setZoom: "setZoom", setBearing: "setBearing", setPitch: "setPitch", setSprite: "setSprite", setGlyphs: "setGlyphs", setTransition: "setTransition", setLight: "setLight" };
        function Bt(t2, e2, i2) {
          i2.push({ command: kt.addSource, args: [t2, e2[t2]] });
        }
        function Ot(t2, e2, i2) {
          e2.push({ command: kt.removeSource, args: [t2] }), i2[t2] = true;
        }
        function Ft(t2, e2, i2, o2) {
          Ot(t2, i2, o2), Bt(t2, e2, i2);
        }
        function Ut(e2, i2, o2) {
          var r2;
          for (r2 in e2[o2])
            if (e2[o2].hasOwnProperty(r2) && "data" !== r2 && !t.isEqual(e2[o2][r2], i2[o2][r2]))
              return false;
          for (r2 in i2[o2])
            if (i2[o2].hasOwnProperty(r2) && "data" !== r2 && !t.isEqual(e2[o2][r2], i2[o2][r2]))
              return false;
          return true;
        }
        function Nt(e2, i2, o2, r2, a2, n2) {
          var s2;
          for (s2 in i2 = i2 || {}, e2 = e2 || {})
            e2.hasOwnProperty(s2) && (t.isEqual(e2[s2], i2[s2]) || o2.push({ command: n2, args: [r2, s2, i2[s2], a2] }));
          for (s2 in i2)
            i2.hasOwnProperty(s2) && !e2.hasOwnProperty(s2) && (t.isEqual(e2[s2], i2[s2]) || o2.push({ command: n2, args: [r2, s2, i2[s2], a2] }));
        }
        function Zt(t2) {
          return t2.id;
        }
        function jt(t2, e2) {
          return t2[e2.id] = e2, t2;
        }
        function Vt(e2, i2) {
          if (!e2)
            return [{ command: kt.setStyle, args: [i2] }];
          var o2 = [];
          try {
            if (!t.isEqual(e2.version, i2.version))
              return [{ command: kt.setStyle, args: [i2] }];
            t.isEqual(e2.center, i2.center) || o2.push({ command: kt.setCenter, args: [i2.center] }), t.isEqual(e2.zoom, i2.zoom) || o2.push({ command: kt.setZoom, args: [i2.zoom] }), t.isEqual(e2.bearing, i2.bearing) || o2.push({ command: kt.setBearing, args: [i2.bearing] }), t.isEqual(e2.pitch, i2.pitch) || o2.push({ command: kt.setPitch, args: [i2.pitch] }), t.isEqual(e2.sprite, i2.sprite) || o2.push({ command: kt.setSprite, args: [i2.sprite] }), t.isEqual(e2.glyphs, i2.glyphs) || o2.push({ command: kt.setGlyphs, args: [i2.glyphs] }), t.isEqual(e2.transition, i2.transition) || o2.push({ command: kt.setTransition, args: [i2.transition] }), t.isEqual(e2.light, i2.light) || o2.push({ command: kt.setLight, args: [i2.light] });
            var r2 = {}, a2 = [];
            !function(e3, i3, o3, r3) {
              var a3;
              for (a3 in i3 = i3 || {}, e3 = e3 || {})
                e3.hasOwnProperty(a3) && (i3.hasOwnProperty(a3) || Ot(a3, o3, r3));
              for (a3 in i3)
                i3.hasOwnProperty(a3) && (e3.hasOwnProperty(a3) ? t.isEqual(e3[a3], i3[a3]) || ("geojson" === e3[a3].type && "geojson" === i3[a3].type && Ut(e3, i3, a3) ? o3.push({ command: kt.setGeoJSONSourceData, args: [a3, i3[a3].data] }) : Ft(a3, i3, o3, r3)) : Bt(a3, i3, o3));
            }(e2.sources, i2.sources, a2, r2);
            var n2 = [];
            e2.layers && e2.layers.forEach(function(t2) {
              r2[t2.source] ? o2.push({ command: kt.removeLayer, args: [t2.id] }) : n2.push(t2);
            }), o2 = o2.concat(a2), function(e3, i3, o3) {
              i3 = i3 || [];
              var r3, a3, n3, s2, l2, c2, u2, h2 = (e3 = e3 || []).map(Zt), p2 = i3.map(Zt), d2 = e3.reduce(jt, {}), _2 = i3.reduce(jt, {}), f2 = h2.slice(), m2 = /* @__PURE__ */ Object.create(null);
              for (r3 = 0, a3 = 0; r3 < h2.length; r3++)
                n3 = h2[r3], _2.hasOwnProperty(n3) ? a3++ : (o3.push({ command: kt.removeLayer, args: [n3] }), f2.splice(f2.indexOf(n3, a3), 1));
              for (r3 = 0, a3 = 0; r3 < p2.length; r3++)
                n3 = p2[p2.length - 1 - r3], f2[f2.length - 1 - r3] !== n3 && (d2.hasOwnProperty(n3) ? (o3.push({ command: kt.removeLayer, args: [n3] }), f2.splice(f2.lastIndexOf(n3, f2.length - a3), 1)) : a3++, c2 = f2[f2.length - r3], o3.push({ command: kt.addLayer, args: [_2[n3], c2] }), f2.splice(f2.length - r3, 0, n3), m2[n3] = true);
              for (r3 = 0; r3 < p2.length; r3++)
                if (s2 = d2[n3 = p2[r3]], l2 = _2[n3], !m2[n3] && !t.isEqual(s2, l2))
                  if (t.isEqual(s2.source, l2.source) && t.isEqual(s2["source-layer"], l2["source-layer"]) && t.isEqual(s2.type, l2.type)) {
                    for (u2 in Nt(s2.layout, l2.layout, o3, n3, null, kt.setLayoutProperty), Nt(s2.paint, l2.paint, o3, n3, null, kt.setPaintProperty), t.isEqual(s2.filter, l2.filter) || o3.push({ command: kt.setFilter, args: [n3, l2.filter] }), t.isEqual(s2.minzoom, l2.minzoom) && t.isEqual(s2.maxzoom, l2.maxzoom) || o3.push({ command: kt.setLayerZoomRange, args: [n3, l2.minzoom, l2.maxzoom] }), s2)
                      s2.hasOwnProperty(u2) && "layout" !== u2 && "paint" !== u2 && "filter" !== u2 && "metadata" !== u2 && "minzoom" !== u2 && "maxzoom" !== u2 && (0 === u2.indexOf("paint.") ? Nt(s2[u2], l2[u2], o3, n3, u2.slice(6), kt.setPaintProperty) : t.isEqual(s2[u2], l2[u2]) || o3.push({ command: kt.setLayerProperty, args: [n3, u2, l2[u2]] }));
                    for (u2 in l2)
                      l2.hasOwnProperty(u2) && !s2.hasOwnProperty(u2) && "layout" !== u2 && "paint" !== u2 && "filter" !== u2 && "metadata" !== u2 && "minzoom" !== u2 && "maxzoom" !== u2 && (0 === u2.indexOf("paint.") ? Nt(s2[u2], l2[u2], o3, n3, u2.slice(6), kt.setPaintProperty) : t.isEqual(s2[u2], l2[u2]) || o3.push({ command: kt.setLayerProperty, args: [n3, u2, l2[u2]] }));
                  } else
                    o3.push({ command: kt.removeLayer, args: [n3] }), c2 = f2[f2.lastIndexOf(n3) + 1], o3.push({ command: kt.addLayer, args: [l2, c2] });
            }(n2, i2.layers, o2);
          } catch (t2) {
            console.warn("Unable to compute style diff:", t2), o2 = [{ command: kt.setStyle, args: [i2] }];
          }
          return o2;
        }
        var qt = function(t2, e2, i2) {
          var o2 = this.boxCells = [], r2 = this.circleCells = [];
          this.xCellCount = Math.ceil(t2 / i2), this.yCellCount = Math.ceil(e2 / i2);
          for (var a2 = 0; a2 < this.xCellCount * this.yCellCount; a2++)
            o2.push([]), r2.push([]);
          this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t2, this.height = e2, this.xScale = this.xCellCount / t2, this.yScale = this.yCellCount / e2, this.boxUid = 0, this.circleUid = 0;
        };
        qt.prototype.keysLength = function() {
          return this.boxKeys.length + this.circleKeys.length;
        }, qt.prototype.insert = function(t2, e2, i2, o2, r2) {
          this._forEachCell(e2, i2, o2, r2, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t2), this.bboxes.push(e2), this.bboxes.push(i2), this.bboxes.push(o2), this.bboxes.push(r2);
        }, qt.prototype.insertCircle = function(t2, e2, i2, o2) {
          this._forEachCell(e2 - o2, i2 - o2, e2 + o2, i2 + o2, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t2), this.circles.push(e2), this.circles.push(i2), this.circles.push(o2);
        }, qt.prototype._insertBoxCell = function(t2, e2, i2, o2, r2, a2) {
          this.boxCells[r2].push(a2);
        }, qt.prototype._insertCircleCell = function(t2, e2, i2, o2, r2, a2) {
          this.circleCells[r2].push(a2);
        }, qt.prototype._query = function(t2, e2, i2, o2, r2, a2) {
          if (i2 < 0 || t2 > this.width || o2 < 0 || e2 > this.height)
            return !r2 && [];
          var n2 = [];
          if (t2 <= 0 && e2 <= 0 && this.width <= i2 && this.height <= o2) {
            if (r2)
              return true;
            for (var s2 = 0; s2 < this.boxKeys.length; s2++)
              n2.push({ key: this.boxKeys[s2], x1: this.bboxes[4 * s2], y1: this.bboxes[4 * s2 + 1], x2: this.bboxes[4 * s2 + 2], y2: this.bboxes[4 * s2 + 3] });
            for (var l2 = 0; l2 < this.circleKeys.length; l2++) {
              var c2 = this.circles[3 * l2], u2 = this.circles[3 * l2 + 1], h2 = this.circles[3 * l2 + 2];
              n2.push({ key: this.circleKeys[l2], x1: c2 - h2, y1: u2 - h2, x2: c2 + h2, y2: u2 + h2 });
            }
            return a2 ? n2.filter(a2) : n2;
          }
          var p2 = { hitTest: r2, seenUids: { box: {}, circle: {} } };
          return this._forEachCell(t2, e2, i2, o2, this._queryCell, n2, p2, a2), r2 ? n2.length > 0 : n2;
        }, qt.prototype._queryCircle = function(t2, e2, i2, o2, r2) {
          var a2 = t2 - i2, n2 = t2 + i2, s2 = e2 - i2, l2 = e2 + i2;
          if (n2 < 0 || a2 > this.width || l2 < 0 || s2 > this.height)
            return !o2 && [];
          var c2 = [], u2 = { hitTest: o2, circle: { x: t2, y: e2, radius: i2 }, seenUids: { box: {}, circle: {} } };
          return this._forEachCell(a2, s2, n2, l2, this._queryCellCircle, c2, u2, r2), o2 ? c2.length > 0 : c2;
        }, qt.prototype.query = function(t2, e2, i2, o2, r2) {
          return this._query(t2, e2, i2, o2, false, r2);
        }, qt.prototype.hitTest = function(t2, e2, i2, o2, r2) {
          return this._query(t2, e2, i2, o2, true, r2);
        }, qt.prototype.hitTestCircle = function(t2, e2, i2, o2) {
          return this._queryCircle(t2, e2, i2, true, o2);
        }, qt.prototype._queryCell = function(t2, e2, i2, o2, r2, a2, n2, s2) {
          var l2 = n2.seenUids, c2 = this.boxCells[r2];
          if (null !== c2)
            for (var u2 = this.bboxes, h2 = 0, p2 = c2; h2 < p2.length; h2 += 1) {
              var d2 = p2[h2];
              if (!l2.box[d2]) {
                l2.box[d2] = true;
                var _2 = 4 * d2;
                if (t2 <= u2[_2 + 2] && e2 <= u2[_2 + 3] && i2 >= u2[_2 + 0] && o2 >= u2[_2 + 1] && (!s2 || s2(this.boxKeys[d2]))) {
                  if (n2.hitTest)
                    return a2.push(true), true;
                  a2.push({ key: this.boxKeys[d2], x1: u2[_2], y1: u2[_2 + 1], x2: u2[_2 + 2], y2: u2[_2 + 3] });
                }
              }
            }
          var f2 = this.circleCells[r2];
          if (null !== f2)
            for (var m2 = this.circles, g2 = 0, v2 = f2; g2 < v2.length; g2 += 1) {
              var y2 = v2[g2];
              if (!l2.circle[y2]) {
                l2.circle[y2] = true;
                var x2 = 3 * y2;
                if (this._circleAndRectCollide(m2[x2], m2[x2 + 1], m2[x2 + 2], t2, e2, i2, o2) && (!s2 || s2(this.circleKeys[y2]))) {
                  if (n2.hitTest)
                    return a2.push(true), true;
                  var b2 = m2[x2], w2 = m2[x2 + 1], E2 = m2[x2 + 2];
                  a2.push({ key: this.circleKeys[y2], x1: b2 - E2, y1: w2 - E2, x2: b2 + E2, y2: w2 + E2 });
                }
              }
            }
        }, qt.prototype._queryCellCircle = function(t2, e2, i2, o2, r2, a2, n2, s2) {
          var l2 = n2.circle, c2 = n2.seenUids, u2 = this.boxCells[r2];
          if (null !== u2)
            for (var h2 = this.bboxes, p2 = 0, d2 = u2; p2 < d2.length; p2 += 1) {
              var _2 = d2[p2];
              if (!c2.box[_2]) {
                c2.box[_2] = true;
                var f2 = 4 * _2;
                if (this._circleAndRectCollide(l2.x, l2.y, l2.radius, h2[f2 + 0], h2[f2 + 1], h2[f2 + 2], h2[f2 + 3]) && (!s2 || s2(this.boxKeys[_2])))
                  return a2.push(true), true;
              }
            }
          var m2 = this.circleCells[r2];
          if (null !== m2)
            for (var g2 = this.circles, v2 = 0, y2 = m2; v2 < y2.length; v2 += 1) {
              var x2 = y2[v2];
              if (!c2.circle[x2]) {
                c2.circle[x2] = true;
                var b2 = 3 * x2;
                if (this._circlesCollide(g2[b2], g2[b2 + 1], g2[b2 + 2], l2.x, l2.y, l2.radius) && (!s2 || s2(this.circleKeys[x2])))
                  return a2.push(true), true;
              }
            }
        }, qt.prototype._forEachCell = function(t2, e2, i2, o2, r2, a2, n2, s2) {
          for (var l2 = this._convertToXCellCoord(t2), c2 = this._convertToYCellCoord(e2), u2 = this._convertToXCellCoord(i2), h2 = this._convertToYCellCoord(o2), p2 = l2; p2 <= u2; p2++)
            for (var d2 = c2; d2 <= h2; d2++) {
              var _2 = this.xCellCount * d2 + p2;
              if (r2.call(this, t2, e2, i2, o2, _2, a2, n2, s2))
                return;
            }
        }, qt.prototype._convertToXCellCoord = function(t2) {
          return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t2 * this.xScale)));
        }, qt.prototype._convertToYCellCoord = function(t2) {
          return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t2 * this.yScale)));
        }, qt.prototype._circlesCollide = function(t2, e2, i2, o2, r2, a2) {
          var n2 = o2 - t2, s2 = r2 - e2, l2 = i2 + a2;
          return l2 * l2 > n2 * n2 + s2 * s2;
        }, qt.prototype._circleAndRectCollide = function(t2, e2, i2, o2, r2, a2, n2) {
          var s2 = (a2 - o2) / 2, l2 = Math.abs(t2 - (o2 + s2));
          if (l2 > s2 + i2)
            return false;
          var c2 = (n2 - r2) / 2, u2 = Math.abs(e2 - (r2 + c2));
          if (u2 > c2 + i2)
            return false;
          if (l2 <= s2 || u2 <= c2)
            return true;
          var h2 = l2 - s2, p2 = u2 - c2;
          return h2 * h2 + p2 * p2 <= i2 * i2;
        };
        var Gt = t.properties.layout;
        function Wt(e2, i2, o2, r2, a2) {
          var n2 = t.identity(new Float32Array(16));
          return i2 ? (t.identity(n2), t.scale(n2, n2, [1 / a2, 1 / a2, 1]), o2 || t.rotateZ(n2, n2, r2.angle)) : (t.scale(n2, n2, [r2.width / 2, -r2.height / 2, 1]), t.translate(n2, n2, [1, -1, 0]), t.multiply(n2, n2, e2)), n2;
        }
        function Xt(e2, i2, o2, r2, a2) {
          var n2 = t.identity(new Float32Array(16));
          return i2 ? (t.multiply(n2, n2, e2), t.scale(n2, n2, [a2, a2, 1]), o2 || t.rotateZ(n2, n2, -r2.angle)) : (t.scale(n2, n2, [1, -1, 1]), t.translate(n2, n2, [-1, -1, 0]), t.scale(n2, n2, [2 / r2.width, 2 / r2.height, 1])), n2;
        }
        function Ht(e2, i2) {
          var o2 = [e2.x, e2.y, 0, 1];
          re(o2, o2, i2);
          var r2 = o2[3];
          return { point: new t.Point(o2[0] / r2, o2[1] / r2), signedDistanceFromCamera: r2 };
        }
        function Kt(t2, e2) {
          var i2 = t2[0] / t2[3], o2 = t2[1] / t2[3];
          return i2 >= -e2[0] && i2 <= e2[0] && o2 >= -e2[1] && o2 <= e2[1];
        }
        function Yt(e2, i2, o2, r2, a2, n2, s2, l2) {
          var c2 = r2 ? e2.textSizeData : e2.iconSizeData, u2 = t.evaluateSizeForZoom(c2, o2.transform.zoom, Gt.properties[r2 ? "text-size" : "icon-size"]), h2 = [256 / o2.width * 2 + 1, 256 / o2.height * 2 + 1], p2 = r2 ? e2.text.dynamicLayoutVertexArray : e2.icon.dynamicLayoutVertexArray;
          p2.clear();
          for (var d2 = e2.lineVertexArray, _2 = r2 ? e2.text.placedSymbolArray : e2.icon.placedSymbolArray, f2 = o2.transform.width / o2.transform.height, m2 = false, g2 = 0; g2 < _2.length; g2++) {
            var v2 = _2.get(g2);
            if (v2.hidden || v2.writingMode === t.WritingMode.vertical && !m2)
              oe(v2.numGlyphs, p2);
            else {
              m2 = false;
              var y2 = [v2.anchorX, v2.anchorY, 0, 1];
              if (t.transformMat4(y2, y2, i2), Kt(y2, h2)) {
                var x2 = 0.5 + y2[3] / o2.transform.cameraToCenterDistance * 0.5, b2 = t.evaluateSizeForFeature(c2, u2, v2), w2 = s2 ? b2 * x2 : b2 / x2, E2 = new t.Point(v2.anchorX, v2.anchorY), T2 = Ht(E2, a2).point, I2 = {}, C2 = $t(v2, w2, false, l2, i2, a2, n2, e2.glyphOffsetArray, d2, p2, T2, E2, I2, f2);
                m2 = C2.useVertical, (C2.notEnoughRoom || m2 || C2.needsFlipping && $t(v2, w2, true, l2, i2, a2, n2, e2.glyphOffsetArray, d2, p2, T2, E2, I2, f2).notEnoughRoom) && oe(v2.numGlyphs, p2);
              } else
                oe(v2.numGlyphs, p2);
            }
          }
          r2 ? e2.text.dynamicLayoutVertexBuffer.updateData(p2) : e2.icon.dynamicLayoutVertexBuffer.updateData(p2);
        }
        function Jt(t2, e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2) {
          var p2 = s2.glyphStartIndex + s2.numGlyphs, d2 = s2.lineStartIndex, _2 = s2.lineStartIndex + s2.lineLength, f2 = e2.getoffsetX(s2.glyphStartIndex), m2 = e2.getoffsetX(p2 - 1), g2 = ee(t2 * f2, i2, o2, r2, a2, n2, s2.segment, d2, _2, l2, c2, u2, h2);
          if (!g2)
            return null;
          var v2 = ee(t2 * m2, i2, o2, r2, a2, n2, s2.segment, d2, _2, l2, c2, u2, h2);
          return v2 ? { first: g2, last: v2 } : null;
        }
        function Qt(e2, i2, o2, r2) {
          if (e2 === t.WritingMode.horizontal && Math.abs(o2.y - i2.y) > Math.abs(o2.x - i2.x) * r2)
            return { useVertical: true };
          return (e2 === t.WritingMode.vertical ? i2.y < o2.y : i2.x > o2.x) ? { needsFlipping: true } : null;
        }
        function $t(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2, p2, d2, _2) {
          var f2, m2 = i2 / 24, g2 = e2.lineOffsetX * i2, v2 = e2.lineOffsetY * i2;
          if (e2.numGlyphs > 1) {
            var y2 = e2.glyphStartIndex + e2.numGlyphs, x2 = e2.lineStartIndex, b2 = e2.lineStartIndex + e2.lineLength, w2 = Jt(m2, l2, g2, v2, o2, h2, p2, e2, c2, n2, d2, false);
            if (!w2)
              return { notEnoughRoom: true };
            var E2 = Ht(w2.first.point, s2).point, T2 = Ht(w2.last.point, s2).point;
            if (r2 && !o2) {
              var I2 = Qt(e2.writingMode, E2, T2, _2);
              if (I2)
                return I2;
            }
            f2 = [w2.first];
            for (var C2 = e2.glyphStartIndex + 1; C2 < y2 - 1; C2++)
              f2.push(ee(m2 * l2.getoffsetX(C2), g2, v2, o2, h2, p2, e2.segment, x2, b2, c2, n2, d2, false));
            f2.push(w2.last);
          } else {
            if (r2 && !o2) {
              var S2 = Ht(p2, a2).point, z2 = e2.lineStartIndex + e2.segment + 1, L2 = new t.Point(c2.getx(z2), c2.gety(z2)), P2 = Ht(L2, a2), D2 = P2.signedDistanceFromCamera > 0 ? P2.point : te(p2, L2, S2, 1, a2), R2 = Qt(e2.writingMode, S2, D2, _2);
              if (R2)
                return R2;
            }
            var M2 = ee(m2 * l2.getoffsetX(e2.glyphStartIndex), g2, v2, o2, h2, p2, e2.segment, e2.lineStartIndex, e2.lineStartIndex + e2.lineLength, c2, n2, d2, false);
            if (!M2)
              return { notEnoughRoom: true };
            f2 = [M2];
          }
          for (var A2 = 0, k2 = f2; A2 < k2.length; A2 += 1) {
            var B2 = k2[A2];
            t.addDynamicAttributes(u2, B2.point, B2.angle);
          }
          return {};
        }
        function te(t2, e2, i2, o2, r2) {
          var a2 = Ht(t2.add(t2.sub(e2)._unit()), r2).point, n2 = i2.sub(a2);
          return i2.add(n2._mult(o2 / n2.mag()));
        }
        function ee(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2, p2, d2) {
          var _2 = r2 ? e2 - i2 : e2 + i2, f2 = _2 > 0 ? 1 : -1, m2 = 0;
          r2 && (f2 *= -1, m2 = Math.PI), f2 < 0 && (m2 += Math.PI);
          for (var g2 = f2 > 0 ? l2 + s2 : l2 + s2 + 1, v2 = g2, y2 = a2, x2 = a2, b2 = 0, w2 = 0, E2 = Math.abs(_2); b2 + w2 <= E2; ) {
            if ((g2 += f2) < l2 || g2 >= c2)
              return null;
            if (x2 = y2, void 0 === (y2 = p2[g2])) {
              var T2 = new t.Point(u2.getx(g2), u2.gety(g2)), I2 = Ht(T2, h2);
              if (I2.signedDistanceFromCamera > 0)
                y2 = p2[g2] = I2.point;
              else {
                var C2 = g2 - f2;
                y2 = te(0 === b2 ? n2 : new t.Point(u2.getx(C2), u2.gety(C2)), T2, x2, E2 - b2 + 1, h2);
              }
            }
            b2 += w2, w2 = x2.dist(y2);
          }
          var S2 = (E2 - b2) / w2, z2 = y2.sub(x2), L2 = z2.mult(S2)._add(x2);
          return L2._add(z2._unit()._perp()._mult(o2 * f2)), { point: L2, angle: m2 + Math.atan2(y2.y - x2.y, y2.x - x2.x), tileDistance: d2 ? { prevTileDistance: g2 - f2 === v2 ? 0 : u2.gettileUnitDistanceFromAnchor(g2 - f2), lastSegmentViewportDistance: E2 - b2 } : null };
        }
        var ie = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);
        function oe(t2, e2) {
          for (var i2 = 0; i2 < t2; i2++) {
            var o2 = e2.length;
            e2.resize(o2 + 4), e2.float32.set(ie, 3 * o2);
          }
        }
        function re(t2, e2, i2) {
          var o2 = e2[0], r2 = e2[1];
          return t2[0] = i2[0] * o2 + i2[4] * r2 + i2[12], t2[1] = i2[1] * o2 + i2[5] * r2 + i2[13], t2[3] = i2[3] * o2 + i2[7] * r2 + i2[15], t2;
        }
        var ae = function(t2, e2, i2) {
          void 0 === e2 && (e2 = new qt(t2.width + 200, t2.height + 200, 25)), void 0 === i2 && (i2 = new qt(t2.width + 200, t2.height + 200, 25)), this.transform = t2, this.grid = e2, this.ignoredGrid = i2, this.pitchfactor = Math.cos(t2._pitch) * t2.cameraToCenterDistance, this.screenRightBoundary = t2.width + 100, this.screenBottomBoundary = t2.height + 100, this.gridRightBoundary = t2.width + 200, this.gridBottomBoundary = t2.height + 200;
        };
        function ne(t2, e2, i2) {
          t2[e2 + 4] = i2 ? 1 : 0;
        }
        function se(e2, i2, o2) {
          return i2 * (t.EXTENT / (e2.tileSize * Math.pow(2, o2 - e2.tileID.overscaledZ)));
        }
        ae.prototype.placeCollisionBox = function(t2, e2, i2, o2, r2) {
          var a2 = this.projectAndGetPerspectiveRatio(o2, t2.anchorPointX, t2.anchorPointY), n2 = i2 * a2.perspectiveRatio, s2 = t2.x1 * n2 + a2.point.x, l2 = t2.y1 * n2 + a2.point.y, c2 = t2.x2 * n2 + a2.point.x, u2 = t2.y2 * n2 + a2.point.y;
          return !this.isInsideGrid(s2, l2, c2, u2) || !e2 && this.grid.hitTest(s2, l2, c2, u2, r2) ? { box: [], offscreen: false } : { box: [s2, l2, c2, u2], offscreen: this.isOffscreen(s2, l2, c2, u2) };
        }, ae.prototype.approximateTileDistance = function(t2, e2, i2, o2, r2) {
          var a2 = r2 ? 1 : o2 / this.pitchfactor, n2 = t2.lastSegmentViewportDistance * i2;
          return t2.prevTileDistance + n2 + (a2 - 1) * n2 * Math.abs(Math.sin(e2));
        }, ae.prototype.placeCollisionCircles = function(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2, p2, d2) {
          var _2 = [], f2 = this.projectAnchor(c2, a2.anchorX, a2.anchorY), m2 = l2 / 24, g2 = a2.lineOffsetX * l2, v2 = a2.lineOffsetY * l2, y2 = new t.Point(a2.anchorX, a2.anchorY), x2 = Jt(m2, s2, g2, v2, false, Ht(y2, u2).point, y2, a2, n2, u2, {}, true), b2 = false, w2 = false, E2 = true, T2 = f2.perspectiveRatio * r2, I2 = 1 / (r2 * o2), C2 = 0, S2 = 0;
          x2 && (C2 = this.approximateTileDistance(x2.first.tileDistance, x2.first.angle, I2, f2.cameraDistance, p2), S2 = this.approximateTileDistance(x2.last.tileDistance, x2.last.angle, I2, f2.cameraDistance, p2));
          for (var z2 = 0; z2 < e2.length; z2 += 5) {
            var L2 = e2[z2], P2 = e2[z2 + 1], D2 = e2[z2 + 2], R2 = e2[z2 + 3];
            if (!x2 || R2 < -C2 || R2 > S2)
              ne(e2, z2, false);
            else {
              var M2 = this.projectPoint(c2, L2, P2), A2 = D2 * T2;
              if (_2.length > 0) {
                var k2 = M2.x - _2[_2.length - 4], B2 = M2.y - _2[_2.length - 3];
                if (A2 * A2 * 2 > k2 * k2 + B2 * B2) {
                  if (z2 + 8 < e2.length) {
                    var O2 = e2[z2 + 8];
                    if (O2 > -C2 && O2 < S2) {
                      ne(e2, z2, false);
                      continue;
                    }
                  }
                }
              }
              var F2 = z2 / 5;
              _2.push(M2.x, M2.y, A2, F2), ne(e2, z2, true);
              var U2 = M2.x - A2, N2 = M2.y - A2, Z2 = M2.x + A2, j2 = M2.y + A2;
              if (E2 = E2 && this.isOffscreen(U2, N2, Z2, j2), w2 = w2 || this.isInsideGrid(U2, N2, Z2, j2), !i2 && this.grid.hitTestCircle(M2.x, M2.y, A2, d2)) {
                if (!h2)
                  return { circles: [], offscreen: false };
                b2 = true;
              }
            }
          }
          return { circles: b2 || !w2 ? [] : _2, offscreen: E2 };
        }, ae.prototype.queryRenderedSymbols = function(e2) {
          if (0 === e2.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength())
            return {};
          for (var i2 = [], o2 = 1 / 0, r2 = 1 / 0, a2 = -1 / 0, n2 = -1 / 0, s2 = 0, l2 = e2; s2 < l2.length; s2 += 1) {
            var c2 = l2[s2], u2 = new t.Point(c2.x + 100, c2.y + 100);
            o2 = Math.min(o2, u2.x), r2 = Math.min(r2, u2.y), a2 = Math.max(a2, u2.x), n2 = Math.max(n2, u2.y), i2.push(u2);
          }
          for (var h2 = {}, p2 = {}, d2 = 0, _2 = this.grid.query(o2, r2, a2, n2).concat(this.ignoredGrid.query(o2, r2, a2, n2)); d2 < _2.length; d2 += 1) {
            var f2 = _2[d2], m2 = f2.key;
            if (void 0 === h2[m2.bucketInstanceId] && (h2[m2.bucketInstanceId] = {}), !h2[m2.bucketInstanceId][m2.featureIndex]) {
              var g2 = [new t.Point(f2.x1, f2.y1), new t.Point(f2.x2, f2.y1), new t.Point(f2.x2, f2.y2), new t.Point(f2.x1, f2.y2)];
              t.polygonIntersectsPolygon(i2, g2) && (h2[m2.bucketInstanceId][m2.featureIndex] = true, void 0 === p2[m2.bucketInstanceId] && (p2[m2.bucketInstanceId] = []), p2[m2.bucketInstanceId].push(m2.featureIndex));
            }
          }
          return p2;
        }, ae.prototype.insertCollisionBox = function(t2, e2, i2, o2, r2) {
          var a2 = { bucketInstanceId: i2, featureIndex: o2, collisionGroupID: r2 };
          (e2 ? this.ignoredGrid : this.grid).insert(a2, t2[0], t2[1], t2[2], t2[3]);
        }, ae.prototype.insertCollisionCircles = function(t2, e2, i2, o2, r2) {
          for (var a2 = e2 ? this.ignoredGrid : this.grid, n2 = { bucketInstanceId: i2, featureIndex: o2, collisionGroupID: r2 }, s2 = 0; s2 < t2.length; s2 += 4)
            a2.insertCircle(n2, t2[s2], t2[s2 + 1], t2[s2 + 2]);
        }, ae.prototype.projectAnchor = function(t2, e2, i2) {
          var o2 = [e2, i2, 0, 1];
          return re(o2, o2, t2), { perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / o2[3] * 0.5, cameraDistance: o2[3] };
        }, ae.prototype.projectPoint = function(e2, i2, o2) {
          var r2 = [i2, o2, 0, 1];
          return re(r2, r2, e2), new t.Point((r2[0] / r2[3] + 1) / 2 * this.transform.width + 100, (-r2[1] / r2[3] + 1) / 2 * this.transform.height + 100);
        }, ae.prototype.projectAndGetPerspectiveRatio = function(e2, i2, o2) {
          var r2 = [i2, o2, 0, 1];
          return re(r2, r2, e2), { point: new t.Point((r2[0] / r2[3] + 1) / 2 * this.transform.width + 100, (-r2[1] / r2[3] + 1) / 2 * this.transform.height + 100), perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / r2[3] * 0.5 };
        }, ae.prototype.isOffscreen = function(t2, e2, i2, o2) {
          return i2 < 100 || t2 >= this.screenRightBoundary || o2 < 100 || e2 > this.screenBottomBoundary;
        }, ae.prototype.isInsideGrid = function(t2, e2, i2, o2) {
          return i2 >= 0 && t2 < this.gridRightBoundary && o2 >= 0 && e2 < this.gridBottomBoundary;
        };
        var le = function(t2, e2, i2, o2) {
          this.opacity = t2 ? Math.max(0, Math.min(1, t2.opacity + (t2.placed ? e2 : -e2))) : o2 && i2 ? 1 : 0, this.placed = i2;
        };
        le.prototype.isHidden = function() {
          return 0 === this.opacity && !this.placed;
        };
        var ce = function(t2, e2, i2, o2, r2) {
          this.text = new le(t2 ? t2.text : null, e2, i2, r2), this.icon = new le(t2 ? t2.icon : null, e2, o2, r2);
        };
        ce.prototype.isHidden = function() {
          return this.text.isHidden() && this.icon.isHidden();
        };
        var ue = function(t2, e2, i2) {
          this.text = t2, this.icon = e2, this.skipFade = i2;
        }, he = function(t2, e2, i2, o2, r2) {
          this.bucketInstanceId = t2, this.featureIndex = e2, this.sourceLayerIndex = i2, this.bucketIndex = o2, this.tileID = r2;
        }, pe = function(t2) {
          this.crossSourceCollisions = t2, this.maxGroupID = 0, this.collisionGroups = {};
        };
        pe.prototype.get = function(t2) {
          if (this.crossSourceCollisions)
            return { ID: 0, predicate: null };
          if (!this.collisionGroups[t2]) {
            var e2 = ++this.maxGroupID;
            this.collisionGroups[t2] = { ID: e2, predicate: function(t3) {
              return t3.collisionGroupID === e2;
            } };
          }
          return this.collisionGroups[t2];
        };
        var de = function(t2, e2, i2) {
          this.transform = t2.clone(), this.collisionIndex = new ae(this.transform), this.placements = {}, this.opacities = {}, this.stale = false, this.commitTime = 0, this.fadeDuration = e2, this.retainedQueryData = {}, this.collisionGroups = new pe(i2);
        };
        function _e(t2, e2, i2) {
          t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0);
        }
        de.prototype.placeLayerTile = function(e2, i2, o2, r2) {
          var a2 = i2.getBucket(e2), n2 = i2.latestFeatureIndex;
          if (a2 && n2 && e2.id === a2.layerIds[0]) {
            var s2 = i2.collisionBoxArray, l2 = a2.layers[0].layout, c2 = Math.pow(2, this.transform.zoom - i2.tileID.overscaledZ), u2 = i2.tileSize / t.EXTENT, h2 = this.transform.calculatePosMatrix(i2.tileID.toUnwrapped()), p2 = Wt(h2, "map" === l2.get("text-pitch-alignment"), "map" === l2.get("text-rotation-alignment"), this.transform, se(i2, 1, this.transform.zoom)), d2 = Wt(h2, "map" === l2.get("icon-pitch-alignment"), "map" === l2.get("icon-rotation-alignment"), this.transform, se(i2, 1, this.transform.zoom));
            this.retainedQueryData[a2.bucketInstanceId] = new he(a2.bucketInstanceId, n2, a2.sourceLayerIndex, a2.index, i2.tileID), this.placeLayerBucket(a2, h2, p2, d2, c2, u2, o2, i2.holdingForFade(), r2, s2);
          }
        }, de.prototype.placeLayerBucket = function(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2) {
          var h2 = e2.layers[0].layout, p2 = t.evaluateSizeForZoom(e2.textSizeData, this.transform.zoom, t.properties.layout.properties["text-size"]), d2 = h2.get("text-optional"), _2 = h2.get("icon-optional"), f2 = h2.get("text-allow-overlap"), m2 = h2.get("icon-allow-overlap"), g2 = f2 && (m2 || !e2.hasIconData() || _2), v2 = m2 && (f2 || !e2.hasTextData() || d2), y2 = this.collisionGroups.get(e2.sourceID);
          !e2.collisionArrays && u2 && e2.deserializeCollisionBoxes(u2);
          for (var x2 = 0; x2 < e2.symbolInstances.length; x2++) {
            var b2 = e2.symbolInstances.get(x2);
            if (!c2[b2.crossTileID]) {
              if (l2) {
                this.placements[b2.crossTileID] = new ue(false, false, false);
                continue;
              }
              var w2 = false, E2 = false, T2 = true, I2 = null, C2 = null, S2 = null, z2 = 0, L2 = 0, P2 = e2.collisionArrays[x2];
              P2.textFeatureIndex && (z2 = P2.textFeatureIndex), P2.textBox && (w2 = (I2 = this.collisionIndex.placeCollisionBox(P2.textBox, h2.get("text-allow-overlap"), n2, i2, y2.predicate)).box.length > 0, T2 = T2 && I2.offscreen);
              var D2 = P2.textCircles;
              if (D2) {
                var R2 = e2.text.placedSymbolArray.get(b2.horizontalPlacedTextSymbolIndex), M2 = t.evaluateSizeForFeature(e2.textSizeData, p2, R2);
                C2 = this.collisionIndex.placeCollisionCircles(D2, h2.get("text-allow-overlap"), a2, n2, R2, e2.lineVertexArray, e2.glyphOffsetArray, M2, i2, o2, s2, "map" === h2.get("text-pitch-alignment"), y2.predicate), w2 = h2.get("text-allow-overlap") || C2.circles.length > 0, T2 = T2 && C2.offscreen;
              }
              P2.iconFeatureIndex && (L2 = P2.iconFeatureIndex), P2.iconBox && (E2 = (S2 = this.collisionIndex.placeCollisionBox(P2.iconBox, h2.get("icon-allow-overlap"), n2, i2, y2.predicate)).box.length > 0, T2 = T2 && S2.offscreen);
              var A2 = d2 || 0 === b2.numGlyphVertices && 0 === b2.numVerticalGlyphVertices, k2 = _2 || 0 === b2.numIconVertices;
              A2 || k2 ? k2 ? A2 || (E2 = E2 && w2) : w2 = E2 && w2 : E2 = w2 = E2 && w2, w2 && I2 && this.collisionIndex.insertCollisionBox(I2.box, h2.get("text-ignore-placement"), e2.bucketInstanceId, z2, y2.ID), E2 && S2 && this.collisionIndex.insertCollisionBox(S2.box, h2.get("icon-ignore-placement"), e2.bucketInstanceId, L2, y2.ID), w2 && C2 && this.collisionIndex.insertCollisionCircles(C2.circles, h2.get("text-ignore-placement"), e2.bucketInstanceId, z2, y2.ID), this.placements[b2.crossTileID] = new ue(w2 || g2, E2 || v2, T2 || e2.justReloaded), c2[b2.crossTileID] = true;
            }
          }
          e2.justReloaded = false;
        }, de.prototype.commit = function(t2, e2) {
          this.commitTime = e2;
          var i2 = false, o2 = t2 && 0 !== this.fadeDuration ? (this.commitTime - t2.commitTime) / this.fadeDuration : 1, r2 = t2 ? t2.opacities : {};
          for (var a2 in this.placements) {
            var n2 = this.placements[a2], s2 = r2[a2];
            s2 ? (this.opacities[a2] = new ce(s2, o2, n2.text, n2.icon), i2 = i2 || n2.text !== s2.text.placed || n2.icon !== s2.icon.placed) : (this.opacities[a2] = new ce(null, o2, n2.text, n2.icon, n2.skipFade), i2 = i2 || n2.text || n2.icon);
          }
          for (var l2 in r2) {
            var c2 = r2[l2];
            if (!this.opacities[l2]) {
              var u2 = new ce(c2, o2, false, false);
              u2.isHidden() || (this.opacities[l2] = u2, i2 = i2 || c2.text.placed || c2.icon.placed);
            }
          }
          i2 ? this.lastPlacementChangeTime = e2 : "number" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = t2 ? t2.lastPlacementChangeTime : e2);
        }, de.prototype.updateLayerOpacities = function(t2, e2) {
          for (var i2 = {}, o2 = 0, r2 = e2; o2 < r2.length; o2 += 1) {
            var a2 = r2[o2], n2 = a2.getBucket(t2);
            n2 && a2.latestFeatureIndex && t2.id === n2.layerIds[0] && this.updateBucketOpacities(n2, i2, a2.collisionBoxArray);
          }
        }, de.prototype.updateBucketOpacities = function(t2, e2, i2) {
          t2.hasTextData() && t2.text.opacityVertexArray.clear(), t2.hasIconData() && t2.icon.opacityVertexArray.clear(), t2.hasCollisionBoxData() && t2.collisionBox.collisionVertexArray.clear(), t2.hasCollisionCircleData() && t2.collisionCircle.collisionVertexArray.clear();
          var o2 = t2.layers[0].layout, r2 = new ce(null, 0, false, false, true), a2 = o2.get("text-allow-overlap"), n2 = o2.get("icon-allow-overlap"), s2 = new ce(null, 0, a2 && (n2 || !t2.hasIconData() || o2.get("icon-optional")), n2 && (a2 || !t2.hasTextData() || o2.get("text-optional")), true);
          !t2.collisionArrays && i2 && (t2.hasCollisionBoxData() || t2.hasCollisionCircleData()) && t2.deserializeCollisionBoxes(i2);
          for (var l2 = 0; l2 < t2.symbolInstances.length; l2++) {
            var c2 = t2.symbolInstances.get(l2), u2 = e2[c2.crossTileID], h2 = this.opacities[c2.crossTileID];
            u2 ? h2 = r2 : h2 || (h2 = s2, this.opacities[c2.crossTileID] = h2), e2[c2.crossTileID] = true;
            var p2 = c2.numGlyphVertices > 0 || c2.numVerticalGlyphVertices > 0, d2 = c2.numIconVertices > 0;
            if (p2) {
              for (var _2 = we(h2.text), f2 = (c2.numGlyphVertices + c2.numVerticalGlyphVertices) / 4, m2 = 0; m2 < f2; m2++)
                t2.text.opacityVertexArray.emplaceBack(_2);
              t2.text.placedSymbolArray.get(c2.horizontalPlacedTextSymbolIndex).hidden = h2.text.isHidden(), c2.verticalPlacedTextSymbolIndex >= 0 && (t2.text.placedSymbolArray.get(c2.verticalPlacedTextSymbolIndex).hidden = h2.text.isHidden());
            }
            if (d2) {
              for (var g2 = we(h2.icon), v2 = 0; v2 < c2.numIconVertices / 4; v2++)
                t2.icon.opacityVertexArray.emplaceBack(g2);
              t2.icon.placedSymbolArray.get(l2).hidden = h2.icon.isHidden();
            }
            if (t2.hasCollisionBoxData() || t2.hasCollisionCircleData()) {
              var y2 = t2.collisionArrays[l2];
              if (y2) {
                y2.textBox && _e(t2.collisionBox.collisionVertexArray, h2.text.placed, false), y2.iconBox && _e(t2.collisionBox.collisionVertexArray, h2.icon.placed, false);
                var x2 = y2.textCircles;
                if (x2 && t2.hasCollisionCircleData())
                  for (var b2 = 0; b2 < x2.length; b2 += 5) {
                    var w2 = u2 || 0 === x2[b2 + 4];
                    _e(t2.collisionCircle.collisionVertexArray, h2.text.placed, w2);
                  }
              }
            }
          }
          t2.sortFeatures(this.transform.angle), this.retainedQueryData[t2.bucketInstanceId] && (this.retainedQueryData[t2.bucketInstanceId].featureSortOrder = t2.featureSortOrder), t2.hasTextData() && t2.text.opacityVertexBuffer && t2.text.opacityVertexBuffer.updateData(t2.text.opacityVertexArray), t2.hasIconData() && t2.icon.opacityVertexBuffer && t2.icon.opacityVertexBuffer.updateData(t2.icon.opacityVertexArray), t2.hasCollisionBoxData() && t2.collisionBox.collisionVertexBuffer && t2.collisionBox.collisionVertexBuffer.updateData(t2.collisionBox.collisionVertexArray), t2.hasCollisionCircleData() && t2.collisionCircle.collisionVertexBuffer && t2.collisionCircle.collisionVertexBuffer.updateData(t2.collisionCircle.collisionVertexArray);
        }, de.prototype.symbolFadeChange = function(t2) {
          return 0 === this.fadeDuration ? 1 : (t2 - this.commitTime) / this.fadeDuration;
        }, de.prototype.hasTransitions = function(t2) {
          return this.stale || t2 - this.lastPlacementChangeTime < this.fadeDuration;
        }, de.prototype.stillRecent = function(t2) {
          return this.commitTime + this.fadeDuration > t2;
        }, de.prototype.setStale = function() {
          this.stale = true;
        };
        var fe = Math.pow(2, 25), me = Math.pow(2, 24), ge = Math.pow(2, 17), ve = Math.pow(2, 16), ye = Math.pow(2, 9), xe = Math.pow(2, 8), be = Math.pow(2, 1);
        function we(t2) {
          if (0 === t2.opacity && !t2.placed)
            return 0;
          if (1 === t2.opacity && t2.placed)
            return 4294967295;
          var e2 = t2.placed ? 1 : 0, i2 = Math.floor(127 * t2.opacity);
          return i2 * fe + e2 * me + i2 * ge + e2 * ve + i2 * ye + e2 * xe + i2 * be + e2;
        }
        var Ee = function() {
          this._currentTileIndex = 0, this._seenCrossTileIDs = {};
        };
        Ee.prototype.continuePlacement = function(t2, e2, i2, o2, r2) {
          for (; this._currentTileIndex < t2.length; ) {
            var a2 = t2[this._currentTileIndex];
            if (e2.placeLayerTile(o2, a2, i2, this._seenCrossTileIDs), this._currentTileIndex++, r2())
              return true;
          }
        };
        var Te = function(t2, e2, i2, o2, r2, a2) {
          this.placement = new de(t2, r2, a2), this._currentPlacementIndex = e2.length - 1, this._forceFullPlacement = i2, this._showCollisionBoxes = o2, this._done = false;
        };
        Te.prototype.isDone = function() {
          return this._done;
        }, Te.prototype.continuePlacement = function(e2, i2, o2) {
          for (var r2 = this, a2 = t.browser.now(), n2 = function() {
            var e3 = t.browser.now() - a2;
            return !r2._forceFullPlacement && e3 > 2;
          }; this._currentPlacementIndex >= 0; ) {
            var s2 = i2[e2[this._currentPlacementIndex]], l2 = this.placement.collisionIndex.transform.zoom;
            if ("symbol" === s2.type && (!s2.minzoom || s2.minzoom <= l2) && (!s2.maxzoom || s2.maxzoom > l2)) {
              if (this._inProgressLayer || (this._inProgressLayer = new Ee()), this._inProgressLayer.continuePlacement(o2[s2.source], this.placement, this._showCollisionBoxes, s2, n2))
                return;
              delete this._inProgressLayer;
            }
            this._currentPlacementIndex--;
          }
          this._done = true;
        }, Te.prototype.commit = function(t2, e2) {
          return this.placement.commit(t2, e2), this.placement;
        };
        var Ie = 512 / t.EXTENT / 2, Ce = function(t2, e2, i2) {
          this.tileID = t2, this.indexedSymbolInstances = {}, this.bucketInstanceId = i2;
          for (var o2 = 0; o2 < e2.length; o2++) {
            var r2 = e2.get(o2), a2 = r2.key;
            this.indexedSymbolInstances[a2] || (this.indexedSymbolInstances[a2] = []), this.indexedSymbolInstances[a2].push({ crossTileID: r2.crossTileID, coord: this.getScaledCoordinates(r2, t2) });
          }
        };
        Ce.prototype.getScaledCoordinates = function(e2, i2) {
          var o2 = i2.canonical.z - this.tileID.canonical.z, r2 = Ie / Math.pow(2, o2);
          return { x: Math.floor((i2.canonical.x * t.EXTENT + e2.anchorX) * r2), y: Math.floor((i2.canonical.y * t.EXTENT + e2.anchorY) * r2) };
        }, Ce.prototype.findMatches = function(t2, e2, i2) {
          for (var o2 = this.tileID.canonical.z < e2.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e2.canonical.z), r2 = 0; r2 < t2.length; r2++) {
            var a2 = t2.get(r2);
            if (!a2.crossTileID) {
              var n2 = this.indexedSymbolInstances[a2.key];
              if (n2)
                for (var s2 = this.getScaledCoordinates(a2, e2), l2 = 0, c2 = n2; l2 < c2.length; l2 += 1) {
                  var u2 = c2[l2];
                  if (Math.abs(u2.coord.x - s2.x) <= o2 && Math.abs(u2.coord.y - s2.y) <= o2 && !i2[u2.crossTileID]) {
                    i2[u2.crossTileID] = true, a2.crossTileID = u2.crossTileID;
                    break;
                  }
                }
            }
          }
        };
        var Se = function() {
          this.maxCrossTileID = 0;
        };
        Se.prototype.generate = function() {
          return ++this.maxCrossTileID;
        };
        var ze = function() {
          this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;
        };
        ze.prototype.handleWrapJump = function(t2) {
          var e2 = Math.round((t2 - this.lng) / 360);
          if (0 !== e2)
            for (var i2 in this.indexes) {
              var o2 = this.indexes[i2], r2 = {};
              for (var a2 in o2) {
                var n2 = o2[a2];
                n2.tileID = n2.tileID.unwrapTo(n2.tileID.wrap + e2), r2[n2.tileID.key] = n2;
              }
              this.indexes[i2] = r2;
            }
          this.lng = t2;
        }, ze.prototype.addBucket = function(t2, e2, i2) {
          if (this.indexes[t2.overscaledZ] && this.indexes[t2.overscaledZ][t2.key]) {
            if (this.indexes[t2.overscaledZ][t2.key].bucketInstanceId === e2.bucketInstanceId)
              return false;
            this.removeBucketCrossTileIDs(t2.overscaledZ, this.indexes[t2.overscaledZ][t2.key]);
          }
          for (var o2 = 0; o2 < e2.symbolInstances.length; o2++) {
            e2.symbolInstances.get(o2).crossTileID = 0;
          }
          this.usedCrossTileIDs[t2.overscaledZ] || (this.usedCrossTileIDs[t2.overscaledZ] = {});
          var r2 = this.usedCrossTileIDs[t2.overscaledZ];
          for (var a2 in this.indexes) {
            var n2 = this.indexes[a2];
            if (Number(a2) > t2.overscaledZ)
              for (var s2 in n2) {
                var l2 = n2[s2];
                l2.tileID.isChildOf(t2) && l2.findMatches(e2.symbolInstances, t2, r2);
              }
            else {
              var c2 = n2[t2.scaledTo(Number(a2)).key];
              c2 && c2.findMatches(e2.symbolInstances, t2, r2);
            }
          }
          for (var u2 = 0; u2 < e2.symbolInstances.length; u2++) {
            var h2 = e2.symbolInstances.get(u2);
            h2.crossTileID || (h2.crossTileID = i2.generate(), r2[h2.crossTileID] = true);
          }
          return void 0 === this.indexes[t2.overscaledZ] && (this.indexes[t2.overscaledZ] = {}), this.indexes[t2.overscaledZ][t2.key] = new Ce(t2, e2.symbolInstances, e2.bucketInstanceId), true;
        }, ze.prototype.removeBucketCrossTileIDs = function(t2, e2) {
          for (var i2 in e2.indexedSymbolInstances)
            for (var o2 = 0, r2 = e2.indexedSymbolInstances[i2]; o2 < r2.length; o2 += 1) {
              var a2 = r2[o2];
              delete this.usedCrossTileIDs[t2][a2.crossTileID];
            }
        }, ze.prototype.removeStaleBuckets = function(t2) {
          var e2 = false;
          for (var i2 in this.indexes) {
            var o2 = this.indexes[i2];
            for (var r2 in o2)
              t2[o2[r2].bucketInstanceId] || (this.removeBucketCrossTileIDs(i2, o2[r2]), delete o2[r2], e2 = true);
          }
          return e2;
        };
        var Le = function() {
          this.layerIndexes = {}, this.crossTileIDs = new Se(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};
        };
        Le.prototype.addLayer = function(t2, e2, i2) {
          var o2 = this.layerIndexes[t2.id];
          void 0 === o2 && (o2 = this.layerIndexes[t2.id] = new ze());
          var r2 = false, a2 = {};
          o2.handleWrapJump(i2);
          for (var n2 = 0, s2 = e2; n2 < s2.length; n2 += 1) {
            var l2 = s2[n2], c2 = l2.getBucket(t2);
            c2 && t2.id === c2.layerIds[0] && (c2.bucketInstanceId || (c2.bucketInstanceId = ++this.maxBucketInstanceId), o2.addBucket(l2.tileID, c2, this.crossTileIDs) && (r2 = true), a2[c2.bucketInstanceId] = true);
          }
          return o2.removeStaleBuckets(a2) && (r2 = true), r2;
        }, Le.prototype.pruneUnusedLayers = function(t2) {
          var e2 = {};
          for (var i2 in t2.forEach(function(t3) {
            e2[t3] = true;
          }), this.layerIndexes)
            e2[i2] || delete this.layerIndexes[i2];
        };
        var Pe = function(e2, i2) {
          return t.emitValidationErrors(e2, i2 && i2.filter(function(t2) {
            return "source.canvas" !== t2.identifier;
          }));
        }, De = t.pick(kt, ["addLayer", "removeLayer", "setPaintProperty", "setLayoutProperty", "setFilter", "addSource", "removeSource", "setLayerZoomRange", "setLight", "setTransition", "setGeoJSONSourceData"]), Re = t.pick(kt, ["setCenter", "setZoom", "setBearing", "setPitch"]), Me = function(e2) {
          function i2(o2, r2) {
            var a2 = this;
            void 0 === r2 && (r2 = {}), e2.call(this), this.map = o2, this.dispatcher = new w((Dt || (Dt = new Pt()), Dt), this), this.imageManager = new h(), this.glyphManager = new g(o2._transformRequest, r2.localIdeographFontFamily), this.lineAtlas = new b(256, 512), this.crossTileSymbolIndex = new Le(), this._layers = {}, this._order = [], this.sourceCaches = {}, this.zoomHistory = new t.ZoomHistory(), this._loaded = false, this._resetUpdates(), this.dispatcher.broadcast("setReferrer", t.getReferrer());
            var n2 = this;
            this._rtlTextPluginCallback = i2.registerForPluginAvailability(function(t2) {
              for (var e3 in n2.dispatcher.broadcast("loadRTLTextPlugin", t2.pluginURL, t2.completionCallback), n2.sourceCaches)
                n2.sourceCaches[e3].reload();
            }), this.on("data", function(t2) {
              if ("source" === t2.dataType && "metadata" === t2.sourceDataType) {
                var e3 = a2.sourceCaches[t2.sourceId];
                if (e3) {
                  var i3 = e3.getSource();
                  if (i3 && i3.vectorLayerIds)
                    for (var o3 in a2._layers) {
                      var r3 = a2._layers[o3];
                      r3.source === i3.id && a2._validateLayer(r3);
                    }
                }
              }
            });
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.loadURL = function(e3, i3) {
            var o2 = this;
            void 0 === i3 && (i3 = {}), this.fire(new t.Event("dataloading", { dataType: "style" }));
            var r2 = "boolean" == typeof i3.validate ? i3.validate : !t.isMapboxURL(e3);
            e3 = t.normalizeStyleURL(e3, i3.accessToken);
            var a2 = this.map._transformRequest(e3, t.ResourceType.Style);
            this._request = t.getJSON(a2, function(e4, i4) {
              o2._request = null, e4 ? o2.fire(new t.ErrorEvent(e4)) : i4 && o2._load(i4, r2);
            });
          }, i2.prototype.loadJSON = function(e3, i3) {
            var o2 = this;
            void 0 === i3 && (i3 = {}), this.fire(new t.Event("dataloading", { dataType: "style" })), this._request = t.browser.frame(function() {
              o2._request = null, o2._load(e3, false !== i3.validate);
            });
          }, i2.prototype._load = function(e3, i3) {
            var o2 = this;
            if (!i3 || !Pe(this, t.validateStyle(e3))) {
              for (var r2 in this._loaded = true, this.stylesheet = e3, e3.sources)
                this.addSource(r2, e3.sources[r2], { validate: false });
              e3.sprite ? this._spriteRequest = function(e4, i4, o3) {
                var r3, a3, n3, s3 = t.browser.devicePixelRatio > 1 ? "@2x" : "", l3 = t.getJSON(i4(t.normalizeSpriteURL(e4, s3, ".json"), t.ResourceType.SpriteJSON), function(t2, e5) {
                  l3 = null, n3 || (n3 = t2, r3 = e5, u2());
                }), c2 = t.getImage(i4(t.normalizeSpriteURL(e4, s3, ".png"), t.ResourceType.SpriteImage), function(t2, e5) {
                  c2 = null, n3 || (n3 = t2, a3 = e5, u2());
                });
                function u2() {
                  if (n3)
                    o3(n3);
                  else if (r3 && a3) {
                    var e5 = t.browser.getImageData(a3), i5 = {};
                    for (var s4 in r3) {
                      var l4 = r3[s4], c3 = l4.width, u3 = l4.height, h2 = l4.x, p2 = l4.y, d2 = l4.sdf, _2 = l4.pixelRatio, f2 = new t.RGBAImage({ width: c3, height: u3 });
                      t.RGBAImage.copy(e5, f2, { x: h2, y: p2 }, { x: 0, y: 0 }, { width: c3, height: u3 }), i5[s4] = { data: f2, pixelRatio: _2, sdf: d2 };
                    }
                    o3(null, i5);
                  }
                }
                return { cancel: function() {
                  l3 && (l3.cancel(), l3 = null), c2 && (c2.cancel(), c2 = null);
                } };
              }(e3.sprite, this.map._transformRequest, function(e4, i4) {
                if (o2._spriteRequest = null, e4)
                  o2.fire(new t.ErrorEvent(e4));
                else if (i4)
                  for (var r3 in i4)
                    o2.imageManager.addImage(r3, i4[r3]);
                o2.imageManager.setLoaded(true), o2.fire(new t.Event("data", { dataType: "style" }));
              }) : this.imageManager.setLoaded(true), this.glyphManager.setURL(e3.glyphs);
              var a2 = At(this.stylesheet.layers);
              this._order = a2.map(function(t2) {
                return t2.id;
              }), this._layers = {};
              for (var n2 = 0, s2 = a2; n2 < s2.length; n2 += 1) {
                var l2 = s2[n2];
                (l2 = t.createStyleLayer(l2)).setEventedParent(this, { layer: { id: l2.id } }), this._layers[l2.id] = l2;
              }
              this.dispatcher.broadcast("setLayers", this._serializeLayers(this._order)), this.light = new x(this.stylesheet.light), this.fire(new t.Event("data", { dataType: "style" })), this.fire(new t.Event("style.load"));
            }
          }, i2.prototype._validateLayer = function(e3) {
            var i3 = this.sourceCaches[e3.source];
            if (i3) {
              var o2 = e3.sourceLayer;
              if (o2) {
                var r2 = i3.getSource();
                ("geojson" === r2.type || r2.vectorLayerIds && -1 === r2.vectorLayerIds.indexOf(o2)) && this.fire(new t.ErrorEvent(new Error('Source layer "' + o2 + '" does not exist on source "' + r2.id + '" as specified by style layer "' + e3.id + '"')));
              }
            }
          }, i2.prototype.loaded = function() {
            if (!this._loaded)
              return false;
            if (Object.keys(this._updatedSources).length)
              return false;
            for (var t2 in this.sourceCaches)
              if (!this.sourceCaches[t2].loaded())
                return false;
            return !!this.imageManager.isLoaded();
          }, i2.prototype._serializeLayers = function(t2) {
            for (var e3 = [], i3 = 0, o2 = t2; i3 < o2.length; i3 += 1) {
              var r2 = o2[i3], a2 = this._layers[r2];
              "custom" !== a2.type && e3.push(a2.serialize());
            }
            return e3;
          }, i2.prototype.hasTransitions = function() {
            if (this.light && this.light.hasTransition())
              return true;
            for (var t2 in this.sourceCaches)
              if (this.sourceCaches[t2].hasTransition())
                return true;
            for (var e3 in this._layers)
              if (this._layers[e3].hasTransition())
                return true;
            return false;
          }, i2.prototype._checkLoaded = function() {
            if (!this._loaded)
              throw new Error("Style is not done loading");
          }, i2.prototype.update = function(e3) {
            if (this._loaded) {
              var i3 = this._changed;
              if (this._changed) {
                var o2 = Object.keys(this._updatedLayers), r2 = Object.keys(this._removedLayers);
                for (var a2 in (o2.length || r2.length) && this._updateWorkerLayers(o2, r2), this._updatedSources) {
                  var n2 = this._updatedSources[a2];
                  "reload" === n2 ? this._reloadSource(a2) : "clear" === n2 && this._clearSource(a2);
                }
                for (var s2 in this._updatedPaintProps)
                  this._layers[s2].updateTransitions(e3);
                this.light.updateTransitions(e3), this._resetUpdates();
              }
              for (var l2 in this.sourceCaches)
                this.sourceCaches[l2].used = false;
              for (var c2 = 0, u2 = this._order; c2 < u2.length; c2 += 1) {
                var h2 = u2[c2], p2 = this._layers[h2];
                p2.recalculate(e3), !p2.isHidden(e3.zoom) && p2.source && (this.sourceCaches[p2.source].used = true);
              }
              this.light.recalculate(e3), this.z = e3.zoom, i3 && this.fire(new t.Event("data", { dataType: "style" }));
            }
          }, i2.prototype._updateWorkerLayers = function(t2, e3) {
            this.dispatcher.broadcast("updateLayers", { layers: this._serializeLayers(t2), removedIds: e3 });
          }, i2.prototype._resetUpdates = function() {
            this._changed = false, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {};
          }, i2.prototype.setState = function(e3) {
            var i3 = this;
            if (this._checkLoaded(), Pe(this, t.validateStyle(e3)))
              return false;
            (e3 = t.clone(e3)).layers = At(e3.layers);
            var o2 = Vt(this.serialize(), e3).filter(function(t2) {
              return !(t2.command in Re);
            });
            if (0 === o2.length)
              return false;
            var r2 = o2.filter(function(t2) {
              return !(t2.command in De);
            });
            if (r2.length > 0)
              throw new Error("Unimplemented: " + r2.map(function(t2) {
                return t2.command;
              }).join(", ") + ".");
            return o2.forEach(function(t2) {
              "setTransition" !== t2.command && i3[t2.command].apply(i3, t2.args);
            }), this.stylesheet = e3, true;
          }, i2.prototype.addImage = function(e3, i3) {
            if (this.getImage(e3))
              return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));
            this.imageManager.addImage(e3, i3), this.fire(new t.Event("data", { dataType: "style" }));
          }, i2.prototype.getImage = function(t2) {
            return this.imageManager.getImage(t2);
          }, i2.prototype.removeImage = function(e3) {
            if (!this.getImage(e3))
              return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));
            this.imageManager.removeImage(e3), this.fire(new t.Event("data", { dataType: "style" }));
          }, i2.prototype.listImages = function() {
            return this._checkLoaded(), this.imageManager.listImages();
          }, i2.prototype.addSource = function(e3, i3, o2) {
            var r2 = this;
            if (void 0 === o2 && (o2 = {}), this._checkLoaded(), void 0 !== this.sourceCaches[e3])
              throw new Error("There is already a source with this ID");
            if (!i3.type)
              throw new Error("The type property must be defined, but the only the following properties were given: " + Object.keys(i3).join(", ") + ".");
            if (!(["vector", "raster", "geojson", "video", "image"].indexOf(i3.type) >= 0) || !this._validate(t.validateStyle.source, "sources." + e3, i3, null, o2)) {
              this.map && this.map._collectResourceTiming && (i3.collectResourceTiming = true);
              var a2 = this.sourceCaches[e3] = new Ct(e3, i3, this.dispatcher);
              a2.style = this, a2.setEventedParent(this, function() {
                return { isSourceLoaded: r2.loaded(), source: a2.serialize(), sourceId: e3 };
              }), a2.onAdd(this.map), this._changed = true;
            }
          }, i2.prototype.removeSource = function(e3) {
            if (this._checkLoaded(), void 0 === this.sourceCaches[e3])
              throw new Error("There is no source with this ID");
            for (var i3 in this._layers)
              if (this._layers[i3].source === e3)
                return this.fire(new t.ErrorEvent(new Error('Source "' + e3 + '" cannot be removed while layer "' + i3 + '" is using it.')));
            var o2 = this.sourceCaches[e3];
            delete this.sourceCaches[e3], delete this._updatedSources[e3], o2.fire(new t.Event("data", { sourceDataType: "metadata", dataType: "source", sourceId: e3 })), o2.setEventedParent(null), o2.clearTiles(), o2.onRemove && o2.onRemove(this.map), this._changed = true;
          }, i2.prototype.setGeoJSONSourceData = function(t2, e3) {
            this._checkLoaded(), this.sourceCaches[t2].getSource().setData(e3), this._changed = true;
          }, i2.prototype.getSource = function(t2) {
            return this.sourceCaches[t2] && this.sourceCaches[t2].getSource();
          }, i2.prototype.addLayer = function(e3, i3, o2) {
            void 0 === o2 && (o2 = {}), this._checkLoaded();
            var r2 = e3.id;
            if (this.getLayer(r2))
              this.fire(new t.ErrorEvent(new Error('Layer with id "' + r2 + '" already exists on this map')));
            else {
              var a2;
              if ("custom" === e3.type) {
                if (Pe(this, t.validateCustomStyleLayer(e3)))
                  return;
                a2 = t.createStyleLayer(e3);
              } else {
                if ("object" == typeof e3.source && (this.addSource(r2, e3.source), e3 = t.clone(e3), e3 = t.extend(e3, { source: r2 })), this._validate(t.validateStyle.layer, "layers." + r2, e3, { arrayIndex: -1 }, o2))
                  return;
                a2 = t.createStyleLayer(e3), this._validateLayer(a2), a2.setEventedParent(this, { layer: { id: r2 } });
              }
              var n2 = i3 ? this._order.indexOf(i3) : this._order.length;
              if (i3 && -1 === n2)
                this.fire(new t.ErrorEvent(new Error('Layer with id "' + i3 + '" does not exist on this map.')));
              else {
                if (this._order.splice(n2, 0, r2), this._layerOrderChanged = true, this._layers[r2] = a2, this._removedLayers[r2] && a2.source && "custom" !== a2.type) {
                  var s2 = this._removedLayers[r2];
                  delete this._removedLayers[r2], s2.type !== a2.type ? this._updatedSources[a2.source] = "clear" : (this._updatedSources[a2.source] = "reload", this.sourceCaches[a2.source].pause());
                }
                this._updateLayer(a2), a2.onAdd && a2.onAdd(this.map);
              }
            }
          }, i2.prototype.moveLayer = function(e3, i3) {
            if (this._checkLoaded(), this._changed = true, this._layers[e3]) {
              if (e3 !== i3) {
                var o2 = this._order.indexOf(e3);
                this._order.splice(o2, 1);
                var r2 = i3 ? this._order.indexOf(i3) : this._order.length;
                i3 && -1 === r2 ? this.fire(new t.ErrorEvent(new Error('Layer with id "' + i3 + '" does not exist on this map.'))) : (this._order.splice(r2, 0, e3), this._layerOrderChanged = true);
              }
            } else
              this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be moved.")));
          }, i2.prototype.removeLayer = function(e3) {
            this._checkLoaded();
            var i3 = this._layers[e3];
            if (i3) {
              i3.setEventedParent(null);
              var o2 = this._order.indexOf(e3);
              this._order.splice(o2, 1), this._layerOrderChanged = true, this._changed = true, this._removedLayers[e3] = i3, delete this._layers[e3], delete this._updatedLayers[e3], delete this._updatedPaintProps[e3], i3.onRemove && i3.onRemove(this.map);
            } else
              this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be removed.")));
          }, i2.prototype.getLayer = function(t2) {
            return this._layers[t2];
          }, i2.prototype.setLayerZoomRange = function(e3, i3, o2) {
            this._checkLoaded();
            var r2 = this.getLayer(e3);
            r2 ? r2.minzoom === i3 && r2.maxzoom === o2 || (null != i3 && (r2.minzoom = i3), null != o2 && (r2.maxzoom = o2), this._updateLayer(r2)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot have zoom extent.")));
          }, i2.prototype.setFilter = function(e3, i3, o2) {
            void 0 === o2 && (o2 = {}), this._checkLoaded();
            var r2 = this.getLayer(e3);
            if (r2) {
              if (!t.isEqual(r2.filter, i3))
                return null == i3 ? (r2.filter = void 0, void this._updateLayer(r2)) : void (this._validate(t.validateStyle.filter, "layers." + r2.id + ".filter", i3, null, o2) || (r2.filter = t.clone(i3), this._updateLayer(r2)));
            } else
              this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be filtered.")));
          }, i2.prototype.getFilter = function(e3) {
            return t.clone(this.getLayer(e3).filter);
          }, i2.prototype.setLayoutProperty = function(e3, i3, o2, r2) {
            void 0 === r2 && (r2 = {}), this._checkLoaded();
            var a2 = this.getLayer(e3);
            a2 ? t.isEqual(a2.getLayoutProperty(i3), o2) || (a2.setLayoutProperty(i3, o2, r2), this._updateLayer(a2)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be styled.")));
          }, i2.prototype.getLayoutProperty = function(e3, i3) {
            var o2 = this.getLayer(e3);
            if (o2)
              return o2.getLayoutProperty(i3);
            this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style.")));
          }, i2.prototype.setPaintProperty = function(e3, i3, o2, r2) {
            void 0 === r2 && (r2 = {}), this._checkLoaded();
            var a2 = this.getLayer(e3);
            a2 ? t.isEqual(a2.getPaintProperty(i3), o2) || (a2.setPaintProperty(i3, o2, r2) && this._updateLayer(a2), this._changed = true, this._updatedPaintProps[e3] = true) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be styled.")));
          }, i2.prototype.getPaintProperty = function(t2, e3) {
            return this.getLayer(t2).getPaintProperty(e3);
          }, i2.prototype.setFeatureState = function(e3, i3) {
            this._checkLoaded();
            var o2 = e3.source, r2 = e3.sourceLayer, a2 = this.sourceCaches[o2], n2 = parseInt(e3.id, 10);
            if (void 0 !== a2) {
              var s2 = a2.getSource().type;
              "geojson" === s2 && r2 ? this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))) : "vector" !== s2 || r2 ? isNaN(n2) || n2 < 0 ? this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))) : a2.setFeatureState(r2, n2, i3) : this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            } else
              this.fire(new t.ErrorEvent(new Error("The source '" + o2 + "' does not exist in the map's style.")));
          }, i2.prototype.removeFeatureState = function(e3, i3) {
            this._checkLoaded();
            var o2 = e3.source, r2 = this.sourceCaches[o2];
            if (void 0 !== r2) {
              var a2 = r2.getSource().type, n2 = "vector" === a2 ? e3.sourceLayer : void 0, s2 = parseInt(e3.id, 10);
              "vector" !== a2 || n2 ? e3.id && isNaN(s2) || s2 < 0 ? this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))) : !i3 || e3.id ? r2.removeFeatureState(n2, s2, i3) : this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))) : this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            } else
              this.fire(new t.ErrorEvent(new Error("The source '" + o2 + "' does not exist in the map's style.")));
          }, i2.prototype.getFeatureState = function(e3) {
            this._checkLoaded();
            var i3 = e3.source, o2 = e3.sourceLayer, r2 = this.sourceCaches[i3], a2 = parseInt(e3.id, 10);
            if (void 0 !== r2)
              if ("vector" !== r2.getSource().type || o2) {
                if (!(isNaN(a2) || a2 < 0))
                  return r2.getFeatureState(o2, a2);
                this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")));
              } else
                this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            else
              this.fire(new t.ErrorEvent(new Error("The source '" + i3 + "' does not exist in the map's style.")));
          }, i2.prototype.getTransition = function() {
            return t.extend({ duration: 300, delay: 0 }, this.stylesheet && this.stylesheet.transition);
          }, i2.prototype.serialize = function() {
            return t.filterObject({ version: this.stylesheet.version, name: this.stylesheet.name, metadata: this.stylesheet.metadata, light: this.stylesheet.light, center: this.stylesheet.center, zoom: this.stylesheet.zoom, bearing: this.stylesheet.bearing, pitch: this.stylesheet.pitch, sprite: this.stylesheet.sprite, glyphs: this.stylesheet.glyphs, transition: this.stylesheet.transition, sources: t.mapObject(this.sourceCaches, function(t2) {
              return t2.serialize();
            }), layers: this._serializeLayers(this._order) }, function(t2) {
              return void 0 !== t2;
            });
          }, i2.prototype._updateLayer = function(t2) {
            this._updatedLayers[t2.id] = true, t2.source && !this._updatedSources[t2.source] && (this._updatedSources[t2.source] = "reload", this.sourceCaches[t2.source].pause()), this._changed = true;
          }, i2.prototype._flattenAndSortRenderedFeatures = function(t2) {
            for (var e3 = this, i3 = function(t3) {
              return "fill-extrusion" === e3._layers[t3].type;
            }, o2 = {}, r2 = [], a2 = this._order.length - 1; a2 >= 0; a2--) {
              var n2 = this._order[a2];
              if (i3(n2)) {
                o2[n2] = a2;
                for (var s2 = 0, l2 = t2; s2 < l2.length; s2 += 1) {
                  var c2 = l2[s2][n2];
                  if (c2)
                    for (var u2 = 0, h2 = c2; u2 < h2.length; u2 += 1) {
                      var p2 = h2[u2];
                      r2.push(p2);
                    }
                }
              }
            }
            r2.sort(function(t3, e4) {
              return e4.intersectionZ - t3.intersectionZ;
            });
            for (var d2 = [], _2 = this._order.length - 1; _2 >= 0; _2--) {
              var f2 = this._order[_2];
              if (i3(f2))
                for (var m2 = r2.length - 1; m2 >= 0; m2--) {
                  var g2 = r2[m2].feature;
                  if (o2[g2.layer.id] < _2)
                    break;
                  d2.push(g2), r2.pop();
                }
              else
                for (var v2 = 0, y2 = t2; v2 < y2.length; v2 += 1) {
                  var x2 = y2[v2][f2];
                  if (x2)
                    for (var b2 = 0, w2 = x2; b2 < w2.length; b2 += 1) {
                      var E2 = w2[b2];
                      d2.push(E2.feature);
                    }
                }
            }
            return d2;
          }, i2.prototype.queryRenderedFeatures = function(e3, i3, o2) {
            i3 && i3.filter && this._validate(t.validateStyle.filter, "queryRenderedFeatures.filter", i3.filter);
            var r2 = {};
            if (i3 && i3.layers) {
              if (!Array.isArray(i3.layers))
                return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))), [];
              for (var a2 = 0, n2 = i3.layers; a2 < n2.length; a2 += 1) {
                var s2 = n2[a2], l2 = this._layers[s2];
                if (!l2)
                  return this.fire(new t.ErrorEvent(new Error("The layer '" + s2 + "' does not exist in the map's style and cannot be queried for features."))), [];
                r2[l2.source] = true;
              }
            }
            var c2 = [];
            for (var u2 in this.sourceCaches)
              i3.layers && !r2[u2] || c2.push(M(this.sourceCaches[u2], this._layers, e3, i3, o2));
            return this.placement && c2.push(function(t2, e4, i4, o3, r3, a3) {
              for (var n3 = {}, s3 = r3.queryRenderedSymbols(i4), l3 = [], c3 = 0, u3 = Object.keys(s3).map(Number); c3 < u3.length; c3 += 1) {
                var h2 = u3[c3];
                l3.push(a3[h2]);
              }
              l3.sort(A);
              for (var p2 = function() {
                var e5 = _2[d2], i5 = e5.featureIndex.lookupSymbolFeatures(s3[e5.bucketInstanceId], e5.bucketIndex, e5.sourceLayerIndex, o3.filter, o3.layers, t2);
                for (var r4 in i5) {
                  var a4 = n3[r4] = n3[r4] || [], l4 = i5[r4];
                  l4.sort(function(t3, i6) {
                    var o4 = e5.featureSortOrder;
                    if (o4) {
                      var r5 = o4.indexOf(t3.featureIndex);
                      return o4.indexOf(i6.featureIndex) - r5;
                    }
                    return i6.featureIndex - t3.featureIndex;
                  });
                  for (var c4 = 0, u4 = l4; c4 < u4.length; c4 += 1) {
                    var h3 = u4[c4];
                    a4.push(h3);
                  }
                }
              }, d2 = 0, _2 = l3; d2 < _2.length; d2 += 1)
                p2();
              var f2 = function(i5) {
                n3[i5].forEach(function(o4) {
                  var r4 = o4.feature, a4 = t2[i5], n4 = e4[a4.source].getFeatureState(r4.layer["source-layer"], r4.id);
                  r4.source = r4.layer.source, r4.layer["source-layer"] && (r4.sourceLayer = r4.layer["source-layer"]), r4.state = n4;
                });
              };
              for (var m2 in n3)
                f2(m2);
              return n3;
            }(this._layers, this.sourceCaches, e3, i3, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(c2);
          }, i2.prototype.querySourceFeatures = function(e3, i3) {
            i3 && i3.filter && this._validate(t.validateStyle.filter, "querySourceFeatures.filter", i3.filter);
            var o2 = this.sourceCaches[e3];
            return o2 ? function(t2, e4) {
              for (var i4 = t2.getRenderableIds().map(function(e5) {
                return t2.getTileByID(e5);
              }), o3 = [], r2 = {}, a2 = 0; a2 < i4.length; a2++) {
                var n2 = i4[a2], s2 = n2.tileID.canonical.key;
                r2[s2] || (r2[s2] = true, n2.querySourceFeatures(o3, e4));
              }
              return o3;
            }(o2, i3) : [];
          }, i2.prototype.addSourceType = function(t2, e3, o2) {
            return i2.getSourceType(t2) ? o2(new Error('A source type called "' + t2 + '" already exists.')) : (i2.setSourceType(t2, e3), e3.workerSourceURL ? void this.dispatcher.broadcast("loadWorkerSource", { name: t2, url: e3.workerSourceURL }, o2) : o2(null, null));
          }, i2.prototype.getLight = function() {
            return this.light.getLight();
          }, i2.prototype.setLight = function(e3, i3) {
            void 0 === i3 && (i3 = {}), this._checkLoaded();
            var o2 = this.light.getLight(), r2 = false;
            for (var a2 in e3)
              if (!t.isEqual(e3[a2], o2[a2])) {
                r2 = true;
                break;
              }
            if (r2) {
              var n2 = { now: t.browser.now(), transition: t.extend({ duration: 300, delay: 0 }, this.stylesheet.transition) };
              this.light.setLight(e3, i3), this.light.updateTransitions(n2);
            }
          }, i2.prototype._validate = function(e3, i3, o2, r2, a2) {
            return void 0 === a2 && (a2 = {}), (!a2 || false !== a2.validate) && Pe(this, e3.call(t.validateStyle, t.extend({ key: i3, style: this.serialize(), value: o2, styleSpec: t.styleSpec }, r2)));
          }, i2.prototype._remove = function() {
            for (var e3 in this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), t.evented.off("pluginAvailable", this._rtlTextPluginCallback), this.sourceCaches)
              this.sourceCaches[e3].clearTiles();
            this.dispatcher.remove();
          }, i2.prototype._clearSource = function(t2) {
            this.sourceCaches[t2].clearTiles();
          }, i2.prototype._reloadSource = function(t2) {
            this.sourceCaches[t2].resume(), this.sourceCaches[t2].reload();
          }, i2.prototype._updateSources = function(t2) {
            for (var e3 in this.sourceCaches)
              this.sourceCaches[e3].update(t2);
          }, i2.prototype._generateCollisionBoxes = function() {
            for (var t2 in this.sourceCaches)
              this._reloadSource(t2);
          }, i2.prototype._updatePlacement = function(e3, i3, o2, r2) {
            for (var a2 = false, n2 = false, s2 = {}, l2 = 0, c2 = this._order; l2 < c2.length; l2 += 1) {
              var u2 = c2[l2], h2 = this._layers[u2];
              if ("symbol" === h2.type) {
                if (!s2[h2.source]) {
                  var p2 = this.sourceCaches[h2.source];
                  s2[h2.source] = p2.getRenderableIds(true).map(function(t2) {
                    return p2.getTileByID(t2);
                  }).sort(function(t2, e4) {
                    return e4.tileID.overscaledZ - t2.tileID.overscaledZ || (t2.tileID.isLessThan(e4.tileID) ? -1 : 1);
                  });
                }
                var d2 = this.crossTileSymbolIndex.addLayer(h2, s2[h2.source], e3.center.lng);
                a2 = a2 || d2;
              }
            }
            this.crossTileSymbolIndex.pruneUnusedLayers(this._order);
            var _2 = this._layerOrderChanged || 0 === o2;
            if ((_2 || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.browser.now())) && (this.pauseablePlacement = new Te(e3, this._order, _2, i3, o2, r2), this._layerOrderChanged = false), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, s2), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(this.placement, t.browser.now()), n2 = true), a2 && this.pauseablePlacement.placement.setStale()), n2 || a2)
              for (var f2 = 0, m2 = this._order; f2 < m2.length; f2 += 1) {
                var g2 = m2[f2], v2 = this._layers[g2];
                "symbol" === v2.type && this.placement.updateLayerOpacities(v2, s2[v2.source]);
              }
            return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.browser.now());
          }, i2.prototype._releaseSymbolFadeTiles = function() {
            for (var t2 in this.sourceCaches)
              this.sourceCaches[t2].releaseSymbolFadeTiles();
          }, i2.prototype.getImages = function(t2, e3, i3) {
            this.imageManager.getImages(e3.icons, i3);
          }, i2.prototype.getGlyphs = function(t2, e3, i3) {
            this.glyphManager.getGlyphs(e3.stacks, i3);
          }, i2.prototype.getResource = function(e3, i3, o2) {
            return t.makeRequest(i3, o2);
          }, i2;
        }(t.Evented);
        Me.getSourceType = function(t2) {
          return P[t2];
        }, Me.setSourceType = function(t2, e2) {
          P[t2] = e2;
        }, Me.registerForPluginAvailability = t.registerForPluginAvailability;
        var Ae = t.createLayout([{ name: "a_pos", type: "Int16", components: 2 }]), ke = si("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif", "#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"), Be = si("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), Oe = si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"), Fe = si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"), Ue = si("void main() {gl_FragColor=vec4(1.0);}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), Ne = si("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"), Ze = si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"), je = si("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}", "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"), Ve = si("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}", "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"), qe = si("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), Ge = si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"), We = si("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"), Xe = si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"), He = si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"), Ke = si("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"), Ye = si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"), Je = si("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"), Qe = si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"), $e = si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"), ti = si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"), ei = si("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"), ii = si("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"), oi = si("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"), ri = si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"), ai = si("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"), ni = si("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");
        function si(t2, e2) {
          var i2 = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g, o2 = {};
          return { fragmentSource: t2 = t2.replace(i2, function(t3, e3, i3, r2, a2) {
            return o2[a2] = true, "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + a2 + "\nvarying " + i3 + " " + r2 + " " + a2 + ";\n#else\nuniform " + i3 + " " + r2 + " u_" + a2 + ";\n#endif\n" : "\n#ifdef HAS_UNIFORM_u_" + a2 + "\n    " + i3 + " " + r2 + " " + a2 + " = u_" + a2 + ";\n#endif\n";
          }), vertexSource: e2 = e2.replace(i2, function(t3, e3, i3, r2, a2) {
            var n2 = "float" === r2 ? "vec2" : "vec4", s2 = a2.match(/color/) ? "color" : n2;
            return o2[a2] ? "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + a2 + "\nuniform lowp float a_" + a2 + "_t;\nattribute " + i3 + " " + n2 + " a_" + a2 + ";\nvarying " + i3 + " " + r2 + " " + a2 + ";\n#else\nuniform " + i3 + " " + r2 + " u_" + a2 + ";\n#endif\n" : "vec4" === s2 ? "\n#ifndef HAS_UNIFORM_u_" + a2 + "\n    " + a2 + " = a_" + a2 + ";\n#else\n    " + i3 + " " + r2 + " " + a2 + " = u_" + a2 + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + a2 + "\n    " + a2 + " = unpack_mix_" + s2 + "(a_" + a2 + ", a_" + a2 + "_t);\n#else\n    " + i3 + " " + r2 + " " + a2 + " = u_" + a2 + ";\n#endif\n" : "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + a2 + "\nuniform lowp float a_" + a2 + "_t;\nattribute " + i3 + " " + n2 + " a_" + a2 + ";\n#else\nuniform " + i3 + " " + r2 + " u_" + a2 + ";\n#endif\n" : "vec4" === s2 ? "\n#ifndef HAS_UNIFORM_u_" + a2 + "\n    " + i3 + " " + r2 + " " + a2 + " = a_" + a2 + ";\n#else\n    " + i3 + " " + r2 + " " + a2 + " = u_" + a2 + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + a2 + "\n    " + i3 + " " + r2 + " " + a2 + " = unpack_mix_" + s2 + "(a_" + a2 + ", a_" + a2 + "_t);\n#else\n    " + i3 + " " + r2 + " " + a2 + " = u_" + a2 + ";\n#endif\n";
          }) };
        }
        var li = Object.freeze({ prelude: ke, background: Be, backgroundPattern: Oe, circle: Fe, clippingMask: Ue, heatmap: Ne, heatmapTexture: Ze, collisionBox: je, collisionCircle: Ve, debug: qe, fill: Ge, fillOutline: We, fillOutlinePattern: Xe, fillPattern: He, fillExtrusion: Ke, fillExtrusionPattern: Ye, extrusionTexture: Je, hillshadePrepare: Qe, hillshade: $e, line: ti, lineGradient: ei, linePattern: ii, lineSDF: oi, raster: ri, symbolIcon: ai, symbolSDF: ni }), ci = function() {
          this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;
        };
        ci.prototype.bind = function(t2, e2, i2, o2, r2, a2, n2, s2) {
          this.context = t2;
          for (var l2 = this.boundPaintVertexBuffers.length !== o2.length, c2 = 0; !l2 && c2 < o2.length; c2++)
            this.boundPaintVertexBuffers[c2] !== o2[c2] && (l2 = true);
          var u2 = !this.vao || this.boundProgram !== e2 || this.boundLayoutVertexBuffer !== i2 || l2 || this.boundIndexBuffer !== r2 || this.boundVertexOffset !== a2 || this.boundDynamicVertexBuffer !== n2 || this.boundDynamicVertexBuffer2 !== s2;
          !t2.extVertexArrayObject || u2 ? this.freshBind(e2, i2, o2, r2, a2, n2, s2) : (t2.bindVertexArrayOES.set(this.vao), n2 && n2.bind(), r2 && r2.dynamicDraw && r2.bind(), s2 && s2.bind());
        }, ci.prototype.freshBind = function(t2, e2, i2, o2, r2, a2, n2) {
          var s2, l2 = t2.numAttributes, c2 = this.context, u2 = c2.gl;
          if (c2.extVertexArrayObject)
            this.vao && this.destroy(), this.vao = c2.extVertexArrayObject.createVertexArrayOES(), c2.bindVertexArrayOES.set(this.vao), s2 = 0, this.boundProgram = t2, this.boundLayoutVertexBuffer = e2, this.boundPaintVertexBuffers = i2, this.boundIndexBuffer = o2, this.boundVertexOffset = r2, this.boundDynamicVertexBuffer = a2, this.boundDynamicVertexBuffer2 = n2;
          else {
            s2 = c2.currentNumAttributes || 0;
            for (var h2 = l2; h2 < s2; h2++)
              u2.disableVertexAttribArray(h2);
          }
          e2.enableAttributes(u2, t2);
          for (var p2 = 0, d2 = i2; p2 < d2.length; p2 += 1) {
            d2[p2].enableAttributes(u2, t2);
          }
          a2 && a2.enableAttributes(u2, t2), n2 && n2.enableAttributes(u2, t2), e2.bind(), e2.setVertexAttribPointers(u2, t2, r2);
          for (var _2 = 0, f2 = i2; _2 < f2.length; _2 += 1) {
            var m2 = f2[_2];
            m2.bind(), m2.setVertexAttribPointers(u2, t2, r2);
          }
          a2 && (a2.bind(), a2.setVertexAttribPointers(u2, t2, r2)), o2 && o2.bind(), n2 && (n2.bind(), n2.setVertexAttribPointers(u2, t2, r2)), c2.currentNumAttributes = l2;
        }, ci.prototype.destroy = function() {
          this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);
        };
        var ui = function(e2, i2, o2, r2, a2) {
          var n2 = e2.gl;
          this.program = n2.createProgram();
          var s2 = o2.defines().concat("#define DEVICE_PIXEL_RATIO " + t.browser.devicePixelRatio.toFixed(1));
          a2 && s2.push("#define OVERDRAW_INSPECTOR;");
          var l2 = s2.concat(ke.fragmentSource, i2.fragmentSource).join("\n"), c2 = s2.concat(ke.vertexSource, i2.vertexSource).join("\n"), u2 = n2.createShader(n2.FRAGMENT_SHADER);
          n2.shaderSource(u2, l2), n2.compileShader(u2), n2.attachShader(this.program, u2);
          var h2 = n2.createShader(n2.VERTEX_SHADER);
          n2.shaderSource(h2, c2), n2.compileShader(h2), n2.attachShader(this.program, h2);
          for (var p2 = o2.layoutAttributes || [], d2 = 0; d2 < p2.length; d2++)
            n2.bindAttribLocation(this.program, d2, p2[d2].name);
          n2.linkProgram(this.program), this.numAttributes = n2.getProgramParameter(this.program, n2.ACTIVE_ATTRIBUTES), this.attributes = {};
          for (var _2 = {}, f2 = 0; f2 < this.numAttributes; f2++) {
            var m2 = n2.getActiveAttrib(this.program, f2);
            m2 && (this.attributes[m2.name] = n2.getAttribLocation(this.program, m2.name));
          }
          for (var g2 = n2.getProgramParameter(this.program, n2.ACTIVE_UNIFORMS), v2 = 0; v2 < g2; v2++) {
            var y2 = n2.getActiveUniform(this.program, v2);
            y2 && (_2[y2.name] = n2.getUniformLocation(this.program, y2.name));
          }
          this.fixedUniforms = r2(e2, _2), this.binderUniforms = o2.getUniforms(e2, _2);
        };
        function hi(e2, i2, o2) {
          var r2 = 1 / se(o2, 1, i2.transform.tileZoom), a2 = Math.pow(2, o2.tileID.overscaledZ), n2 = o2.tileSize * Math.pow(2, i2.transform.tileZoom) / a2, s2 = n2 * (o2.tileID.canonical.x + o2.tileID.wrap * a2), l2 = n2 * o2.tileID.canonical.y;
          return { u_image: 0, u_texsize: o2.imageAtlasTexture.size, u_scale: [t.browser.devicePixelRatio, r2, e2.fromScale, e2.toScale], u_fade: e2.t, u_pixel_coord_upper: [s2 >> 16, l2 >> 16], u_pixel_coord_lower: [65535 & s2, 65535 & l2] };
        }
        ui.prototype.draw = function(t2, e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2, p2, d2, _2, f2) {
          var m2, g2 = t2.gl;
          for (var v2 in t2.program.set(this.program), t2.setDepthMode(i2), t2.setStencilMode(o2), t2.setColorMode(r2), t2.setCullFace(a2), this.fixedUniforms)
            this.fixedUniforms[v2].set(n2[v2]);
          d2 && d2.setUniforms(t2, this.binderUniforms, h2, { zoom: p2 });
          for (var y2 = (m2 = {}, m2[g2.LINES] = 2, m2[g2.TRIANGLES] = 3, m2[g2.LINE_STRIP] = 1, m2)[e2], x2 = 0, b2 = u2.get(); x2 < b2.length; x2 += 1) {
            var w2 = b2[x2], E2 = w2.vaos || (w2.vaos = {});
            (E2[s2] || (E2[s2] = new ci())).bind(t2, this, l2, d2 ? d2.getPaintVertexBuffers() : [], c2, w2.vertexOffset, _2, f2), g2.drawElements(e2, w2.primitiveLength * y2, g2.UNSIGNED_SHORT, w2.primitiveOffset * y2 * 2);
          }
        };
        var pi = function(e2, i2, o2) {
          var r2 = i2.style.light, a2 = r2.properties.get("position"), n2 = [a2.x, a2.y, a2.z], s2 = t.create();
          "viewport" === r2.properties.get("anchor") && t.fromRotation(s2, -i2.transform.angle), t.transformMat3(n2, n2, s2);
          var l2 = r2.properties.get("color");
          return { u_matrix: e2, u_lightpos: n2, u_lightintensity: r2.properties.get("intensity"), u_lightcolor: [l2.r, l2.g, l2.b], u_vertical_gradient: +o2 };
        }, di = function(e2, i2, o2, r2, a2, n2) {
          return t.extend(pi(e2, i2, o2), hi(a2, i2, n2), { u_height_factor: -Math.pow(2, r2.overscaledZ) / n2.tileSize / 8 });
        }, _i = function(e2, i2, o2) {
          var r2 = t.create$1();
          t.ortho(r2, 0, e2.width, e2.height, 0, 0, 1);
          var a2 = e2.context.gl;
          return { u_matrix: r2, u_world: [a2.drawingBufferWidth, a2.drawingBufferHeight], u_image: o2, u_opacity: i2 };
        }, fi = function(t2) {
          return { u_matrix: t2 };
        }, mi = function(e2, i2, o2, r2) {
          return t.extend(fi(e2), hi(o2, i2, r2));
        }, gi = function(t2, e2) {
          return { u_matrix: t2, u_world: e2 };
        }, vi = function(e2, i2, o2, r2, a2) {
          return t.extend(mi(e2, i2, o2, r2), { u_world: a2 });
        }, yi = function(t2, e2, i2, o2) {
          var r2, a2, n2 = t2.transform;
          if ("map" === o2.paint.get("circle-pitch-alignment")) {
            var s2 = se(i2, 1, n2.zoom);
            r2 = true, a2 = [s2, s2];
          } else
            r2 = false, a2 = n2.pixelsToGLUnits;
          return { u_camera_to_center_distance: n2.cameraToCenterDistance, u_scale_with_map: +("map" === o2.paint.get("circle-pitch-scale")), u_matrix: t2.translatePosMatrix(e2.posMatrix, i2, o2.paint.get("circle-translate"), o2.paint.get("circle-translate-anchor")), u_pitch_with_map: +r2, u_extrude_scale: a2 };
        }, xi = function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pixels_to_tile_units: new t.Uniform1f(e2, i2.u_pixels_to_tile_units), u_extrude_scale: new t.Uniform2f(e2, i2.u_extrude_scale), u_overscale_factor: new t.Uniform1f(e2, i2.u_overscale_factor) };
        }, bi = function(t2, e2, i2) {
          var o2 = se(i2, 1, e2.zoom), r2 = Math.pow(2, e2.zoom - i2.tileID.overscaledZ), a2 = i2.tileID.overscaleFactor();
          return { u_matrix: t2, u_camera_to_center_distance: e2.cameraToCenterDistance, u_pixels_to_tile_units: o2, u_extrude_scale: [e2.pixelsToGLUnits[0] / (o2 * r2), e2.pixelsToGLUnits[1] / (o2 * r2)], u_overscale_factor: a2 };
        }, wi = function(t2, e2) {
          return { u_matrix: t2, u_color: e2 };
        }, Ei = function(t2) {
          return { u_matrix: t2 };
        }, Ti = function(t2, e2, i2, o2) {
          return { u_matrix: t2, u_extrude_scale: se(e2, 1, i2), u_intensity: o2 };
        }, Ii = function(e2, i2, o2, r2) {
          var a2 = t.create$1();
          t.ortho(a2, 0, e2.width, e2.height, 0, 0, 1);
          var n2 = e2.context.gl;
          return { u_matrix: a2, u_world: [n2.drawingBufferWidth, n2.drawingBufferHeight], u_image: o2, u_color_ramp: r2, u_opacity: i2.paint.get("heatmap-opacity") };
        }, Ci = function(t2, e2, i2) {
          var o2 = i2.paint.get("hillshade-shadow-color"), r2 = i2.paint.get("hillshade-highlight-color"), a2 = i2.paint.get("hillshade-accent-color"), n2 = i2.paint.get("hillshade-illumination-direction") * (Math.PI / 180);
          "viewport" === i2.paint.get("hillshade-illumination-anchor") && (n2 -= t2.transform.angle);
          var s2 = !t2.options.moving;
          return { u_matrix: t2.transform.calculatePosMatrix(e2.tileID.toUnwrapped(), s2), u_image: 0, u_latrange: zi(t2, e2.tileID), u_light: [i2.paint.get("hillshade-exaggeration"), n2], u_shadow: o2, u_highlight: r2, u_accent: a2 };
        }, Si = function(e2, i2) {
          var o2 = e2.dem.stride, r2 = t.create$1();
          return t.ortho(r2, 0, t.EXTENT, -t.EXTENT, 0, 0, 1), t.translate(r2, r2, [0, -t.EXTENT, 0]), { u_matrix: r2, u_image: 1, u_dimension: [o2, o2], u_zoom: e2.tileID.overscaledZ, u_maxzoom: i2 };
        };
        function zi(e2, i2) {
          var o2 = Math.pow(2, i2.canonical.z), r2 = i2.canonical.y;
          return [new t.MercatorCoordinate(0, r2 / o2).toLngLat().lat, new t.MercatorCoordinate(0, (r2 + 1) / o2).toLngLat().lat];
        }
        var Li = function(t2, e2, i2) {
          var o2 = t2.transform;
          return { u_matrix: Ai(t2, e2, i2), u_ratio: 1 / se(e2, 1, o2.zoom), u_gl_units_to_pixels: [1 / o2.pixelsToGLUnits[0], 1 / o2.pixelsToGLUnits[1]] };
        }, Pi = function(e2, i2, o2) {
          return t.extend(Li(e2, i2, o2), { u_image: 0 });
        }, Di = function(e2, i2, o2, r2) {
          var a2 = e2.transform, n2 = Mi(i2, a2);
          return { u_matrix: Ai(e2, i2, o2), u_texsize: i2.imageAtlasTexture.size, u_ratio: 1 / se(i2, 1, a2.zoom), u_image: 0, u_scale: [t.browser.devicePixelRatio, n2, r2.fromScale, r2.toScale], u_fade: r2.t, u_gl_units_to_pixels: [1 / a2.pixelsToGLUnits[0], 1 / a2.pixelsToGLUnits[1]] };
        }, Ri = function(e2, i2, o2, r2, a2) {
          var n2 = e2.transform, s2 = e2.lineAtlas, l2 = Mi(i2, n2), c2 = "round" === o2.layout.get("line-cap"), u2 = s2.getDash(r2.from, c2), h2 = s2.getDash(r2.to, c2), p2 = u2.width * a2.fromScale, d2 = h2.width * a2.toScale;
          return t.extend(Li(e2, i2, o2), { u_patternscale_a: [l2 / p2, -u2.height / 2], u_patternscale_b: [l2 / d2, -h2.height / 2], u_sdfgamma: s2.width / (256 * Math.min(p2, d2) * t.browser.devicePixelRatio) / 2, u_image: 0, u_tex_y_a: u2.y, u_tex_y_b: h2.y, u_mix: a2.t });
        };
        function Mi(t2, e2) {
          return 1 / se(t2, 1, e2.tileZoom);
        }
        function Ai(t2, e2, i2) {
          return t2.translatePosMatrix(e2.tileID.posMatrix, e2, i2.paint.get("line-translate"), i2.paint.get("line-translate-anchor"));
        }
        var ki = function(t2, e2, i2, o2, r2) {
          return { u_matrix: t2, u_tl_parent: e2, u_scale_parent: i2, u_buffer_scale: 1, u_fade_t: o2.mix, u_opacity: o2.opacity * r2.paint.get("raster-opacity"), u_image0: 0, u_image1: 1, u_brightness_low: r2.paint.get("raster-brightness-min"), u_brightness_high: r2.paint.get("raster-brightness-max"), u_saturation_factor: (n2 = r2.paint.get("raster-saturation"), n2 > 0 ? 1 - 1 / (1.001 - n2) : -n2), u_contrast_factor: (a2 = r2.paint.get("raster-contrast"), a2 > 0 ? 1 / (1 - a2) : 1 + a2), u_spin_weights: Bi(r2.paint.get("raster-hue-rotate")) };
          var a2, n2;
        };
        function Bi(t2) {
          t2 *= Math.PI / 180;
          var e2 = Math.sin(t2), i2 = Math.cos(t2);
          return [(2 * i2 + 1) / 3, (-Math.sqrt(3) * e2 - i2 + 1) / 3, (Math.sqrt(3) * e2 - i2 + 1) / 3];
        }
        var Oi = function(t2, e2, i2, o2, r2, a2, n2, s2, l2, c2) {
          var u2 = r2.transform;
          return { u_is_size_zoom_constant: +("constant" === t2 || "source" === t2), u_is_size_feature_constant: +("constant" === t2 || "camera" === t2), u_size_t: e2 ? e2.uSizeT : 0, u_size: e2 ? e2.uSize : 0, u_camera_to_center_distance: u2.cameraToCenterDistance, u_pitch: u2.pitch / 360 * 2 * Math.PI, u_rotate_symbol: +i2, u_aspect_ratio: u2.width / u2.height, u_fade_change: r2.options.fadeDuration ? r2.symbolFadeChange : 1, u_matrix: a2, u_label_plane_matrix: n2, u_gl_coord_matrix: s2, u_is_text: +l2, u_pitch_with_map: +o2, u_texsize: c2, u_texture: 0 };
        }, Fi = function(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2) {
          var p2 = a2.transform;
          return t.extend(Oi(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2), { u_gamma_scale: r2 ? Math.cos(p2._pitch) * p2.cameraToCenterDistance : 1, u_is_halo: +h2 });
        }, Ui = function(t2, e2, i2) {
          return { u_matrix: t2, u_opacity: e2, u_color: i2 };
        }, Ni = function(e2, i2, o2, r2, a2, n2) {
          return t.extend(function(t2, e3, i3, o3) {
            var r3 = i3.imageManager.getPattern(t2.from), a3 = i3.imageManager.getPattern(t2.to), n3 = i3.imageManager.getPixelSize(), s2 = n3.width, l2 = n3.height, c2 = Math.pow(2, o3.tileID.overscaledZ), u2 = o3.tileSize * Math.pow(2, i3.transform.tileZoom) / c2, h2 = u2 * (o3.tileID.canonical.x + o3.tileID.wrap * c2), p2 = u2 * o3.tileID.canonical.y;
            return { u_image: 0, u_pattern_tl_a: r3.tl, u_pattern_br_a: r3.br, u_pattern_tl_b: a3.tl, u_pattern_br_b: a3.br, u_texsize: [s2, l2], u_mix: e3.t, u_pattern_size_a: r3.displaySize, u_pattern_size_b: a3.displaySize, u_scale_a: e3.fromScale, u_scale_b: e3.toScale, u_tile_units_to_pixels: 1 / se(o3, 1, i3.transform.tileZoom), u_pixel_coord_upper: [h2 >> 16, p2 >> 16], u_pixel_coord_lower: [65535 & h2, 65535 & p2] };
          }(r2, n2, o2, a2), { u_matrix: e2, u_opacity: i2 });
        }, Zi = { fillExtrusion: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_lightpos: new t.Uniform3f(e2, i2.u_lightpos), u_lightintensity: new t.Uniform1f(e2, i2.u_lightintensity), u_lightcolor: new t.Uniform3f(e2, i2.u_lightcolor), u_vertical_gradient: new t.Uniform1f(e2, i2.u_vertical_gradient) };
        }, fillExtrusionPattern: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_lightpos: new t.Uniform3f(e2, i2.u_lightpos), u_lightintensity: new t.Uniform1f(e2, i2.u_lightintensity), u_lightcolor: new t.Uniform3f(e2, i2.u_lightcolor), u_vertical_gradient: new t.Uniform1f(e2, i2.u_vertical_gradient), u_height_factor: new t.Uniform1f(e2, i2.u_height_factor), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform4f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade) };
        }, extrusionTexture: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_image: new t.Uniform1i(e2, i2.u_image), u_opacity: new t.Uniform1f(e2, i2.u_opacity) };
        }, fill: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
        }, fillPattern: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform4f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade) };
        }, fillOutline: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world) };
        }, fillOutlinePattern: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform4f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade) };
        }, circle: function(e2, i2) {
          return { u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_scale_with_map: new t.Uniform1i(e2, i2.u_scale_with_map), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_extrude_scale: new t.Uniform2f(e2, i2.u_extrude_scale), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
        }, collisionBox: xi, collisionCircle: xi, debug: function(e2, i2) {
          return { u_color: new t.UniformColor(e2, i2.u_color), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
        }, clippingMask: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
        }, heatmap: function(e2, i2) {
          return { u_extrude_scale: new t.Uniform1f(e2, i2.u_extrude_scale), u_intensity: new t.Uniform1f(e2, i2.u_intensity), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
        }, heatmapTexture: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_image: new t.Uniform1i(e2, i2.u_image), u_color_ramp: new t.Uniform1i(e2, i2.u_color_ramp), u_opacity: new t.Uniform1f(e2, i2.u_opacity) };
        }, hillshade: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_latrange: new t.Uniform2f(e2, i2.u_latrange), u_light: new t.Uniform2f(e2, i2.u_light), u_shadow: new t.UniformColor(e2, i2.u_shadow), u_highlight: new t.UniformColor(e2, i2.u_highlight), u_accent: new t.UniformColor(e2, i2.u_accent) };
        }, hillshadePrepare: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_dimension: new t.Uniform2f(e2, i2.u_dimension), u_zoom: new t.Uniform1f(e2, i2.u_zoom), u_maxzoom: new t.Uniform1f(e2, i2.u_maxzoom) };
        }, line: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform1f(e2, i2.u_ratio), u_gl_units_to_pixels: new t.Uniform2f(e2, i2.u_gl_units_to_pixels) };
        }, lineGradient: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform1f(e2, i2.u_ratio), u_gl_units_to_pixels: new t.Uniform2f(e2, i2.u_gl_units_to_pixels), u_image: new t.Uniform1i(e2, i2.u_image) };
        }, linePattern: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_ratio: new t.Uniform1f(e2, i2.u_ratio), u_image: new t.Uniform1i(e2, i2.u_image), u_gl_units_to_pixels: new t.Uniform2f(e2, i2.u_gl_units_to_pixels), u_scale: new t.Uniform4f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade) };
        }, lineSDF: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform1f(e2, i2.u_ratio), u_gl_units_to_pixels: new t.Uniform2f(e2, i2.u_gl_units_to_pixels), u_patternscale_a: new t.Uniform2f(e2, i2.u_patternscale_a), u_patternscale_b: new t.Uniform2f(e2, i2.u_patternscale_b), u_sdfgamma: new t.Uniform1f(e2, i2.u_sdfgamma), u_image: new t.Uniform1i(e2, i2.u_image), u_tex_y_a: new t.Uniform1f(e2, i2.u_tex_y_a), u_tex_y_b: new t.Uniform1f(e2, i2.u_tex_y_b), u_mix: new t.Uniform1f(e2, i2.u_mix) };
        }, raster: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_tl_parent: new t.Uniform2f(e2, i2.u_tl_parent), u_scale_parent: new t.Uniform1f(e2, i2.u_scale_parent), u_buffer_scale: new t.Uniform1f(e2, i2.u_buffer_scale), u_fade_t: new t.Uniform1f(e2, i2.u_fade_t), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_image0: new t.Uniform1i(e2, i2.u_image0), u_image1: new t.Uniform1i(e2, i2.u_image1), u_brightness_low: new t.Uniform1f(e2, i2.u_brightness_low), u_brightness_high: new t.Uniform1f(e2, i2.u_brightness_high), u_saturation_factor: new t.Uniform1f(e2, i2.u_saturation_factor), u_contrast_factor: new t.Uniform1f(e2, i2.u_contrast_factor), u_spin_weights: new t.Uniform3f(e2, i2.u_spin_weights) };
        }, symbolIcon: function(e2, i2) {
          return { u_is_size_zoom_constant: new t.Uniform1i(e2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new t.Uniform1i(e2, i2.u_is_size_feature_constant), u_size_t: new t.Uniform1f(e2, i2.u_size_t), u_size: new t.Uniform1f(e2, i2.u_size), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pitch: new t.Uniform1f(e2, i2.u_pitch), u_rotate_symbol: new t.Uniform1i(e2, i2.u_rotate_symbol), u_aspect_ratio: new t.Uniform1f(e2, i2.u_aspect_ratio), u_fade_change: new t.Uniform1f(e2, i2.u_fade_change), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_gl_coord_matrix: new t.UniformMatrix4f(e2, i2.u_gl_coord_matrix), u_is_text: new t.Uniform1f(e2, i2.u_is_text), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_texture: new t.Uniform1i(e2, i2.u_texture) };
        }, symbolSDF: function(e2, i2) {
          return { u_is_size_zoom_constant: new t.Uniform1i(e2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new t.Uniform1i(e2, i2.u_is_size_feature_constant), u_size_t: new t.Uniform1f(e2, i2.u_size_t), u_size: new t.Uniform1f(e2, i2.u_size), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pitch: new t.Uniform1f(e2, i2.u_pitch), u_rotate_symbol: new t.Uniform1i(e2, i2.u_rotate_symbol), u_aspect_ratio: new t.Uniform1f(e2, i2.u_aspect_ratio), u_fade_change: new t.Uniform1f(e2, i2.u_fade_change), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_gl_coord_matrix: new t.UniformMatrix4f(e2, i2.u_gl_coord_matrix), u_is_text: new t.Uniform1f(e2, i2.u_is_text), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_texture: new t.Uniform1i(e2, i2.u_texture), u_gamma_scale: new t.Uniform1f(e2, i2.u_gamma_scale), u_is_halo: new t.Uniform1f(e2, i2.u_is_halo) };
        }, background: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_color: new t.UniformColor(e2, i2.u_color) };
        }, backgroundPattern: function(e2, i2) {
          return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_image: new t.Uniform1i(e2, i2.u_image), u_pattern_tl_a: new t.Uniform2f(e2, i2.u_pattern_tl_a), u_pattern_br_a: new t.Uniform2f(e2, i2.u_pattern_br_a), u_pattern_tl_b: new t.Uniform2f(e2, i2.u_pattern_tl_b), u_pattern_br_b: new t.Uniform2f(e2, i2.u_pattern_br_b), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_mix: new t.Uniform1f(e2, i2.u_mix), u_pattern_size_a: new t.Uniform2f(e2, i2.u_pattern_size_a), u_pattern_size_b: new t.Uniform2f(e2, i2.u_pattern_size_b), u_scale_a: new t.Uniform1f(e2, i2.u_scale_a), u_scale_b: new t.Uniform1f(e2, i2.u_scale_b), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_tile_units_to_pixels: new t.Uniform1f(e2, i2.u_tile_units_to_pixels) };
        } };
        function ji(e2, i2) {
          for (var o2 = e2.sort(function(t2, e3) {
            return t2.tileID.isLessThan(e3.tileID) ? -1 : e3.tileID.isLessThan(t2.tileID) ? 1 : 0;
          }), r2 = 0; r2 < o2.length; r2++) {
            var a2 = {}, n2 = o2[r2], s2 = o2.slice(r2 + 1);
            Vi(n2.tileID.wrapped(), n2.tileID, s2, new t.OverscaledTileID(0, n2.tileID.wrap + 1, 0, 0, 0), a2), n2.setMask(a2, i2);
          }
        }
        function Vi(e2, i2, o2, r2, a2) {
          for (var n2 = 0; n2 < o2.length; n2++) {
            var s2 = o2[n2];
            if (r2.isLessThan(s2.tileID))
              break;
            if (i2.key === s2.tileID.key)
              return;
            if (s2.tileID.isChildOf(i2)) {
              for (var l2 = i2.children(1 / 0), c2 = 0; c2 < l2.length; c2++) {
                Vi(e2, l2[c2], o2.slice(n2), r2, a2);
              }
              return;
            }
          }
          var u2 = i2.overscaledZ - e2.overscaledZ, h2 = new t.CanonicalTileID(u2, i2.canonical.x - (e2.canonical.x << u2), i2.canonical.y - (e2.canonical.y << u2));
          a2[h2.key] = a2[h2.key] || h2;
        }
        function qi(t2, e2, i2, o2, r2) {
          for (var a2 = t2.context, n2 = a2.gl, s2 = r2 ? t2.useProgram("collisionCircle") : t2.useProgram("collisionBox"), l2 = 0; l2 < o2.length; l2++) {
            var c2 = o2[l2], u2 = e2.getTile(c2), h2 = u2.getBucket(i2);
            if (h2) {
              var p2 = r2 ? h2.collisionCircle : h2.collisionBox;
              p2 && s2.draw(a2, r2 ? n2.TRIANGLES : n2.LINES, bt.disabled, wt.disabled, t2.colorModeForRenderPass(), Tt.disabled, bi(c2.posMatrix, t2.transform, u2), i2.id, p2.layoutVertexBuffer, p2.indexBuffer, p2.segments, null, t2.transform.zoom, null, null, p2.collisionVertexBuffer);
            }
          }
        }
        var Gi = t.identity(new Float32Array(16)), Wi = t.properties.layout;
        function Xi(e2, i2, o2, r2, a2, n2, s2, l2, c2, u2, h2, p2) {
          for (var d2, _2, f2 = e2.context, m2 = f2.gl, g2 = e2.transform, v2 = "map" === l2, y2 = "map" === c2, x2 = v2 && "point" !== o2.layout.get("symbol-placement"), b2 = v2 && !y2 && !x2, w2 = void 0 !== o2.layout.get("symbol-sort-key").constantOr(1), E2 = e2.depthModeForSublayer(0, bt.ReadOnly), T2 = [], I2 = 0, C2 = r2; I2 < C2.length; I2 += 1) {
            var S2 = C2[I2], z2 = i2.getTile(S2), L2 = z2.getBucket(o2);
            if (L2) {
              var P2 = a2 ? L2.text : L2.icon;
              if (P2 && P2.segments.get().length) {
                var D2 = P2.programConfigurations.get(o2.id), R2 = a2 || L2.sdfIcons, M2 = a2 ? L2.textSizeData : L2.iconSizeData;
                d2 || (d2 = e2.useProgram(R2 ? "symbolSDF" : "symbolIcon", D2), _2 = t.evaluateSizeForZoom(M2, g2.zoom, Wi.properties[a2 ? "text-size" : "icon-size"])), f2.activeTexture.set(m2.TEXTURE0);
                var A2 = void 0, k2 = void 0, B2 = void 0;
                if (a2)
                  k2 = z2.glyphAtlasTexture, B2 = m2.LINEAR, A2 = z2.glyphAtlasTexture.size;
                else {
                  var O2 = 1 !== o2.layout.get("icon-size").constantOr(0) || L2.iconsNeedLinear, F2 = y2 || 0 !== g2.pitch;
                  k2 = z2.imageAtlasTexture, B2 = R2 || e2.options.rotating || e2.options.zooming || O2 || F2 ? m2.LINEAR : m2.NEAREST, A2 = z2.imageAtlasTexture.size;
                }
                var U2 = se(z2, 1, e2.transform.zoom), N2 = Wt(S2.posMatrix, y2, v2, e2.transform, U2), Z2 = Xt(S2.posMatrix, y2, v2, e2.transform, U2);
                x2 && Yt(L2, S2.posMatrix, e2, a2, N2, Z2, y2, u2);
                var j2 = e2.translatePosMatrix(S2.posMatrix, z2, n2, s2), V2 = x2 ? Gi : N2, q2 = e2.translatePosMatrix(Z2, z2, n2, s2, true), G2 = R2 && 0 !== o2.paint.get(a2 ? "text-halo-width" : "icon-halo-width").constantOr(1), W2 = { program: d2, buffers: P2, uniformValues: R2 ? Fi(M2.functionType, _2, b2, y2, e2, j2, V2, q2, a2, A2, true) : Oi(M2.functionType, _2, b2, y2, e2, j2, V2, q2, a2, A2), atlasTexture: k2, atlasInterpolation: B2, isSDF: R2, hasHalo: G2 };
                if (w2)
                  for (var X2 = 0, H2 = P2.segments.get(); X2 < H2.length; X2 += 1) {
                    var K2 = H2[X2];
                    T2.push({ segments: new t.SegmentVector([K2]), sortKey: K2.sortKey, state: W2 });
                  }
                else
                  T2.push({ segments: P2.segments, sortKey: 0, state: W2 });
              }
            }
          }
          w2 && T2.sort(function(t2, e3) {
            return t2.sortKey - e3.sortKey;
          });
          for (var Y2 = 0, J2 = T2; Y2 < J2.length; Y2 += 1) {
            var Q2 = J2[Y2], $2 = Q2.state;
            if ($2.atlasTexture.bind($2.atlasInterpolation, m2.CLAMP_TO_EDGE), $2.isSDF) {
              var tt2 = $2.uniformValues;
              $2.hasHalo && (tt2.u_is_halo = 1, Hi($2.buffers, Q2.segments, o2, e2, $2.program, E2, h2, p2, tt2)), tt2.u_is_halo = 0;
            }
            Hi($2.buffers, Q2.segments, o2, e2, $2.program, E2, h2, p2, $2.uniformValues);
          }
        }
        function Hi(t2, e2, i2, o2, r2, a2, n2, s2, l2) {
          var c2 = o2.context, u2 = c2.gl;
          r2.draw(c2, u2.TRIANGLES, a2, n2, s2, Tt.disabled, l2, i2.id, t2.layoutVertexBuffer, t2.indexBuffer, e2, i2.paint, o2.transform.zoom, t2.programConfigurations.get(i2.id), t2.dynamicLayoutVertexBuffer, t2.opacityVertexBuffer);
        }
        function Ki(t2, e2, i2, o2, r2, a2, n2) {
          var s2, l2, c2, u2, h2, p2 = t2.context.gl, d2 = i2.paint.get("fill-pattern"), _2 = d2 && d2.constantOr(1), f2 = i2.getCrossfadeParameters();
          n2 ? (l2 = _2 && !i2.getPaintProperty("fill-outline-color") ? "fillOutlinePattern" : "fillOutline", s2 = p2.LINES) : (l2 = _2 ? "fillPattern" : "fill", s2 = p2.TRIANGLES);
          for (var m2 = 0, g2 = o2; m2 < g2.length; m2 += 1) {
            var v2 = g2[m2], y2 = e2.getTile(v2);
            if (!_2 || y2.patternsLoaded()) {
              var x2 = y2.getBucket(i2);
              if (x2) {
                var b2 = x2.programConfigurations.get(i2.id), w2 = t2.useProgram(l2, b2);
                _2 && (t2.context.activeTexture.set(p2.TEXTURE0), y2.imageAtlasTexture.bind(p2.LINEAR, p2.CLAMP_TO_EDGE), b2.updatePatternPaintBuffers(f2));
                var E2 = d2.constantOr(null);
                if (E2 && y2.imageAtlas) {
                  var T2 = y2.imageAtlas.patternPositions[E2.to], I2 = y2.imageAtlas.patternPositions[E2.from];
                  T2 && I2 && b2.setConstantPatternPositions(T2, I2);
                }
                var C2 = t2.translatePosMatrix(v2.posMatrix, y2, i2.paint.get("fill-translate"), i2.paint.get("fill-translate-anchor"));
                if (n2) {
                  u2 = x2.indexBuffer2, h2 = x2.segments2;
                  var S2 = [p2.drawingBufferWidth, p2.drawingBufferHeight];
                  c2 = "fillOutlinePattern" === l2 && _2 ? vi(C2, t2, f2, y2, S2) : gi(C2, S2);
                } else
                  u2 = x2.indexBuffer, h2 = x2.segments, c2 = _2 ? mi(C2, t2, f2, y2) : fi(C2);
                w2.draw(t2.context, s2, r2, t2.stencilModeForClipping(v2), a2, Tt.disabled, c2, i2.id, x2.layoutVertexBuffer, u2, h2, i2.paint, t2.transform.zoom, b2);
              }
            }
          }
        }
        function Yi(e2, i2) {
          var o2 = e2.context, r2 = o2.gl, a2 = i2.viewportFrame;
          if (e2.depthRboNeedsClear && e2.setupOffscreenDepthRenderbuffer(), !a2) {
            var n2 = new t.Texture(o2, { width: e2.width, height: e2.height, data: null }, r2.RGBA);
            n2.bind(r2.LINEAR, r2.CLAMP_TO_EDGE), (a2 = i2.viewportFrame = o2.createFramebuffer(e2.width, e2.height)).colorAttachment.set(n2.texture);
          }
          o2.bindFramebuffer.set(a2.framebuffer), a2.depthAttachment.set(e2.depthRbo), e2.depthRboNeedsClear && (o2.clear({ depth: 1 }), e2.depthRboNeedsClear = false), o2.clear({ color: t.Color.transparent }), o2.setStencilMode(wt.disabled), o2.setDepthMode(new bt(r2.LEQUAL, bt.ReadWrite, [0, 1])), o2.setColorMode(e2.colorModeForRenderPass());
        }
        function Ji(t2, e2, i2) {
          var o2 = e2.viewportFrame;
          if (o2) {
            var r2 = t2.context, a2 = r2.gl;
            r2.activeTexture.set(a2.TEXTURE0), a2.bindTexture(a2.TEXTURE_2D, o2.colorAttachment.get()), t2.useProgram("extrusionTexture").draw(r2, a2.TRIANGLES, bt.disabled, wt.disabled, t2.colorModeForRenderPass(), Tt.disabled, _i(t2, i2, 0), e2.id, t2.viewportBuffer, t2.quadTriangleIndexBuffer, t2.viewportSegments, e2.paint, t2.transform.zoom);
          }
        }
        function Qi(t2, e2, i2, o2, r2, a2) {
          var n2 = t2.context, s2 = n2.gl, l2 = e2.fbo;
          if (l2) {
            var c2 = t2.useProgram("hillshade");
            n2.activeTexture.set(s2.TEXTURE0), s2.bindTexture(s2.TEXTURE_2D, l2.colorAttachment.get());
            var u2 = Ci(t2, e2, i2);
            e2.maskedBoundsBuffer && e2.maskedIndexBuffer && e2.segments ? c2.draw(n2, s2.TRIANGLES, o2, r2, a2, Tt.disabled, u2, i2.id, e2.maskedBoundsBuffer, e2.maskedIndexBuffer, e2.segments) : c2.draw(n2, s2.TRIANGLES, o2, r2, a2, Tt.disabled, u2, i2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments);
          }
        }
        function $i(e2, i2, o2, r2, a2, n2, s2) {
          var l2 = e2.context, c2 = l2.gl;
          if (i2.dem && i2.dem.data) {
            var u2 = i2.dem.dim, h2 = i2.dem.stride, p2 = i2.dem.getPixels();
            if (l2.activeTexture.set(c2.TEXTURE1), l2.pixelStoreUnpackPremultiplyAlpha.set(false), i2.demTexture = i2.demTexture || e2.getTileTexture(h2), i2.demTexture) {
              var d2 = i2.demTexture;
              d2.update(p2, { premultiply: false }), d2.bind(c2.NEAREST, c2.CLAMP_TO_EDGE);
            } else
              i2.demTexture = new t.Texture(l2, p2, c2.RGBA, { premultiply: false }), i2.demTexture.bind(c2.NEAREST, c2.CLAMP_TO_EDGE);
            l2.activeTexture.set(c2.TEXTURE0);
            var _2 = i2.fbo;
            if (!_2) {
              var f2 = new t.Texture(l2, { width: u2, height: u2, data: null }, c2.RGBA);
              f2.bind(c2.LINEAR, c2.CLAMP_TO_EDGE), (_2 = i2.fbo = l2.createFramebuffer(u2, u2)).colorAttachment.set(f2.texture);
            }
            l2.bindFramebuffer.set(_2.framebuffer), l2.viewport.set([0, 0, u2, u2]), e2.useProgram("hillshadePrepare").draw(l2, c2.TRIANGLES, a2, n2, s2, Tt.disabled, Si(i2, r2), o2.id, e2.rasterBoundsBuffer, e2.quadTriangleIndexBuffer, e2.rasterBoundsSegments), i2.needsHillshadePrepare = false;
          }
        }
        function to(e2, i2, o2, r2, a2) {
          var n2 = r2.paint.get("raster-fade-duration");
          if (n2 > 0) {
            var s2 = t.browser.now(), l2 = (s2 - e2.timeAdded) / n2, c2 = i2 ? (s2 - i2.timeAdded) / n2 : -1, u2 = o2.getSource(), h2 = a2.coveringZoomLevel({ tileSize: u2.tileSize, roundZoom: u2.roundZoom }), p2 = !i2 || Math.abs(i2.tileID.overscaledZ - h2) > Math.abs(e2.tileID.overscaledZ - h2), d2 = p2 && e2.refreshedUponExpiration ? 1 : t.clamp(p2 ? l2 : 1 - c2, 0, 1);
            return e2.refreshedUponExpiration && l2 >= 1 && (e2.refreshedUponExpiration = false), i2 ? { opacity: 1, mix: 1 - d2 } : { opacity: d2, mix: 0 };
          }
          return { opacity: 1, mix: 0 };
        }
        function eo(e2, i2, o2) {
          var r2 = e2.context, a2 = r2.gl, n2 = o2.posMatrix, s2 = e2.useProgram("debug"), l2 = bt.disabled, c2 = wt.disabled, u2 = e2.colorModeForRenderPass(), h2 = "$debug";
          s2.draw(r2, a2.LINE_STRIP, l2, c2, u2, Tt.disabled, wi(n2, t.Color.red), h2, e2.debugBuffer, e2.tileBorderIndexBuffer, e2.debugSegments);
          for (var p2 = function(t2, e3, i3, o3) {
            o3 = o3 || 1;
            var r3, a3, n3, s3, l3, c3, u3, h3, p3 = [];
            for (r3 = 0, a3 = t2.length; r3 < a3; r3++)
              if (l3 = io[t2[r3]]) {
                for (h3 = null, n3 = 0, s3 = l3[1].length; n3 < s3; n3 += 2)
                  -1 === l3[1][n3] && -1 === l3[1][n3 + 1] ? h3 = null : (c3 = e3 + l3[1][n3] * o3, u3 = i3 - l3[1][n3 + 1] * o3, h3 && p3.push(h3.x, h3.y, c3, u3), h3 = { x: c3, y: u3 });
                e3 += l3[0] * o3;
              }
            return p3;
          }(o2.toString(), 50, 200, 5), d2 = new t.StructArrayLayout2i4(), _2 = new t.StructArrayLayout2ui4(), f2 = 0; f2 < p2.length; f2 += 2)
            d2.emplaceBack(p2[f2], p2[f2 + 1]), _2.emplaceBack(f2, f2 + 1);
          for (var m2 = r2.createVertexBuffer(d2, Ae.members), g2 = r2.createIndexBuffer(_2), v2 = t.SegmentVector.simpleSegment(0, 0, d2.length / 2, d2.length / 2), y2 = i2.getTile(o2).tileSize, x2 = t.EXTENT / (Math.pow(2, e2.transform.zoom - o2.overscaledZ) * y2), b2 = [[-1, -1], [-1, 1], [1, -1], [1, 1]], w2 = 0; w2 < b2.length; w2++) {
            var E2 = b2[w2];
            s2.draw(r2, a2.LINES, l2, c2, u2, Tt.disabled, wi(t.translate([], n2, [x2 * E2[0], x2 * E2[1], 0]), t.Color.white), h2, m2, g2, v2);
          }
          s2.draw(r2, a2.LINES, l2, c2, u2, Tt.disabled, wi(n2, t.Color.black), h2, m2, g2, v2);
        }
        var io = { " ": [16, []], "!": [10, [5, 21, 5, 7, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]], '"': [16, [4, 21, 4, 14, -1, -1, 12, 21, 12, 14]], "#": [21, [11, 25, 4, -7, -1, -1, 17, 25, 10, -7, -1, -1, 4, 12, 18, 12, -1, -1, 3, 6, 17, 6]], $: [20, [8, 25, 8, -4, -1, -1, 12, 25, 12, -4, -1, -1, 17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]], "%": [24, [21, 21, 3, 0, -1, -1, 8, 21, 10, 19, 10, 17, 9, 15, 7, 14, 5, 14, 3, 16, 3, 18, 4, 20, 6, 21, 8, 21, 10, 20, 13, 19, 16, 19, 19, 20, 21, 21, -1, -1, 17, 7, 15, 6, 14, 4, 14, 2, 16, 0, 18, 0, 20, 1, 21, 3, 21, 5, 19, 7, 17, 7]], "&": [26, [23, 12, 23, 13, 22, 14, 21, 14, 20, 13, 19, 11, 17, 6, 15, 3, 13, 1, 11, 0, 7, 0, 5, 1, 4, 2, 3, 4, 3, 6, 4, 8, 5, 9, 12, 13, 13, 14, 14, 16, 14, 18, 13, 20, 11, 21, 9, 20, 8, 18, 8, 16, 9, 13, 11, 10, 16, 3, 18, 1, 20, 0, 22, 0, 23, 1, 23, 2]], "'": [10, [5, 19, 4, 20, 5, 21, 6, 20, 6, 18, 5, 16, 4, 15]], "(": [14, [11, 25, 9, 23, 7, 20, 5, 16, 4, 11, 4, 7, 5, 2, 7, -2, 9, -5, 11, -7]], ")": [14, [3, 25, 5, 23, 7, 20, 9, 16, 10, 11, 10, 7, 9, 2, 7, -2, 5, -5, 3, -7]], "*": [16, [8, 21, 8, 9, -1, -1, 3, 18, 13, 12, -1, -1, 13, 18, 3, 12]], "+": [26, [13, 18, 13, 0, -1, -1, 4, 9, 22, 9]], ",": [10, [6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]], "-": [26, [4, 9, 22, 9]], ".": [10, [5, 2, 4, 1, 5, 0, 6, 1, 5, 2]], "/": [22, [20, 25, 2, -7]], 0: [20, [9, 21, 6, 20, 4, 17, 3, 12, 3, 9, 4, 4, 6, 1, 9, 0, 11, 0, 14, 1, 16, 4, 17, 9, 17, 12, 16, 17, 14, 20, 11, 21, 9, 21]], 1: [20, [6, 17, 8, 18, 11, 21, 11, 0]], 2: [20, [4, 16, 4, 17, 5, 19, 6, 20, 8, 21, 12, 21, 14, 20, 15, 19, 16, 17, 16, 15, 15, 13, 13, 10, 3, 0, 17, 0]], 3: [20, [5, 21, 16, 21, 10, 13, 13, 13, 15, 12, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]], 4: [20, [13, 21, 3, 7, 18, 7, -1, -1, 13, 21, 13, 0]], 5: [20, [15, 21, 5, 21, 4, 12, 5, 13, 8, 14, 11, 14, 14, 13, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]], 6: [20, [16, 18, 15, 20, 12, 21, 10, 21, 7, 20, 5, 17, 4, 12, 4, 7, 5, 3, 7, 1, 10, 0, 11, 0, 14, 1, 16, 3, 17, 6, 17, 7, 16, 10, 14, 12, 11, 13, 10, 13, 7, 12, 5, 10, 4, 7]], 7: [20, [17, 21, 7, 0, -1, -1, 3, 21, 17, 21]], 8: [20, [8, 21, 5, 20, 4, 18, 4, 16, 5, 14, 7, 13, 11, 12, 14, 11, 16, 9, 17, 7, 17, 4, 16, 2, 15, 1, 12, 0, 8, 0, 5, 1, 4, 2, 3, 4, 3, 7, 4, 9, 6, 11, 9, 12, 13, 13, 15, 14, 16, 16, 16, 18, 15, 20, 12, 21, 8, 21]], 9: [20, [16, 14, 15, 11, 13, 9, 10, 8, 9, 8, 6, 9, 4, 11, 3, 14, 3, 15, 4, 18, 6, 20, 9, 21, 10, 21, 13, 20, 15, 18, 16, 14, 16, 9, 15, 4, 13, 1, 10, 0, 8, 0, 5, 1, 4, 3]], ":": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]], ";": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]], "<": [24, [20, 18, 4, 9, 20, 0]], "=": [26, [4, 12, 22, 12, -1, -1, 4, 6, 22, 6]], ">": [24, [4, 18, 20, 9, 4, 0]], "?": [18, [3, 16, 3, 17, 4, 19, 5, 20, 7, 21, 11, 21, 13, 20, 14, 19, 15, 17, 15, 15, 14, 13, 13, 12, 9, 10, 9, 7, -1, -1, 9, 2, 8, 1, 9, 0, 10, 1, 9, 2]], "@": [27, [18, 13, 17, 15, 15, 16, 12, 16, 10, 15, 9, 14, 8, 11, 8, 8, 9, 6, 11, 5, 14, 5, 16, 6, 17, 8, -1, -1, 12, 16, 10, 14, 9, 11, 9, 8, 10, 6, 11, 5, -1, -1, 18, 16, 17, 8, 17, 6, 19, 5, 21, 5, 23, 7, 24, 10, 24, 12, 23, 15, 22, 17, 20, 19, 18, 20, 15, 21, 12, 21, 9, 20, 7, 19, 5, 17, 4, 15, 3, 12, 3, 9, 4, 6, 5, 4, 7, 2, 9, 1, 12, 0, 15, 0, 18, 1, 20, 2, 21, 3, -1, -1, 19, 16, 18, 8, 18, 6, 19, 5]], A: [18, [9, 21, 1, 0, -1, -1, 9, 21, 17, 0, -1, -1, 4, 7, 14, 7]], B: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, -1, -1, 4, 11, 13, 11, 16, 10, 17, 9, 18, 7, 18, 4, 17, 2, 16, 1, 13, 0, 4, 0]], C: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5]], D: [21, [4, 21, 4, 0, -1, -1, 4, 21, 11, 21, 14, 20, 16, 18, 17, 16, 18, 13, 18, 8, 17, 5, 16, 3, 14, 1, 11, 0, 4, 0]], E: [19, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11, -1, -1, 4, 0, 17, 0]], F: [18, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11]], G: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 18, 8, -1, -1, 13, 8, 18, 8]], H: [22, [4, 21, 4, 0, -1, -1, 18, 21, 18, 0, -1, -1, 4, 11, 18, 11]], I: [8, [4, 21, 4, 0]], J: [16, [12, 21, 12, 5, 11, 2, 10, 1, 8, 0, 6, 0, 4, 1, 3, 2, 2, 5, 2, 7]], K: [21, [4, 21, 4, 0, -1, -1, 18, 21, 4, 7, -1, -1, 9, 12, 18, 0]], L: [17, [4, 21, 4, 0, -1, -1, 4, 0, 16, 0]], M: [24, [4, 21, 4, 0, -1, -1, 4, 21, 12, 0, -1, -1, 20, 21, 12, 0, -1, -1, 20, 21, 20, 0]], N: [22, [4, 21, 4, 0, -1, -1, 4, 21, 18, 0, -1, -1, 18, 21, 18, 0]], O: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21]], P: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 14, 17, 12, 16, 11, 13, 10, 4, 10]], Q: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21, -1, -1, 12, 4, 18, -2]], R: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, 4, 11, -1, -1, 11, 11, 18, 0]], S: [20, [17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]], T: [16, [8, 21, 8, 0, -1, -1, 1, 21, 15, 21]], U: [22, [4, 21, 4, 6, 5, 3, 7, 1, 10, 0, 12, 0, 15, 1, 17, 3, 18, 6, 18, 21]], V: [18, [1, 21, 9, 0, -1, -1, 17, 21, 9, 0]], W: [24, [2, 21, 7, 0, -1, -1, 12, 21, 7, 0, -1, -1, 12, 21, 17, 0, -1, -1, 22, 21, 17, 0]], X: [20, [3, 21, 17, 0, -1, -1, 17, 21, 3, 0]], Y: [18, [1, 21, 9, 11, 9, 0, -1, -1, 17, 21, 9, 11]], Z: [20, [17, 21, 3, 0, -1, -1, 3, 21, 17, 21, -1, -1, 3, 0, 17, 0]], "[": [14, [4, 25, 4, -7, -1, -1, 5, 25, 5, -7, -1, -1, 4, 25, 11, 25, -1, -1, 4, -7, 11, -7]], "\\": [14, [0, 21, 14, -3]], "]": [14, [9, 25, 9, -7, -1, -1, 10, 25, 10, -7, -1, -1, 3, 25, 10, 25, -1, -1, 3, -7, 10, -7]], "^": [16, [6, 15, 8, 18, 10, 15, -1, -1, 3, 12, 8, 17, 13, 12, -1, -1, 8, 17, 8, 0]], _: [16, [0, -2, 16, -2]], "`": [10, [6, 21, 5, 20, 4, 18, 4, 16, 5, 15, 6, 16, 5, 17]], a: [19, [15, 14, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], b: [19, [4, 21, 4, 0, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]], c: [18, [15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], d: [19, [15, 21, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], e: [18, [3, 8, 15, 8, 15, 10, 14, 12, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], f: [12, [10, 21, 8, 21, 6, 20, 5, 17, 5, 0, -1, -1, 2, 14, 9, 14]], g: [19, [15, 14, 15, -2, 14, -5, 13, -6, 11, -7, 8, -7, 6, -6, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], h: [19, [4, 21, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]], i: [8, [3, 21, 4, 20, 5, 21, 4, 22, 3, 21, -1, -1, 4, 14, 4, 0]], j: [10, [5, 21, 6, 20, 7, 21, 6, 22, 5, 21, -1, -1, 6, 14, 6, -3, 5, -6, 3, -7, 1, -7]], k: [17, [4, 21, 4, 0, -1, -1, 14, 14, 4, 4, -1, -1, 8, 8, 15, 0]], l: [8, [4, 21, 4, 0]], m: [30, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0, -1, -1, 15, 10, 18, 13, 20, 14, 23, 14, 25, 13, 26, 10, 26, 0]], n: [19, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]], o: [19, [8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3, 16, 6, 16, 8, 15, 11, 13, 13, 11, 14, 8, 14]], p: [19, [4, 14, 4, -7, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]], q: [19, [15, 14, 15, -7, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]], r: [13, [4, 14, 4, 0, -1, -1, 4, 8, 5, 11, 7, 13, 9, 14, 12, 14]], s: [17, [14, 11, 13, 13, 10, 14, 7, 14, 4, 13, 3, 11, 4, 9, 6, 8, 11, 7, 13, 6, 14, 4, 14, 3, 13, 1, 10, 0, 7, 0, 4, 1, 3, 3]], t: [12, [5, 21, 5, 4, 6, 1, 8, 0, 10, 0, -1, -1, 2, 14, 9, 14]], u: [19, [4, 14, 4, 4, 5, 1, 7, 0, 10, 0, 12, 1, 15, 4, -1, -1, 15, 14, 15, 0]], v: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0]], w: [22, [3, 14, 7, 0, -1, -1, 11, 14, 7, 0, -1, -1, 11, 14, 15, 0, -1, -1, 19, 14, 15, 0]], x: [17, [3, 14, 14, 0, -1, -1, 14, 14, 3, 0]], y: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0, 6, -4, 4, -6, 2, -7, 1, -7]], z: [17, [14, 14, 3, 0, -1, -1, 3, 14, 14, 14, -1, -1, 3, 0, 14, 0]], "{": [14, [9, 25, 7, 24, 6, 23, 5, 21, 5, 19, 6, 17, 7, 16, 8, 14, 8, 12, 6, 10, -1, -1, 7, 24, 6, 22, 6, 20, 7, 18, 8, 17, 9, 15, 9, 13, 8, 11, 4, 9, 8, 7, 9, 5, 9, 3, 8, 1, 7, 0, 6, -2, 6, -4, 7, -6, -1, -1, 6, 8, 8, 6, 8, 4, 7, 2, 6, 1, 5, -1, 5, -3, 6, -5, 7, -6, 9, -7]], "|": [8, [4, 25, 4, -7]], "}": [14, [5, 25, 7, 24, 8, 23, 9, 21, 9, 19, 8, 17, 7, 16, 6, 14, 6, 12, 8, 10, -1, -1, 7, 24, 8, 22, 8, 20, 7, 18, 6, 17, 5, 15, 5, 13, 6, 11, 10, 9, 6, 7, 5, 5, 5, 3, 6, 1, 7, 0, 8, -2, 8, -4, 7, -6, -1, -1, 8, 8, 6, 6, 6, 4, 7, 2, 8, 1, 9, -1, 9, -3, 8, -5, 7, -6, 5, -7]], "~": [24, [3, 6, 3, 8, 4, 11, 6, 12, 8, 12, 10, 11, 14, 8, 16, 7, 18, 7, 20, 8, 21, 10, -1, -1, 3, 8, 4, 10, 6, 11, 8, 11, 10, 10, 14, 7, 16, 6, 18, 6, 20, 7, 21, 10, 21, 12]] };
        var oo = { symbol: function(t2, e2, i2, o2) {
          if ("translucent" === t2.renderPass) {
            var r2 = wt.disabled, a2 = t2.colorModeForRenderPass();
            0 !== i2.paint.get("icon-opacity").constantOr(1) && Xi(t2, e2, i2, o2, false, i2.paint.get("icon-translate"), i2.paint.get("icon-translate-anchor"), i2.layout.get("icon-rotation-alignment"), i2.layout.get("icon-pitch-alignment"), i2.layout.get("icon-keep-upright"), r2, a2), 0 !== i2.paint.get("text-opacity").constantOr(1) && Xi(t2, e2, i2, o2, true, i2.paint.get("text-translate"), i2.paint.get("text-translate-anchor"), i2.layout.get("text-rotation-alignment"), i2.layout.get("text-pitch-alignment"), i2.layout.get("text-keep-upright"), r2, a2), e2.map.showCollisionBoxes && function(t3, e3, i3, o3) {
              qi(t3, e3, i3, o3, false), qi(t3, e3, i3, o3, true);
            }(t2, e2, i2, o2);
          }
        }, circle: function(t2, e2, i2, o2) {
          if ("translucent" === t2.renderPass) {
            var r2 = i2.paint.get("circle-opacity"), a2 = i2.paint.get("circle-stroke-width"), n2 = i2.paint.get("circle-stroke-opacity");
            if (0 !== r2.constantOr(1) || 0 !== a2.constantOr(1) && 0 !== n2.constantOr(1))
              for (var s2 = t2.context, l2 = s2.gl, c2 = t2.depthModeForSublayer(0, bt.ReadOnly), u2 = wt.disabled, h2 = t2.colorModeForRenderPass(), p2 = 0; p2 < o2.length; p2++) {
                var d2 = o2[p2], _2 = e2.getTile(d2), f2 = _2.getBucket(i2);
                if (f2) {
                  var m2 = f2.programConfigurations.get(i2.id);
                  t2.useProgram("circle", m2).draw(s2, l2.TRIANGLES, c2, u2, h2, Tt.disabled, yi(t2, d2, _2, i2), i2.id, f2.layoutVertexBuffer, f2.indexBuffer, f2.segments, i2.paint, t2.transform.zoom, m2);
                }
              }
          }
        }, heatmap: function(e2, i2, o2, r2) {
          if (0 !== o2.paint.get("heatmap-opacity"))
            if ("offscreen" === e2.renderPass) {
              var a2 = e2.context, n2 = a2.gl, s2 = e2.depthModeForSublayer(0, bt.ReadOnly), l2 = wt.disabled, c2 = new Et([n2.ONE, n2.ONE], t.Color.transparent, [true, true, true, true]);
              !function(t2, e3, i3) {
                var o3 = t2.gl;
                t2.activeTexture.set(o3.TEXTURE1), t2.viewport.set([0, 0, e3.width / 4, e3.height / 4]);
                var r3 = i3.heatmapFbo;
                if (r3)
                  o3.bindTexture(o3.TEXTURE_2D, r3.colorAttachment.get()), t2.bindFramebuffer.set(r3.framebuffer);
                else {
                  var a3 = o3.createTexture();
                  o3.bindTexture(o3.TEXTURE_2D, a3), o3.texParameteri(o3.TEXTURE_2D, o3.TEXTURE_WRAP_S, o3.CLAMP_TO_EDGE), o3.texParameteri(o3.TEXTURE_2D, o3.TEXTURE_WRAP_T, o3.CLAMP_TO_EDGE), o3.texParameteri(o3.TEXTURE_2D, o3.TEXTURE_MIN_FILTER, o3.LINEAR), o3.texParameteri(o3.TEXTURE_2D, o3.TEXTURE_MAG_FILTER, o3.LINEAR), r3 = i3.heatmapFbo = t2.createFramebuffer(e3.width / 4, e3.height / 4), function t3(e4, i4, o4, r4) {
                    var a4 = e4.gl;
                    a4.texImage2D(a4.TEXTURE_2D, 0, a4.RGBA, i4.width / 4, i4.height / 4, 0, a4.RGBA, e4.extTextureHalfFloat ? e4.extTextureHalfFloat.HALF_FLOAT_OES : a4.UNSIGNED_BYTE, null), r4.colorAttachment.set(o4), e4.extTextureHalfFloat && a4.checkFramebufferStatus(a4.FRAMEBUFFER) !== a4.FRAMEBUFFER_COMPLETE && (e4.extTextureHalfFloat = null, r4.colorAttachment.setDirty(), t3(e4, i4, o4, r4));
                  }(t2, e3, a3, r3);
                }
              }(a2, e2, o2), a2.clear({ color: t.Color.transparent });
              for (var u2 = 0; u2 < r2.length; u2++) {
                var h2 = r2[u2];
                if (!i2.hasRenderableParent(h2)) {
                  var p2 = i2.getTile(h2), d2 = p2.getBucket(o2);
                  if (d2) {
                    var _2 = d2.programConfigurations.get(o2.id), f2 = e2.useProgram("heatmap", _2), m2 = e2.transform.zoom;
                    f2.draw(a2, n2.TRIANGLES, s2, l2, c2, Tt.disabled, Ti(h2.posMatrix, p2, m2, o2.paint.get("heatmap-intensity")), o2.id, d2.layoutVertexBuffer, d2.indexBuffer, d2.segments, o2.paint, e2.transform.zoom, _2);
                  }
                }
              }
              a2.viewport.set([0, 0, e2.width, e2.height]);
            } else
              "translucent" === e2.renderPass && (e2.context.setColorMode(e2.colorModeForRenderPass()), function(e3, i3) {
                var o3 = e3.context, r3 = o3.gl, a3 = i3.heatmapFbo;
                if (a3) {
                  o3.activeTexture.set(r3.TEXTURE0), r3.bindTexture(r3.TEXTURE_2D, a3.colorAttachment.get()), o3.activeTexture.set(r3.TEXTURE1);
                  var n3 = i3.colorRampTexture;
                  n3 || (n3 = i3.colorRampTexture = new t.Texture(o3, i3.colorRamp, r3.RGBA)), n3.bind(r3.LINEAR, r3.CLAMP_TO_EDGE), e3.useProgram("heatmapTexture").draw(o3, r3.TRIANGLES, bt.disabled, wt.disabled, e3.colorModeForRenderPass(), Tt.disabled, Ii(e3, i3, 0, 1), i3.id, e3.viewportBuffer, e3.quadTriangleIndexBuffer, e3.viewportSegments, i3.paint, e3.transform.zoom);
                }
              }(e2, o2));
        }, line: function(e2, i2, o2, r2) {
          if ("translucent" === e2.renderPass) {
            var a2 = o2.paint.get("line-opacity"), n2 = o2.paint.get("line-width");
            if (0 !== a2.constantOr(1) && 0 !== n2.constantOr(1)) {
              var s2 = e2.depthModeForSublayer(0, bt.ReadOnly), l2 = e2.colorModeForRenderPass(), c2 = o2.paint.get("line-dasharray"), u2 = o2.paint.get("line-pattern"), h2 = u2.constantOr(1), p2 = o2.paint.get("line-gradient"), d2 = o2.getCrossfadeParameters(), _2 = c2 ? "lineSDF" : h2 ? "linePattern" : p2 ? "lineGradient" : "line", f2 = e2.context, m2 = f2.gl, g2 = true;
              if (p2) {
                f2.activeTexture.set(m2.TEXTURE0);
                var v2 = o2.gradientTexture;
                if (!o2.gradient)
                  return;
                v2 || (v2 = o2.gradientTexture = new t.Texture(f2, o2.gradient, m2.RGBA)), v2.bind(m2.LINEAR, m2.CLAMP_TO_EDGE);
              }
              for (var y2 = 0, x2 = r2; y2 < x2.length; y2 += 1) {
                var b2 = x2[y2], w2 = i2.getTile(b2);
                if (!h2 || w2.patternsLoaded()) {
                  var E2 = w2.getBucket(o2);
                  if (E2) {
                    var T2 = E2.programConfigurations.get(o2.id), I2 = e2.context.program.get(), C2 = e2.useProgram(_2, T2), S2 = g2 || C2.program !== I2, z2 = u2.constantOr(null);
                    if (z2 && w2.imageAtlas) {
                      var L2 = w2.imageAtlas.patternPositions[z2.to], P2 = w2.imageAtlas.patternPositions[z2.from];
                      L2 && P2 && T2.setConstantPatternPositions(L2, P2);
                    }
                    var D2 = c2 ? Ri(e2, w2, o2, c2, d2) : h2 ? Di(e2, w2, o2, d2) : p2 ? Pi(e2, w2, o2) : Li(e2, w2, o2);
                    c2 && (S2 || e2.lineAtlas.dirty) ? (f2.activeTexture.set(m2.TEXTURE0), e2.lineAtlas.bind(f2)) : h2 && (f2.activeTexture.set(m2.TEXTURE0), w2.imageAtlasTexture.bind(m2.LINEAR, m2.CLAMP_TO_EDGE), T2.updatePatternPaintBuffers(d2)), C2.draw(f2, m2.TRIANGLES, s2, e2.stencilModeForClipping(b2), l2, Tt.disabled, D2, o2.id, E2.layoutVertexBuffer, E2.indexBuffer, E2.segments, o2.paint, e2.transform.zoom, T2), g2 = false;
                  }
                }
              }
            }
          }
        }, fill: function(e2, i2, o2, r2) {
          var a2 = o2.paint.get("fill-color"), n2 = o2.paint.get("fill-opacity");
          if (0 !== n2.constantOr(1)) {
            var s2 = e2.colorModeForRenderPass(), l2 = o2.paint.get("fill-pattern").constantOr(1) || 1 !== a2.constantOr(t.Color.transparent).a || 1 !== n2.constantOr(0) ? "translucent" : "opaque";
            if (e2.renderPass === l2) {
              var c2 = e2.depthModeForSublayer(1, "opaque" === e2.renderPass ? bt.ReadWrite : bt.ReadOnly);
              Ki(e2, i2, o2, r2, c2, s2, false);
            }
            if ("translucent" === e2.renderPass && o2.paint.get("fill-antialias")) {
              var u2 = e2.depthModeForSublayer(o2.getPaintProperty("fill-outline-color") ? 2 : 0, bt.ReadOnly);
              Ki(e2, i2, o2, r2, u2, s2, true);
            }
          }
        }, "fill-extrusion": function(t2, e2, i2, o2) {
          if (0 !== i2.paint.get("fill-extrusion-opacity"))
            if ("offscreen" === t2.renderPass) {
              Yi(t2, i2);
              var r2 = new bt(t2.context.gl.LEQUAL, bt.ReadWrite, [0, 1]), a2 = wt.disabled, n2 = t2.colorModeForRenderPass();
              !function(t3, e3, i3, o3, r3, a3, n3) {
                for (var s2 = t3.context, l2 = s2.gl, c2 = i3.paint.get("fill-extrusion-pattern"), u2 = c2.constantOr(1), h2 = i3.getCrossfadeParameters(), p2 = 0, d2 = o3; p2 < d2.length; p2 += 1) {
                  var _2 = d2[p2], f2 = e3.getTile(_2), m2 = f2.getBucket(i3);
                  if (m2) {
                    var g2 = m2.programConfigurations.get(i3.id), v2 = t3.useProgram(u2 ? "fillExtrusionPattern" : "fillExtrusion", g2);
                    u2 && (t3.context.activeTexture.set(l2.TEXTURE0), f2.imageAtlasTexture.bind(l2.LINEAR, l2.CLAMP_TO_EDGE), g2.updatePatternPaintBuffers(h2));
                    var y2 = c2.constantOr(null);
                    if (y2 && f2.imageAtlas) {
                      var x2 = f2.imageAtlas.patternPositions[y2.to], b2 = f2.imageAtlas.patternPositions[y2.from];
                      x2 && b2 && g2.setConstantPatternPositions(x2, b2);
                    }
                    var w2 = t3.translatePosMatrix(_2.posMatrix, f2, i3.paint.get("fill-extrusion-translate"), i3.paint.get("fill-extrusion-translate-anchor")), E2 = i3.paint.get("fill-extrusion-vertical-gradient"), T2 = u2 ? di(w2, t3, E2, _2, h2, f2) : pi(w2, t3, E2);
                    v2.draw(s2, s2.gl.TRIANGLES, r3, a3, n3, Tt.backCCW, T2, i3.id, m2.layoutVertexBuffer, m2.indexBuffer, m2.segments, i3.paint, t3.transform.zoom, g2);
                  }
                }
              }(t2, e2, i2, o2, r2, a2, n2);
            } else
              "translucent" === t2.renderPass && Ji(t2, i2, i2.paint.get("fill-extrusion-opacity"));
        }, hillshade: function(t2, e2, i2, o2) {
          if ("offscreen" === t2.renderPass || "translucent" === t2.renderPass) {
            for (var r2 = t2.context, a2 = e2.getSource().maxzoom, n2 = t2.depthModeForSublayer(0, bt.ReadOnly), s2 = wt.disabled, l2 = t2.colorModeForRenderPass(), c2 = 0, u2 = o2; c2 < u2.length; c2 += 1) {
              var h2 = u2[c2], p2 = e2.getTile(h2);
              p2.needsHillshadePrepare && "offscreen" === t2.renderPass ? $i(t2, p2, i2, a2, n2, s2, l2) : "translucent" === t2.renderPass && Qi(t2, p2, i2, n2, s2, l2);
            }
            r2.viewport.set([0, 0, t2.width, t2.height]);
          }
        }, raster: function(t2, e2, i2, o2) {
          if ("translucent" === t2.renderPass && 0 !== i2.paint.get("raster-opacity"))
            for (var r2 = t2.context, a2 = r2.gl, n2 = e2.getSource(), s2 = t2.useProgram("raster"), l2 = wt.disabled, c2 = t2.colorModeForRenderPass(), u2 = o2.length && o2[0].overscaledZ, h2 = !t2.options.moving, p2 = 0, d2 = o2; p2 < d2.length; p2 += 1) {
              var _2 = d2[p2], f2 = t2.depthModeForSublayer(_2.overscaledZ - u2, 1 === i2.paint.get("raster-opacity") ? bt.ReadWrite : bt.ReadOnly, a2.LESS), m2 = e2.getTile(_2), g2 = t2.transform.calculatePosMatrix(_2.toUnwrapped(), h2);
              m2.registerFadeDuration(i2.paint.get("raster-fade-duration"));
              var v2 = e2.findLoadedParent(_2, 0), y2 = to(m2, v2, e2, i2, t2.transform), x2 = void 0, b2 = void 0, w2 = "nearest" === i2.paint.get("raster-resampling") ? a2.NEAREST : a2.LINEAR;
              r2.activeTexture.set(a2.TEXTURE0), m2.texture.bind(w2, a2.CLAMP_TO_EDGE, a2.LINEAR_MIPMAP_NEAREST), r2.activeTexture.set(a2.TEXTURE1), v2 ? (v2.texture.bind(w2, a2.CLAMP_TO_EDGE, a2.LINEAR_MIPMAP_NEAREST), x2 = Math.pow(2, v2.tileID.overscaledZ - m2.tileID.overscaledZ), b2 = [m2.tileID.canonical.x * x2 % 1, m2.tileID.canonical.y * x2 % 1]) : m2.texture.bind(w2, a2.CLAMP_TO_EDGE, a2.LINEAR_MIPMAP_NEAREST);
              var E2 = ki(g2, b2 || [0, 0], x2 || 1, y2, i2);
              n2 instanceof L ? s2.draw(r2, a2.TRIANGLES, f2, l2, c2, Tt.disabled, E2, i2.id, n2.boundsBuffer, t2.quadTriangleIndexBuffer, n2.boundsSegments) : m2.maskedBoundsBuffer && m2.maskedIndexBuffer && m2.segments ? s2.draw(r2, a2.TRIANGLES, f2, l2, c2, Tt.disabled, E2, i2.id, m2.maskedBoundsBuffer, m2.maskedIndexBuffer, m2.segments, i2.paint, t2.transform.zoom) : s2.draw(r2, a2.TRIANGLES, f2, l2, c2, Tt.disabled, E2, i2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments);
            }
        }, background: function(t2, e2, i2) {
          var o2 = i2.paint.get("background-color"), r2 = i2.paint.get("background-opacity");
          if (0 !== r2) {
            var a2 = t2.context, n2 = a2.gl, s2 = t2.transform, l2 = s2.tileSize, c2 = i2.paint.get("background-pattern");
            if (!t2.isPatternMissing(c2)) {
              var u2 = c2 || 1 !== o2.a || 1 !== r2 ? "translucent" : "opaque";
              if (t2.renderPass === u2) {
                var h2 = wt.disabled, p2 = t2.depthModeForSublayer(0, "opaque" === u2 ? bt.ReadWrite : bt.ReadOnly), d2 = t2.colorModeForRenderPass(), _2 = t2.useProgram(c2 ? "backgroundPattern" : "background"), f2 = s2.coveringTiles({ tileSize: l2 });
                c2 && (a2.activeTexture.set(n2.TEXTURE0), t2.imageManager.bind(t2.context));
                for (var m2 = i2.getCrossfadeParameters(), g2 = 0, v2 = f2; g2 < v2.length; g2 += 1) {
                  var y2 = v2[g2], x2 = t2.transform.calculatePosMatrix(y2.toUnwrapped()), b2 = c2 ? Ni(x2, r2, t2, c2, { tileID: y2, tileSize: l2 }, m2) : Ui(x2, r2, o2);
                  _2.draw(a2, n2.TRIANGLES, p2, h2, d2, Tt.disabled, b2, i2.id, t2.tileExtentBuffer, t2.quadTriangleIndexBuffer, t2.tileExtentSegments);
                }
              }
            }
          }
        }, debug: function(t2, e2, i2) {
          for (var o2 = 0; o2 < i2.length; o2++)
            eo(t2, e2, i2[o2]);
        }, custom: function(t2, e2, i2) {
          var o2 = t2.context, r2 = i2.implementation;
          if ("offscreen" === t2.renderPass) {
            var a2 = r2.prerender;
            a2 && (t2.setCustomLayerDefaults(), a2.call(r2, o2.gl, t2.transform.customLayerMatrix()), o2.setDirty(), t2.setBaseState()), "3d" === r2.renderingMode && (t2.setCustomLayerDefaults(), Yi(t2, i2), r2.render(o2.gl, t2.transform.customLayerMatrix()), o2.setDirty(), t2.setBaseState());
          } else if ("translucent" === t2.renderPass)
            if ("3d" === r2.renderingMode)
              Ji(t2, i2, 1);
            else {
              t2.setCustomLayerDefaults(), o2.setColorMode(t2.colorModeForRenderPass()), o2.setStencilMode(wt.disabled);
              var n2 = t2.depthModeForSublayer(0, bt.ReadOnly);
              o2.setDepthMode(n2), r2.render(o2.gl, t2.transform.customLayerMatrix()), o2.setDirty(), t2.setBaseState(), o2.bindFramebuffer.set(null);
            }
        } }, ro = function(e2, i2) {
          this.context = new It(e2), this.transform = i2, this._tileTextures = {}, this.setup(), this.numSublayers = Ct.maxUnderzooming + Ct.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.depthRboNeedsClear = true, this.emptyProgramConfiguration = new t.ProgramConfiguration(), this.crossTileSymbolIndex = new Le();
        };
        function ao(t2, e2) {
          if (t2.y > e2.y) {
            var i2 = t2;
            t2 = e2, e2 = i2;
          }
          return { x0: t2.x, y0: t2.y, x1: e2.x, y1: e2.y, dx: e2.x - t2.x, dy: e2.y - t2.y };
        }
        function no(t2, e2, i2, o2, r2) {
          var a2 = Math.max(i2, Math.floor(e2.y0)), n2 = Math.min(o2, Math.ceil(e2.y1));
          if (t2.x0 === e2.x0 && t2.y0 === e2.y0 ? t2.x0 + e2.dy / t2.dy * t2.dx < e2.x1 : t2.x1 - e2.dy / t2.dy * t2.dx < e2.x0) {
            var s2 = t2;
            t2 = e2, e2 = s2;
          }
          for (var l2 = t2.dx / t2.dy, c2 = e2.dx / e2.dy, u2 = t2.dx > 0, h2 = e2.dx < 0, p2 = a2; p2 < n2; p2++) {
            var d2 = l2 * Math.max(0, Math.min(t2.dy, p2 + u2 - t2.y0)) + t2.x0, _2 = c2 * Math.max(0, Math.min(e2.dy, p2 + h2 - e2.y0)) + e2.x0;
            r2(Math.floor(_2), Math.ceil(d2), p2);
          }
        }
        function so(t2, e2, i2, o2, r2, a2) {
          var n2, s2 = ao(t2, e2), l2 = ao(e2, i2), c2 = ao(i2, t2);
          s2.dy > l2.dy && (n2 = s2, s2 = l2, l2 = n2), s2.dy > c2.dy && (n2 = s2, s2 = c2, c2 = n2), l2.dy > c2.dy && (n2 = l2, l2 = c2, c2 = n2), s2.dy && no(c2, s2, o2, r2, a2), l2.dy && no(c2, l2, o2, r2, a2);
        }
        ro.prototype.resize = function(e2, i2) {
          var o2 = this.context.gl;
          if (this.width = e2 * t.browser.devicePixelRatio, this.height = i2 * t.browser.devicePixelRatio, this.context.viewport.set([0, 0, this.width, this.height]), this.style)
            for (var r2 = 0, a2 = this.style._order; r2 < a2.length; r2 += 1) {
              var n2 = a2[r2];
              this.style._layers[n2].resize();
            }
          this.depthRbo && (o2.deleteRenderbuffer(this.depthRbo), this.depthRbo = null);
        }, ro.prototype.setup = function() {
          var e2 = this.context, i2 = new t.StructArrayLayout2i4();
          i2.emplaceBack(0, 0), i2.emplaceBack(t.EXTENT, 0), i2.emplaceBack(0, t.EXTENT), i2.emplaceBack(t.EXTENT, t.EXTENT), this.tileExtentBuffer = e2.createVertexBuffer(i2, Ae.members), this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
          var o2 = new t.StructArrayLayout2i4();
          o2.emplaceBack(0, 0), o2.emplaceBack(t.EXTENT, 0), o2.emplaceBack(0, t.EXTENT), o2.emplaceBack(t.EXTENT, t.EXTENT), this.debugBuffer = e2.createVertexBuffer(o2, Ae.members), this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);
          var r2 = new t.StructArrayLayout4i8();
          r2.emplaceBack(0, 0, 0, 0), r2.emplaceBack(t.EXTENT, 0, t.EXTENT, 0), r2.emplaceBack(0, t.EXTENT, 0, t.EXTENT), r2.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT), this.rasterBoundsBuffer = e2.createVertexBuffer(r2, t.rasterBoundsAttributes.members), this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
          var a2 = new t.StructArrayLayout2i4();
          a2.emplaceBack(0, 0), a2.emplaceBack(1, 0), a2.emplaceBack(0, 1), a2.emplaceBack(1, 1), this.viewportBuffer = e2.createVertexBuffer(a2, Ae.members), this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
          var n2 = new t.StructArrayLayout1ui2();
          n2.emplaceBack(0), n2.emplaceBack(1), n2.emplaceBack(3), n2.emplaceBack(2), n2.emplaceBack(0), this.tileBorderIndexBuffer = e2.createIndexBuffer(n2);
          var s2 = new t.StructArrayLayout3ui6();
          s2.emplaceBack(0, 1, 2), s2.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = e2.createIndexBuffer(s2);
          var l2 = this.context.gl;
          this.stencilClearMode = new wt({ func: l2.ALWAYS, mask: 0 }, 0, 255, l2.ZERO, l2.ZERO, l2.ZERO);
        }, ro.prototype.clearStencil = function() {
          var e2 = this.context, i2 = e2.gl, o2 = t.create$1();
          t.ortho(o2, 0, this.width, this.height, 0, 0, 1), t.scale(o2, o2, [i2.drawingBufferWidth, i2.drawingBufferHeight, 0]), this.useProgram("clippingMask").draw(e2, i2.TRIANGLES, bt.disabled, this.stencilClearMode, Et.disabled, Tt.disabled, Ei(o2), "$clipping", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);
        }, ro.prototype._renderTileClippingMasks = function(t2) {
          var e2 = this.context, i2 = e2.gl;
          e2.setColorMode(Et.disabled), e2.setDepthMode(bt.disabled);
          var o2 = this.useProgram("clippingMask"), r2 = 1;
          this._tileClippingMaskIDs = {};
          for (var a2 = 0, n2 = t2; a2 < n2.length; a2 += 1) {
            var s2 = n2[a2], l2 = this._tileClippingMaskIDs[s2.key] = r2++;
            o2.draw(e2, i2.TRIANGLES, bt.disabled, new wt({ func: i2.ALWAYS, mask: 0 }, l2, 255, i2.KEEP, i2.KEEP, i2.REPLACE), Et.disabled, Tt.disabled, Ei(s2.posMatrix), "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);
          }
        }, ro.prototype.stencilModeForClipping = function(t2) {
          var e2 = this.context.gl;
          return new wt({ func: e2.EQUAL, mask: 255 }, this._tileClippingMaskIDs[t2.key], 0, e2.KEEP, e2.KEEP, e2.REPLACE);
        }, ro.prototype.colorModeForRenderPass = function() {
          var e2 = this.context.gl;
          if (this._showOverdrawInspector) {
            return new Et([e2.CONSTANT_COLOR, e2.ONE], new t.Color(1 / 8, 1 / 8, 1 / 8, 0), [true, true, true, true]);
          }
          return "opaque" === this.renderPass ? Et.unblended : Et.alphaBlended;
        }, ro.prototype.depthModeForSublayer = function(t2, e2, i2) {
          var o2 = 1 - ((1 + this.currentLayer) * this.numSublayers + t2) * this.depthEpsilon;
          return new bt(i2 || this.context.gl.LEQUAL, e2, [o2, o2]);
        }, ro.prototype.render = function(e2, i2) {
          this.style = e2, this.options = i2, this.lineAtlas = e2.lineAtlas, this.imageManager = e2.imageManager, this.glyphManager = e2.glyphManager, this.symbolFadeChange = e2.placement.symbolFadeChange(t.browser.now());
          var o2 = this.style._order, r2 = this.style.sourceCaches;
          for (var a2 in r2) {
            var n2 = r2[a2];
            n2.used && n2.prepare(this.context);
          }
          var s2, l2 = {}, c2 = {}, u2 = {};
          for (var h2 in r2) {
            var p2 = r2[h2];
            l2[h2] = p2.getVisibleCoordinates(), c2[h2] = l2[h2].slice().reverse(), u2[h2] = p2.getVisibleCoordinates(true).reverse();
          }
          for (var d2 in r2) {
            var _2 = r2[d2], f2 = _2.getSource();
            if ("raster" === f2.type || "raster-dem" === f2.type) {
              for (var m2 = [], g2 = 0, v2 = l2[d2]; g2 < v2.length; g2 += 1) {
                var y2 = v2[g2];
                m2.push(_2.getTile(y2));
              }
              ji(m2, this.context);
            }
          }
          this.renderPass = "offscreen", this.depthRboNeedsClear = true;
          for (var x2 = 0, b2 = o2; x2 < b2.length; x2 += 1) {
            var w2 = b2[x2], E2 = this.style._layers[w2];
            if (E2.hasOffscreenPass() && !E2.isHidden(this.transform.zoom)) {
              var T2 = c2[E2.source];
              ("custom" === E2.type || T2.length) && this.renderLayer(this, r2[E2.source], E2, T2);
            }
          }
          for (this.context.bindFramebuffer.set(null), this.context.clear({ color: i2.showOverdrawInspector ? t.Color.black : t.Color.transparent, depth: 1 }), this._showOverdrawInspector = i2.showOverdrawInspector, this.depthRange = (e2._order.length + 2) * this.numSublayers * this.depthEpsilon, this.renderPass = "opaque", this.currentLayer = o2.length - 1; this.currentLayer >= 0; this.currentLayer--) {
            var I2 = this.style._layers[o2[this.currentLayer]], C2 = r2[I2.source], S2 = l2[I2.source];
            I2.source !== s2 && C2 && (this.clearStencil(), C2.getSource().isTileClipped && this._renderTileClippingMasks(S2)), this.renderLayer(this, C2, I2, S2), s2 = I2.source;
          }
          for (this.renderPass = "translucent", this.currentLayer = 0, s2 = null; this.currentLayer < o2.length; this.currentLayer++) {
            var z2 = this.style._layers[o2[this.currentLayer]], L2 = r2[z2.source], P2 = ("symbol" === z2.type ? u2 : c2)[z2.source];
            z2.source !== s2 && L2 && (this.clearStencil(), L2.getSource().isTileClipped && this._renderTileClippingMasks(l2[z2.source])), this.renderLayer(this, L2, z2, P2), s2 = z2.source;
          }
          if (this.options.showTileBoundaries)
            for (var D2 in r2) {
              oo.debug(this, r2[D2], l2[D2]);
              break;
            }
          this.setCustomLayerDefaults();
        }, ro.prototype.setupOffscreenDepthRenderbuffer = function() {
          var t2 = this.context;
          this.depthRbo || (this.depthRbo = t2.createRenderbuffer(t2.gl.DEPTH_COMPONENT16, this.width, this.height));
        }, ro.prototype.renderLayer = function(t2, e2, i2, o2) {
          i2.isHidden(this.transform.zoom) || ("background" === i2.type || "custom" === i2.type || o2.length) && (this.id = i2.id, oo[i2.type](t2, e2, i2, o2));
        }, ro.prototype.translatePosMatrix = function(e2, i2, o2, r2, a2) {
          if (!o2[0] && !o2[1])
            return e2;
          var n2 = a2 ? "map" === r2 ? this.transform.angle : 0 : "viewport" === r2 ? -this.transform.angle : 0;
          if (n2) {
            var s2 = Math.sin(n2), l2 = Math.cos(n2);
            o2 = [o2[0] * l2 - o2[1] * s2, o2[0] * s2 + o2[1] * l2];
          }
          var c2 = [a2 ? o2[0] : se(i2, o2[0], this.transform.zoom), a2 ? o2[1] : se(i2, o2[1], this.transform.zoom), 0], u2 = new Float32Array(16);
          return t.translate(u2, e2, c2), u2;
        }, ro.prototype.saveTileTexture = function(t2) {
          var e2 = this._tileTextures[t2.size[0]];
          e2 ? e2.push(t2) : this._tileTextures[t2.size[0]] = [t2];
        }, ro.prototype.getTileTexture = function(t2) {
          var e2 = this._tileTextures[t2];
          return e2 && e2.length > 0 ? e2.pop() : null;
        }, ro.prototype.isPatternMissing = function(t2) {
          if (!t2)
            return false;
          var e2 = this.imageManager.getPattern(t2.from), i2 = this.imageManager.getPattern(t2.to);
          return !e2 || !i2;
        }, ro.prototype.useProgram = function(t2, e2) {
          void 0 === e2 && (e2 = this.emptyProgramConfiguration), this.cache = this.cache || {};
          var i2 = "" + t2 + (e2.cacheKey || "") + (this._showOverdrawInspector ? "/overdraw" : "");
          return this.cache[i2] || (this.cache[i2] = new ui(this.context, li[t2], e2, Zi[t2], this._showOverdrawInspector)), this.cache[i2];
        }, ro.prototype.setCustomLayerDefaults = function() {
          this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();
        }, ro.prototype.setBaseState = function() {
          var t2 = this.context.gl;
          this.context.cullFace.set(false), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t2.FUNC_ADD);
        };
        var lo = function(e2, i2, o2) {
          this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === o2 || o2, this._minZoom = e2 || 0, this._maxZoom = i2 || 22, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new t.LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = 0.6435011087932844, this._pitch = 0, this._unmodified = true, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
        }, co = { minZoom: { configurable: true }, maxZoom: { configurable: true }, renderWorldCopies: { configurable: true }, worldSize: { configurable: true }, centerPoint: { configurable: true }, size: { configurable: true }, bearing: { configurable: true }, pitch: { configurable: true }, fov: { configurable: true }, zoom: { configurable: true }, center: { configurable: true }, unmodified: { configurable: true }, point: { configurable: true } };
        lo.prototype.clone = function() {
          var t2 = new lo(this._minZoom, this._maxZoom, this._renderWorldCopies);
          return t2.tileSize = this.tileSize, t2.latRange = this.latRange, t2.width = this.width, t2.height = this.height, t2._center = this._center, t2.zoom = this.zoom, t2.angle = this.angle, t2._fov = this._fov, t2._pitch = this._pitch, t2._unmodified = this._unmodified, t2._calcMatrices(), t2;
        }, co.minZoom.get = function() {
          return this._minZoom;
        }, co.minZoom.set = function(t2) {
          this._minZoom !== t2 && (this._minZoom = t2, this.zoom = Math.max(this.zoom, t2));
        }, co.maxZoom.get = function() {
          return this._maxZoom;
        }, co.maxZoom.set = function(t2) {
          this._maxZoom !== t2 && (this._maxZoom = t2, this.zoom = Math.min(this.zoom, t2));
        }, co.renderWorldCopies.get = function() {
          return this._renderWorldCopies;
        }, co.renderWorldCopies.set = function(t2) {
          void 0 === t2 ? t2 = true : null === t2 && (t2 = false), this._renderWorldCopies = t2;
        }, co.worldSize.get = function() {
          return this.tileSize * this.scale;
        }, co.centerPoint.get = function() {
          return this.size._div(2);
        }, co.size.get = function() {
          return new t.Point(this.width, this.height);
        }, co.bearing.get = function() {
          return -this.angle / Math.PI * 180;
        }, co.bearing.set = function(e2) {
          var i2 = -t.wrap(e2, -180, 180) * Math.PI / 180;
          this.angle !== i2 && (this._unmodified = false, this.angle = i2, this._calcMatrices(), this.rotationMatrix = t.create$2(), t.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));
        }, co.pitch.get = function() {
          return this._pitch / Math.PI * 180;
        }, co.pitch.set = function(e2) {
          var i2 = t.clamp(e2, 0, 60) / 180 * Math.PI;
          this._pitch !== i2 && (this._unmodified = false, this._pitch = i2, this._calcMatrices());
        }, co.fov.get = function() {
          return this._fov / Math.PI * 180;
        }, co.fov.set = function(t2) {
          t2 = Math.max(0.01, Math.min(60, t2)), this._fov !== t2 && (this._unmodified = false, this._fov = t2 / 180 * Math.PI, this._calcMatrices());
        }, co.zoom.get = function() {
          return this._zoom;
        }, co.zoom.set = function(t2) {
          var e2 = Math.min(Math.max(t2, this.minZoom), this.maxZoom);
          this._zoom !== e2 && (this._unmodified = false, this._zoom = e2, this.scale = this.zoomScale(e2), this.tileZoom = Math.floor(e2), this.zoomFraction = e2 - this.tileZoom, this._constrain(), this._calcMatrices());
        }, co.center.get = function() {
          return this._center;
        }, co.center.set = function(t2) {
          t2.lat === this._center.lat && t2.lng === this._center.lng || (this._unmodified = false, this._center = t2, this._constrain(), this._calcMatrices());
        }, lo.prototype.coveringZoomLevel = function(t2) {
          return (t2.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t2.tileSize));
        }, lo.prototype.getVisibleUnwrappedCoordinates = function(e2) {
          var i2 = [new t.UnwrappedTileID(0, e2)];
          if (this._renderWorldCopies)
            for (var o2 = this.pointCoordinate(new t.Point(0, 0)), r2 = this.pointCoordinate(new t.Point(this.width, 0)), a2 = this.pointCoordinate(new t.Point(this.width, this.height)), n2 = this.pointCoordinate(new t.Point(0, this.height)), s2 = Math.floor(Math.min(o2.x, r2.x, a2.x, n2.x)), l2 = Math.floor(Math.max(o2.x, r2.x, a2.x, n2.x)), c2 = s2 - 1; c2 <= l2 + 1; c2++)
              0 !== c2 && i2.push(new t.UnwrappedTileID(c2, e2));
          return i2;
        }, lo.prototype.coveringTiles = function(e2) {
          var i2 = this.coveringZoomLevel(e2), o2 = i2;
          if (void 0 !== e2.minzoom && i2 < e2.minzoom)
            return [];
          void 0 !== e2.maxzoom && i2 > e2.maxzoom && (i2 = e2.maxzoom);
          var r2 = t.MercatorCoordinate.fromLngLat(this.center), a2 = Math.pow(2, i2), n2 = new t.Point(a2 * r2.x - 0.5, a2 * r2.y - 0.5);
          return function(e3, i3, o3, r3) {
            void 0 === r3 && (r3 = true);
            var a3 = 1 << e3, n3 = {};
            function s2(i4, s3, l3) {
              var c2, u2, h2, p2;
              if (l3 >= 0 && l3 <= a3)
                for (c2 = i4; c2 < s3; c2++)
                  u2 = Math.floor(c2 / a3), h2 = (c2 % a3 + a3) % a3, 0 !== u2 && true !== r3 || (p2 = new t.OverscaledTileID(o3, u2, e3, h2, l3), n3[p2.key] = p2);
            }
            var l2 = i3.map(function(e4) {
              return new t.Point(e4.x, e4.y)._mult(a3);
            });
            return so(l2[0], l2[1], l2[2], 0, a3, s2), so(l2[2], l2[3], l2[0], 0, a3, s2), Object.keys(n3).map(function(t2) {
              return n3[t2];
            });
          }(i2, [this.pointCoordinate(new t.Point(0, 0)), this.pointCoordinate(new t.Point(this.width, 0)), this.pointCoordinate(new t.Point(this.width, this.height)), this.pointCoordinate(new t.Point(0, this.height))], e2.reparseOverscaled ? o2 : i2, this._renderWorldCopies).sort(function(t2, e3) {
            return n2.dist(t2.canonical) - n2.dist(e3.canonical);
          });
        }, lo.prototype.resize = function(t2, e2) {
          this.width = t2, this.height = e2, this.pixelsToGLUnits = [2 / t2, -2 / e2], this._constrain(), this._calcMatrices();
        }, co.unmodified.get = function() {
          return this._unmodified;
        }, lo.prototype.zoomScale = function(t2) {
          return Math.pow(2, t2);
        }, lo.prototype.scaleZoom = function(t2) {
          return Math.log(t2) / Math.LN2;
        }, lo.prototype.project = function(e2) {
          var i2 = t.clamp(e2.lat, -this.maxValidLatitude, this.maxValidLatitude);
          return new t.Point(t.mercatorXfromLng(e2.lng) * this.worldSize, t.mercatorYfromLat(i2) * this.worldSize);
        }, lo.prototype.unproject = function(e2) {
          return new t.MercatorCoordinate(e2.x / this.worldSize, e2.y / this.worldSize).toLngLat();
        }, co.point.get = function() {
          return this.project(this.center);
        }, lo.prototype.setLocationAtPoint = function(e2, i2) {
          var o2 = this.pointCoordinate(i2), r2 = this.pointCoordinate(this.centerPoint), a2 = this.locationCoordinate(e2), n2 = new t.MercatorCoordinate(a2.x - (o2.x - r2.x), a2.y - (o2.y - r2.y));
          this.center = this.coordinateLocation(n2), this._renderWorldCopies && (this.center = this.center.wrap());
        }, lo.prototype.locationPoint = function(t2) {
          return this.coordinatePoint(this.locationCoordinate(t2));
        }, lo.prototype.pointLocation = function(t2) {
          return this.coordinateLocation(this.pointCoordinate(t2));
        }, lo.prototype.locationCoordinate = function(e2) {
          return t.MercatorCoordinate.fromLngLat(e2);
        }, lo.prototype.coordinateLocation = function(t2) {
          return t2.toLngLat();
        }, lo.prototype.pointCoordinate = function(e2) {
          var i2 = [e2.x, e2.y, 0, 1], o2 = [e2.x, e2.y, 1, 1];
          t.transformMat4(i2, i2, this.pixelMatrixInverse), t.transformMat4(o2, o2, this.pixelMatrixInverse);
          var r2 = i2[3], a2 = o2[3], n2 = i2[0] / r2, s2 = o2[0] / a2, l2 = i2[1] / r2, c2 = o2[1] / a2, u2 = i2[2] / r2, h2 = o2[2] / a2, p2 = u2 === h2 ? 0 : (0 - u2) / (h2 - u2);
          return new t.MercatorCoordinate(t.number(n2, s2, p2) / this.worldSize, t.number(l2, c2, p2) / this.worldSize);
        }, lo.prototype.coordinatePoint = function(e2) {
          var i2 = [e2.x * this.worldSize, e2.y * this.worldSize, 0, 1];
          return t.transformMat4(i2, i2, this.pixelMatrix), new t.Point(i2[0] / i2[3], i2[1] / i2[3]);
        }, lo.prototype.getBounds = function() {
          return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0, 0))).extend(this.pointLocation(new t.Point(this.width, 0))).extend(this.pointLocation(new t.Point(this.width, this.height))).extend(this.pointLocation(new t.Point(0, this.height)));
        }, lo.prototype.getMaxBounds = function() {
          return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;
        }, lo.prototype.setMaxBounds = function(t2) {
          t2 ? (this.lngRange = [t2.getWest(), t2.getEast()], this.latRange = [t2.getSouth(), t2.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);
        }, lo.prototype.calculatePosMatrix = function(e2, i2) {
          void 0 === i2 && (i2 = false);
          var o2 = e2.key, r2 = i2 ? this._alignedPosMatrixCache : this._posMatrixCache;
          if (r2[o2])
            return r2[o2];
          var a2 = e2.canonical, n2 = this.worldSize / this.zoomScale(a2.z), s2 = a2.x + Math.pow(2, a2.z) * e2.wrap, l2 = t.identity(new Float64Array(16));
          return t.translate(l2, l2, [s2 * n2, a2.y * n2, 0]), t.scale(l2, l2, [n2 / t.EXTENT, n2 / t.EXTENT, 1]), t.multiply(l2, i2 ? this.alignedProjMatrix : this.projMatrix, l2), r2[o2] = new Float32Array(l2), r2[o2];
        }, lo.prototype.customLayerMatrix = function() {
          return this.mercatorMatrix.slice();
        }, lo.prototype._constrain = function() {
          if (this.center && this.width && this.height && !this._constraining) {
            this._constraining = true;
            var e2, i2, o2, r2, a2 = -90, n2 = 90, s2 = -180, l2 = 180, c2 = this.size, u2 = this._unmodified;
            if (this.latRange) {
              var h2 = this.latRange;
              a2 = t.mercatorYfromLat(h2[1]) * this.worldSize, e2 = (n2 = t.mercatorYfromLat(h2[0]) * this.worldSize) - a2 < c2.y ? c2.y / (n2 - a2) : 0;
            }
            if (this.lngRange) {
              var p2 = this.lngRange;
              s2 = t.mercatorXfromLng(p2[0]) * this.worldSize, i2 = (l2 = t.mercatorXfromLng(p2[1]) * this.worldSize) - s2 < c2.x ? c2.x / (l2 - s2) : 0;
            }
            var d2 = this.point, _2 = Math.max(i2 || 0, e2 || 0);
            if (_2)
              return this.center = this.unproject(new t.Point(i2 ? (l2 + s2) / 2 : d2.x, e2 ? (n2 + a2) / 2 : d2.y)), this.zoom += this.scaleZoom(_2), this._unmodified = u2, void (this._constraining = false);
            if (this.latRange) {
              var f2 = d2.y, m2 = c2.y / 2;
              f2 - m2 < a2 && (r2 = a2 + m2), f2 + m2 > n2 && (r2 = n2 - m2);
            }
            if (this.lngRange) {
              var g2 = d2.x, v2 = c2.x / 2;
              g2 - v2 < s2 && (o2 = s2 + v2), g2 + v2 > l2 && (o2 = l2 - v2);
            }
            void 0 === o2 && void 0 === r2 || (this.center = this.unproject(new t.Point(void 0 !== o2 ? o2 : d2.x, void 0 !== r2 ? r2 : d2.y))), this._unmodified = u2, this._constraining = false;
          }
        }, lo.prototype._calcMatrices = function() {
          if (this.height) {
            this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height;
            var e2 = this._fov / 2, i2 = Math.PI / 2 + this._pitch, o2 = Math.sin(e2) * this.cameraToCenterDistance / Math.sin(Math.PI - i2 - e2), r2 = this.point, a2 = r2.x, n2 = r2.y, s2 = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * o2 + this.cameraToCenterDistance), l2 = new Float64Array(16);
            t.perspective(l2, this._fov, this.width / this.height, 1, s2), t.scale(l2, l2, [1, -1, 1]), t.translate(l2, l2, [0, 0, -this.cameraToCenterDistance]), t.rotateX(l2, l2, this._pitch), t.rotateZ(l2, l2, this.angle), t.translate(l2, l2, [-a2, -n2, 0]), this.mercatorMatrix = t.scale([], l2, [this.worldSize, this.worldSize, this.worldSize]), t.scale(l2, l2, [1, 1, t.mercatorZfromAltitude(1, this.center.lat) * this.worldSize, 1]), this.projMatrix = l2;
            var c2 = this.width % 2 / 2, u2 = this.height % 2 / 2, h2 = Math.cos(this.angle), p2 = Math.sin(this.angle), d2 = a2 - Math.round(a2) + h2 * c2 + p2 * u2, _2 = n2 - Math.round(n2) + h2 * u2 + p2 * c2, f2 = new Float64Array(l2);
            if (t.translate(f2, f2, [d2 > 0.5 ? d2 - 1 : d2, _2 > 0.5 ? _2 - 1 : _2, 0]), this.alignedProjMatrix = f2, l2 = t.create$1(), t.scale(l2, l2, [this.width / 2, -this.height / 2, 1]), t.translate(l2, l2, [1, -1, 0]), this.pixelMatrix = t.multiply(new Float64Array(16), l2, this.projMatrix), !(l2 = t.invert(new Float64Array(16), this.pixelMatrix)))
              throw new Error("failed to invert matrix");
            this.pixelMatrixInverse = l2, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
          }
        }, lo.prototype.maxPitchScaleFactor = function() {
          if (!this.pixelMatrixInverse)
            return 1;
          var e2 = this.pointCoordinate(new t.Point(0, 0)), i2 = [e2.x * this.worldSize, e2.y * this.worldSize, 0, 1];
          return t.transformMat4(i2, i2, this.pixelMatrix)[3] / this.cameraToCenterDistance;
        }, lo.prototype.getCameraPoint = function() {
          var e2 = this._pitch, i2 = Math.tan(e2) * (this.cameraToCenterDistance || 1);
          return this.centerPoint.add(new t.Point(0, i2));
        }, lo.prototype.getCameraQueryGeometry = function(e2) {
          var i2 = this.getCameraPoint();
          if (1 === e2.length)
            return [e2[0], i2];
          for (var o2 = i2.x, r2 = i2.y, a2 = i2.x, n2 = i2.y, s2 = 0, l2 = e2; s2 < l2.length; s2 += 1) {
            var c2 = l2[s2];
            o2 = Math.min(o2, c2.x), r2 = Math.min(r2, c2.y), a2 = Math.max(a2, c2.x), n2 = Math.max(n2, c2.y);
          }
          return [new t.Point(o2, r2), new t.Point(a2, r2), new t.Point(a2, n2), new t.Point(o2, n2), new t.Point(o2, r2)];
        }, Object.defineProperties(lo.prototype, co);
        var uo = function() {
          var e2, i2, o2, r2, a2;
          t.bindAll(["_onHashChange", "_updateHash"], this), this._updateHash = (e2 = this._updateHashUnthrottled.bind(this), i2 = 300, o2 = false, r2 = 0, a2 = function() {
            r2 = 0, o2 && (e2(), r2 = setTimeout(a2, i2), o2 = false);
          }, function() {
            return o2 = true, r2 || a2(), r2;
          });
        };
        uo.prototype.addTo = function(e2) {
          return this._map = e2, t.window.addEventListener("hashchange", this._onHashChange, false), this._map.on("moveend", this._updateHash), this;
        }, uo.prototype.remove = function() {
          return t.window.removeEventListener("hashchange", this._onHashChange, false), this._map.off("moveend", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this;
        }, uo.prototype.getHashString = function(t2) {
          var e2 = this._map.getCenter(), i2 = Math.round(100 * this._map.getZoom()) / 100, o2 = Math.ceil((i2 * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10), r2 = Math.pow(10, o2), a2 = Math.round(e2.lng * r2) / r2, n2 = Math.round(e2.lat * r2) / r2, s2 = this._map.getBearing(), l2 = this._map.getPitch(), c2 = "";
          return c2 += t2 ? "#/" + a2 + "/" + n2 + "/" + i2 : "#" + i2 + "/" + n2 + "/" + a2, (s2 || l2) && (c2 += "/" + Math.round(10 * s2) / 10), l2 && (c2 += "/" + Math.round(l2)), c2;
        }, uo.prototype._onHashChange = function() {
          var e2 = t.window.location.hash.replace("#", "").split("/");
          return e2.length >= 3 && (this._map.jumpTo({ center: [+e2[2], +e2[1]], zoom: +e2[0], bearing: +(e2[3] || 0), pitch: +(e2[4] || 0) }), true);
        }, uo.prototype._updateHashUnthrottled = function() {
          var e2 = this.getHashString();
          try {
            t.window.history.replaceState(t.window.history.state, "", e2);
          } catch (t2) {
          }
        };
        var ho = function(e2) {
          function o2(o3, r3, a2, n2) {
            void 0 === n2 && (n2 = {});
            var s2 = i.mousePos(r3.getCanvasContainer(), a2), l2 = r3.unproject(s2);
            e2.call(this, o3, t.extend({ point: s2, lngLat: l2, originalEvent: a2 }, n2)), this._defaultPrevented = false, this.target = r3;
          }
          e2 && (o2.__proto__ = e2), o2.prototype = Object.create(e2 && e2.prototype), o2.prototype.constructor = o2;
          var r2 = { defaultPrevented: { configurable: true } };
          return o2.prototype.preventDefault = function() {
            this._defaultPrevented = true;
          }, r2.defaultPrevented.get = function() {
            return this._defaultPrevented;
          }, Object.defineProperties(o2.prototype, r2), o2;
        }(t.Event), po = function(e2) {
          function o2(o3, r3, a2) {
            var n2 = i.touchPos(r3.getCanvasContainer(), a2), s2 = n2.map(function(t2) {
              return r3.unproject(t2);
            }), l2 = n2.reduce(function(t2, e3, i2, o4) {
              return t2.add(e3.div(o4.length));
            }, new t.Point(0, 0)), c2 = r3.unproject(l2);
            e2.call(this, o3, { points: n2, point: l2, lngLats: s2, lngLat: c2, originalEvent: a2 }), this._defaultPrevented = false;
          }
          e2 && (o2.__proto__ = e2), o2.prototype = Object.create(e2 && e2.prototype), o2.prototype.constructor = o2;
          var r2 = { defaultPrevented: { configurable: true } };
          return o2.prototype.preventDefault = function() {
            this._defaultPrevented = true;
          }, r2.defaultPrevented.get = function() {
            return this._defaultPrevented;
          }, Object.defineProperties(o2.prototype, r2), o2;
        }(t.Event), _o = function(t2) {
          function e2(e3, i3, o2) {
            t2.call(this, e3, { originalEvent: o2 }), this._defaultPrevented = false;
          }
          t2 && (e2.__proto__ = t2), e2.prototype = Object.create(t2 && t2.prototype), e2.prototype.constructor = e2;
          var i2 = { defaultPrevented: { configurable: true } };
          return e2.prototype.preventDefault = function() {
            this._defaultPrevented = true;
          }, i2.defaultPrevented.get = function() {
            return this._defaultPrevented;
          }, Object.defineProperties(e2.prototype, i2), e2;
        }(t.Event), fo = function(e2) {
          this._map = e2, this._el = e2.getCanvasContainer(), this._delta = 0, t.bindAll(["_onWheel", "_onTimeout", "_onScrollFrame", "_onScrollFinished"], this);
        };
        fo.prototype.isEnabled = function() {
          return !!this._enabled;
        }, fo.prototype.isActive = function() {
          return !!this._active;
        }, fo.prototype.isZooming = function() {
          return !!this._zooming;
        }, fo.prototype.enable = function(t2) {
          this.isEnabled() || (this._enabled = true, this._aroundCenter = t2 && "center" === t2.around);
        }, fo.prototype.disable = function() {
          this.isEnabled() && (this._enabled = false);
        }, fo.prototype.onWheel = function(e2) {
          if (this.isEnabled()) {
            var i2 = e2.deltaMode === t.window.WheelEvent.DOM_DELTA_LINE ? 40 * e2.deltaY : e2.deltaY, o2 = t.browser.now(), r2 = o2 - (this._lastWheelEventTime || 0);
            this._lastWheelEventTime = o2, 0 !== i2 && i2 % 4.000244140625 == 0 ? this._type = "wheel" : 0 !== i2 && Math.abs(i2) < 4 ? this._type = "trackpad" : r2 > 400 ? (this._type = null, this._lastValue = i2, this._timeout = setTimeout(this._onTimeout, 40, e2)) : this._type || (this._type = Math.abs(r2 * i2) < 200 ? "trackpad" : "wheel", this._timeout && (clearTimeout(this._timeout), this._timeout = null, i2 += this._lastValue)), e2.shiftKey && i2 && (i2 /= 4), this._type && (this._lastWheelEvent = e2, this._delta -= i2, this.isActive() || this._start(e2)), e2.preventDefault();
          }
        }, fo.prototype._onTimeout = function(t2) {
          this._type = "wheel", this._delta -= this._lastValue, this.isActive() || this._start(t2);
        }, fo.prototype._start = function(e2) {
          if (this._delta) {
            this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), this._active = true, this._zooming = true, this._map.fire(new t.Event("movestart", { originalEvent: e2 })), this._map.fire(new t.Event("zoomstart", { originalEvent: e2 })), this._finishTimeout && clearTimeout(this._finishTimeout);
            var o2 = i.mousePos(this._el, e2);
            this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(o2)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame));
          }
        }, fo.prototype._onScrollFrame = function() {
          var e2 = this;
          if (this._frameId = null, this.isActive()) {
            var i2 = this._map.transform;
            if (0 !== this._delta) {
              var o2 = "wheel" === this._type && Math.abs(this._delta) > 4.000244140625 ? 1 / 450 : 0.01, r2 = 2 / (1 + Math.exp(-Math.abs(this._delta * o2)));
              this._delta < 0 && 0 !== r2 && (r2 = 1 / r2);
              var a2 = "number" == typeof this._targetZoom ? i2.zoomScale(this._targetZoom) : i2.scale;
              this._targetZoom = Math.min(i2.maxZoom, Math.max(i2.minZoom, i2.scaleZoom(a2 * r2))), "wheel" === this._type && (this._startZoom = i2.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;
            }
            var n2 = "number" == typeof this._targetZoom ? this._targetZoom : i2.zoom, s2 = this._startZoom, l2 = this._easing, c2 = false;
            if ("wheel" === this._type && s2 && l2) {
              var u2 = Math.min((t.browser.now() - this._lastWheelEventTime) / 200, 1), h2 = l2(u2);
              i2.zoom = t.number(s2, n2, h2), u2 < 1 ? this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame)) : c2 = true;
            } else
              i2.zoom = n2, c2 = true;
            i2.setLocationAtPoint(this._around, this._aroundPoint), this._map.fire(new t.Event("move", { originalEvent: this._lastWheelEvent })), this._map.fire(new t.Event("zoom", { originalEvent: this._lastWheelEvent })), c2 && (this._active = false, this._finishTimeout = setTimeout(function() {
              e2._zooming = false, e2._map.fire(new t.Event("zoomend", { originalEvent: e2._lastWheelEvent })), e2._map.fire(new t.Event("moveend", { originalEvent: e2._lastWheelEvent })), delete e2._targetZoom;
            }, 200));
          }
        }, fo.prototype._smoothOutEasing = function(e2) {
          var i2 = t.ease;
          if (this._prevEase) {
            var o2 = this._prevEase, r2 = (t.browser.now() - o2.start) / o2.duration, a2 = o2.easing(r2 + 0.01) - o2.easing(r2), n2 = 0.27 / Math.sqrt(a2 * a2 + 1e-4) * 0.01, s2 = Math.sqrt(0.0729 - n2 * n2);
            i2 = t.bezier(n2, s2, 0.25, 1);
          }
          return this._prevEase = { start: t.browser.now(), duration: e2, easing: i2 }, i2;
        };
        var mo = function(e2, i2) {
          this._map = e2, this._el = e2.getCanvasContainer(), this._container = e2.getContainer(), this._clickTolerance = i2.clickTolerance || 1, t.bindAll(["_onMouseMove", "_onMouseUp", "_onKeyDown"], this);
        };
        mo.prototype.isEnabled = function() {
          return !!this._enabled;
        }, mo.prototype.isActive = function() {
          return !!this._active;
        }, mo.prototype.enable = function() {
          this.isEnabled() || (this._enabled = true);
        }, mo.prototype.disable = function() {
          this.isEnabled() && (this._enabled = false);
        }, mo.prototype.onMouseDown = function(e2) {
          this.isEnabled() && e2.shiftKey && 0 === e2.button && (t.window.document.addEventListener("mousemove", this._onMouseMove, false), t.window.document.addEventListener("keydown", this._onKeyDown, false), t.window.document.addEventListener("mouseup", this._onMouseUp, false), i.disableDrag(), this._startPos = this._lastPos = i.mousePos(this._el, e2), this._active = true);
        }, mo.prototype._onMouseMove = function(t2) {
          var e2 = i.mousePos(this._el, t2);
          if (!(this._lastPos.equals(e2) || !this._box && e2.dist(this._startPos) < this._clickTolerance)) {
            var o2 = this._startPos;
            this._lastPos = e2, this._box || (this._box = i.create("div", "mapboxgl-boxzoom", this._container), this._container.classList.add("mapboxgl-crosshair"), this._fireEvent("boxzoomstart", t2));
            var r2 = Math.min(o2.x, e2.x), a2 = Math.max(o2.x, e2.x), n2 = Math.min(o2.y, e2.y), s2 = Math.max(o2.y, e2.y);
            i.setTransform(this._box, "translate(" + r2 + "px," + n2 + "px)"), this._box.style.width = a2 - r2 + "px", this._box.style.height = s2 - n2 + "px";
          }
        }, mo.prototype._onMouseUp = function(e2) {
          if (0 === e2.button) {
            var o2 = this._startPos, r2 = i.mousePos(this._el, e2);
            this._finish(), i.suppressClick(), o2.x === r2.x && o2.y === r2.y ? this._fireEvent("boxzoomcancel", e2) : this._map.fitScreenCoordinates(o2, r2, this._map.getBearing(), { linear: true }).fire(new t.Event("boxzoomend", { originalEvent: e2 }));
          }
        }, mo.prototype._onKeyDown = function(t2) {
          27 === t2.keyCode && (this._finish(), this._fireEvent("boxzoomcancel", t2));
        }, mo.prototype._finish = function() {
          this._active = false, t.window.document.removeEventListener("mousemove", this._onMouseMove, false), t.window.document.removeEventListener("keydown", this._onKeyDown, false), t.window.document.removeEventListener("mouseup", this._onMouseUp, false), this._container.classList.remove("mapboxgl-crosshair"), this._box && (i.remove(this._box), this._box = null), i.enableDrag(), delete this._startPos, delete this._lastPos;
        }, mo.prototype._fireEvent = function(e2, i2) {
          return this._map.fire(new t.Event(e2, { originalEvent: i2 }));
        };
        var go = t.bezier(0, 0, 0.25, 1), vo = function(e2, i2) {
          this._map = e2, this._el = i2.element || e2.getCanvasContainer(), this._state = "disabled", this._button = i2.button || "right", this._bearingSnap = i2.bearingSnap || 0, this._pitchWithRotate = false !== i2.pitchWithRotate, t.bindAll(["onMouseDown", "_onMouseMove", "_onMouseUp", "_onBlur", "_onDragFrame"], this);
        };
        vo.prototype.isEnabled = function() {
          return "disabled" !== this._state;
        }, vo.prototype.isActive = function() {
          return "active" === this._state;
        }, vo.prototype.enable = function() {
          this.isEnabled() || (this._state = "enabled");
        }, vo.prototype.disable = function() {
          if (this.isEnabled())
            switch (this._state) {
              case "active":
                this._state = "disabled", this._unbind(), this._deactivate(), this._fireEvent("rotateend"), this._pitchWithRotate && this._fireEvent("pitchend"), this._fireEvent("moveend");
                break;
              case "pending":
                this._state = "disabled", this._unbind();
                break;
              default:
                this._state = "disabled";
            }
        }, vo.prototype.onMouseDown = function(e2) {
          if ("enabled" === this._state) {
            if ("right" === this._button) {
              if (this._eventButton = i.mouseButton(e2), this._eventButton !== (e2.ctrlKey ? 0 : 2))
                return;
            } else {
              if (e2.ctrlKey || 0 !== i.mouseButton(e2))
                return;
              this._eventButton = 0;
            }
            i.disableDrag(), t.window.document.addEventListener("mousemove", this._onMouseMove, { capture: true }), t.window.document.addEventListener("mouseup", this._onMouseUp), t.window.addEventListener("blur", this._onBlur), this._state = "pending", this._inertia = [[t.browser.now(), this._map.getBearing()]], this._startPos = this._lastPos = i.mousePos(this._el, e2), this._center = this._map.transform.centerPoint, e2.preventDefault();
          }
        }, vo.prototype._onMouseMove = function(t2) {
          var e2 = i.mousePos(this._el, t2);
          this._lastPos.equals(e2) || (this._lastMoveEvent = t2, this._lastPos = e2, "pending" === this._state && (this._state = "active", this._fireEvent("rotatestart", t2), this._fireEvent("movestart", t2), this._pitchWithRotate && this._fireEvent("pitchstart", t2)), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)));
        }, vo.prototype._onDragFrame = function() {
          this._frameId = null;
          var e2 = this._lastMoveEvent;
          if (e2) {
            var i2 = this._map.transform, o2 = this._startPos, r2 = this._lastPos, a2 = 0.8 * (o2.x - r2.x), n2 = -0.5 * (o2.y - r2.y), s2 = i2.bearing - a2, l2 = i2.pitch - n2, c2 = this._inertia, u2 = c2[c2.length - 1];
            this._drainInertiaBuffer(), c2.push([t.browser.now(), this._map._normalizeBearing(s2, u2[1])]), i2.bearing = s2, this._pitchWithRotate && (this._fireEvent("pitch", e2), i2.pitch = l2), this._fireEvent("rotate", e2), this._fireEvent("move", e2), delete this._lastMoveEvent, this._startPos = this._lastPos;
          }
        }, vo.prototype._onMouseUp = function(t2) {
          if (i.mouseButton(t2) === this._eventButton)
            switch (this._state) {
              case "active":
                this._state = "enabled", i.suppressClick(), this._unbind(), this._deactivate(), this._inertialRotate(t2);
                break;
              case "pending":
                this._state = "enabled", this._unbind();
            }
        }, vo.prototype._onBlur = function(t2) {
          switch (this._state) {
            case "active":
              this._state = "enabled", this._unbind(), this._deactivate(), this._fireEvent("rotateend", t2), this._pitchWithRotate && this._fireEvent("pitchend", t2), this._fireEvent("moveend", t2);
              break;
            case "pending":
              this._state = "enabled", this._unbind();
          }
        }, vo.prototype._unbind = function() {
          t.window.document.removeEventListener("mousemove", this._onMouseMove, { capture: true }), t.window.document.removeEventListener("mouseup", this._onMouseUp), t.window.removeEventListener("blur", this._onBlur), i.enableDrag();
        }, vo.prototype._deactivate = function() {
          this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._lastMoveEvent, delete this._startPos, delete this._lastPos;
        }, vo.prototype._inertialRotate = function(t2) {
          var e2 = this;
          this._fireEvent("rotateend", t2), this._drainInertiaBuffer();
          var i2 = this._map, o2 = i2.getBearing(), r2 = this._inertia, a2 = function() {
            Math.abs(o2) < e2._bearingSnap ? i2.resetNorth({ noMoveStart: true }, { originalEvent: t2 }) : e2._fireEvent("moveend", t2), e2._pitchWithRotate && e2._fireEvent("pitchend", t2);
          };
          if (r2.length < 2)
            a2();
          else {
            var n2 = r2[0], s2 = r2[r2.length - 1], l2 = r2[r2.length - 2], c2 = i2._normalizeBearing(o2, l2[1]), u2 = s2[1] - n2[1], h2 = u2 < 0 ? -1 : 1, p2 = (s2[0] - n2[0]) / 1e3;
            if (0 !== u2 && 0 !== p2) {
              var d2 = Math.abs(u2 * (0.25 / p2));
              d2 > 180 && (d2 = 180);
              var _2 = d2 / 180;
              c2 += h2 * d2 * (_2 / 2), Math.abs(i2._normalizeBearing(c2, 0)) < this._bearingSnap && (c2 = i2._normalizeBearing(0, c2)), i2.rotateTo(c2, { duration: 1e3 * _2, easing: go, noMoveStart: true }, { originalEvent: t2 });
            } else
              a2();
          }
        }, vo.prototype._fireEvent = function(e2, i2) {
          return this._map.fire(new t.Event(e2, i2 ? { originalEvent: i2 } : {}));
        }, vo.prototype._drainInertiaBuffer = function() {
          for (var e2 = this._inertia, i2 = t.browser.now(); e2.length > 0 && i2 - e2[0][0] > 160; )
            e2.shift();
        };
        var yo = t.bezier(0, 0, 0.3, 1), xo = function(e2, i2) {
          this._map = e2, this._el = e2.getCanvasContainer(), this._state = "disabled", this._clickTolerance = i2.clickTolerance || 1, t.bindAll(["_onMove", "_onMouseUp", "_onTouchEnd", "_onBlur", "_onDragFrame"], this);
        };
        xo.prototype.isEnabled = function() {
          return "disabled" !== this._state;
        }, xo.prototype.isActive = function() {
          return "active" === this._state;
        }, xo.prototype.enable = function() {
          this.isEnabled() || (this._el.classList.add("mapboxgl-touch-drag-pan"), this._state = "enabled");
        }, xo.prototype.disable = function() {
          if (this.isEnabled())
            switch (this._el.classList.remove("mapboxgl-touch-drag-pan"), this._state) {
              case "active":
                this._state = "disabled", this._unbind(), this._deactivate(), this._fireEvent("dragend"), this._fireEvent("moveend");
                break;
              case "pending":
                this._state = "disabled", this._unbind();
                break;
              default:
                this._state = "disabled";
            }
        }, xo.prototype.onMouseDown = function(e2) {
          "enabled" === this._state && (e2.ctrlKey || 0 !== i.mouseButton(e2) || (i.addEventListener(t.window.document, "mousemove", this._onMove, { capture: true }), i.addEventListener(t.window.document, "mouseup", this._onMouseUp), this._start(e2)));
        }, xo.prototype.onTouchStart = function(e2) {
          "enabled" === this._state && (e2.touches.length > 1 || (i.addEventListener(t.window.document, "touchmove", this._onMove, { capture: true, passive: false }), i.addEventListener(t.window.document, "touchend", this._onTouchEnd), this._start(e2)));
        }, xo.prototype._start = function(e2) {
          t.window.addEventListener("blur", this._onBlur), this._state = "pending", this._startPos = this._mouseDownPos = this._lastPos = i.mousePos(this._el, e2), this._inertia = [[t.browser.now(), this._startPos]];
        }, xo.prototype._onMove = function(e2) {
          e2.preventDefault();
          var o2 = i.mousePos(this._el, e2);
          this._lastPos.equals(o2) || "pending" === this._state && o2.dist(this._mouseDownPos) < this._clickTolerance || (this._lastMoveEvent = e2, this._lastPos = o2, this._drainInertiaBuffer(), this._inertia.push([t.browser.now(), this._lastPos]), "pending" === this._state && (this._state = "active", this._fireEvent("dragstart", e2), this._fireEvent("movestart", e2)), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)));
        }, xo.prototype._onDragFrame = function() {
          this._frameId = null;
          var t2 = this._lastMoveEvent;
          if (t2) {
            var e2 = this._map.transform;
            e2.setLocationAtPoint(e2.pointLocation(this._startPos), this._lastPos), this._fireEvent("drag", t2), this._fireEvent("move", t2), this._startPos = this._lastPos, delete this._lastMoveEvent;
          }
        }, xo.prototype._onMouseUp = function(t2) {
          if (0 === i.mouseButton(t2))
            switch (this._state) {
              case "active":
                this._state = "enabled", i.suppressClick(), this._unbind(), this._deactivate(), this._inertialPan(t2);
                break;
              case "pending":
                this._state = "enabled", this._unbind();
            }
        }, xo.prototype._onTouchEnd = function(t2) {
          switch (this._state) {
            case "active":
              this._state = "enabled", this._unbind(), this._deactivate(), this._inertialPan(t2);
              break;
            case "pending":
              this._state = "enabled", this._unbind();
          }
        }, xo.prototype._onBlur = function(t2) {
          switch (this._state) {
            case "active":
              this._state = "enabled", this._unbind(), this._deactivate(), this._fireEvent("dragend", t2), this._fireEvent("moveend", t2);
              break;
            case "pending":
              this._state = "enabled", this._unbind();
          }
        }, xo.prototype._unbind = function() {
          i.removeEventListener(t.window.document, "touchmove", this._onMove, { capture: true, passive: false }), i.removeEventListener(t.window.document, "touchend", this._onTouchEnd), i.removeEventListener(t.window.document, "mousemove", this._onMove, { capture: true }), i.removeEventListener(t.window.document, "mouseup", this._onMouseUp), i.removeEventListener(t.window, "blur", this._onBlur);
        }, xo.prototype._deactivate = function() {
          this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._lastMoveEvent, delete this._startPos, delete this._mouseDownPos, delete this._lastPos;
        }, xo.prototype._inertialPan = function(t2) {
          this._fireEvent("dragend", t2), this._drainInertiaBuffer();
          var e2 = this._inertia;
          if (e2.length < 2)
            this._fireEvent("moveend", t2);
          else {
            var i2 = e2[e2.length - 1], o2 = e2[0], r2 = i2[1].sub(o2[1]), a2 = (i2[0] - o2[0]) / 1e3;
            if (0 === a2 || i2[1].equals(o2[1]))
              this._fireEvent("moveend", t2);
            else {
              var n2 = r2.mult(0.3 / a2), s2 = n2.mag();
              s2 > 1400 && (s2 = 1400, n2._unit()._mult(s2));
              var l2 = s2 / 750, c2 = n2.mult(-l2 / 2);
              this._map.panBy(c2, { duration: 1e3 * l2, easing: yo, noMoveStart: true }, { originalEvent: t2 });
            }
          }
        }, xo.prototype._fireEvent = function(e2, i2) {
          return this._map.fire(new t.Event(e2, i2 ? { originalEvent: i2 } : {}));
        }, xo.prototype._drainInertiaBuffer = function() {
          for (var e2 = this._inertia, i2 = t.browser.now(); e2.length > 0 && i2 - e2[0][0] > 160; )
            e2.shift();
        };
        var bo = function(e2) {
          this._map = e2, this._el = e2.getCanvasContainer(), t.bindAll(["_onKeyDown"], this);
        };
        function wo(t2) {
          return t2 * (2 - t2);
        }
        bo.prototype.isEnabled = function() {
          return !!this._enabled;
        }, bo.prototype.enable = function() {
          this.isEnabled() || (this._el.addEventListener("keydown", this._onKeyDown, false), this._enabled = true);
        }, bo.prototype.disable = function() {
          this.isEnabled() && (this._el.removeEventListener("keydown", this._onKeyDown), this._enabled = false);
        }, bo.prototype._onKeyDown = function(t2) {
          if (!(t2.altKey || t2.ctrlKey || t2.metaKey)) {
            var e2 = 0, i2 = 0, o2 = 0, r2 = 0, a2 = 0;
            switch (t2.keyCode) {
              case 61:
              case 107:
              case 171:
              case 187:
                e2 = 1;
                break;
              case 189:
              case 109:
              case 173:
                e2 = -1;
                break;
              case 37:
                t2.shiftKey ? i2 = -1 : (t2.preventDefault(), r2 = -1);
                break;
              case 39:
                t2.shiftKey ? i2 = 1 : (t2.preventDefault(), r2 = 1);
                break;
              case 38:
                t2.shiftKey ? o2 = 1 : (t2.preventDefault(), a2 = -1);
                break;
              case 40:
                t2.shiftKey ? o2 = -1 : (a2 = 1, t2.preventDefault());
                break;
              default:
                return;
            }
            var n2 = this._map, s2 = n2.getZoom(), l2 = { duration: 300, delayEndEvents: 500, easing: wo, zoom: e2 ? Math.round(s2) + e2 * (t2.shiftKey ? 2 : 1) : s2, bearing: n2.getBearing() + 15 * i2, pitch: n2.getPitch() + 10 * o2, offset: [100 * -r2, 100 * -a2], center: n2.getCenter() };
            n2.easeTo(l2, { originalEvent: t2 });
          }
        };
        var Eo = function(e2) {
          this._map = e2, t.bindAll(["_onDblClick", "_onZoomEnd"], this);
        };
        Eo.prototype.isEnabled = function() {
          return !!this._enabled;
        }, Eo.prototype.isActive = function() {
          return !!this._active;
        }, Eo.prototype.enable = function() {
          this.isEnabled() || (this._enabled = true);
        }, Eo.prototype.disable = function() {
          this.isEnabled() && (this._enabled = false);
        }, Eo.prototype.onTouchStart = function(t2) {
          var e2 = this;
          this.isEnabled() && (t2.points.length > 1 || (this._tapped ? (clearTimeout(this._tapped), this._tapped = null, this._zoom(t2)) : this._tapped = setTimeout(function() {
            e2._tapped = null;
          }, 300)));
        }, Eo.prototype.onDblClick = function(t2) {
          this.isEnabled() && (t2.originalEvent.preventDefault(), this._zoom(t2));
        }, Eo.prototype._zoom = function(t2) {
          this._active = true, this._map.on("zoomend", this._onZoomEnd), this._map.zoomTo(this._map.getZoom() + (t2.originalEvent.shiftKey ? -1 : 1), { around: t2.lngLat }, t2);
        }, Eo.prototype._onZoomEnd = function() {
          this._active = false, this._map.off("zoomend", this._onZoomEnd);
        };
        var To = t.bezier(0, 0, 0.15, 1), Io = function(e2) {
          this._map = e2, this._el = e2.getCanvasContainer(), t.bindAll(["_onMove", "_onEnd", "_onTouchFrame"], this);
        };
        Io.prototype.isEnabled = function() {
          return !!this._enabled;
        }, Io.prototype.enable = function(t2) {
          this.isEnabled() || (this._el.classList.add("mapboxgl-touch-zoom-rotate"), this._enabled = true, this._aroundCenter = !!t2 && "center" === t2.around);
        }, Io.prototype.disable = function() {
          this.isEnabled() && (this._el.classList.remove("mapboxgl-touch-zoom-rotate"), this._enabled = false);
        }, Io.prototype.disableRotation = function() {
          this._rotationDisabled = true;
        }, Io.prototype.enableRotation = function() {
          this._rotationDisabled = false;
        }, Io.prototype.onStart = function(e2) {
          if (this.isEnabled() && 2 === e2.touches.length) {
            var o2 = i.mousePos(this._el, e2.touches[0]), r2 = i.mousePos(this._el, e2.touches[1]), a2 = o2.add(r2).div(2);
            this._startVec = o2.sub(r2), this._startAround = this._map.transform.pointLocation(a2), this._gestureIntent = void 0, this._inertia = [], i.addEventListener(t.window.document, "touchmove", this._onMove, { passive: false }), i.addEventListener(t.window.document, "touchend", this._onEnd);
          }
        }, Io.prototype._getTouchEventData = function(t2) {
          var e2 = i.mousePos(this._el, t2.touches[0]), o2 = i.mousePos(this._el, t2.touches[1]), r2 = e2.sub(o2);
          return { vec: r2, center: e2.add(o2).div(2), scale: r2.mag() / this._startVec.mag(), bearing: this._rotationDisabled ? 0 : 180 * r2.angleWith(this._startVec) / Math.PI };
        }, Io.prototype._onMove = function(e2) {
          if (2 === e2.touches.length) {
            var i2 = this._getTouchEventData(e2), o2 = i2.vec, r2 = i2.scale, a2 = i2.bearing;
            if (!this._gestureIntent) {
              var n2 = this._rotationDisabled && 1 !== r2 || Math.abs(1 - r2) > 0.15;
              Math.abs(a2) > 10 ? this._gestureIntent = "rotate" : n2 && (this._gestureIntent = "zoom"), this._gestureIntent && (this._map.fire(new t.Event(this._gestureIntent + "start", { originalEvent: e2 })), this._map.fire(new t.Event("movestart", { originalEvent: e2 })), this._startVec = o2);
            }
            this._lastTouchEvent = e2, this._frameId || (this._frameId = this._map._requestRenderFrame(this._onTouchFrame)), e2.preventDefault();
          }
        }, Io.prototype._onTouchFrame = function() {
          this._frameId = null;
          var e2 = this._gestureIntent;
          if (e2) {
            var i2 = this._map.transform;
            this._startScale || (this._startScale = i2.scale, this._startBearing = i2.bearing);
            var o2 = this._getTouchEventData(this._lastTouchEvent), r2 = o2.center, a2 = o2.bearing, n2 = o2.scale, s2 = i2.pointLocation(r2), l2 = i2.locationPoint(s2);
            "rotate" === e2 && (i2.bearing = this._startBearing + a2), i2.zoom = i2.scaleZoom(this._startScale * n2), i2.setLocationAtPoint(this._startAround, l2), this._map.fire(new t.Event(e2, { originalEvent: this._lastTouchEvent })), this._map.fire(new t.Event("move", { originalEvent: this._lastTouchEvent })), this._drainInertiaBuffer(), this._inertia.push([t.browser.now(), n2, r2]);
          }
        }, Io.prototype._onEnd = function(e2) {
          i.removeEventListener(t.window.document, "touchmove", this._onMove, { passive: false }), i.removeEventListener(t.window.document, "touchend", this._onEnd);
          var o2 = this._gestureIntent, r2 = this._startScale;
          if (this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._gestureIntent, delete this._startScale, delete this._startBearing, delete this._lastTouchEvent, o2) {
            this._map.fire(new t.Event(o2 + "end", { originalEvent: e2 })), this._drainInertiaBuffer();
            var a2 = this._inertia, n2 = this._map;
            if (a2.length < 2)
              n2.snapToNorth({}, { originalEvent: e2 });
            else {
              var s2 = a2[a2.length - 1], l2 = a2[0], c2 = n2.transform.scaleZoom(r2 * s2[1]), u2 = n2.transform.scaleZoom(r2 * l2[1]), h2 = c2 - u2, p2 = (s2[0] - l2[0]) / 1e3, d2 = s2[2];
              if (0 !== p2 && c2 !== u2) {
                var _2 = 0.15 * h2 / p2;
                Math.abs(_2) > 2.5 && (_2 = _2 > 0 ? 2.5 : -2.5);
                var f2 = 1e3 * Math.abs(_2 / (12 * 0.15)), m2 = c2 + _2 * f2 / 2e3;
                m2 < 0 && (m2 = 0), n2.easeTo({ zoom: m2, duration: f2, easing: To, around: this._aroundCenter ? n2.getCenter() : n2.unproject(d2), noMoveStart: true }, { originalEvent: e2 });
              } else
                n2.snapToNorth({}, { originalEvent: e2 });
            }
          }
        }, Io.prototype._drainInertiaBuffer = function() {
          for (var e2 = this._inertia, i2 = t.browser.now(); e2.length > 2 && i2 - e2[0][0] > 160; )
            e2.shift();
        };
        var Co = { scrollZoom: fo, boxZoom: mo, dragRotate: vo, dragPan: xo, keyboard: bo, doubleClickZoom: Eo, touchZoomRotate: Io };
        var So = function(e2) {
          function i2(i3, o2) {
            e2.call(this), this._moving = false, this._zooming = false, this.transform = i3, this._bearingSnap = o2.bearingSnap, t.bindAll(["_renderFrameCallback"], this);
          }
          return e2 && (i2.__proto__ = e2), i2.prototype = Object.create(e2 && e2.prototype), i2.prototype.constructor = i2, i2.prototype.getCenter = function() {
            return this.transform.center;
          }, i2.prototype.setCenter = function(t2, e3) {
            return this.jumpTo({ center: t2 }, e3);
          }, i2.prototype.panBy = function(e3, i3, o2) {
            return e3 = t.Point.convert(e3).mult(-1), this.panTo(this.transform.center, t.extend({ offset: e3 }, i3), o2);
          }, i2.prototype.panTo = function(e3, i3, o2) {
            return this.easeTo(t.extend({ center: e3 }, i3), o2);
          }, i2.prototype.getZoom = function() {
            return this.transform.zoom;
          }, i2.prototype.setZoom = function(t2, e3) {
            return this.jumpTo({ zoom: t2 }, e3), this;
          }, i2.prototype.zoomTo = function(e3, i3, o2) {
            return this.easeTo(t.extend({ zoom: e3 }, i3), o2);
          }, i2.prototype.zoomIn = function(t2, e3) {
            return this.zoomTo(this.getZoom() + 1, t2, e3), this;
          }, i2.prototype.zoomOut = function(t2, e3) {
            return this.zoomTo(this.getZoom() - 1, t2, e3), this;
          }, i2.prototype.getBearing = function() {
            return this.transform.bearing;
          }, i2.prototype.setBearing = function(t2, e3) {
            return this.jumpTo({ bearing: t2 }, e3), this;
          }, i2.prototype.rotateTo = function(e3, i3, o2) {
            return this.easeTo(t.extend({ bearing: e3 }, i3), o2);
          }, i2.prototype.resetNorth = function(e3, i3) {
            return this.rotateTo(0, t.extend({ duration: 1e3 }, e3), i3), this;
          }, i2.prototype.snapToNorth = function(t2, e3) {
            return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t2, e3) : this;
          }, i2.prototype.getPitch = function() {
            return this.transform.pitch;
          }, i2.prototype.setPitch = function(t2, e3) {
            return this.jumpTo({ pitch: t2 }, e3), this;
          }, i2.prototype.cameraForBounds = function(e3, i3) {
            return e3 = t.LngLatBounds.convert(e3), this._cameraForBoxAndBearing(e3.getNorthWest(), e3.getSouthEast(), 0, i3);
          }, i2.prototype._cameraForBoxAndBearing = function(e3, i3, o2, r2) {
            if ("number" == typeof (r2 = t.extend({ padding: { top: 0, bottom: 0, right: 0, left: 0 }, offset: [0, 0], maxZoom: this.transform.maxZoom }, r2)).padding) {
              var a2 = r2.padding;
              r2.padding = { top: a2, bottom: a2, right: a2, left: a2 };
            }
            if (t.isEqual(Object.keys(r2.padding).sort(function(t2, e4) {
              return t2 < e4 ? -1 : t2 > e4 ? 1 : 0;
            }), ["bottom", "left", "right", "top"])) {
              var n2 = this.transform, s2 = n2.project(t.LngLat.convert(e3)), l2 = n2.project(t.LngLat.convert(i3)), c2 = s2.rotate(-o2 * Math.PI / 180), u2 = l2.rotate(-o2 * Math.PI / 180), h2 = new t.Point(Math.max(c2.x, u2.x), Math.max(c2.y, u2.y)), p2 = new t.Point(Math.min(c2.x, u2.x), Math.min(c2.y, u2.y)), d2 = h2.sub(p2), _2 = (n2.width - r2.padding.left - r2.padding.right) / d2.x, f2 = (n2.height - r2.padding.top - r2.padding.bottom) / d2.y;
              if (!(f2 < 0 || _2 < 0)) {
                var m2 = Math.min(n2.scaleZoom(n2.scale * Math.min(_2, f2)), r2.maxZoom), g2 = t.Point.convert(r2.offset), v2 = (r2.padding.left - r2.padding.right) / 2, y2 = (r2.padding.top - r2.padding.bottom) / 2, x2 = new t.Point(g2.x + v2, g2.y + y2).mult(n2.scale / n2.zoomScale(m2));
                return { center: n2.unproject(s2.add(l2).div(2).sub(x2)), zoom: m2, bearing: o2 };
              }
              t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
            } else
              t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");
          }, i2.prototype.fitBounds = function(t2, e3, i3) {
            return this._fitInternal(this.cameraForBounds(t2, e3), e3, i3);
          }, i2.prototype.fitScreenCoordinates = function(e3, i3, o2, r2, a2) {
            return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e3)), this.transform.pointLocation(t.Point.convert(i3)), o2, r2), r2, a2);
          }, i2.prototype._fitInternal = function(e3, i3, o2) {
            return e3 ? (i3 = t.extend(e3, i3)).linear ? this.easeTo(i3, o2) : this.flyTo(i3, o2) : this;
          }, i2.prototype.jumpTo = function(e3, i3) {
            this.stop();
            var o2 = this.transform, r2 = false, a2 = false, n2 = false;
            return "zoom" in e3 && o2.zoom !== +e3.zoom && (r2 = true, o2.zoom = +e3.zoom), void 0 !== e3.center && (o2.center = t.LngLat.convert(e3.center)), "bearing" in e3 && o2.bearing !== +e3.bearing && (a2 = true, o2.bearing = +e3.bearing), "pitch" in e3 && o2.pitch !== +e3.pitch && (n2 = true, o2.pitch = +e3.pitch), this.fire(new t.Event("movestart", i3)).fire(new t.Event("move", i3)), r2 && this.fire(new t.Event("zoomstart", i3)).fire(new t.Event("zoom", i3)).fire(new t.Event("zoomend", i3)), a2 && this.fire(new t.Event("rotatestart", i3)).fire(new t.Event("rotate", i3)).fire(new t.Event("rotateend", i3)), n2 && this.fire(new t.Event("pitchstart", i3)).fire(new t.Event("pitch", i3)).fire(new t.Event("pitchend", i3)), this.fire(new t.Event("moveend", i3));
          }, i2.prototype.easeTo = function(e3, i3) {
            var o2 = this;
            this.stop(), false === (e3 = t.extend({ offset: [0, 0], duration: 500, easing: t.ease }, e3)).animate && (e3.duration = 0);
            var r2 = this.transform, a2 = this.getZoom(), n2 = this.getBearing(), s2 = this.getPitch(), l2 = "zoom" in e3 ? +e3.zoom : a2, c2 = "bearing" in e3 ? this._normalizeBearing(e3.bearing, n2) : n2, u2 = "pitch" in e3 ? +e3.pitch : s2, h2 = r2.centerPoint.add(t.Point.convert(e3.offset)), p2 = r2.pointLocation(h2), d2 = t.LngLat.convert(e3.center || p2);
            this._normalizeCenter(d2);
            var _2, f2, m2 = r2.project(p2), g2 = r2.project(d2).sub(m2), v2 = r2.zoomScale(l2 - a2);
            return e3.around && (_2 = t.LngLat.convert(e3.around), f2 = r2.locationPoint(_2)), this._zooming = l2 !== a2, this._rotating = n2 !== c2, this._pitching = u2 !== s2, this._prepareEase(i3, e3.noMoveStart), clearTimeout(this._easeEndTimeoutID), this._ease(function(e4) {
              if (o2._zooming && (r2.zoom = t.number(a2, l2, e4)), o2._rotating && (r2.bearing = t.number(n2, c2, e4)), o2._pitching && (r2.pitch = t.number(s2, u2, e4)), _2)
                r2.setLocationAtPoint(_2, f2);
              else {
                var p3 = r2.zoomScale(r2.zoom - a2), d3 = l2 > a2 ? Math.min(2, v2) : Math.max(0.5, v2), y2 = Math.pow(d3, 1 - e4), x2 = r2.unproject(m2.add(g2.mult(e4 * y2)).mult(p3));
                r2.setLocationAtPoint(r2.renderWorldCopies ? x2.wrap() : x2, h2);
              }
              o2._fireMoveEvents(i3);
            }, function() {
              e3.delayEndEvents ? o2._easeEndTimeoutID = setTimeout(function() {
                return o2._afterEase(i3);
              }, e3.delayEndEvents) : o2._afterEase(i3);
            }, e3), this;
          }, i2.prototype._prepareEase = function(e3, i3) {
            this._moving = true, i3 || this.fire(new t.Event("movestart", e3)), this._zooming && this.fire(new t.Event("zoomstart", e3)), this._rotating && this.fire(new t.Event("rotatestart", e3)), this._pitching && this.fire(new t.Event("pitchstart", e3));
          }, i2.prototype._fireMoveEvents = function(e3) {
            this.fire(new t.Event("move", e3)), this._zooming && this.fire(new t.Event("zoom", e3)), this._rotating && this.fire(new t.Event("rotate", e3)), this._pitching && this.fire(new t.Event("pitch", e3));
          }, i2.prototype._afterEase = function(e3) {
            var i3 = this._zooming, o2 = this._rotating, r2 = this._pitching;
            this._moving = false, this._zooming = false, this._rotating = false, this._pitching = false, i3 && this.fire(new t.Event("zoomend", e3)), o2 && this.fire(new t.Event("rotateend", e3)), r2 && this.fire(new t.Event("pitchend", e3)), this.fire(new t.Event("moveend", e3));
          }, i2.prototype.flyTo = function(e3, i3) {
            var o2 = this;
            this.stop(), e3 = t.extend({ offset: [0, 0], speed: 1.2, curve: 1.42, easing: t.ease }, e3);
            var r2 = this.transform, a2 = this.getZoom(), n2 = this.getBearing(), s2 = this.getPitch(), l2 = "zoom" in e3 ? t.clamp(+e3.zoom, r2.minZoom, r2.maxZoom) : a2, c2 = "bearing" in e3 ? this._normalizeBearing(e3.bearing, n2) : n2, u2 = "pitch" in e3 ? +e3.pitch : s2, h2 = r2.zoomScale(l2 - a2), p2 = r2.centerPoint.add(t.Point.convert(e3.offset)), d2 = r2.pointLocation(p2), _2 = t.LngLat.convert(e3.center || d2);
            this._normalizeCenter(_2);
            var f2 = r2.project(d2), m2 = r2.project(_2).sub(f2), g2 = e3.curve, v2 = Math.max(r2.width, r2.height), y2 = v2 / h2, x2 = m2.mag();
            if ("minZoom" in e3) {
              var b2 = t.clamp(Math.min(e3.minZoom, a2, l2), r2.minZoom, r2.maxZoom), w2 = v2 / r2.zoomScale(b2 - a2);
              g2 = Math.sqrt(w2 / x2 * 2);
            }
            var E2 = g2 * g2;
            function T2(t2) {
              var e4 = (y2 * y2 - v2 * v2 + (t2 ? -1 : 1) * E2 * E2 * x2 * x2) / (2 * (t2 ? y2 : v2) * E2 * x2);
              return Math.log(Math.sqrt(e4 * e4 + 1) - e4);
            }
            function I2(t2) {
              return (Math.exp(t2) - Math.exp(-t2)) / 2;
            }
            function C2(t2) {
              return (Math.exp(t2) + Math.exp(-t2)) / 2;
            }
            var S2 = T2(0), z2 = function(t2) {
              return C2(S2) / C2(S2 + g2 * t2);
            }, L2 = function(t2) {
              return v2 * ((C2(S2) * (I2(e4 = S2 + g2 * t2) / C2(e4)) - I2(S2)) / E2) / x2;
              var e4;
            }, P2 = (T2(1) - S2) / g2;
            if (Math.abs(x2) < 1e-6 || !isFinite(P2)) {
              if (Math.abs(v2 - y2) < 1e-6)
                return this.easeTo(e3, i3);
              var D2 = y2 < v2 ? -1 : 1;
              P2 = Math.abs(Math.log(y2 / v2)) / g2, L2 = function() {
                return 0;
              }, z2 = function(t2) {
                return Math.exp(D2 * g2 * t2);
              };
            }
            if ("duration" in e3)
              e3.duration = +e3.duration;
            else {
              var R2 = "screenSpeed" in e3 ? +e3.screenSpeed / g2 : +e3.speed;
              e3.duration = 1e3 * P2 / R2;
            }
            return e3.maxDuration && e3.duration > e3.maxDuration && (e3.duration = 0), this._zooming = true, this._rotating = n2 !== c2, this._pitching = u2 !== s2, this._prepareEase(i3, false), this._ease(function(e4) {
              var h3 = e4 * P2, d3 = 1 / z2(h3);
              r2.zoom = 1 === e4 ? l2 : a2 + r2.scaleZoom(d3), o2._rotating && (r2.bearing = t.number(n2, c2, e4)), o2._pitching && (r2.pitch = t.number(s2, u2, e4));
              var g3 = 1 === e4 ? _2 : r2.unproject(f2.add(m2.mult(L2(h3))).mult(d3));
              r2.setLocationAtPoint(r2.renderWorldCopies ? g3.wrap() : g3, p2), o2._fireMoveEvents(i3);
            }, function() {
              return o2._afterEase(i3);
            }, e3), this;
          }, i2.prototype.isEasing = function() {
            return !!this._easeFrameId;
          }, i2.prototype.stop = function() {
            if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {
              var t2 = this._onEaseEnd;
              delete this._onEaseEnd, t2.call(this);
            }
            return this;
          }, i2.prototype._ease = function(e3, i3, o2) {
            false === o2.animate || 0 === o2.duration ? (e3(1), i3()) : (this._easeStart = t.browser.now(), this._easeOptions = o2, this._onEaseFrame = e3, this._onEaseEnd = i3, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));
          }, i2.prototype._renderFrameCallback = function() {
            var e3 = Math.min((t.browser.now() - this._easeStart) / this._easeOptions.duration, 1);
            this._onEaseFrame(this._easeOptions.easing(e3)), e3 < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();
          }, i2.prototype._normalizeBearing = function(e3, i3) {
            e3 = t.wrap(e3, -180, 180);
            var o2 = Math.abs(e3 - i3);
            return Math.abs(e3 - 360 - i3) < o2 && (e3 -= 360), Math.abs(e3 + 360 - i3) < o2 && (e3 += 360), e3;
          }, i2.prototype._normalizeCenter = function(t2) {
            var e3 = this.transform;
            if (e3.renderWorldCopies && !e3.lngRange) {
              var i3 = t2.lng - e3.center.lng;
              t2.lng += i3 > 180 ? -360 : i3 < -180 ? 360 : 0;
            }
          }, i2;
        }(t.Evented), zo = function(e2) {
          void 0 === e2 && (e2 = {}), this.options = e2, t.bindAll(["_updateEditLink", "_updateData", "_updateCompact"], this);
        };
        zo.prototype.getDefaultPosition = function() {
          return "bottom-right";
        }, zo.prototype.onAdd = function(t2) {
          var e2 = this.options && this.options.compact;
          return this._map = t2, this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-attrib"), this._innerContainer = i.create("div", "mapboxgl-ctrl-attrib-inner", this._container), e2 && this._container.classList.add("mapboxgl-compact"), this._updateAttributions(), this._updateEditLink(), this._map.on("styledata", this._updateData), this._map.on("sourcedata", this._updateData), this._map.on("moveend", this._updateEditLink), void 0 === e2 && (this._map.on("resize", this._updateCompact), this._updateCompact()), this._container;
        }, zo.prototype.onRemove = function() {
          i.remove(this._container), this._map.off("styledata", this._updateData), this._map.off("sourcedata", this._updateData), this._map.off("moveend", this._updateEditLink), this._map.off("resize", this._updateCompact), this._map = void 0;
        }, zo.prototype._updateEditLink = function() {
          var e2 = this._editLink;
          e2 || (e2 = this._editLink = this._container.querySelector(".mapbox-improve-map"));
          var i2 = [{ key: "owner", value: this.styleOwner }, { key: "id", value: this.styleId }, { key: "access_token", value: t.config.ACCESS_TOKEN }];
          if (e2) {
            var o2 = i2.reduce(function(t2, e3, o3) {
              return e3.value && (t2 += e3.key + "=" + e3.value + (o3 < i2.length - 1 ? "&" : "")), t2;
            }, "?");
            e2.href = t.config.FEEDBACK_URL + "/" + o2 + (this._map._hash ? this._map._hash.getHashString(true) : "");
          }
        }, zo.prototype._updateData = function(t2) {
          !t2 || "metadata" !== t2.sourceDataType && "style" !== t2.dataType || (this._updateAttributions(), this._updateEditLink());
        }, zo.prototype._updateAttributions = function() {
          if (this._map.style) {
            var t2 = [];
            if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t2 = t2.concat(this.options.customAttribution.map(function(t3) {
              return "string" != typeof t3 ? "" : t3;
            })) : "string" == typeof this.options.customAttribution && t2.push(this.options.customAttribution)), this._map.style.stylesheet) {
              var e2 = this._map.style.stylesheet;
              this.styleOwner = e2.owner, this.styleId = e2.id;
            }
            var i2 = this._map.style.sourceCaches;
            for (var o2 in i2) {
              var r2 = i2[o2];
              if (r2.used) {
                var a2 = r2.getSource();
                a2.attribution && t2.indexOf(a2.attribution) < 0 && t2.push(a2.attribution);
              }
            }
            t2.sort(function(t3, e3) {
              return t3.length - e3.length;
            }), (t2 = t2.filter(function(e3, i3) {
              for (var o3 = i3 + 1; o3 < t2.length; o3++)
                if (t2[o3].indexOf(e3) >= 0)
                  return false;
              return true;
            })).length ? (this._innerContainer.innerHTML = t2.join(" | "), this._container.classList.remove("mapboxgl-attrib-empty")) : this._container.classList.add("mapboxgl-attrib-empty"), this._editLink = null;
          }
        }, zo.prototype._updateCompact = function() {
          this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add("mapboxgl-compact") : this._container.classList.remove("mapboxgl-compact");
        };
        var Lo = function() {
          t.bindAll(["_updateLogo"], this), t.bindAll(["_updateCompact"], this);
        };
        Lo.prototype.onAdd = function(t2) {
          this._map = t2, this._container = i.create("div", "mapboxgl-ctrl");
          var e2 = i.create("a", "mapboxgl-ctrl-logo");
          return e2.target = "_blank", e2.href = "https://www.mapbox.com/", e2.setAttribute("aria-label", "Mapbox logo"), e2.setAttribute("rel", "noopener"), this._container.appendChild(e2), this._container.style.display = "none", this._map.on("sourcedata", this._updateLogo), this._updateLogo(), this._map.on("resize", this._updateCompact), this._updateCompact(), this._container;
        }, Lo.prototype.onRemove = function() {
          i.remove(this._container), this._map.off("sourcedata", this._updateLogo), this._map.off("resize", this._updateCompact);
        }, Lo.prototype.getDefaultPosition = function() {
          return "bottom-left";
        }, Lo.prototype._updateLogo = function(t2) {
          t2 && "metadata" !== t2.sourceDataType || (this._container.style.display = this._logoRequired() ? "block" : "none");
        }, Lo.prototype._logoRequired = function() {
          if (this._map.style) {
            var t2 = this._map.style.sourceCaches;
            for (var e2 in t2) {
              if (t2[e2].getSource().mapbox_logo)
                return true;
            }
            return false;
          }
        }, Lo.prototype._updateCompact = function() {
          var t2 = this._container.children;
          if (t2.length) {
            var e2 = t2[0];
            this._map.getCanvasContainer().offsetWidth < 250 ? e2.classList.add("mapboxgl-compact") : e2.classList.remove("mapboxgl-compact");
          }
        };
        var Po = function() {
          this._queue = [], this._id = 0, this._cleared = false, this._currentlyRunning = false;
        };
        Po.prototype.add = function(t2) {
          var e2 = ++this._id;
          return this._queue.push({ callback: t2, id: e2, cancelled: false }), e2;
        }, Po.prototype.remove = function(t2) {
          for (var e2 = this._currentlyRunning, i2 = 0, o2 = e2 ? this._queue.concat(e2) : this._queue; i2 < o2.length; i2 += 1) {
            var r2 = o2[i2];
            if (r2.id === t2)
              return void (r2.cancelled = true);
          }
        }, Po.prototype.run = function() {
          var t2 = this._currentlyRunning = this._queue;
          this._queue = [];
          for (var e2 = 0, i2 = t2; e2 < i2.length; e2 += 1) {
            var o2 = i2[e2];
            if (!o2.cancelled && (o2.callback(), this._cleared))
              break;
          }
          this._cleared = false, this._currentlyRunning = false;
        }, Po.prototype.clear = function() {
          this._currentlyRunning && (this._cleared = true), this._queue = [];
        };
        var Do = t.window.HTMLImageElement, Ro = t.window.HTMLElement, Mo = { center: [0, 0], zoom: 0, bearing: 0, pitch: 0, minZoom: 0, maxZoom: 22, interactive: true, scrollZoom: true, boxZoom: true, dragRotate: true, dragPan: true, keyboard: true, doubleClickZoom: true, touchZoomRotate: true, bearingSnap: 7, clickTolerance: 3, hash: false, attributionControl: true, failIfMajorPerformanceCaveat: false, preserveDrawingBuffer: false, trackResize: true, renderWorldCopies: true, refreshExpiredTiles: true, maxTileCacheSize: null, transformRequest: null, fadeDuration: 300, crossSourceCollisions: true }, Ao = function(o2) {
          function r2(e2) {
            var r3 = this;
            if (null != (e2 = t.extend({}, Mo, e2)).minZoom && null != e2.maxZoom && e2.minZoom > e2.maxZoom)
              throw new Error("maxZoom must be greater than minZoom");
            var a3 = new lo(e2.minZoom, e2.maxZoom, e2.renderWorldCopies);
            o2.call(this, a3, e2), this._interactive = e2.interactive, this._maxTileCacheSize = e2.maxTileCacheSize, this._failIfMajorPerformanceCaveat = e2.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = e2.preserveDrawingBuffer, this._trackResize = e2.trackResize, this._bearingSnap = e2.bearingSnap, this._refreshExpiredTiles = e2.refreshExpiredTiles, this._fadeDuration = e2.fadeDuration, this._crossSourceCollisions = e2.crossSourceCollisions, this._crossFadingFactor = 1, this._collectResourceTiming = e2.collectResourceTiming, this._renderTaskQueue = new Po(), this._controls = [], this._mapId = t.uniqueId();
            var n2 = e2.transformRequest;
            if (this._transformRequest = n2 ? function(t2, e3) {
              return n2(t2, e3) || { url: t2 };
            } : function(t2) {
              return { url: t2 };
            }, "string" == typeof e2.container) {
              if (this._container = t.window.document.getElementById(e2.container), !this._container)
                throw new Error("Container '" + e2.container + "' not found.");
            } else {
              if (!(e2.container instanceof Ro))
                throw new Error("Invalid type: 'container' must be a String or HTMLElement.");
              this._container = e2.container;
            }
            if (e2.maxBounds && this.setMaxBounds(e2.maxBounds), t.bindAll(["_onWindowOnline", "_onWindowResize", "_contextLost", "_contextRestored"], this), this._setupContainer(), this._setupPainter(), void 0 === this.painter)
              throw new Error("Failed to initialize WebGL.");
            this.on("move", function() {
              return r3._update(false);
            }), this.on("moveend", function() {
              return r3._update(false);
            }), this.on("zoom", function() {
              return r3._update(true);
            }), void 0 !== t.window && (t.window.addEventListener("online", this._onWindowOnline, false), t.window.addEventListener("resize", this._onWindowResize, false)), function(t2, e3) {
              var o3 = t2.getCanvasContainer(), r4 = null, a4 = false, n3 = null;
              for (var s2 in Co)
                t2[s2] = new Co[s2](t2, e3), e3.interactive && e3[s2] && t2[s2].enable(e3[s2]);
              i.addEventListener(o3, "mouseout", function(e4) {
                t2.fire(new ho("mouseout", t2, e4));
              }), i.addEventListener(o3, "mousedown", function(r5) {
                a4 = true, n3 = i.mousePos(o3, r5);
                var s3 = new ho("mousedown", t2, r5);
                t2.fire(s3), s3.defaultPrevented || (e3.interactive && !t2.doubleClickZoom.isActive() && t2.stop(), t2.boxZoom.onMouseDown(r5), t2.boxZoom.isActive() || t2.dragPan.isActive() || t2.dragRotate.onMouseDown(r5), t2.boxZoom.isActive() || t2.dragRotate.isActive() || t2.dragPan.onMouseDown(r5));
              }), i.addEventListener(o3, "mouseup", function(e4) {
                var i2 = t2.dragRotate.isActive();
                r4 && !i2 && t2.fire(new ho("contextmenu", t2, r4)), r4 = null, a4 = false, t2.fire(new ho("mouseup", t2, e4));
              }), i.addEventListener(o3, "mousemove", function(e4) {
                if (!t2.dragPan.isActive() && !t2.dragRotate.isActive()) {
                  for (var i2 = e4.target; i2 && i2 !== o3; )
                    i2 = i2.parentNode;
                  i2 === o3 && t2.fire(new ho("mousemove", t2, e4));
                }
              }), i.addEventListener(o3, "mouseover", function(e4) {
                for (var i2 = e4.target; i2 && i2 !== o3; )
                  i2 = i2.parentNode;
                i2 === o3 && t2.fire(new ho("mouseover", t2, e4));
              }), i.addEventListener(o3, "touchstart", function(i2) {
                var o4 = new po("touchstart", t2, i2);
                t2.fire(o4), o4.defaultPrevented || (e3.interactive && t2.stop(), t2.boxZoom.isActive() || t2.dragRotate.isActive() || t2.dragPan.onTouchStart(i2), t2.touchZoomRotate.onStart(i2), t2.doubleClickZoom.onTouchStart(o4));
              }, { passive: false }), i.addEventListener(o3, "touchmove", function(e4) {
                t2.fire(new po("touchmove", t2, e4));
              }, { passive: false }), i.addEventListener(o3, "touchend", function(e4) {
                t2.fire(new po("touchend", t2, e4));
              }), i.addEventListener(o3, "touchcancel", function(e4) {
                t2.fire(new po("touchcancel", t2, e4));
              }), i.addEventListener(o3, "click", function(r5) {
                var a5 = i.mousePos(o3, r5);
                (a5.equals(n3) || a5.dist(n3) < e3.clickTolerance) && t2.fire(new ho("click", t2, r5));
              }), i.addEventListener(o3, "dblclick", function(e4) {
                var i2 = new ho("dblclick", t2, e4);
                t2.fire(i2), i2.defaultPrevented || t2.doubleClickZoom.onDblClick(i2);
              }), i.addEventListener(o3, "contextmenu", function(e4) {
                var i2 = t2.dragRotate.isActive();
                a4 || i2 ? a4 && (r4 = e4) : t2.fire(new ho("contextmenu", t2, e4)), (t2.dragRotate.isEnabled() || t2.listens("contextmenu")) && e4.preventDefault();
              }), i.addEventListener(o3, "wheel", function(i2) {
                e3.interactive && t2.stop();
                var o4 = new _o("wheel", t2, i2);
                t2.fire(o4), o4.defaultPrevented || t2.scrollZoom.onWheel(i2);
              }, { passive: false });
            }(this, e2), this._hash = e2.hash && new uo().addTo(this), this._hash && this._hash._onHashChange() || (this.jumpTo({ center: e2.center, zoom: e2.zoom, bearing: e2.bearing, pitch: e2.pitch }), e2.bounds && (this.resize(), this.fitBounds(e2.bounds, t.extend({}, e2.fitBoundsOptions, { duration: 0 })))), this.resize(), e2.style && this.setStyle(e2.style, { localIdeographFontFamily: e2.localIdeographFontFamily }), e2.attributionControl && this.addControl(new zo({ customAttribution: e2.customAttribution })), this.addControl(new Lo(), e2.logoPosition), this.on("style.load", function() {
              r3.transform.unmodified && r3.jumpTo(r3.style.stylesheet);
            }), this.on("data", function(e3) {
              r3._update("style" === e3.dataType), r3.fire(new t.Event(e3.dataType + "data", e3));
            }), this.on("dataloading", function(e3) {
              r3.fire(new t.Event(e3.dataType + "dataloading", e3));
            });
          }
          o2 && (r2.__proto__ = o2), r2.prototype = Object.create(o2 && o2.prototype), r2.prototype.constructor = r2;
          var a2 = { showTileBoundaries: { configurable: true }, showCollisionBoxes: { configurable: true }, showOverdrawInspector: { configurable: true }, repaint: { configurable: true }, vertices: { configurable: true } };
          return r2.prototype._getMapId = function() {
            return this._mapId;
          }, r2.prototype.addControl = function(e2, i2) {
            if (void 0 === i2 && e2.getDefaultPosition && (i2 = e2.getDefaultPosition()), void 0 === i2 && (i2 = "top-right"), !e2 || !e2.onAdd)
              return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
            var o3 = e2.onAdd(this);
            this._controls.push(e2);
            var r3 = this._controlPositions[i2];
            return -1 !== i2.indexOf("bottom") ? r3.insertBefore(o3, r3.firstChild) : r3.appendChild(o3), this;
          }, r2.prototype.removeControl = function(e2) {
            if (!e2 || !e2.onRemove)
              return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
            var i2 = this._controls.indexOf(e2);
            return i2 > -1 && this._controls.splice(i2, 1), e2.onRemove(this), this;
          }, r2.prototype.resize = function(e2) {
            var i2 = this._containerDimensions(), o3 = i2[0], r3 = i2[1];
            return this._resizeCanvas(o3, r3), this.transform.resize(o3, r3), this.painter.resize(o3, r3), this.fire(new t.Event("movestart", e2)).fire(new t.Event("move", e2)).fire(new t.Event("resize", e2)).fire(new t.Event("moveend", e2)), this;
          }, r2.prototype.getBounds = function() {
            return this.transform.getBounds();
          }, r2.prototype.getMaxBounds = function() {
            return this.transform.getMaxBounds();
          }, r2.prototype.setMaxBounds = function(e2) {
            return this.transform.setMaxBounds(t.LngLatBounds.convert(e2)), this._update();
          }, r2.prototype.setMinZoom = function(t2) {
            if ((t2 = null == t2 ? 0 : t2) >= 0 && t2 <= this.transform.maxZoom)
              return this.transform.minZoom = t2, this._update(), this.getZoom() < t2 && this.setZoom(t2), this;
            throw new Error("minZoom must be between 0 and the current maxZoom, inclusive");
          }, r2.prototype.getMinZoom = function() {
            return this.transform.minZoom;
          }, r2.prototype.setMaxZoom = function(t2) {
            if ((t2 = null == t2 ? 22 : t2) >= this.transform.minZoom)
              return this.transform.maxZoom = t2, this._update(), this.getZoom() > t2 && this.setZoom(t2), this;
            throw new Error("maxZoom must be greater than the current minZoom");
          }, r2.prototype.getRenderWorldCopies = function() {
            return this.transform.renderWorldCopies;
          }, r2.prototype.setRenderWorldCopies = function(t2) {
            return this.transform.renderWorldCopies = t2, this._update();
          }, r2.prototype.getMaxZoom = function() {
            return this.transform.maxZoom;
          }, r2.prototype.project = function(e2) {
            return this.transform.locationPoint(t.LngLat.convert(e2));
          }, r2.prototype.unproject = function(e2) {
            return this.transform.pointLocation(t.Point.convert(e2));
          }, r2.prototype.isMoving = function() {
            return this._moving || this.dragPan.isActive() || this.dragRotate.isActive() || this.scrollZoom.isActive();
          }, r2.prototype.isZooming = function() {
            return this._zooming || this.scrollZoom.isZooming();
          }, r2.prototype.isRotating = function() {
            return this._rotating || this.dragRotate.isActive();
          }, r2.prototype.on = function(t2, e2, i2) {
            var r3 = this;
            if (void 0 === i2)
              return o2.prototype.on.call(this, t2, e2);
            var a3 = function() {
              var o3;
              if ("mouseenter" === t2 || "mouseover" === t2) {
                var a4 = false;
                return { layer: e2, listener: i2, delegates: { mousemove: function(o4) {
                  var n4 = r3.getLayer(e2) ? r3.queryRenderedFeatures(o4.point, { layers: [e2] }) : [];
                  n4.length ? a4 || (a4 = true, i2.call(r3, new ho(t2, r3, o4.originalEvent, { features: n4 }))) : a4 = false;
                }, mouseout: function() {
                  a4 = false;
                } } };
              }
              if ("mouseleave" === t2 || "mouseout" === t2) {
                var n3 = false;
                return { layer: e2, listener: i2, delegates: { mousemove: function(o4) {
                  (r3.getLayer(e2) ? r3.queryRenderedFeatures(o4.point, { layers: [e2] }) : []).length ? n3 = true : n3 && (n3 = false, i2.call(r3, new ho(t2, r3, o4.originalEvent)));
                }, mouseout: function(e3) {
                  n3 && (n3 = false, i2.call(r3, new ho(t2, r3, e3.originalEvent)));
                } } };
              }
              return { layer: e2, listener: i2, delegates: (o3 = {}, o3[t2] = function(t3) {
                var o4 = r3.getLayer(e2) ? r3.queryRenderedFeatures(t3.point, { layers: [e2] }) : [];
                o4.length && (t3.features = o4, i2.call(r3, t3), delete t3.features);
              }, o3) };
            }();
            for (var n2 in this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t2] = this._delegatedListeners[t2] || [], this._delegatedListeners[t2].push(a3), a3.delegates)
              this.on(n2, a3.delegates[n2]);
            return this;
          }, r2.prototype.off = function(t2, e2, i2) {
            if (void 0 === i2)
              return o2.prototype.off.call(this, t2, e2);
            if (this._delegatedListeners && this._delegatedListeners[t2])
              for (var r3 = this._delegatedListeners[t2], a3 = 0; a3 < r3.length; a3++) {
                var n2 = r3[a3];
                if (n2.layer === e2 && n2.listener === i2) {
                  for (var s2 in n2.delegates)
                    this.off(s2, n2.delegates[s2]);
                  return r3.splice(a3, 1), this;
                }
              }
            return this;
          }, r2.prototype.queryRenderedFeatures = function(e2, i2) {
            if (!this.style)
              return [];
            var o3;
            if (void 0 !== i2 || void 0 === e2 || e2 instanceof t.Point || Array.isArray(e2) || (i2 = e2, e2 = void 0), i2 = i2 || {}, (e2 = e2 || [[0, 0], [this.transform.width, this.transform.height]]) instanceof t.Point || "number" == typeof e2[0])
              o3 = [t.Point.convert(e2)];
            else {
              var r3 = t.Point.convert(e2[0]), a3 = t.Point.convert(e2[1]);
              o3 = [r3, new t.Point(a3.x, r3.y), a3, new t.Point(r3.x, a3.y), r3];
            }
            return this.style.queryRenderedFeatures(o3, i2, this.transform);
          }, r2.prototype.querySourceFeatures = function(t2, e2) {
            return this.style.querySourceFeatures(t2, e2);
          }, r2.prototype.setStyle = function(t2, e2) {
            return (!e2 || false !== e2.diff && !e2.localIdeographFontFamily) && this.style && t2 ? (this._diffStyle(t2, e2), this) : this._updateStyle(t2, e2);
          }, r2.prototype._updateStyle = function(t2, e2) {
            return this.style && (this.style.setEventedParent(null), this.style._remove()), t2 ? (this.style = new Me(this, e2 || {}), this.style.setEventedParent(this, { style: this.style }), "string" == typeof t2 ? this.style.loadURL(t2) : this.style.loadJSON(t2), this) : (delete this.style, this);
          }, r2.prototype._diffStyle = function(e2, i2) {
            var o3 = this;
            if ("string" == typeof e2) {
              var r3 = t.normalizeStyleURL(e2), a3 = this._transformRequest(r3, t.ResourceType.Style);
              t.getJSON(a3, function(e3, r4) {
                e3 ? o3.fire(new t.ErrorEvent(e3)) : r4 && o3._updateDiff(r4, i2);
              });
            } else
              "object" == typeof e2 && this._updateDiff(e2, i2);
          }, r2.prototype._updateDiff = function(e2, i2) {
            try {
              this.style.setState(e2) && this._update(true);
            } catch (o3) {
              t.warnOnce("Unable to perform style diff: " + (o3.message || o3.error || o3) + ".  Rebuilding the style from scratch."), this._updateStyle(e2, i2);
            }
          }, r2.prototype.getStyle = function() {
            if (this.style)
              return this.style.serialize();
          }, r2.prototype.isStyleLoaded = function() {
            return this.style ? this.style.loaded() : t.warnOnce("There is no style added to the map.");
          }, r2.prototype.addSource = function(t2, e2) {
            return this.style.addSource(t2, e2), this._update(true);
          }, r2.prototype.isSourceLoaded = function(e2) {
            var i2 = this.style && this.style.sourceCaches[e2];
            if (void 0 !== i2)
              return i2.loaded();
            this.fire(new t.ErrorEvent(new Error("There is no source with ID '" + e2 + "'")));
          }, r2.prototype.areTilesLoaded = function() {
            var t2 = this.style && this.style.sourceCaches;
            for (var e2 in t2) {
              var i2 = t2[e2]._tiles;
              for (var o3 in i2) {
                var r3 = i2[o3];
                if ("loaded" !== r3.state && "errored" !== r3.state)
                  return false;
              }
            }
            return true;
          }, r2.prototype.addSourceType = function(t2, e2, i2) {
            return this.style.addSourceType(t2, e2, i2);
          }, r2.prototype.removeSource = function(t2) {
            return this.style.removeSource(t2), this._update(true);
          }, r2.prototype.getSource = function(t2) {
            return this.style.getSource(t2);
          }, r2.prototype.addImage = function(e2, i2, o3) {
            void 0 === o3 && (o3 = {});
            var r3 = o3.pixelRatio;
            void 0 === r3 && (r3 = 1);
            var a3 = o3.sdf;
            if (void 0 === a3 && (a3 = false), i2 instanceof Do) {
              var n2 = t.browser.getImageData(i2), s2 = n2.width, l2 = n2.height, c2 = n2.data;
              this.style.addImage(e2, { data: new t.RGBAImage({ width: s2, height: l2 }, c2), pixelRatio: r3, sdf: a3 });
            } else {
              if (void 0 === i2.width || void 0 === i2.height)
                return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
              var u2 = i2.width, h2 = i2.height, p2 = i2.data;
              this.style.addImage(e2, { data: new t.RGBAImage({ width: u2, height: h2 }, new Uint8Array(p2)), pixelRatio: r3, sdf: a3 });
            }
          }, r2.prototype.hasImage = function(e2) {
            return e2 ? !!this.style.getImage(e2) : (this.fire(new t.ErrorEvent(new Error("Missing required image id"))), false);
          }, r2.prototype.removeImage = function(t2) {
            this.style.removeImage(t2);
          }, r2.prototype.loadImage = function(e2, i2) {
            t.getImage(this._transformRequest(e2, t.ResourceType.Image), i2);
          }, r2.prototype.listImages = function() {
            return this.style.listImages();
          }, r2.prototype.addLayer = function(t2, e2) {
            return this.style.addLayer(t2, e2), this._update(true);
          }, r2.prototype.moveLayer = function(t2, e2) {
            return this.style.moveLayer(t2, e2), this._update(true);
          }, r2.prototype.removeLayer = function(t2) {
            return this.style.removeLayer(t2), this._update(true);
          }, r2.prototype.getLayer = function(t2) {
            return this.style.getLayer(t2);
          }, r2.prototype.setFilter = function(t2, e2, i2) {
            return void 0 === i2 && (i2 = {}), this.style.setFilter(t2, e2, i2), this._update(true);
          }, r2.prototype.setLayerZoomRange = function(t2, e2, i2) {
            return this.style.setLayerZoomRange(t2, e2, i2), this._update(true);
          }, r2.prototype.getFilter = function(t2) {
            return this.style.getFilter(t2);
          }, r2.prototype.setPaintProperty = function(t2, e2, i2, o3) {
            return void 0 === o3 && (o3 = {}), this.style.setPaintProperty(t2, e2, i2, o3), this._update(true);
          }, r2.prototype.getPaintProperty = function(t2, e2) {
            return this.style.getPaintProperty(t2, e2);
          }, r2.prototype.setLayoutProperty = function(t2, e2, i2, o3) {
            return void 0 === o3 && (o3 = {}), this.style.setLayoutProperty(t2, e2, i2, o3), this._update(true);
          }, r2.prototype.getLayoutProperty = function(t2, e2) {
            return this.style.getLayoutProperty(t2, e2);
          }, r2.prototype.setLight = function(t2, e2) {
            return void 0 === e2 && (e2 = {}), this.style.setLight(t2, e2), this._update(true);
          }, r2.prototype.getLight = function() {
            return this.style.getLight();
          }, r2.prototype.setFeatureState = function(t2, e2) {
            return this.style.setFeatureState(t2, e2), this._update();
          }, r2.prototype.removeFeatureState = function(t2, e2) {
            return this.style.removeFeatureState(t2, e2), this._update();
          }, r2.prototype.getFeatureState = function(t2) {
            return this.style.getFeatureState(t2);
          }, r2.prototype.getContainer = function() {
            return this._container;
          }, r2.prototype.getCanvasContainer = function() {
            return this._canvasContainer;
          }, r2.prototype.getCanvas = function() {
            return this._canvas;
          }, r2.prototype._containerDimensions = function() {
            var t2 = 0, e2 = 0;
            return this._container && (t2 = this._container.clientWidth || 400, e2 = this._container.clientHeight || 300), [t2, e2];
          }, r2.prototype._detectMissingCSS = function() {
            "rgb(250, 128, 114)" !== t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color") && t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.");
          }, r2.prototype._setupContainer = function() {
            var t2 = this._container;
            t2.classList.add("mapboxgl-map"), (this._missingCSSCanary = i.create("div", "mapboxgl-canary", t2)).style.visibility = "hidden", this._detectMissingCSS();
            var e2 = this._canvasContainer = i.create("div", "mapboxgl-canvas-container", t2);
            this._interactive && e2.classList.add("mapboxgl-interactive"), this._canvas = i.create("canvas", "mapboxgl-canvas", e2), this._canvas.style.position = "absolute", this._canvas.addEventListener("webglcontextlost", this._contextLost, false), this._canvas.addEventListener("webglcontextrestored", this._contextRestored, false), this._canvas.setAttribute("tabindex", "0"), this._canvas.setAttribute("aria-label", "Map");
            var o3 = this._containerDimensions();
            this._resizeCanvas(o3[0], o3[1]);
            var r3 = this._controlContainer = i.create("div", "mapboxgl-control-container", t2), a3 = this._controlPositions = {};
            ["top-left", "top-right", "bottom-left", "bottom-right"].forEach(function(t3) {
              a3[t3] = i.create("div", "mapboxgl-ctrl-" + t3, r3);
            });
          }, r2.prototype._resizeCanvas = function(e2, i2) {
            var o3 = t.window.devicePixelRatio || 1;
            this._canvas.width = o3 * e2, this._canvas.height = o3 * i2, this._canvas.style.width = e2 + "px", this._canvas.style.height = i2 + "px";
          }, r2.prototype._setupPainter = function() {
            var i2 = t.extend({ failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat, preserveDrawingBuffer: this._preserveDrawingBuffer }, e.webGLContextAttributes), o3 = this._canvas.getContext("webgl", i2) || this._canvas.getContext("experimental-webgl", i2);
            o3 ? (this.painter = new ro(o3, this.transform), t.webpSupported.testSupport(o3)) : this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));
          }, r2.prototype._contextLost = function(e2) {
            e2.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new t.Event("webglcontextlost", { originalEvent: e2 }));
          }, r2.prototype._contextRestored = function(e2) {
            this._setupPainter(), this.resize(), this._update(), this.fire(new t.Event("webglcontextrestored", { originalEvent: e2 }));
          }, r2.prototype.loaded = function() {
            return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();
          }, r2.prototype._update = function(t2) {
            return this.style ? (this._styleDirty = this._styleDirty || t2, this._sourcesDirty = true, this.triggerRepaint(), this) : this;
          }, r2.prototype._requestRenderFrame = function(t2) {
            return this._update(), this._renderTaskQueue.add(t2);
          }, r2.prototype._cancelRenderFrame = function(t2) {
            this._renderTaskQueue.remove(t2);
          }, r2.prototype._render = function() {
            this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run();
            var e2 = false;
            if (this.style && this._styleDirty) {
              this._styleDirty = false;
              var i2 = this.transform.zoom, o3 = t.browser.now();
              this.style.zoomHistory.update(i2, o3);
              var r3 = new t.EvaluationParameters(i2, { now: o3, fadeDuration: this._fadeDuration, zoomHistory: this.style.zoomHistory, transition: this.style.getTransition() }), a3 = r3.crossFadingFactor();
              1 === a3 && a3 === this._crossFadingFactor || (e2 = true, this._crossFadingFactor = a3), this.style.update(r3);
            }
            return this.style && this._sourcesDirty && (this._sourcesDirty = false, this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration, this._crossSourceCollisions), this.painter.render(this.style, { showTileBoundaries: this.showTileBoundaries, showOverdrawInspector: this._showOverdrawInspector, rotating: this.isRotating(), zooming: this.isZooming(), moving: this.isMoving(), fadeDuration: this._fadeDuration }), this.fire(new t.Event("render")), this.loaded() && !this._loaded && (this._loaded = true, this.fire(new t.Event("load"))), this.style && (this.style.hasTransitions() || e2) && (this._styleDirty = true), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this._sourcesDirty || this._repaint || this._styleDirty || this._placementDirty ? this.triggerRepaint() : !this.isMoving() && this.loaded() && this.fire(new t.Event("idle")), this;
          }, r2.prototype.remove = function() {
            this._hash && this._hash.remove();
            for (var e2 = 0, i2 = this._controls; e2 < i2.length; e2 += 1) {
              i2[e2].onRemove(this);
            }
            this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.setStyle(null), void 0 !== t.window && (t.window.removeEventListener("resize", this._onWindowResize, false), t.window.removeEventListener("online", this._onWindowOnline, false));
            var o3 = this.painter.context.gl.getExtension("WEBGL_lose_context");
            o3 && o3.loseContext(), ko(this._canvasContainer), ko(this._controlContainer), ko(this._missingCSSCanary), this._container.classList.remove("mapboxgl-map"), this.fire(new t.Event("remove"));
          }, r2.prototype.triggerRepaint = function() {
            var e2 = this;
            this.style && !this._frame && (this._frame = t.browser.frame(function() {
              e2._frame = null, e2._render();
            }));
          }, r2.prototype._onWindowOnline = function() {
            this._update();
          }, r2.prototype._onWindowResize = function() {
            this._trackResize && this.resize()._update();
          }, a2.showTileBoundaries.get = function() {
            return !!this._showTileBoundaries;
          }, a2.showTileBoundaries.set = function(t2) {
            this._showTileBoundaries !== t2 && (this._showTileBoundaries = t2, this._update());
          }, a2.showCollisionBoxes.get = function() {
            return !!this._showCollisionBoxes;
          }, a2.showCollisionBoxes.set = function(t2) {
            this._showCollisionBoxes !== t2 && (this._showCollisionBoxes = t2, t2 ? this.style._generateCollisionBoxes() : this._update());
          }, a2.showOverdrawInspector.get = function() {
            return !!this._showOverdrawInspector;
          }, a2.showOverdrawInspector.set = function(t2) {
            this._showOverdrawInspector !== t2 && (this._showOverdrawInspector = t2, this._update());
          }, a2.repaint.get = function() {
            return !!this._repaint;
          }, a2.repaint.set = function(t2) {
            this._repaint !== t2 && (this._repaint = t2, this.triggerRepaint());
          }, a2.vertices.get = function() {
            return !!this._vertices;
          }, a2.vertices.set = function(t2) {
            this._vertices = t2, this._update();
          }, Object.defineProperties(r2.prototype, a2), r2;
        }(So);
        function ko(t2) {
          t2.parentNode && t2.parentNode.removeChild(t2);
        }
        var Bo = { showCompass: true, showZoom: true }, Oo = function(e2) {
          var o2 = this;
          this.options = t.extend({}, Bo, e2), this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-group"), this._container.addEventListener("contextmenu", function(t2) {
            return t2.preventDefault();
          }), this.options.showZoom && (this._zoomInButton = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in", "Zoom in", function() {
            return o2._map.zoomIn();
          }), this._zoomOutButton = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out", "Zoom out", function() {
            return o2._map.zoomOut();
          })), this.options.showCompass && (t.bindAll(["_rotateCompassArrow"], this), this._compass = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass", "Reset bearing to north", function() {
            return o2._map.resetNorth();
          }), this._compassArrow = i.create("span", "mapboxgl-ctrl-compass-arrow", this._compass));
        };
        function Fo(e2, i2, o2) {
          if (e2 = new t.LngLat(e2.lng, e2.lat), i2) {
            var r2 = new t.LngLat(e2.lng - 360, e2.lat), a2 = new t.LngLat(e2.lng + 360, e2.lat), n2 = o2.locationPoint(e2).distSqr(i2);
            o2.locationPoint(r2).distSqr(i2) < n2 ? e2 = r2 : o2.locationPoint(a2).distSqr(i2) < n2 && (e2 = a2);
          }
          for (; Math.abs(e2.lng - o2.center.lng) > 180; ) {
            var s2 = o2.locationPoint(e2);
            if (s2.x >= 0 && s2.y >= 0 && s2.x <= o2.width && s2.y <= o2.height)
              break;
            e2.lng > o2.center.lng ? e2.lng -= 360 : e2.lng += 360;
          }
          return e2;
        }
        Oo.prototype._rotateCompassArrow = function() {
          var t2 = "rotate(" + this._map.transform.angle * (180 / Math.PI) + "deg)";
          this._compassArrow.style.transform = t2;
        }, Oo.prototype.onAdd = function(t2) {
          return this._map = t2, this.options.showCompass && (this._map.on("rotate", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new vo(t2, { button: "left", element: this._compass }), i.addEventListener(this._compass, "mousedown", this._handler.onMouseDown), this._handler.enable()), this._container;
        }, Oo.prototype.onRemove = function() {
          i.remove(this._container), this.options.showCompass && (this._map.off("rotate", this._rotateCompassArrow), i.removeEventListener(this._compass, "mousedown", this._handler.onMouseDown), this._handler.disable(), delete this._handler), delete this._map;
        }, Oo.prototype._createButton = function(t2, e2, o2) {
          var r2 = i.create("button", t2, this._container);
          return r2.type = "button", r2.title = e2, r2.setAttribute("aria-label", e2), r2.addEventListener("click", o2), r2;
        };
        var Uo = { center: "translate(-50%,-50%)", top: "translate(-50%,0)", "top-left": "translate(0,0)", "top-right": "translate(-100%,0)", bottom: "translate(-50%,-100%)", "bottom-left": "translate(0,-100%)", "bottom-right": "translate(-100%,-100%)", left: "translate(0,-50%)", right: "translate(-100%,-50%)" };
        function No(t2, e2, i2) {
          var o2 = t2.classList;
          for (var r2 in Uo)
            o2.remove("mapboxgl-" + i2 + "-anchor-" + r2);
          o2.add("mapboxgl-" + i2 + "-anchor-" + e2);
        }
        var Zo, jo = function(e2) {
          function o2(o3, r2) {
            if (e2.call(this), (o3 instanceof t.window.HTMLElement || r2) && (o3 = t.extend({ element: o3 }, r2)), t.bindAll(["_update", "_onMove", "_onUp", "_addDragHandler", "_onMapClick"], this), this._anchor = o3 && o3.anchor || "center", this._color = o3 && o3.color || "#3FB1CE", this._draggable = o3 && o3.draggable || false, this._state = "inactive", o3 && o3.element)
              this._element = o3.element, this._offset = t.Point.convert(o3 && o3.offset || [0, 0]);
            else {
              this._defaultMarker = true, this._element = i.create("div");
              var a2 = i.createNS("http://www.w3.org/2000/svg", "svg");
              a2.setAttributeNS(null, "height", "41px"), a2.setAttributeNS(null, "width", "27px"), a2.setAttributeNS(null, "viewBox", "0 0 27 41");
              var n2 = i.createNS("http://www.w3.org/2000/svg", "g");
              n2.setAttributeNS(null, "stroke", "none"), n2.setAttributeNS(null, "stroke-width", "1"), n2.setAttributeNS(null, "fill", "none"), n2.setAttributeNS(null, "fill-rule", "evenodd");
              var s2 = i.createNS("http://www.w3.org/2000/svg", "g");
              s2.setAttributeNS(null, "fill-rule", "nonzero");
              var l2 = i.createNS("http://www.w3.org/2000/svg", "g");
              l2.setAttributeNS(null, "transform", "translate(3.0, 29.0)"), l2.setAttributeNS(null, "fill", "#000000");
              for (var c2 = 0, u2 = [{ rx: "10.5", ry: "5.25002273" }, { rx: "10.5", ry: "5.25002273" }, { rx: "9.5", ry: "4.77275007" }, { rx: "8.5", ry: "4.29549936" }, { rx: "7.5", ry: "3.81822308" }, { rx: "6.5", ry: "3.34094679" }, { rx: "5.5", ry: "2.86367051" }, { rx: "4.5", ry: "2.38636864" }]; c2 < u2.length; c2 += 1) {
                var h2 = u2[c2], p2 = i.createNS("http://www.w3.org/2000/svg", "ellipse");
                p2.setAttributeNS(null, "opacity", "0.04"), p2.setAttributeNS(null, "cx", "10.5"), p2.setAttributeNS(null, "cy", "5.80029008"), p2.setAttributeNS(null, "rx", h2.rx), p2.setAttributeNS(null, "ry", h2.ry), l2.appendChild(p2);
              }
              var d2 = i.createNS("http://www.w3.org/2000/svg", "g");
              d2.setAttributeNS(null, "fill", this._color);
              var _2 = i.createNS("http://www.w3.org/2000/svg", "path");
              _2.setAttributeNS(null, "d", "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"), d2.appendChild(_2);
              var f2 = i.createNS("http://www.w3.org/2000/svg", "g");
              f2.setAttributeNS(null, "opacity", "0.25"), f2.setAttributeNS(null, "fill", "#000000");
              var m2 = i.createNS("http://www.w3.org/2000/svg", "path");
              m2.setAttributeNS(null, "d", "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"), f2.appendChild(m2);
              var g2 = i.createNS("http://www.w3.org/2000/svg", "g");
              g2.setAttributeNS(null, "transform", "translate(6.0, 7.0)"), g2.setAttributeNS(null, "fill", "#FFFFFF");
              var v2 = i.createNS("http://www.w3.org/2000/svg", "g");
              v2.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
              var y2 = i.createNS("http://www.w3.org/2000/svg", "circle");
              y2.setAttributeNS(null, "fill", "#000000"), y2.setAttributeNS(null, "opacity", "0.25"), y2.setAttributeNS(null, "cx", "5.5"), y2.setAttributeNS(null, "cy", "5.5"), y2.setAttributeNS(null, "r", "5.4999962");
              var x2 = i.createNS("http://www.w3.org/2000/svg", "circle");
              x2.setAttributeNS(null, "fill", "#FFFFFF"), x2.setAttributeNS(null, "cx", "5.5"), x2.setAttributeNS(null, "cy", "5.5"), x2.setAttributeNS(null, "r", "5.4999962"), v2.appendChild(y2), v2.appendChild(x2), s2.appendChild(l2), s2.appendChild(d2), s2.appendChild(f2), s2.appendChild(g2), s2.appendChild(v2), a2.appendChild(s2), this._element.appendChild(a2), this._offset = t.Point.convert(o3 && o3.offset || [0, -14]);
            }
            this._element.classList.add("mapboxgl-marker"), this._popup = null;
          }
          return e2 && (o2.__proto__ = e2), o2.prototype = Object.create(e2 && e2.prototype), o2.prototype.constructor = o2, o2.prototype.addTo = function(t2) {
            return this.remove(), this._map = t2, t2.getCanvasContainer().appendChild(this._element), t2.on("move", this._update), t2.on("moveend", this._update), this.setDraggable(this._draggable), this._update(), this._map.on("click", this._onMapClick), this;
          }, o2.prototype.remove = function() {
            return this._map && (this._map.off("click", this._onMapClick), this._map.off("move", this._update), this._map.off("moveend", this._update), this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler), this._map.off("mouseup", this._onUp), this._map.off("touchend", this._onUp), delete this._map), i.remove(this._element), this._popup && this._popup.remove(), this;
          }, o2.prototype.getLngLat = function() {
            return this._lngLat;
          }, o2.prototype.setLngLat = function(e3) {
            return this._lngLat = t.LngLat.convert(e3), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;
          }, o2.prototype.getElement = function() {
            return this._element;
          }, o2.prototype.setPopup = function(t2) {
            if (this._popup && (this._popup.remove(), this._popup = null), t2) {
              if (!("offset" in t2.options)) {
                var e3 = Math.sqrt(Math.pow(13.5, 2) / 2);
                t2.options.offset = this._defaultMarker ? { top: [0, 0], "top-left": [0, 0], "top-right": [0, 0], bottom: [0, -38.1], "bottom-left": [e3, -1 * (24.6 + e3)], "bottom-right": [-e3, -1 * (24.6 + e3)], left: [13.5, -24.6], right: [-13.5, -24.6] } : this._offset;
              }
              this._popup = t2, this._lngLat && this._popup.setLngLat(this._lngLat);
            }
            return this;
          }, o2.prototype._onMapClick = function(t2) {
            var e3 = t2.originalEvent.target, i2 = this._element;
            this._popup && (e3 === i2 || i2.contains(e3)) && this.togglePopup();
          }, o2.prototype.getPopup = function() {
            return this._popup;
          }, o2.prototype.togglePopup = function() {
            var t2 = this._popup;
            return t2 ? (t2.isOpen() ? t2.remove() : t2.addTo(this._map), this) : this;
          }, o2.prototype._update = function(t2) {
            this._map && (this._map.transform.renderWorldCopies && (this._lngLat = Fo(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset), t2 && "moveend" !== t2.type || (this._pos = this._pos.round()), i.setTransform(this._element, Uo[this._anchor] + " translate(" + this._pos.x + "px, " + this._pos.y + "px)"), No(this._element, this._anchor, "marker"));
          }, o2.prototype.getOffset = function() {
            return this._offset;
          }, o2.prototype.setOffset = function(e3) {
            return this._offset = t.Point.convert(e3), this._update(), this;
          }, o2.prototype._onMove = function(e3) {
            this._pos = e3.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = "none", "pending" === this._state && (this._state = "active", this.fire(new t.Event("dragstart"))), this.fire(new t.Event("drag"));
          }, o2.prototype._onUp = function() {
            this._element.style.pointerEvents = "auto", this._positionDelta = null, this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), "active" === this._state && this.fire(new t.Event("dragend")), this._state = "inactive";
          }, o2.prototype._addDragHandler = function(t2) {
            this._element.contains(t2.originalEvent.target) && (t2.preventDefault(), this._positionDelta = t2.point.sub(this._pos).add(this._offset), this._state = "pending", this._map.on("mousemove", this._onMove), this._map.on("touchmove", this._onMove), this._map.once("mouseup", this._onUp), this._map.once("touchend", this._onUp));
          }, o2.prototype.setDraggable = function(t2) {
            return this._draggable = !!t2, this._map && (t2 ? (this._map.on("mousedown", this._addDragHandler), this._map.on("touchstart", this._addDragHandler)) : (this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler))), this;
          }, o2.prototype.isDraggable = function() {
            return this._draggable;
          }, o2;
        }(t.Evented), Vo = { positionOptions: { enableHighAccuracy: false, maximumAge: 0, timeout: 6e3 }, fitBoundsOptions: { maxZoom: 15 }, trackUserLocation: false, showUserLocation: true };
        var qo = function(e2) {
          function o2(i2) {
            e2.call(this), this.options = t.extend({}, Vo, i2), t.bindAll(["_onSuccess", "_onError", "_finish", "_setupUI", "_updateCamera", "_updateMarker"], this);
          }
          return e2 && (o2.__proto__ = e2), o2.prototype = Object.create(e2 && e2.prototype), o2.prototype.constructor = o2, o2.prototype.onAdd = function(e3) {
            var o3;
            return this._map = e3, this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-group"), o3 = this._setupUI, void 0 !== Zo ? o3(Zo) : void 0 !== t.window.navigator.permissions ? t.window.navigator.permissions.query({ name: "geolocation" }).then(function(t2) {
              Zo = "denied" !== t2.state, o3(Zo);
            }) : (Zo = !!t.window.navigator.geolocation, o3(Zo)), this._container;
          }, o2.prototype.onRemove = function() {
            void 0 !== this._geolocationWatchID && (t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), i.remove(this._container), this._map = void 0;
          }, o2.prototype._onSuccess = function(e3) {
            if (this.options.trackUserLocation)
              switch (this._lastKnownPosition = e3, this._watchState) {
                case "WAITING_ACTIVE":
                case "ACTIVE_LOCK":
                case "ACTIVE_ERROR":
                  this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                  break;
                case "BACKGROUND":
                case "BACKGROUND_ERROR":
                  this._watchState = "BACKGROUND", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");
              }
            this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(e3), this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(e3), this.options.showUserLocation && this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"), this.fire(new t.Event("geolocate", e3)), this._finish();
          }, o2.prototype._updateCamera = function(e3) {
            var i2 = new t.LngLat(e3.coords.longitude, e3.coords.latitude), o3 = e3.coords.accuracy;
            this._map.fitBounds(i2.toBounds(o3), this.options.fitBoundsOptions, { geolocateSource: true });
          }, o2.prototype._updateMarker = function(t2) {
            t2 ? this._userLocationDotMarker.setLngLat([t2.coords.longitude, t2.coords.latitude]).addTo(this._map) : this._userLocationDotMarker.remove();
          }, o2.prototype._onError = function(e3) {
            if (this.options.trackUserLocation)
              if (1 === e3.code)
                this._watchState = "OFF", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"), void 0 !== this._geolocationWatchID && this._clearWatch();
              else
                switch (this._watchState) {
                  case "WAITING_ACTIVE":
                    this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
                    break;
                  case "ACTIVE_LOCK":
                    this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
                    break;
                  case "BACKGROUND":
                    this._watchState = "BACKGROUND_ERROR", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
                }
            "OFF" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add("mapboxgl-user-location-dot-stale"), this.fire(new t.Event("error", e3)), this._finish();
          }, o2.prototype._finish = function() {
            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;
          }, o2.prototype._setupUI = function(e3) {
            var o3 = this;
            false !== e3 ? (this._container.addEventListener("contextmenu", function(t2) {
              return t2.preventDefault();
            }), this._geolocateButton = i.create("button", "mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate", this._container), this._geolocateButton.type = "button", this._geolocateButton.setAttribute("aria-label", "Geolocate"), this.options.trackUserLocation && (this._geolocateButton.setAttribute("aria-pressed", "false"), this._watchState = "OFF"), this.options.showUserLocation && (this._dotElement = i.create("div", "mapboxgl-user-location-dot"), this._userLocationDotMarker = new jo(this._dotElement), this.options.trackUserLocation && (this._watchState = "OFF")), this._geolocateButton.addEventListener("click", this.trigger.bind(this)), this._setup = true, this.options.trackUserLocation && this._map.on("movestart", function(e4) {
              e4.geolocateSource || "ACTIVE_LOCK" !== o3._watchState || (o3._watchState = "BACKGROUND", o3._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"), o3._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"), o3.fire(new t.Event("trackuserlocationend")));
            })) : t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.");
          }, o2.prototype.trigger = function() {
            if (!this._setup)
              return t.warnOnce("Geolocate control triggered before added to a map"), false;
            if (this.options.trackUserLocation) {
              switch (this._watchState) {
                case "OFF":
                  this._watchState = "WAITING_ACTIVE", this.fire(new t.Event("trackuserlocationstart"));
                  break;
                case "WAITING_ACTIVE":
                case "ACTIVE_LOCK":
                case "ACTIVE_ERROR":
                case "BACKGROUND_ERROR":
                  this._watchState = "OFF", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"), this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"), this.fire(new t.Event("trackuserlocationend"));
                  break;
                case "BACKGROUND":
                  this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new t.Event("trackuserlocationstart"));
              }
              switch (this._watchState) {
                case "WAITING_ACTIVE":
                  this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                  break;
                case "ACTIVE_LOCK":
                  this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                  break;
                case "ACTIVE_ERROR":
                  this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
                  break;
                case "BACKGROUND":
                  this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");
                  break;
                case "BACKGROUND_ERROR":
                  this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");
              }
              "OFF" === this._watchState && void 0 !== this._geolocationWatchID ? this._clearWatch() : void 0 === this._geolocationWatchID && (this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "true"), this._geolocationWatchID = t.window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, this.options.positionOptions));
            } else
              t.window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);
            return true;
          }, o2.prototype._clearWatch = function() {
            t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "false"), this.options.showUserLocation && this._updateMarker(null);
          }, o2;
        }(t.Evented), Go = { maxWidth: 100, unit: "metric" }, Wo = function(e2) {
          this.options = t.extend({}, Go, e2), t.bindAll(["_onMove", "setUnit"], this);
        };
        function Xo(t2, e2, i2) {
          var o2, r2, a2, n2, s2, l2, c2 = i2 && i2.maxWidth || 100, u2 = t2._container.clientHeight / 2, h2 = (o2 = t2.unproject([0, u2]), r2 = t2.unproject([c2, u2]), a2 = Math.PI / 180, n2 = o2.lat * a2, s2 = r2.lat * a2, l2 = Math.sin(n2) * Math.sin(s2) + Math.cos(n2) * Math.cos(s2) * Math.cos((r2.lng - o2.lng) * a2), 6371e3 * Math.acos(Math.min(l2, 1)));
          if (i2 && "imperial" === i2.unit) {
            var p2 = 3.2808 * h2;
            if (p2 > 5280)
              Ho(e2, c2, p2 / 5280, "mi");
            else
              Ho(e2, c2, p2, "ft");
          } else if (i2 && "nautical" === i2.unit) {
            Ho(e2, c2, h2 / 1852, "nm");
          } else
            Ho(e2, c2, h2, "m");
        }
        function Ho(t2, e2, i2, o2) {
          var r2, a2, n2, s2 = (r2 = i2, a2 = Math.pow(10, ("" + Math.floor(r2)).length - 1), n2 = (n2 = r2 / a2) >= 10 ? 10 : n2 >= 5 ? 5 : n2 >= 3 ? 3 : n2 >= 2 ? 2 : n2 >= 1 ? 1 : function(t3) {
            var e3 = Math.pow(10, Math.ceil(-Math.log(t3) / Math.LN10));
            return Math.round(t3 * e3) / e3;
          }(n2), a2 * n2), l2 = s2 / i2;
          "m" === o2 && s2 >= 1e3 && (s2 /= 1e3, o2 = "km"), t2.style.width = e2 * l2 + "px", t2.innerHTML = s2 + o2;
        }
        Wo.prototype.getDefaultPosition = function() {
          return "bottom-left";
        }, Wo.prototype._onMove = function() {
          Xo(this._map, this._container, this.options);
        }, Wo.prototype.onAdd = function(t2) {
          return this._map = t2, this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-scale", t2.getContainer()), this._map.on("move", this._onMove), this._onMove(), this._container;
        }, Wo.prototype.onRemove = function() {
          i.remove(this._container), this._map.off("move", this._onMove), this._map = void 0;
        }, Wo.prototype.setUnit = function(t2) {
          this.options.unit = t2, Xo(this._map, this._container, this.options);
        };
        var Ko = function(e2) {
          this._fullscreen = false, e2 && e2.container && (e2.container instanceof t.window.HTMLElement ? this._container = e2.container : t.warnOnce("Full screen control 'container' must be a DOM element.")), t.bindAll(["_onClickFullscreen", "_changeIcon"], this), "onfullscreenchange" in t.window.document ? this._fullscreenchange = "fullscreenchange" : "onmozfullscreenchange" in t.window.document ? this._fullscreenchange = "mozfullscreenchange" : "onwebkitfullscreenchange" in t.window.document ? this._fullscreenchange = "webkitfullscreenchange" : "onmsfullscreenchange" in t.window.document && (this._fullscreenchange = "MSFullscreenChange"), this._className = "mapboxgl-ctrl";
        };
        Ko.prototype.onAdd = function(e2) {
          return this._map = e2, this._container || (this._container = this._map.getContainer()), this._controlContainer = i.create("div", this._className + " mapboxgl-ctrl-group"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = "none", t.warnOnce("This device does not support fullscreen mode.")), this._controlContainer;
        }, Ko.prototype.onRemove = function() {
          i.remove(this._controlContainer), this._map = null, t.window.document.removeEventListener(this._fullscreenchange, this._changeIcon);
        }, Ko.prototype._checkFullscreenSupport = function() {
          return !!(t.window.document.fullscreenEnabled || t.window.document.mozFullScreenEnabled || t.window.document.msFullscreenEnabled || t.window.document.webkitFullscreenEnabled);
        }, Ko.prototype._setupUI = function() {
          var e2 = this._fullscreenButton = i.create("button", this._className + "-icon " + this._className + "-fullscreen", this._controlContainer);
          e2.setAttribute("aria-label", "Toggle fullscreen"), e2.type = "button", this._fullscreenButton.addEventListener("click", this._onClickFullscreen), t.window.document.addEventListener(this._fullscreenchange, this._changeIcon);
        }, Ko.prototype._isFullscreen = function() {
          return this._fullscreen;
        }, Ko.prototype._changeIcon = function() {
          (t.window.document.fullscreenElement || t.window.document.mozFullScreenElement || t.window.document.webkitFullscreenElement || t.window.document.msFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(this._className + "-shrink"), this._fullscreenButton.classList.toggle(this._className + "-fullscreen"));
        }, Ko.prototype._onClickFullscreen = function() {
          this._isFullscreen() ? t.window.document.exitFullscreen ? t.window.document.exitFullscreen() : t.window.document.mozCancelFullScreen ? t.window.document.mozCancelFullScreen() : t.window.document.msExitFullscreen ? t.window.document.msExitFullscreen() : t.window.document.webkitCancelFullScreen && t.window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();
        };
        var Yo = { closeButton: true, closeOnClick: true, className: "" }, Jo = function(e2) {
          function o2(i2) {
            e2.call(this), this.options = t.extend(Object.create(Yo), i2), t.bindAll(["_update", "_onClickClose", "remove"], this);
          }
          return e2 && (o2.__proto__ = e2), o2.prototype = Object.create(e2 && e2.prototype), o2.prototype.constructor = o2, o2.prototype.addTo = function(e3) {
            return this._map = e3, this._map.on("move", this._update), this.options.closeOnClick && this._map.on("click", this._onClickClose), this._map.on("remove", this.remove), this._update(), this.fire(new t.Event("open")), this;
          }, o2.prototype.isOpen = function() {
            return !!this._map;
          }, o2.prototype.remove = function() {
            return this._content && i.remove(this._content), this._container && (i.remove(this._container), delete this._container), this._map && (this._map.off("move", this._update), this._map.off("click", this._onClickClose), this._map.off("remove", this.remove), delete this._map), this.fire(new t.Event("close")), this;
          }, o2.prototype.getLngLat = function() {
            return this._lngLat;
          }, o2.prototype.setLngLat = function(e3) {
            return this._lngLat = t.LngLat.convert(e3), this._pos = null, this._update(), this;
          }, o2.prototype.setText = function(e3) {
            return this.setDOMContent(t.window.document.createTextNode(e3));
          }, o2.prototype.setHTML = function(e3) {
            var i2, o3 = t.window.document.createDocumentFragment(), r2 = t.window.document.createElement("body");
            for (r2.innerHTML = e3; i2 = r2.firstChild; )
              o3.appendChild(i2);
            return this.setDOMContent(o3);
          }, o2.prototype.setDOMContent = function(t2) {
            return this._createContent(), this._content.appendChild(t2), this._update(), this;
          }, o2.prototype._createContent = function() {
            this._content && i.remove(this._content), this._content = i.create("div", "mapboxgl-popup-content", this._container), this.options.closeButton && (this._closeButton = i.create("button", "mapboxgl-popup-close-button", this._content), this._closeButton.type = "button", this._closeButton.setAttribute("aria-label", "Close popup"), this._closeButton.innerHTML = "&#215;", this._closeButton.addEventListener("click", this._onClickClose));
          }, o2.prototype._update = function() {
            var e3 = this;
            if (this._map && this._lngLat && this._content) {
              this._container || (this._container = i.create("div", "mapboxgl-popup", this._map.getContainer()), this._tip = i.create("div", "mapboxgl-popup-tip", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(" ").forEach(function(t2) {
                return e3._container.classList.add(t2);
              })), this._map.transform.renderWorldCopies && (this._lngLat = Fo(this._lngLat, this._pos, this._map.transform));
              var o3 = this._pos = this._map.project(this._lngLat), r2 = this.options.anchor, a2 = function e4(i2) {
                if (i2) {
                  if ("number" == typeof i2) {
                    var o4 = Math.round(Math.sqrt(0.5 * Math.pow(i2, 2)));
                    return { center: new t.Point(0, 0), top: new t.Point(0, i2), "top-left": new t.Point(o4, o4), "top-right": new t.Point(-o4, o4), bottom: new t.Point(0, -i2), "bottom-left": new t.Point(o4, -o4), "bottom-right": new t.Point(-o4, -o4), left: new t.Point(i2, 0), right: new t.Point(-i2, 0) };
                  }
                  if (i2 instanceof t.Point || Array.isArray(i2)) {
                    var r3 = t.Point.convert(i2);
                    return { center: r3, top: r3, "top-left": r3, "top-right": r3, bottom: r3, "bottom-left": r3, "bottom-right": r3, left: r3, right: r3 };
                  }
                  return { center: t.Point.convert(i2.center || [0, 0]), top: t.Point.convert(i2.top || [0, 0]), "top-left": t.Point.convert(i2["top-left"] || [0, 0]), "top-right": t.Point.convert(i2["top-right"] || [0, 0]), bottom: t.Point.convert(i2.bottom || [0, 0]), "bottom-left": t.Point.convert(i2["bottom-left"] || [0, 0]), "bottom-right": t.Point.convert(i2["bottom-right"] || [0, 0]), left: t.Point.convert(i2.left || [0, 0]), right: t.Point.convert(i2.right || [0, 0]) };
                }
                return e4(new t.Point(0, 0));
              }(this.options.offset);
              if (!r2) {
                var n2, s2 = this._container.offsetWidth, l2 = this._container.offsetHeight;
                n2 = o3.y + a2.bottom.y < l2 ? ["top"] : o3.y > this._map.transform.height - l2 ? ["bottom"] : [], o3.x < s2 / 2 ? n2.push("left") : o3.x > this._map.transform.width - s2 / 2 && n2.push("right"), r2 = 0 === n2.length ? "bottom" : n2.join("-");
              }
              var c2 = o3.add(a2[r2]).round();
              i.setTransform(this._container, Uo[r2] + " translate(" + c2.x + "px," + c2.y + "px)"), No(this._container, r2, "popup");
            }
          }, o2.prototype._onClickClose = function() {
            this.remove();
          }, o2;
        }(t.Evented);
        var Qo = { version: t.version, supported: e, setRTLTextPlugin: t.setRTLTextPlugin, Map: Ao, NavigationControl: Oo, GeolocateControl: qo, AttributionControl: zo, ScaleControl: Wo, FullscreenControl: Ko, Popup: Jo, Marker: jo, Style: Me, LngLat: t.LngLat, LngLatBounds: t.LngLatBounds, Point: t.Point, MercatorCoordinate: t.MercatorCoordinate, Evented: t.Evented, config: t.config, get accessToken() {
          return t.config.ACCESS_TOKEN;
        }, set accessToken(e2) {
          t.config.ACCESS_TOKEN = e2;
        }, get baseApiUrl() {
          return t.config.API_URL;
        }, set baseApiUrl(e2) {
          t.config.API_URL = e2;
        }, get workerCount() {
          return Pt.workerCount;
        }, set workerCount(t2) {
          Pt.workerCount = t2;
        }, get maxParallelImageRequests() {
          return t.config.MAX_PARALLEL_IMAGE_REQUESTS;
        }, set maxParallelImageRequests(e2) {
          t.config.MAX_PARALLEL_IMAGE_REQUESTS = e2;
        }, workerUrl: "" };
        return Qo;
      });
      return mapboxgl;
    });
  }
});
export default require_mapbox_gl();
//# sourceMappingURL=mapbox-gl.js.map
